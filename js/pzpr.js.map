{"version":3,"sources":["../../src/common/intro.js","../../src/pzpr/core.js","../../src/lib/candle-intro.js","../../node_modules/pzpr-canvas/dist/candle.js","../../src/lib/candle-outro.js","../../src/pzpr/env.js","../../src/pzpr/event.js","../../src/pzpr/classmgr.js","../../src/pzpr/variety.js","../../src/pzpr/parser.js","../../src/pzpr/metadata.js","../../src/pzpr/util.js","../../src/puzzle/Puzzle.js","../../src/puzzle/Config.js","../../src/puzzle/Address.js","../../src/puzzle/Piece.js","../../src/puzzle/PieceList.js","../../src/puzzle/Board.js","../../src/puzzle/BoardExec.js","../../src/puzzle/GraphBase.js","../../src/puzzle/LineManager.js","../../src/puzzle/AreaManager.js","../../src/puzzle/Graphic.js","../../src/puzzle/MouseInput.js","../../src/puzzle/KeyInput.js","../../src/puzzle/Encode.js","../../src/puzzle/FileData.js","../../src/puzzle/Answer.js","../../src/puzzle/Operation.js","../../src/variety-common/Graphic.js","../../src/variety-common/KeyInput.js","../../src/variety-common/MouseInput.js","../../src/variety-common/Answer.js","../../src/variety-common/BoardExec.js","../../src/variety-common/Encode.js","../../src/variety-common/FileData.js","../../src/variety-common/Operation.js","../../src/variety-common/Piece.js"],"names":["pzpr","version","module","exports","this","document","_doc","_2PI","Math","PI","_color","_hex","a","b","toString","substr","Candle","env","node","require","browser","window","location","wrapper","addWrapper","c","d","initialize","apply","arguments","wrapperbase","prototype","constructor","addType","_order","enable","push","current","TypeList","length","select","ME","initME","createElement","style","display","position","top","left","innerHTML","body","appendChild","offsetHeight","removeChild","getoffsetHeight","match","RegExp","$2","font","lineHeight","color","parse","join","getRectSize","width","offsetWidth","clientWidth","height","clientHeight","_counter","getcanvasid","start","getContext","e","parentNode","_children","indexOf","splice","replace","firstChild","pop","h","nextSibling","childNodes","f","call","g","tagName","_attr","id","i","reduce","outerHTML","j","k","l","setAttribute","m","split","forEach","n","o","nodeType","nodeName","lastChild","insertBefore","setAttributeNS","getAttribute","getAttributeNS","removeAttribute","textContent","bind","querySelector","querySelectorAll","data","chilsNodes","p","MockDocument","createElementNS","createTextNode","getElementById","q","MockXMLSerializer","serializeToString","r","MockDOMParser","parseFromString","XMLSerializer","DOMParser","fillStyle","strokeStyle","lineWidth","textAlign","textBaseline","canvas","canvasid","child","enableTextLengthWA","initElement","initFunction","initLayer","rectcenter","rect","fillRectCenter","fillRect","strokeRectCenter","strokeRect","shapeRectCenter","shapeRect","vhide","navigator","userAgent","candle-top","hanging","middle","alphabetic","bottom","opera","SVGNS","XLINKNS","center","right","use","vid","elements","_textcache","target","layers","cpath","lastpath","freezepath","overflow","btoa","Buffer","isBuffer","toDataURL","toBlob","Blob","type","toBuffer","setLayer","addVectorElement","clear","rendering","setRendering","freeze","changeSize","translate","beginPath","closePath","moveTo","lineTo","arc","cos","sin","abs","fill","stroke","shape","setLinePath","setLinePath_com","setOffsetLinePath","strokeLine","strokeDashedLine","strokeCross","fillCircle","strokeCircle","shapeCircle","getDefsElement","getImageElement","src","ownerDocument","getImageSymbol","fillText","fillText_main","hide","show","x","y","ml","ta","tb","toLowerCase","$1","$3","getBoundingClientRect","drawImage","drawImage_main","addVectorElement_main","probablySupportsContext","Canvas","context","currentLayerId","isedgearray","_empty","isedge","x0","y0","setkey","hidekey","release","atob","Uint8Array","charCodeAt","buffer","setProperties","setTransform","clearRect","setEdgeStyle","imageRendering","parseInt","setLineDash","concat","sqrt","isbrowser","UA","ios","android","os","iOS","Android","mobile","FireFoxVersion","ver","ChromeVersion","SafariVersion","bz","AndroidBrowser","Presto","OS","API","touchevent","ontouchstart","createTouch","pointerevent","PointerEvent","mspointerevent","MSPointerEvent","maxWidth","svgTextLength","anchor_download","download","lang","userlang","process","LANG","browserLanguage","language","userLanguage","postload","preinit","loadfun","execKeyDown","keytarget","key","e_keydown","execKeyUp","e_keyup","on","eventtype","func","readyState","setTimeout","addEventListener","util","addEvent","connectKeyEvents","puzzle","common","custom","","classmgr","makeCommon","commonbase","createCommon","names","searchName","NewClass","real","createClass","base","pid","extendPrototype","makeCustom","pidlist","custombase","createCustom","getExtension","extension","hashkey","proto","name","pidcond","isexist","classname","colon","basename","realname","BaseClass","NewProto","Object","includeCustomFile","scriptid","variety","script","includedFile","customfile","getpath","_script","getElementsByTagName","exporteddata","setPuzzleClass","newpid","callback","valid","emit","setClasses","klass","PuzzleClass","args","Array","slice","CustomProto","setPrototypeRef","info","ref","klassname","toPID","_info","alias","_list","genre","extend","obj","exists","each","getList","Genre","pzprid","datalist","ja","en","pzprapp","kanpen","pencilbox","urlid","pzprurl","kanpenid","aho","amibo","angleloop","aqre","aquarium","araf","armyants","arukone","ayeheya","balance","cave","alias2","alias3","barns","bdblock","bonsan","bosanowa","box","skyscrapers","castle","cbblock","chocona","cojun","compass","country","creek","curvedata","curvedata-aux","dbchoco","detour","doppelblock","dosufuwa","doubleback","easyasabc","factors","fillmat","fillomino","kanpen2","firefly","fivecells","fourcells","geradeweg","goishi","gokigen","haisu","hakoiri","hanare","hashikake","hebi","old","herugolf","heteromino","heyabon","heyawake","hitori","icebarn","icelom","icelom2","ichimaga","ichimagam","ichimagax","interbd","juosan","kaero","kakuro","kakuru","kazunori","kinkonkan","kouchoku","kramma","kramman","kropki","kurochute","kurodoko","kurotto","kusabi","lightup","lits","lookair","loopsp","loute","makaro","mashu","maxi","meander","mejilink","minarism","mines","midloop","mochikoro","mochinyoro","moonsun","nagare","nagenawa","nanro","nawabari","nikoji","nondango","nonogram","norinori","numlin","nuribou","nurikabe","nurimaze","nurimisaki","onsen","paintarea","pencils","pipelink","pipelinkr","putteria","rectslider","reflect","renban","ringring","ripple","roma","sashigane","satogaeri","scrin","shakashaka","shikaku","shimaguni","shugaku","shwolf","simpleloop","slalom","slither","snake","starbattle","stostone","sudoku","sukoro","sukororoom","symmarea","tapa","tapaloop","tasquare","tatamibari","tateyoko","tawa","tentaisho","tents","tilepaint","toichika","toichika2","triplace","usotatami","usoone","view","wagiri","walllogic","wblink","yajikazu","yajilin","yajilin-regions","yajitatami","yinyang","yosenabe","URLData","FileData","Parser","parser","URL_AUTO","URL_PZPRV3","URL_PZPRAPP","URL_KANPEN","URL_KANPENP","URL_HEYAAPP","URL_PZPRFILE","FILE_AUTO","FILE_PZPR","FILE_PBOX","FILE_PBOX_XML","parseFile","parseURL","url","fstr","mode","qdata","pflag","variant","cols","rows","isurl","isfile","parseURLType","parseURLData","changeProperPid","generate","outputURLType","outputURLData","qs","first","substring","decodeURIComponent","parts","protocol","host","pathname","typ","inp","col","row","shift","isNaN","size","NaN","pzl","out","charAt","len","cc","ca","metadata","MetaData","filever","history","xmldoc","result","parseFileType","parseFileData","outputFileType","outputFileData","lines","firstline","unshift","historypos","str","strs","isinfo","JSON","cnt","count","update","metanode","meta","author","source","hard","commentnode","comment","puzzlenode","sizenode","createXMLNode","empty","stringify","getvaliddata","propnode","value","outputdata","attrs","pzlflag","items","reset","api","eventMouseDown","eventMouseMove","eventMouseUp","eventMouseCancel","dirname","__filename","srcs","currentTime","Date","getTime","unselectable","el","MozUserSelect","KhtmlUserSelect","webkitUserSelect","msUserSelect","userSelect","self","capt","executer","types","removeEventListener","getMouseButton","touches","pointerType","isPrimary","button","which","getPagePos","px","pageX","py","pageY","pos","getRect","scrollLeft","scrollTop","scrollX","scrollY","_html","documentElement","checkpid","matches","isdisp","openExecute","ready","classes","Board","initObjects","painter","suspendAll","Encode","decodeURL","FileIO","filedecode","postCanvasReady","resetTime","board","checker","AnsCheck","Graphic","cursor","TargetCursor","mouse","MouseEvent","KeyEvent","opemgr","OperationManager","faillist","FailCode","setCanvas_main","CanvasRenderingContext2D","pointerEvents","subcanvas","createSubCanvas","pc","opt","preInitCanvasInfo","instancetype","setCanvasEvents","outputImage","canvasWidth","canvasHeight","resizeCanvas","cellsize","resizeCanvasByCellSize","initCanvas","ae","execMouseDown","execMouseMove","execMouseUp","execMouseCancel","oncontextmenu","touchAction","stopPropagation","preventDefault","e_mousedown","e_mousemove","e_mouseup","e_mousecancel","getLocalCanvas","imageopt","imgcanvas","pc2","bgcolor","imgtile","unsuspend","parseImageOption","quality","argv","mimetype","Puzzle","option","modeid","player","viewer","playeronly","editmode","playmode","graphic","listeners","config","Config","setAll","setMode","set","setCanvas","starttime","MODE_EDITOR","MODE_PLAYER","open","eventname","addListener","once","evlist","ev","_div","setCanvasSize","setCanvasSizeByCellSize","redraw","forcemode","paintAll","irowake","irowakeRemake","execConfig","dataurl","blob","getURL","encodeURL","getFileData","fileencode","undo","redo","undoall","redoall","ismodified","isModified","saved","resetModifiedState","enterTrial","acceptTrial","rejectTrial","rejectCurrentTrial","check","activemode","keyreset","mousereset","ansclear","rebuildInfo","subclear","errclear","isclear","allerase","initBoardSize","newval","edit","play","adjust_modechange","modechange","getConfig","idname","get","setConfig","val","resetConfig","validConfig","getexec","getCurrentConfig","saveConfig","getAll","restoreConfig","init","list","add","volatile","defvalue","extoption","item","defval","getCurrentName","getNormalizedName","argname","splitted","setproper","configevent","conf","getvariant","getVariants","object","settings","EDITOR","exec","linegraph","moveline","irowakeblk","autocmp","initFont","resetCache","revCircleConfig","Position","bx","by","NDIR","UP","DN","LT","RT","equals","getaddr","Address","relcell","dx","dy","getc","relcross","getx","relbd","getb","relexcell","getex","relobj","getobj","reldirbd","dir","dd","movedir","draw","paintRange","drawaround","isinside","bd","minbx","maxbx","minby","maxby","getdir","diff","getvert","getnb","emptyborder","getborderobj","onborder","nullobj","Address:Position","clone","addr","move","oncell","oncross","getDot","RawAddress:Address","Dot:Position","isnull","piece","qnum","setDot","disCombine","setQnum","iserror","error","BoardPiece:Position","group","ques","qdir","qnum2","qnum3","qnum4","qchar","qans","anum","line","qsub","qcmp","snum","qinfo","trial","propques","propans","propsub","propinfo","propnorec","maxnum","minnum","initAdjacent","adjacent","initAdjBorder","adjborder","setQues","setdata","setQans","setQdir","setQnum2","setQchar","setAnum","setLineVal","setQsub","setQcmp","setSnum","setQnumDir","getQnumDir","prop","num","force","prehook","addOpe","trialstage","modifyInfo","posthook","property","ObjectOperation","setdata2","bypassPrehook","getprops","props","proplist","getproplist","compare","array","array1","enableSubNumberArray","getmaxnum","getminnum","seterr","isenableSetError","setinfo","Cell:BoardPiece","lcnt","dirs51","disInputHatena","numberWithMB","numberAsObject","numberAsLetter","numberRemainsUnshaded","supportQnumAnum","temp","anum0","isShade","isUnshade","setShade","clrShade","allowShade","allowUnshade","enablebcolor","isShadeDecided","getNum","setNum","clrSnum","vala","vals","isNum","noNum","isValidNum","isNumberObj","sameNumber","cell","is51cell","set51cell","remove51cell","ice","isDot","isEmpty","isValid","isDeparture","isDestination","isLineStraight","isLine","isLineCurve","isLPobj","1","11","12","14","15","2","16","17","3","13","4","noLPobj","5","21","22","isLP","noLP","countDir4Cell","adc","cells","getdir4clist","getdir4cblist","adb","cblist","bds","getOrthogonalCell","emptycell","eraseMovedLines","path","clist","border","removeLine","Cross:BoardPiece","setCrossBorderError","borderinside","Border:BoardPiece","sidecell","sidecross","sideobj","isvert","inside","enableLineNG","initSideObject","allowexcell","hasborder","hasexcell","borderAsLine","checkStableLine","setLine","setPeke","removeLineAndQsub","isBorder","setBorder","removeBorder","isVert","isHorz","isLineNG","checkFormCurve","isLineEX","cell1","cell2","ExCell:BoardPiece","PieceList","some","filter","cond","notnull","map","changer","include","remove","idx","setnoerr","allclear","isrec","propclear","trialclear","norec","pp","def","CellList:PieceList","x1","x2","y1","y2","getQnumCell","getTopCell","tcell","eraseLines","CrossList:PieceList","BorderList:PieceList","cellinside","CellList","pushed","crossinside","CrossList","cross1","cross2","ExCellList:PieceList","diserror","haserror","hasinfo","cross","BorderList","excell","ExCellList","BoardPiece","Cell","emptycross","Cross","Border","emptyexcell","ExCell","createExtraObject","disrecinfo","infolist","addInfoList","LineGraph","roommgr","AreaRoomGraph","sblkmgr","AreaShadeGraph","ublkmgr","AreaUnshadeGraph","nblkmgr","AreaNumberGraph","addExtraInfo","BoardExec","insex","hascross","0","Klass","instance","enabled","hasflush","disable_subclear","excellRows","excellCols","initGroup","setminmax","setposAll","hasdots","initDots","initExtraObject","initCursor","groups","getGroup","estimateSize","clen","groups2","newObject","exrows","excols","setposCells","setposCrosses","setposBorders","setposExCells","setposGroup","qc","qr","bdinside","extUL","extDR","newOperation","BoardClearOperation","getObjectPos","xr","xc","operate","isBoardOp","execadjust","flushexcell","genericFlush","get_func","set_func","dest","objectinside","excellinside","blist","exlist","disableInfo","disableRecord","enableInfo","enableRecord","isenableInfo","rebuild","relation","coloring","newIrowake","disableSetError","enableSetError","freezecopy","bd2","compareData","dotsmax","dots","Dot","dot","dotinside","dlist","EXPAND","REDUCE","TURN","FLIP","TURNFLIP","EXPANDUP","EXPANDDN","EXPANDLT","EXPANDRT","REDUCEUP","REDUCEDN","REDUCELT","REDUCERT","TURNL","TURNR","FLIPX","FLIPY","boardtype","expandup","expanddn","expandlt","expandrt","reduceup","reducedn","reducelt","reducert","turnl","turnr","flipy","flipx","qnumw","qnumh","execadjust_main","adjustBoardData","hastop","reduceRoomNumber","tmp","expandGroup","reduceGroup","turnflipGroup","adjustBoardData2","ope","BoardFlipOperation","BoardAdjustOperation","margin","isdel","expandborder","reduceborder","undoExec","redoExec","forceRecord","oldcols","oldrows","oldexcols","oldexrows","oldminx","oldminy","distObj","d2","objlist","converted","xx","yy","bdAsLine","group2","dist","outerBorder","innerBorder","copyBorder","border1","border2","qnums","area","room","GraphBase","pointgroup","linkgroup","removeFromArray","setComponentRefs","component","getObjNodeList","nodeobj","resetObjNodeList","isnodevalid","isedgevalidbylinkobj","linkobj","isedgevalidbynodeobj","nodeobj1","nodeobj2","isedgeexistsbylinkobj","sidenodes","getSideNodesBySeparator","nodes","calcNodeCount","rebuildmode","components","modifyNodes","rebuild2","searchGraph","nodeobjs","linkobjs","createNode","addEdgeByLinkObj","setEdgeByNodeObj","createComponent","GraphComponent","deleteComponent","GraphNode","deleteNode","resetExtraData","createNodeIfEmpty","deleteNodeIfEmpty","addEdge","node1","node2","removeEdge","getSideObjByLinkObj","getSideObjByNodeObj","getSideNodesByLinkObj","sidenodeobj","setEdgeByLinkObj","setEdgeBySeparator","modifyOtherInfo","remakeComponent","isset","incdecBorderCount","addEdgeBySeparator","removeEdgeBySeparator","attachNode","setComponentInfo","remakeComponents","getAffectedComponents","checkDividedComponent","remakeMaximalComponents","isremake","pseudoComponent","searchSingle","longColor","getLongColor","newComponents","setLongColor","partslist","newcomponents","setComponentInfoExtra","setExtraData","startparts","stack","setExtra","edges","circuits","getLargeComponent","largeComponent","largeTrial","isTrial","comp","repaintNodes","paths","getNewLineColor","getLinkObjByNodes","bx1","by1","bx2","by2","getnodeobjs","objs","getedgeobjs","checkAutoCmp","iscmp","checkCmp","cmp","setedgeerr","setedgeinfo","LineGraph:GraphBase","border.line","isLineCross","makeClist","pathnodes","iscrossing","incdecLineCount","resetLineCount","borders","ltotal","removeEdgeByLinkObj","enattach","attachnodes","endetach","detachnodes","lcnt1","lcnt2","haspath","nbnodes","vertnode","horiznode","lrnode","edgeobjs","setMovedBase","blist_all","repaintLines","departure","destination","movevalid","before","after","point","AreaGraphBase:GraphBase","removeEdgeByNodeObj","addEdgeByNodeObj","preedges","AreaShadeGraph:AreaGraphBase","cell.qans","sblk","sblknodes","clist_all","repaintBlocks","AreaUnshadeGraph:AreaGraphBase","ublk","ublknodes","AreaNumberGraph:AreaGraphBase","cell.qnum","cell.anum","cell.qsub","nblk","nblknodes","AreaRoomGraph:AreaGraphBase","cell.ques","border.ques","border.qans","getComponentRefs","roomnodes","AreaGraphBase","resetBorderCount","ischassis","setTopOfRoom_combine","merged","keep","tcell1","tcell2","getSideAreaInfo","sides","adjs","room1","room2","gridcolor","gridcolor_list","gridcolor_type","fgcellcolor_func","bgcellcolor_func","bordercolor_func","numbercolor_func","circlefillcolor_func","circlestrokecolor_func","resetRange","subcontext","quescolor","qanscolor","qcmpcolor","qcmpbgcolor","trialcolor","subcolor","shadecolor","errcolor1","errcolor2","fontShadecolor","bcolor","errbcolor1","errbcolor2","qsubcolor1","qsubcolor2","qsubcolor3","icecolor","erricecolor","circlebasecolor","mbcolor","linecolor","errlinecolor","noerrcolor","movelinecolor","movetrialcolor","pekecolor","bbcolor","targetColorEdit","targetColorPlay","targetColorTrial","ttcolor","movecolor","DARK","LIGHT","DLIGHT","SLIGHT","THIN","textoption","fontsizeratio","fontwidth","fontfamily","isSupportMaxWidth","crosssize","circleratio","cw","ch","bw","bh","devicePixelRatio","gw","lw","lwmin","lm","lwratio","addlw","lastHdeg","lastYdeg","minYdeg","maxYdeg","range","useBuffer","pendingResize","suspended","suspendedAll","hideHatena","resize_canvas_main","isgothic","cwid","chgt","insuspend","getCanvasCols","getCanvasRows","setParameter","setOffset","clearObject","min","pxSize","gwdev","max","round","lwdev","g2","getBoardCols","getOffsetCols","getBoardRows","getOffsetRows","suspend","setRange","prepaint","svg","bm","setRangeObject","flushCanvas","paintMain","copyBufferData","paint","paintPost","crosses","excells","sx1","sy1","sx2","sy2","loopcount","Rdeg","random","Gdeg","Bdeg","Cmax","Cmin","Hdeg","Ldeg","Sdeg","Ydeg","drawLines","repaintParts","vinc","fm","bwidth","bheight","layerid","CENTER","BOTTOMLEFT","BOTTOMRIGHT","TOPRIGHT","TOPLEFT","disptext","text","realsize","ratio","maxLength","widtharray","widthratiopos","widthratio","hoffset","voffset","ImageTile","Image","image_canvas","image_svg","onload","imgsrc_dataurl","cwidth","cheight","loaded","putImage","ctx","dw","dh","img","sw","sh","sx","sy","enableMouse","mouseCell","firstCell","inputPoint","RawAddress","firstPoint","prevPos","btn","inputData","firstState","bordermode","mousestart","mousemove","mouseend","inputMode","savedInputMode","RBShadeCell","inputModes","inversion","cell0","setMouseButton","addrtarget","getBoardAddress","inputEnd","buttons","kc","checkmodifiers","isSHIFT","isMETA","pix","offsetX","layerX","layerY","offsetY","pagePos","mouseevent","distance","mx","my","inputPath","step","cancelEvent","updateStarts","newChain","mouseinput","isZ","mouseinput_auto","mouseinput_number","mouseinput_clear","input51_fixed","inputFixedNumber","inputIcebarn","inputBGcolor","inputFixedQsub","inputqcmp","inputDot","inputdirec","inputarrow_cell","inputcrossMark","inputborder","inputQsubLine","inputShade","inputLine","inputpeke","inputTateyoko","dispInfoLine","dispInfoBlk","mouseinput_other","inputqnum","inputclean_cell","notInputted","changeflag","setInputMode","getInputModeList","setInversion","input","getcell","getpos","getcell_excell","getcross","spc","m1","m2","minaxis","extra","getborder","isBorderMode","setcursor","pos0","setaddr","setcursorsnum","targetdir","enableKey","enablemake","enableplay","keyup_event","isCTRL","isALT","isX","isY","keydown","keyup","prev","isenablemode","getchar","checkbutton","keyevent","cancelDefault","shiftKey","ctrlKey","metaKey","altKey","charall","keycode","keyCode","charCode","keylist","inputKeys","keyexec","keyDispInfo","moveTarget","keyinput","key_inputqnum","moveTCell","moveTC","moveTCross","moveTBorder","mv","flag","miny","maxy","minx","maxx","moveExCell","addr0","TargetCursor:Address","mode51","modesnum","targetdirs","crosstype","adjust_init","setminmax_customize","adjust_cell_to_excell","shortest","checksnum","tmpx","tmpy","chtarget","ur","ul","detectTarget","invalidRight","invalidBottom","getNumOfTarget","outpflag","outvariant","outcols","outrows","outbstr","fio","checkpflag","decodePzpr","dataarray","decodeKanpen","decodeHeyaApp","encodePzpr","FILE_PZPRV3","encodeURIComponent","encodeKanpen","datastr","encodeHeyaApp","throwNoImplementation","lineseek","currentType","filetype","decodeData","readLine","decodeTrial","kanpenOpen","kanpenOpenXML","decodeHistory","encodeData","encodeTrial","kanpenSave","kanpenSaveXML","encodeHistory","time","opes","bd1","TrialEnterOperation","trialpos","resumeTrial","stage","writeLine","resumeGoto","getItemList","decodeObj","startbx","startby","endbx","endby","decodeCell","decodeCross","decodeBorder","decodeCellExCell","encodeObj","encodeCell","encodeCross","encodeBorder","encodeCellExCell","decodeFlags","flags","encodeFlags","flagnames","decodeCellXMLBoard","encodeCellXMLBoard","boardnode","PBOX_ADJUST","decodeCellXMLBrow","decodeCellXMLrow_com","encodeCellXMLBrow","encodeCellXMLrow_com","decodeCellXMLArow","encodeCellXMLArow","parentnodename","targetnodename","rownodes","ADJ","rownode","nodename","v","inCheck","checkOnly","makeCheckList","failcodemode","failcode","checklist","order","prio","checklist_normal","sort","checklist_auto","checkAns","complete","break_if_error","CheckInfo","checkSingleError","gettext","code","undecided","lastcode","textlist","texts","langcode","textitem","invalid","setUndecided","Operation","external","manager","setData","reqReset","decode","toJSON","broadcast","ObjectOperation:Operation","STRGROUP","C","X","B","E","STRPROP","U","N","Z","M","D","A","S","K","L","prefix","isModify","lastope","isNoop","getPiece","BoardClearOperation:Operation","BoardAdjustOperation:Operation","key_undo","key_redo","BoardFlipOperation:Operation","d0","TrialEnterOperation:Operation","emitTrial","TrialFinalizeOperation:Operation","OperationList","disEmitTrial","savedStarts","broken","initpos","disrec","chainflag","enableUndo","enableRedo","limitTrialUndo","enableNetwork","operationlist","TrialFinalizeOperation","addExtraOperation","getStarts","starts","oldstarts","checkexec","checkenable","atStartOfTrial","removeDescendant","newope","historyinfo","datas","opelist","len2","List","ope1","checkReqReset","preproc","undoCore","postproc","redoCore","rejectall","drawTrialStarts","drawQuesCells","drawCells_common","getQuesCellColor","getQuesCellColor_ques","getQuesCellColor_qnum","drawShadedCells","getShadedCellColor","drawBGCells","getBGCellColor","getBGCellColor_error1","getBGCellColor_error2","getBGCellColor_qcmp","getBGCellColor_qcmp1","getBGCellColor_qsub1","getBGCellColor_qsub2","getBGCellColor_qsub3","getBGCellColor_icebarn","header","colorfunc","drawBGExCells","getBGExCellColor","drawDotCells","dsize","drawCellArrows","al","aw","tl","tw","getCellArrowColor","drawSlashes","basewidth","addwidth","drawQuesNumbers","drawNumbers_com","getQuesNumberText","getQuesNumberColor","drawAnsNumbers","getAnsNumberText","getAnsNumberColor","drawHatenas","getQuesHatenaText","getQuesNumberColor_qnum","textfunc","getNumberVerticalOffset","getNumberText","getNumberTextCore_letter","getNumberTextCore","toUpperCase","getQuesNumberColor_fixed","getQuesNumberColor_fixed_shaded","getQuesNumberColor_move","getQuesNumberColor_mixed","drawNumbersExCell","drawSubNumbers","posarray","drawArrowNumbers","digit","drawCircledNumbers","drawCircles","drawTapaNumbers","opts","nums","drawCrosses","csize","drawCrossMarks","drawBorders","drawBorders_common","getBorderColor","getBorderColor_ques","getBorderColor_qans","err","isCmp","getBorderColor_ice","drawQuesBorders","getQuesBorderColor","drawQansBorders","getQansBorderColor","drawBorderQsubs","drawBoxBorders","tileflag","isdraw","falling","px0","px1","px2","px3","py0","py1","py2","py3","UPin","DNin","LTin","RTin","isUP","isDN","isLT","isRT","isUL","isUR","isDL","isDR","getLineColor","isIrowake","isDispmove","drawTip","tsize","tplus","drawPekes","drawBaseMarks","drawTriangle","getTriangleColor","drawTriangle1","mgn","drawTriangle2","drawMBs","rsize","drawBorderAuxDir","ssize","ra","rsize_stroke","rsize_fill","getCircleFillColor","getCircleStrokeColor","getCircleStrokeColor_qnum","isdrawmove","getCircleStrokeColor_qnum2","getCircleFillColor_qnum","getCircleFillColor_qnum2","getCircleFillColor_qcmp","drawDepartures","drawLineParts","qu","drawTateyokos","qa","getBarColor","vert","isErr","drawQues51","drawExCellGrid","drawTargetTriangle","drawSlash51Cells","drawSlash51ExCells","drawQuesNumbersOn51","drawQuesNumbersOn51_2","drawQuesNumbersOn51_1","adj","drawTarget","drawCursor","islarge","drawRawCursor","w","drawTargetSubNumber","th","drawStartGoal","startpos","draggingSG","goalpos","getDotFillColor","getDotOutlineColor","getDotRadius","drawDots","outline","drawDashedCenterLines","dasharray","getDashArray","dashCount","stepSize","lengthOn","lengthOff","drawGrid","haschassis","bs","xa","xb","ya","yb","drawDashedGrid","drawChassis","withexcell","exWidth","exHeight","boardWidth","boardHeight","drawChassis_ex1","boldflag","key_inputcross","cur","key_inputqnum_main","snumpos","getNewNumber","key_inputarrow","key_inputdirec_common","key_inputdirec","arrownum","inputnumber51","max_obj","getnum51","setnum51","inputcell","decIC","initFirstCell","inputqnum_main","ishatena","subtype","inputQues","inputQues_main","inputMB","isforceforward","inputarrow_cell_main","inputtile","input51","input51_main","inputqnum_cell51","inputselect_cell51","inputqnum_cross","inputcross_main","inputclean_cross","xlist","inputMoveLine","moving","targetCell","inputpeke_ifborder","inputdiraux_mousedown","inputdiraux_mousemove","clickdiraux","trans","clickTateyoko","plus","-1","dispInfoBlk8","dispInfoUblk","checkAllCell","checkNoNumCell","checkIceLines","checkNotCrossOnMark","checkLineOnShadeCell","checkNoLineObject","checkLineOverLetter","checkNumberHasArrow","checkDir4Cell","iscount","checkSideCell","checkAdjacentShadeCell","checkAdjacentDiffNumber","check2x2Block","check2x2ShadeCell","checkSameColorTile","checkSameObjectInRoom","checkConnectShade","checkOneArea","checkConnectUnshade","checkConnectNumber","graph","checkConnectUnshadeRB","errclist","fid","checkShadeCellExist","doneShadingDecided","checkOneLoop","checkOneLineBase","checkOneLine","checkNumberExist","checkConnectAllNumber","checkLineExist","checkCrossLine","checkLineCount","checkBranchLine","checkDeadendLine","checkNoLine","boardcross","checkCrossConnectLine","checkConnectLineCount","checkBranchConnectLine","checkDeadendConnectLine","checkenableLineParts","checkAllArea","evalfunc","checkAllBlock","filterfunc","areas","checkNumberAndSize","checkRoomRect","checkNoNumber","checkDoubleNumber","checkShadeCellCount","checkNoShadeCellInArea","checkLinesInArea","checkNoMovedObjectInRoom","checkDisconnectLine","checkConnectObjectCount","checkConnectObject","checkTripleObject","checkSideAreaSize","getval","a1","a2","checkSideAreaCell","getvalue","allloop","roomval","checkDifferentNumberInRoom","checkDifferentNumberInRoom_main","isDifferentNumberInClist","isIndividualObject","isDifferentAnsNumberInClist","numfunc","clist2","checkRowsCols","checkDifferentNumberInLine","checkRowsColsPartly","termfunc","keycell","key51num","tx","ty","checkRowsColsFor51cell","checkBorderCross","checkBorderCount","checkBorderDeadend","bp","checkLineShape","pathsegs","getLineShapeInfo","pathseg","checkLineShapeDeadend","passed","dir4bd","firstbd","serachLineShapeInfo","ccnt","dir1","dir2","cs2x2","csNotSquare","csAdjacent","csDivide","cuDivide","cuDivideRB","brNoShade","bkNoNum","bkNumGe2","bkDupNum","bkPlNum","bkSepNum","bkSizeNe","bkShadeNe","bkShadeDivide","bkNoShade","bkMixed","bkWidthGt1","brNoValidNum","brNoLine","bkNotRect","bdDeadEnd","bdCross","lnDeadEnd","lnBranch","lnCross","lnNotCrossMk","lnCrossExIce","lnCurveOnIce","lnPlLine","lnPlLoop","lnOnShade","lcDeadEnd","lcDivided","lcTripleNum","lcIsolate","lcOnNum","nmNoLine","nmConnected","laIsolate","laOnNum","laCurve","laLenNe","ceNoNum","ceNoLine","ceAddLine","anNoArrow","anShadeNe","nmAdjacent","nmDupRow","nmDivide","nmSumViewNe","adjustNumberArrow","adjustCellQdirArrow","adjustCellArrow","adjustCellQnumArrow","getTranslateDir","adjustBorderArrow","adjustQues51_1","adjustQues51_2","reverse","adjustExCellTopLeft_1","rowmin","colmin","adjustExCellTopLeft_2","preserve","getAfterPos","up","decode4Cell","bstr","encode4Cell","cm","pstr","qn","decode1Cell","encode1Cell","have","decode4Cross","encode4Cross","decodeNumber10","maybeEncodeNumber10","encodeNumber10","readNumber16","decodeOneNumber16","res","decodeNumber16","writeNumber16","encodeNumber16","genericEncodeNumber16","decodeNumber10or16","encodeNumber10or16","decodeNumber16ExCell","ec","encodeNumber16ExCell","encodeNumber16ExCellFlushed","ex","decodeRoomNumber16","encodeRoomNumber16","decodeArrowNumber16","ca1","encodeArrowNumber16","pos1","pos2","twi","pass","decodeCrossMark","cp","cp2","encodeCrossMark","decodeCircle","tri","encodeCircle","decodeQues","encodeQues","skipnone","found","decodeIce","encodeIce","decodeEmpty","encodeEmpty","decodecross_old","decodeDot","s","encodeDot","dot2","decodeCellQnum","encodeCellQnum","decodeCellQnumb","encodeCellQnumb","decodeCellQnumAns","encodeCellQnumAns","decodeCellDirecQnum","encodeCellDirecQnum","decodeCellAns","encodeCellAns","decodeCellQanssub","encodeCellQanssub","decodeCellAnumsub","setCellSnum","encodeCellAnumsub","getCellSnum","snumtext","decodeCellQsub","encodeCellQsub","decodeCrossNum","encodeCrossNum","decodeBorderQues","encodeBorderQues","decodeBorderAns","encodeBorderAns","decodeBorderArrowAns","lca","encodeBorderArrowAns","decodeBorderLine","encodeBorderLine","decodeAreaRoom","decodeAreaRoom_com","encodeAreaRoom","encodeAreaRoom_com","isques","rdata2Border","rooms","roomid","rdata","isdiff","decodeCellQnum51","encodeCellQnum51","decodeDotFile","encodeDotFile","decodeCellQnum_kanpen","encodeCellQnum_kanpen","decodeCellAnum_kanpen","encodeCellAnum_kanpen","decodeCellQnumAns_kanpen","encodeCellQnumAns_kanpen","UNDECIDED_NUM_XML","decodeCellQnum_XMLBoard","undecnum","encodeCellQnum_XMLBoard","decodeCellQnum_XMLBoard_Brow","encodeCellQnum_XMLBoard_Brow","decodeCellAnum_XMLAnswer","encodeCellAnum_XMLAnswer","decodeAreaRoom_XMLBoard","encodeAreaRoom_XMLBoard","decodeCellAns_XMLAnswer","encodeCellAns_XMLAnswer","decodeBorderLine_XMLAnswer","bdh","bdv","encodeBorderLine_XMLAnswer","StartGoalOperation:Operation","StartGoalAddress:Address","partner","exchangestartgoal","StartGoalOperation","StartAddress:StartGoalAddress","GoalAddress:StartGoalAddress"],"mappings":"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","file":"pzpr.js","sourcesContent":["// intro.js\n\n(function(){\n","// core.js v3.5.2\n\n//----------------------------------------------------------------------------\n// ★pzprオブジェクト\n//---------------------------------------------------------------------------\n/* extern */\nvar pzpr = {\n\tversion: \"fc10661\"\n};\n\nif (typeof module === \"object\" && module.exports) {\n\tmodule.exports = pzpr;\n} else {\n\tthis.pzpr = pzpr;\n}\n","// candle-intro.js\n\n(function(){\n\n\n//---------------------------------------------------------------------------\n// node.js環境向けの対策\n//---------------------------------------------------------------------------\nvar document = this.document;\n\nvar module = {exports:{}}, exports = module.exports;\n\n(function(module,exports){\n","/*! @license candle.js v0.8.2 (c) 2011-2017 sabo2, MIT license\n *   https://bitbucket.org/sabo2/candle */\nvar _doc=\"undefined\"!=typeof document?document:void 0,_2PI=2*Math.PI,_color=[],_hex=function(){for(var a=[],b=256;b<512;b++)a[b-256]=b.toString(16).substr(1);return a}(),Candle={version:\"0.8.2\",env:{node:\"object\"==typeof module&&\"object\"==typeof exports&&\"function\"==typeof require,browser:\"object\"==typeof document&&\"object\"==typeof window&&\"object\"==typeof location},wrapper:{},addWrapper:function(a,b){var c,d=function(){this.initialize&&this.initialize.apply(this,arguments)};for(c in this.wrapperbase)d.prototype[c]=this.wrapperbase[c];for(c in b)d.prototype[c]=b[c];this.wrapper[a]=d.prototype.constructor=d,this.addType(a)},_order:[],enable:{},addType:function(a){this._order.push(a),this.enable[a]=!0,this.current||(this.current=a)},TypeList:function(a){for(var b=0;b<Candle._order.length;b++)this[Candle._order[b]]=Candle._order[b]===a},current:\"\",select:function(a){return!!this.enable[a]&&(this.current=a,!0)},ME:null,initME:function(){var a=_doc.createElement(\"div\");a.style.display=\"inline\",a.style.position=\"absolute\",a.style.top=\"0px\",a.style.left=\"-9000px\",a.innerHTML=\"\",_doc.body.appendChild(a),void 0!==a.offsetHeight?this.ME=a:_doc.body.removeChild(a)},getoffsetHeight:function(a,b){var c;if(b.match(/(.+\\s)?([0-9]+)px (.+)$/))c=+RegExp.$2;else if(this.ME){var d=this.ME;d.style.font=b,d.style.lineHeight=\"100%\",d.innerHTML=a,c=d.offsetHeight}return c},color:_color,parse:function(a){if(!_color[a])if(\"rgb(\"===a.substr(0,4)){var b=a.match(/\\d+/g);_color[a]=[\"#\",_hex[b[0]],_hex[b[1]],_hex[b[2]]].join(\"\")}else _color[a]=a;return _color[a]},getRectSize:function(a){return{width:a.offsetWidth||a.clientWidth||0,height:a.offsetHeight||a.clientHeight||0}},_counter:-1,getcanvasid:function(){return this._counter++,\"_candle_\"+this._counter},start:function(a,b,c){this.ME||\"undefined\"==typeof window||this.initME();var d;if(a.getContext)d=a.getContext(\"2d\");else{var e=b;if(this.enable[e]||(e=this.current),!e||!this.enable[e])throw\"No canvas environment is installed\";d=new this.wrapper[e](a)}c&&c(d)}};\"object\"==typeof module&&\"object\"==typeof exports?module.exports=Candle:this.Candle=Candle,function(){function a(){if(this.parentNode){var a=this.parentNode._children,b=a.indexOf(this);return b>=0?a[b+1]:null}}function b(a){a.parentNode&&a.parentNode.removeChild(a),this._children.push(a),a.parentNode=this}function c(a){var b=this._children.indexOf(a);return b>=0&&(this._children.splice(b,1),a.parentNode=null),a}function d(a,b){a.parentNode&&a.parentNode.removeChild(a);var c=-1;b&&(c=this._children.indexOf(b)),c===-1?this.appendChild(a):this._children.splice(c,0,a)}function e(a,b){a=a.replace(/\\*/g,\"[^/]+\"),a=a.replace(/([\\w#]+|\\*)/g,\"[^/]*$1[^/]*\"),a=a.replace(/\\s+/g,\"/([^/]+/)?\"),a=new RegExp(a+\"[^/]*$\");for(var c=this.firstChild?[this.firstChild]:[],d=[];c.length>0;){var e=c.pop();if(h(e,this).match(a)&&(d.push(e),b))break;e.nextSibling&&c.push(e.nextSibling),e.childNodes.length>0&&c.push(e.firstChild)}return d}function f(a){return e.call(this,a,!1)}function g(a){return e.call(this,a,!0)[0]||null}function h(a,b){for(var c=\"\";a&&a!==b;){var d=\"\";a.createElement||(d=a.tagName+(a._attr.id?\"#\"+a._attr.id:\"\")),c=d+(c?\"/\"+c:\"\"),a=a.parentNode}return c}function i(){return this._children.reduce(function(a,b,c,d){return a+b.outerHTML},\"\")}function j(){var a=this.tagName,b=\"\",c=\"\";for(var d in this._attr)b+=\" \"+d+'=\"'+this._attr[d]+'\"';for(var e in this.style)c+=e+\":\"+this.style[e]+\";\";return c&&(b+=' style=\"'+c+'\"'),0===this._children.length?\"<\"+a+b+\"/>\":\"<\"+a+b+\">\"+this.innerHTML+\"</\"+a+\">\"}function k(a,b){for(;;){var c=b.match(/^\\s*([^:]+?):([^;]+?);?/);if(!c)break;a.style[c[1]]=c[2],b=RegExp[\"$'\"]}}function l(a,b){for(;;){var c=b.match(/^\\s*([\\w\\-\\:]+)(\\=)?(?:['\"](.+?)['\"]|([^\\s]+))?\\s*/);if(!c)break;var d=c[1],e=c[3]||c[4]||\"\";b=RegExp[\"$'\"],d&&(\"=\"===c[2]?\"style\"!==d?a.setAttribute(d,e):a.style=k(a,e):a.setAttribute(d,!0))}}function m(a,b){var c=[a];return b.split(/(<.+?>)/g).forEach(function(a){var b=c[c.length-1],d=null;if(!a.match(/^<\\?xml/))if(a.match(/^<\\w/)){var e=a.match(/<(\\w+)\\s*(.*)\\/?>/);d=new n(e[1]),l(d,e[2]),b.appendChild(d),a.match(/\\/>$/)||c.push(d)}else if(a.match(/^<\\//))c.pop();else{if(a.match(/^[\\s\\t\\r\\n]*$/))return;b.appendChild(new o(a))}}),a}var n=function(a){this.tagName=a,this._attr={},this.style={},this._children=[]};n.prototype={tagName:\"\",style:null,_attr:null,_children:null,parentNode:null,nodeType:1,get nodeName(){return this.tagName},get firstChild(){return this._children[0]},get lastChild(){return this._children[this._children.length-1]},get childNodes(){return this._children},get nextSibling(){return a.call(this)},appendChild:b,removeChild:c,insertBefore:d,setAttribute:function(a,b){this._attr[a]=b},setAttributeNS:function(a,b,c){this._attr[b]=c},getAttribute:function(a){return a in this._attr?this._attr[a]:null},getAttributeNS:function(a,b){return b in this._attr?this._attr[b]:null},removeAttribute:function(a){delete this._attr[a]},get id(){return this._attr.id||\"\"},get innerHTML(){return i.call(this)},get outerHTML(){return j.call(this)},get textContent(){return this.innerHTML.replace(/<.+?>/g,\"\")},set textContent(a){this._children.forEach(function(a){this.removeChild(a)}.bind(this)),this.appendChild(new o(a))},querySelector:g,querySelectorAll:f};var o=function(a){this.data=a};o.prototype={_attr:{},parentNode:null,nodeType:3,nodeName:\"#text\",data:\"\",firstChild:null,chilsNodes:[],get nextSibling(){return a.call(this)},get outerHTML(){return this.data}};var p=Candle.MockDocument=function(){this._children=[]};p.prototype={_children:null,nodeType:9,nodeName:\"#document\",createElement:function(a){return new n(a)},createElementNS:function(a,b){return new n(b)},createTextNode:function(a){return new o(a)},get firstChild(){return this._children[0]},get lastChild(){return this._children[this._children.length-1]},get childNodes(){return this._children},appendChild:b,removeChild:c,insertBefore:d,get innerHTML(){return i.call(this)},get outerHTML(){return i.call(this)},querySelector:g,querySelectorAll:f,getElementById:function(a){return this.querySelector(\"#\"+a)}};var q=Candle.MockXMLSerializer=function(){};q.prototype.serializeToString=function(a){return a.outerHTML};var r=Candle.MockDOMParser=function(){};r.prototype.parseFromString=function(a,b){return m(new p,a)},_doc||(_doc=new p),Candle.document=_doc,Candle.XMLSerializer=q,Candle.DOMParser=r}(),Candle.wrapperbase={initialize:function(a){this.fillStyle=\"black\",this.strokeStyle=\"black\",this.lineWidth=1,this.font=\"14px system\",this.textAlign=\"center\",this.textBaseline=\"middle\",this.canvas=a,this.canvasid=Candle.getcanvasid(),this.child=null,this.enableTextLengthWA=!1,this.initElement(),this.initFunction(),this.initLayer();var b=this;this.canvas.getContext=function(a){return b}},rectcenter:function(a,b,c,d){this.rect(a-c,b-d,2*c,2*d)},fillRectCenter:function(a,b,c,d){this.fillRect(a-c,b-d,2*c,2*d)},strokeRectCenter:function(a,b,c,d){this.strokeRect(a-c,b-d,2*c,2*d)},shapeRectCenter:function(a,b,c,d){this.shapeRect(a-c,b-d,2*c,2*d)},vhide:function(){}},function(){function a(a){return _doc.createElementNS(d,a)}function b(){var a=\"undefined\"!=typeof navigator?navigator.userAgent||\"\":\"\";c=a.match(/Chrome/)?{\"candle-top\":-.72,top:-.95,hanging:-.72,middle:-.35,alphabetic:0,bottom:.25}:a.match(/AppleWebKit/)?{\"candle-top\":-.7,top:-.9,hanging:-.9,middle:-.35,alphabetic:0,bottom:.25}:a.match(/Trident/)?{\"candle-top\":-.74,top:-1.02,hanging:-1.02,middle:-.32,alphabetic:0,bottom:.45}:a.match(/Win/)?{\"candle-top\":-.7,top:-.85,hanging:-.85,middle:-.34,alphabetic:0,bottom:.15}:{\"candle-top\":-.76,top:-.9,hanging:-.9,middle:-.38,alphabetic:0,bottom:.08}}if(void 0!==_doc&&_doc.createElementNS&&(\"object\"!=typeof window||!window.opera)){var c,d=Candle.SVGNS=\"http://www.w3.org/2000/svg\",e=Candle.XLINKNS=\"http://www.w3.org/1999/xlink\",f=function(a){return a.match(/Trident\\//)||a.match(/Safari\\//)&&a.match(/Edge\\//)}(Candle.env.browser&&navigator.userAgent||\"\"),g={left:\"start\",center:\"middle\",right:\"end\"};Candle.addWrapper(\"svg\",{initialize:function(a){this.use=new Candle.TypeList(\"svg\"),c||b(),this.vid=\"\",this.elements={},this._textcache={},this.target=null,this.layers={},this.cpath=[],this.lastpath=\"\",this.freezepath=!1,Candle.wrapperbase.initialize.call(this,a),this.enableTextLengthWA=f},initElement:function(){Candle.env.browser&&(this.canvas.style.overflow=\"hidden\");var a=Candle.getRectSize(this.canvas),b=this.child=_doc.createElementNS(d,\"svg\");b.setAttribute(\"xmlns\",d),b.setAttribute(\"xmlns:xlink\",e),b.setAttribute(\"font-size\",\"10px\"),b.setAttribute(\"font-family\",\"sans-serif\"),b.setAttribute(\"width\",a.width),b.setAttribute(\"height\",a.height),b.setAttribute(\"viewBox\",[0,0,a.width,a.height].join(\" \")),this.canvas.appendChild&&this.canvas.appendChild(b)},initFunction:function(){function a(a){return Candle.env.browser?window.btoa(a):Buffer.isBuffer(a)?a.toString(\"base64\"):new Buffer(a.toString(),\"binary\").toString(\"base64\")}function b(a){return(a.outerHTML||(new Candle.XMLSerializer).serializeToString(a)).replace(/^<\\?xml.+?\\?>[\\r\\n]*/,\"\")}var c='<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n',d=this.child;this.canvas.toDataURL=function(c,e){return\"data:image/svg+xml;base64,\"+a(b(d))},this.canvas.toBlob=function(a,e,f){a(new Blob([c+b(d)],{type:\"image/svg+xml\"}))},this.canvas.toBuffer=function(a,e){return c+b(d)}},initLayer:function(){this.setLayer();var a=Candle.getRectSize(this.canvas);this.rect(0,0,a.width,a.height),this.addVectorElement(!1,!1)},clear:function(){for(var a=this.child,b=a.firstChild;b;)a.removeChild(b),b=a.firstChild;this.vid=\"\",this.elements={},this.layers={},this.target=this.child,this.setLayer(),this._textcache={}},setLayer:function(b,c){if(c=c||{},this.vid=\"\",b){var d=this.layers[b];d||(d=this.layers[b]=a(\"g\"),this.child.appendChild(d)),this.target=d}else this.target=this.child;c.rendering&&this.setRendering(c.rendering),this.freezepath=!!c&&c.freeze},setRendering:function(a){this.target.setAttribute(\"shape-rendering\",a)},changeSize:function(a,b){Candle.env.browser&&(this.canvas.style.width=a+\"px\",this.canvas.style.height=b+\"px\");var c=this.child;c.setAttribute(\"width\",a),c.setAttribute(\"height\",b);var d=c.getAttribute(\"viewBox\").split(/ /);c.setAttribute(\"viewBox\",[d[0],d[1],a,b].join(\" \"))},translate:function(a,b){var c=this.child.getAttribute(\"viewBox\").split(/ /);c[0]=-a,c[1]=-b,this.child.setAttribute(\"viewBox\",c.join(\" \"))},beginPath:function(){this.cpath=[],this.lastpath=\"\"},closePath:function(){this.cpath.push(\"z\"),this.lastpath=\"z\"},moveTo:function(a,b){this.cpath.push(\"M\",a,b),this.lastpath=\"M\"},lineTo:function(a,b){\"L\"!==this.lastpath&&this.cpath.push(\"L\"),this.cpath.push(a,b),this.lastpath=\"L\"},rect:function(a,b,c,d){this.cpath.push(\"M\",a,b,\"L\",a+c,b,a+c,b+d,a,b+d,\"z\"),this.lastpath=\"z\"},arc:function(a,b,c,d,e,f){var g,h,i,j;e-d>=_2PI?(g=a+c,h=b,i=a+c,j=b):(g=a+c*Math.cos(d),h=b+c*Math.sin(d),i=a+c*Math.cos(e),j=b+c*Math.sin(e)),e-d>=_2PI&&(h+=.125);var k=d>e!=Math.abs(e-d)>Math.PI,l=f^k?1:0,m=0===l^k?1:0;this.cpath.push(\"M\",g,h,\"A\",c,c,0,l,m,i,j),this.lastpath=\"A\"},fill:function(){this.addVectorElement(!0,!1)},stroke:function(){this.addVectorElement(!1,!0)},shape:function(){this.addVectorElement(!0,!0)},fillRect:function(a,b,c,d){var e=this.cpath;this.cpath=[],this.rect(a,b,c,d),this.addVectorElement(!0,!1),this.cpath=e},strokeRect:function(a,b,c,d){var e=this.cpath;this.cpath=[],this.rect(a,b,c,d),this.addVectorElement(!1,!0),this.cpath=e},shapeRect:function(a,b,c,d){var e=this.cpath;this.cpath=[],this.rect(a,b,c,d),this.addVectorElement(!0,!0),this.cpath=e},setLinePath:function(){for(var a=arguments,b=a.length,c=b-(1|b?1:2),d=[],e=0;e<c;e+=2)d[e>>1]=[a[e],a[e+1]];this.beginPath(),this.setLinePath_com.call(this,d),a[b-1]&&this.cpath.push(\"z\")},setOffsetLinePath:function(){for(var a=arguments,b=a.length,c=b-(1|b?1:2),d=[],e=0;e<c-2;e+=2)d[e>>1]=[a[e+2]+a[0],a[e+3]+a[1]];this.beginPath(),this.setLinePath_com.call(this,d),a[b-1]&&this.cpath.push(\"z\")},setLinePath_com:function(a){for(var b=0,c=a.length;b<c;b++)this.cpath.push(0===b?\"M\":\"L\"),this.cpath.push(a[b][0],a[b][1])},strokeLine:function(a,b,c,d){var e=this.cpath;this.cpath=[\"M\",a,b,\"L\",c,d],this.addVectorElement(!1,!0),this.cpath=e},strokeDashedLine:function(a,b,c,d,e){var f=this.cpath;this.cpath=[\"M\",a,b,\"L\",c,d],this.addVectorElement(!1,!0).setAttribute(\"stroke-dasharray\",e.join(\" \")),this.cpath=f},strokeCross:function(a,b,c){var d=this.cpath;this.cpath=[\"M\",a-c,b-c,\"L\",a+c,b+c,\"M\",a-c,b+c,\"L\",a+c,b-c],this.addVectorElement(!1,!0),this.cpath=d},fillCircle:function(a,b,c){var d=this.cpath;this.cpath=[],this.arc(a,b,c,0,_2PI,!1),this.cpath.push(\"z\"),this.addVectorElement(!0,!1),this.cpath=d},strokeCircle:function(a,b,c){var d=this.cpath;this.cpath=[],this.arc(a,b,c,0,_2PI,!1),this.cpath.push(\"z\"),this.addVectorElement(!1,!0),this.cpath=d},shapeCircle:function(a,b,c){var d=this.cpath;this.cpath=[],this.arc(a,b,c,0,_2PI,!1),this.cpath.push(\"z\"),this.addVectorElement(!0,!0),this.cpath=d},getDefsElement:function(){var a=this.child.querySelector(\"defs\");return a||(a=_doc.createElementNS(d,\"defs\"),this.child.insertBefore(a,this.child.firstChild||null)),a},getImageElement:function(b){for(var c=this.getDefsElement(),d=null,f=c.querySelectorAll(\"image\"),g=0;g<f.length;g++)if(f[g].getAttributeNS(e,\"href\")===b.src){d=f[g];break}return d||(d=a(\"image\"),d.setAttribute(\"id\",(d.ownerDocument?this.canvasid+\"_\":\"\")+\"img\"+f.length),d.setAttribute(\"width\",b.width),d.setAttribute(\"height\",b.height),d.setAttributeNS(e,\"xlink:href\",b.src),c.appendChild(d)),d},getImageSymbol:function(a,b,c,f,g){for(var h=this.getDefsElement(),i=[b,c,f,g].join(\" \"),j=null,k=h.querySelectorAll(\"symbol\"),l=0;l<k.length;l++)if(k[l].getAttribute(\"viewBox\")===i){j=k[l];break}if(!j){j=_doc.createElementNS(d,\"symbol\"),j.setAttribute(\"id\",(j.ownerDocument?this.canvasid+\"_\":\"\")+\"symimg\"+k.length),j.setAttribute(\"viewBox\",i);var m=_doc.createElementNS(d,\"use\");m.setAttributeNS(e,\"xlink:href\",\"#\"+this.getImageElement(a).getAttribute(\"id\")),j.appendChild(m),h.appendChild(j)}return j},fillText:function(a,b,c,d){var e=this.vid?this.elements[this.vid]:null;if(a&&this.fillStyle&&\"none\"!==this.fillStyle){var f=this.fillText_main(e,a,b,c,d||\"\");!e&&this.vid&&(this.elements[this.vid]=f)}else e&&this.hide(e);this.vid=\"\"},fillText_main:function(b,d,e,h,i){var j=!b,k=this.vid?this._textcache[this.vid]||{}:{};if(j?b=a(\"text\"):this.show(b),b.getAttribute(\"fill\")!==this.fillStyle&&b.setAttribute(\"fill\",this.fillStyle),k.x!==e||k.y!==h||k.ml!==i||k.ta!==this.textAlign||k.tb!==this.textBaseline||k.font!==this.font){var l=h-Candle.getoffsetHeight(d,this.font)*c[this.textBaseline.toLowerCase()],m=g[this.textAlign.toLowerCase()];b.getAttribute(\"x\")!==e&&b.setAttribute(\"x\",e),b.getAttribute(\"y\")!==l&&b.setAttribute(\"y\",l),b.getAttribute(\"text-anchor\")!==m&&b.setAttribute(\"text-anchor\",m),(b.getAttribute(\"textLength\")||\"\")!==i&&(i?(b.setAttribute(\"textLength\",i),b.setAttribute(\"lengthAdjust\",\"spacingAndGlyphs\")):(b.removeAttribute(\"textLength\"),b.removeAttribute(\"lengthAdjust\"))),k.x=e,k.y=h,k.ml=i,k.ta=this.textAlign,k.tb=this.textBaseline}if(k.font!==this.font){if(this.font.match(/(.+\\s)?([0-9]+)px (.+)$/)){var n=RegExp.$1,o=RegExp.$2,p=RegExp.$3;b.setAttribute(\"font-size\",o),p.match(/^sans\\-serif$/i)?b.removeAttribute(\"font-family\"):b.setAttribute(\"font-family\",p),n.match(/(italic|oblique)/)?b.setAttribute(\"font-style\",RegExp.$1):b.removeAttribute(\"font-style\"),n.match(/(bold|bolder|lighter|[1-9]00)/)?b.setAttribute(\"font-weight\",RegExp.$1):b.removeAttribute(\"font-weight\")}else b.setAttribute(\"font\",this.font);k.font=this.font}if(b.textContent!==d&&(b.textContent=d),this.vid&&(this._textcache[this.vid]=k),j&&this.target.appendChild(b),f&&this.enableTextLengthWA&&(\"center\"===k.ta||\"right\"===k.ta)&&i){b.removeAttribute(\"textLength\");var q=b.getBoundingClientRect();b.setAttribute(\"x\",k.x+(q.width-i)/(\"center\"===k.ta?2:1)),b.setAttribute(\"textLength\",i)}return b},drawImage:function(a,b,c,d,e,f,g,h,i){var j=this.vid?this.elements[this.vid]:null;if(a){void 0===d&&(d=a.width,e=a.height),void 0===f&&(f=b,b=0,g=c,c=0,h=d,i=e);var k=this.drawImage_main(j,a,b,c,d,e,f,g,h,i);!j&&this.vid&&(this.elements[this.vid]=k)}else j&&this.hide(j);this.vid=\"\"},drawImage_main:function(b,c,d,f,g,h,i,j,k,l){var m=!b;m?b=a(\"use\"):this.show(b);var n=this.getImageSymbol(c,d,f,g,h).getAttribute(\"id\");return b.getAttribute(\"x\")!==i&&b.setAttribute(\"x\",i),b.getAttribute(\"y\")!==j&&b.setAttribute(\"y\",j),b.getAttribute(\"width\")!==k&&b.setAttribute(\"width\",k),b.getAttribute(\"height\")!==l&&b.setAttribute(\"height\",l),b.getAttributeNS(e,\"xlink:href\")!==\"#\"+n&&b.setAttributeNS(e,\"xlink:href\",\"#\"+n),m&&this.target.appendChild(b),b},addVectorElement:function(a,b){a=a&&!!this.fillStyle&&\"none\"!==this.fillStyle,b=b&&!!this.strokeStyle&&\"none\"!==this.strokeStyle;var c=this.vid?this.elements[this.vid]:null,d=null;return a||b?(d=this.addVectorElement_main(c,a,b),!c&&this.vid&&(this.elements[this.vid]=d)):c&&this.hide(c),this.vid=\"\",d},addVectorElement_main:function(b,c,d){var e=!b;if(e?(b=a(\"path\"),b.setAttribute(\"fill\",\"none\"),b.setAttribute(\"stroke\",\"none\")):this.show(b),!this.freezepath||e){var f=this.cpath.join(\" \"),g=d?this.lineWidth:null;b.getAttribute(\"d\")!==f&&b.setAttribute(\"d\",f),b.getAttribute(\"stroke-width\")!==g&&b.setAttribute(\"stroke-width\",g)}var h=c?this.fillStyle:\"none\",i=d?this.strokeStyle:\"none\";return b.getAttribute(\"fill\")!==h&&b.setAttribute(\"fill\",h),b.getAttribute(\"stroke\")!==i&&b.setAttribute(\"stroke\",i),e&&this.target.appendChild(b),b},vhide:function(a){var b=this.elements[this.vid];b&&this.hide(b)},show:function(a){a.removeAttribute(\"display\")},hide:function(a){a.setAttribute(\"display\",\"none\")}})}}(),function(){function a(){var a=\"undefined\"!=typeof navigator?navigator.userAgent||\"\":\"\";b=0,b=a.match(/Chrome/)?-.72:a.match(/AppleWebKit/)?-.7:a.match(/Trident/)?-.74:a.match(/Win/)?-.7:-.76}if(Candle.env.browser){if(!function(){var a=_doc.createElement(\"canvas\");return!!a.getContext&&(!a.probablySupportsContext||a.probablySupportsContext(\"2d\"))}())return}else try{Candle.Canvas=require(\"canvas\")}catch(a){return}var b;Candle.addWrapper(\"canvas\",{initialize:function(c){this.context=null,this.use=new Candle.TypeList(\"canvas\"),this.currentLayerId=\"_empty\",this.isedgearray={_empty:!1},this.isedge=!1,b||a(),this.x0=0,this.y0=0,Candle.wrapperbase.initialize.call(this,c)},setkey:function(a){return this},hidekey:function(a){return this},release:function(a){return this},initElement:function(){var a=this.child=Candle.env.browser?_doc.createElement(\"canvas\"):new Candle.Canvas;Candle.env.browser&&(this.canvas.style.overflow=\"hidden\");var b=Candle.getRectSize(this.canvas);a.width=b.width,a.height=b.height,Candle.env.browser&&(a.style.width=b.width+\"px\",a.style.height=b.height+\"px\",this.canvas.appendChild(a)),this.context=a.getContext(\"2d\")},initFunction:function(){function a(a){return Candle.env.browser?window.atob(a):new Buffer(RegExp.$2,\"base64\").toString(\"binary\")}var b=this.child;this.canvas.toDataURL=function(a,c){return b.toDataURL(a||void 0,c)},this.canvas.toBlob=function(c,d,e){if(\"function\"==typeof b.toBlob)b.toBlob(c,d,e);else{b.toDataURL(d||void 0,e).match(/data:(.*);base64,(.*)/);for(var f=a(RegExp.$2),g=f.length,h=new Uint8Array(g),i=0;i<g;i++)h[i]=f.charCodeAt(i);c(new Blob([h.buffer],{type:RegExp.$1}))}},this.canvas.toBuffer=function(c,d){var e=b.toDataURL(c||void 0,d).replace(/^data:image\\/\\w+?;base64,/,\"\");if(Candle.env.node)return new Buffer(e,\"base64\");var f;if(\"undefined\"!=typeof Uint8Array){var g=a(e);f=new Uint8Array(g.length);for(var h=0;h<g.length;h++)f[h]=g.charCodeAt(h)}else f=a(e);return f}},initLayer:function(){this.setLayer()},clear:function(){if(this.setProperties(!0,!0),this.context.setTransform(1,0,0,1,0,0),this.context.translate(this.x0,this.y0),Candle.env.browser){var a=Candle.getRectSize(this.canvas);this.context.clearRect(0,0,a.width,a.height)}},setLayer:function(a,b){var c=this.currentLayerId=a?a:\"_empty\";this.isedge=this.isedgearray[void 0!==this.isedgearray[c]?c:\"_empty\"],this.setEdgeStyle(),b=b||{},b.rendering&&this.setRendering(b.rendering)},setEdgeStyle:function(){if(Candle.env.browser){var a=this.canvas.style;\"imageRendering\"in a&&(a.imageRendering=\"\",this.isedge&&(a.imageRendering=\"pixelated\",a.imageRendering||(a.imageRendering=\"-webkit-optimize-contrast\"),a.imageRendering||(a.imageRendering=\"-moz-crisp-edges\"),a.imageRendering||(a.imageRendering=\"-o-crisp-edges\")))}},setRendering:function(a){this.isedge=this.isedgearray[this.currentLayerId]=\"crispEdges\"===a,this.setEdgeStyle()},changeSize:function(a,b){if(Candle.env.browser){var c=this.canvas;c.style.width=a+\"px\",c.style.height=b+\"px\"}var d=this.child;if(Candle.env.browser){var e=parseInt(d.style.left),f=parseInt(d.style.top);a+=e<0?-e:0,b+=f<0?-f:0,d.style.width=a+\"px\",d.style.height=b+\"px\"}d.width=a,d.height=b},translate:function(a,b){this.x0=a,this.y0=b,this.context.translate(a,b)},setProperties:function(a,b){a=a&&!!this.fillStyle&&\"none\"!==this.fillStyle,b=b&&!!this.strokeStyle&&\"none\"!==this.strokeStyle;var c=this.context;return a&&(c.fillStyle=this.fillStyle),b&&(c.strokeStyle=this.strokeStyle),c.lineWidth=this.lineWidth,c.font=this.font,c.textAlign=this.textAlign,c.textBaseline=this.textBaseline,a||b},beginPath:function(){this.context.beginPath()},closePath:function(){this.context.closePath()},moveTo:function(a,b){this.context.moveTo(a,b)},lineTo:function(a,b){this.context.lineTo(a,b)},rect:function(a,b,c,d){this.context.rect(a,b,c,d)},arc:function(a,b,c,d,e,f){this.context.arc(a,b,c,d,e,f)},fill:function(){this.setProperties(!0,!1)&&this.context.fill()},stroke:function(){this.setProperties(!1,!0)&&this.context.stroke()},shape:function(){if(this.setProperties(!0,!0)){var a=this.context;this.fillStyle&&\"none\"!==this.fillStyle&&a.fill(),this.strokeStyle&&\"none\"!==this.strokeStyle&&a.stroke()}},fillRect:function(a,b,c,d){this.setProperties(!0,!1)&&this.context.fillRect(a,b,c,d)},strokeRect:function(a,b,c,d){this.setProperties(!1,!0)&&this.context.strokeRect(a,b,c,d)},shapeRect:function(a,b,c,d){if(this.setProperties(!0,!0)){var e=this.context;this.fillStyle&&\"none\"!==this.fillStyle&&e.fillRect(a,b,c,d),this.strokeStyle&&\"none\"!==this.strokeStyle&&e.strokeRect(a,b,c,d)}},setLinePath:function(){for(var a=arguments,b=a.length,c=b-(1|b?1:2),d=[],e=0;e<c;e+=2)d[e>>1]=[a[e],a[e+1]];this.context.beginPath(),this.setLinePath_com.call(this,d),a[b-1]&&this.context.closePath()},setOffsetLinePath:function(){for(var a=arguments,b=a.length,c=b-(1|b?1:2)-2,d=[],e=0;e<c;e+=2)d[e>>1]=[a[e+2]+a[0],a[e+3]+a[1]];this.context.beginPath(),this.setLinePath_com.call(this,d),a[b-1]&&this.context.closePath()},setLinePath_com:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];0===b?this.context.moveTo(d[0],d[1]):this.context.lineTo(d[0],d[1])}},strokeLine:function(a,b,c,d){if(this.setProperties(!1,!0)){var e=this.context;e.beginPath(),e.moveTo(a,b),e.lineTo(c,d),e.stroke()}},strokeDashedLine:function(a,b,c,d,e){this.strokeDashedLine=this.context.setLineDash?function(a,b,c,d,e){var f=this.context;this.setProperties(!1,!0)&&(f.beginPath(),f.moveTo(a,b),f.lineTo(c,d),f.setLineDash(e),f.stroke(),f.setLineDash([]))}:function(a,b,c,d,e){e.length%2===1&&(e=e.concat(e));var f=Math.sqrt((c-a)*(c-a)+(d-b)*(d-b)),g=0,h=0,i=null,j=null;if(a!==c&&(i=(d-b)/(c-a),j=i*i+1),this.setProperties(!1,!0)){var k=this.context;for(k.beginPath(),k.moveTo(a,b);g<f;){var l,m;if(null!==i){var n=Math.sqrt(g*g/j);l=a+n,m=b+i*n}else l=a,m=b+g;0===(1&h)?k.moveTo(l,m):k.lineTo(l,m),g+=e[h],h++,h>=e.length&&(h=0)}k.stroke()}},this.strokeDashedLine(a,b,c,d,e)},strokeCross:function(a,b,c){if(this.setProperties(!1,!0)){var d=this.context;d.beginPath(),d.moveTo(a-c,b-c),d.lineTo(a+c,b+c),d.moveTo(a-c,b+c),d.lineTo(a+c,b-c),d.stroke()}},fillCircle:function(a,b,c){if(this.setProperties(!0,!1)){var d=this.context;d.beginPath(),d.arc(a,b,c,0,_2PI,!1),d.fill()}},strokeCircle:function(a,b,c){if(this.setProperties(!1,!0)){var d=this.context;d.beginPath(),d.arc(a,b,c,0,_2PI,!1),d.stroke()}},shapeCircle:function(a,b,c){if(this.setProperties(!0,!0)){var d=this.context;d.beginPath(),d.arc(a,b,c,0,_2PI,!1),this.fillStyle&&\"none\"!==this.fillStyle&&d.fill(),this.strokeStyle&&\"none\"!==this.strokeStyle&&d.stroke()}},fillText:function(a,c,d,e){a&&this.setProperties(!0,!1)&&(\"candle-top\"===this.textBaseline&&(d-=Candle.getoffsetHeight(a,this.font)*b,this.context.textBaseline=\"alphabetic\"),e?this.context.fillText(a,c,d,e):this.context.fillText(a,c,d))},drawImage:function(){arguments[0]&&this.context.drawImage.apply(this.context,arguments)}})}();","// candle-outro.js\n\n})(module,exports);\n\npzpr.Candle = module.exports;\n\n})();\n\n//---------------------------------------------------------------------------\n// node.js環境向けの対策\n//---------------------------------------------------------------------------\n    document      = this.document      || pzpr.Candle.document;\nvar DOMParser     = this.DOMParser     || pzpr.Candle.DOMParser;\nvar XMLSerializer = this.XMLSerializer || pzpr.Candle.XMLSerializer;\n","// env.js v3.4.0\n\n/**************/\n/* 環境の取得 */\n/**************/\npzpr.env = (function() {\n\tvar isbrowser = pzpr.Candle.env.browser;\n\tvar UA = isbrowser ? navigator.userAgent : \"\";\n\n\tvar ios = UA.indexOf(\"like Mac OS X\") > -1;\n\tvar android = UA.indexOf(\"Android\") > -1;\n\tvar os = {\n\t\tiOS: ios,\n\t\tAndroid: android,\n\t\tmobile: ios || android\n\t};\n\n\tvar FireFoxVersion = (function() {\n\t\tif (UA.match(/Firefox\\/(\\w+(\\.\\w+)?)/)) {\n\t\t\tvar ver = RegExp.$1;\n\t\t\tif (UA.match(/rv\\:(\\d+(\\.\\d+)?)/)) {\n\t\t\t\tif (RegExp.$1 + 0.0 <= 2.1) {\n\t\t\t\t\treturn RegExp.$1 + 0.0;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ver;\n\t\t}\n\t\treturn null;\n\t})();\n\tvar ChromeVersion = (function() {\n\t\tif (UA.match(/Safari\\/([\\w\\.]+)/) && UA.match(/Chrome\\/(\\w+(\\.\\w+)?)/)) {\n\t\t\treturn RegExp.$1;\n\t\t}\n\t\treturn null;\n\t})();\n\tvar SafariVersion = (function() {\n\t\tif (\n\t\t\tChromeVersion === null &&\n\t\t\tUA.match(/Safari\\/([\\w\\.]+)/) &&\n\t\t\tUA.match(/Version\\/(\\w+(\\.\\w+)?)/)\n\t\t) {\n\t\t\treturn RegExp.$1;\n\t\t}\n\t\treturn null;\n\t})();\n\tvar bz = {\n\t\tAndroidBrowser: os.Android && SafariVersion,\n\t\tPresto: typeof window === \"object\" && !!window.opera\n\t};\n\n\tvar api = {\n\t\ttouchevent: isbrowser && (!!window.ontouchstart || !!document.createTouch),\n\t\tpointerevent: isbrowser && !!window.PointerEvent,\n\t\tmspointerevent: isbrowser && !!window.MSPointerEvent,\n\t\tmaxWidth:\n\t\t\tisbrowser &&\n\t\t\t(ChromeVersion || 1000) >= 18 &&\n\t\t\t(SafariVersion || 1000) >= 6,\n\t\tsvgTextLength: !isbrowser || (FireFoxVersion || 1000) >= 25,\n\t\tanchor_download:\n\t\t\tisbrowser && document.createElement(\"a\").download !== void 0\n\t};\n\n\treturn {\n\t\tbz: bz,\n\t\tOS: os,\n\t\tAPI: api,\n\t\tbrowser: isbrowser,\n\t\tnode: pzpr.Candle.env.node\n\t};\n})();\n\npzpr.lang = (function() {\n\tvar userlang = pzpr.env.node\n\t\t? process.env.LANG\n\t\t: navigator.browserLanguage || navigator.language || navigator.userLanguage;\n\treturn !userlang || userlang.substr(0, 2) === \"ja\" ? \"ja\" : \"en\";\n})();\n","// event.js v3.4.1\n\n(function() {\n\t//---------------------------------------------------------------\n\t// 起動時関連関数\n\t//---------------------------------------------------------------\n\tvar preinit = true;\n\tvar loadfun = [];\n\tpzpr.on = function(eventtype, func) {\n\t\tif (eventtype === \"load\") {\n\t\t\tif (preinit) {\n\t\t\t\tloadfun.push(func);\n\t\t\t} else {\n\t\t\t\tfunc();\n\t\t\t}\n\t\t}\n\t};\n\n\t//----------------------------------------------------------------------\n\t// 起動時処理実行処理\n\t//----------------------------------------------------------------------\n\tfunction postload(e) {\n\t\tif (preinit) {\n\t\t\tpreinit = false;\n\t\t\tfor (var i = 0; i < loadfun.length; i++) {\n\t\t\t\tloadfun[i]();\n\t\t\t}\n\t\t\tloadfun = [];\n\t\t}\n\t}\n\n\tif (!pzpr.env.browser) {\n\t} else if (document.readyState === \"complete\") {\n\t\tsetTimeout(postload, 10);\n\t} else {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", postload, false);\n\t\twindow.addEventListener(\"load\", postload, false);\n\t}\n\n\t//---------------------------------------------------------------------------\n\t// addKeyEvents()  キーボード入力発生時に指定されたパズルへ通知する準備を行う\n\t// exec????()      各パズルのキー入力へ分岐する\n\t//---------------------------------------------------------------------------\n\tvar keytarget = null;\n\tfunction execKeyDown(e) {\n\t\tif (!!keytarget && !!keytarget.key) {\n\t\t\tkeytarget.key.e_keydown(e);\n\t\t}\n\t}\n\tfunction execKeyUp(e) {\n\t\tif (!!keytarget && !!keytarget.key) {\n\t\t\tkeytarget.key.e_keyup(e);\n\t\t}\n\t}\n\tpzpr.on(\"load\", function addKeyEvents() {\n\t\t// キー入力イベントの設定\n\t\tpzpr.util.addEvent(document, \"keydown\", pzpr, execKeyDown);\n\t\tpzpr.util.addEvent(document, \"keyup\", pzpr, execKeyUp);\n\t});\n\n\t//---------------------------------------------------------------------------\n\t// connectKeyEvents()  キーボード入力に関するイベントを指定したパズルへ通知する準備を行う\n\t//---------------------------------------------------------------------------\n\tpzpr.connectKeyEvents = function(puzzle) {\n\t\tkeytarget = puzzle;\n\t};\n})();\n","// classmgr.js v3.6.0\n\n//---------------------------------------------------------------\n// クラス設定用関数など\n//---------------------------------------------------------------\npzpr.common = {}; // CoreClass保存用\npzpr.custom = { \"\": {} }; // パズル別クラス保存用\n\n//----------------------------------------------------------------------------\n// ★pzpr.classmgrオブジェクト (クラス作成関数等)\n//---------------------------------------------------------------------------\npzpr.classmgr = {\n\t//---------------------------------------------------------------\n\t// 共通クラス・パズル別クラスに継承させる親クラスを生成する\n\t//---------------------------------------------------------------\n\tmakeCommon: function(commonbase) {\n\t\tthis.createCommon(commonbase);\n\t},\n\tcreateCommon: function(commonbase) {\n\t\tfor (var key in commonbase) {\n\t\t\tvar names = this.searchName(key),\n\t\t\t\tNewClass = pzpr.common[names.real];\n\t\t\tif (!NewClass) {\n\t\t\t\tNewClass = this.createClass(pzpr.common[names.base]);\n\t\t\t\tNewClass.prototype.common = NewClass.prototype;\n\t\t\t\tNewClass.prototype.pid = \"\";\n\t\t\t}\n\t\t\tthis.extendPrototype(NewClass.prototype, commonbase[key]);\n\t\t\tpzpr.common[names.real] = pzpr.custom[\"\"][names.real] = NewClass;\n\t\t}\n\t},\n\n\t//---------------------------------------------------------------\n\t// includeCustomFileでファイルを読み込んだ後の処理\n\t//---------------------------------------------------------------\n\tmakeCustom: function(pidlist, custombase) {\n\t\tfor (var i = 0; i < pidlist.length; i++) {\n\t\t\tvar pid = pidlist[i];\n\t\t\tpzpr.custom[pid] = this.createCustom(pid, custombase);\n\t\t}\n\t},\n\tgetExtension: function(pid, custombase) {\n\t\tvar extension = {};\n\t\tfor (var hashkey in custombase) {\n\t\t\tvar proto = custombase[hashkey],\n\t\t\t\tname = hashkey,\n\t\t\t\tpidcond = [],\n\t\t\t\tisexist = false;\n\t\t\tvar name = !hashkey.match(\"#\")\n\t\t\t\t? hashkey\n\t\t\t\t: hashkey.substr(0, hashkey.indexOf(\"#\"));\n\t\t\tif (name.match(\"@\")) {\n\t\t\t\tpidcond = name.substr(name.indexOf(\"@\") + 1).split(/,/);\n\t\t\t\tname = name.substr(0, name.indexOf(\"@\"));\n\t\t\t\tfor (var n = 0; n < pidcond.length; n++) {\n\t\t\t\t\tif (pidcond[n] === pid) {\n\t\t\t\t\t\tisexist = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!isexist) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!extension[name]) {\n\t\t\t\textension[name] = {};\n\t\t\t}\n\t\t\tfor (var key in proto) {\n\t\t\t\textension[name][key] = proto[key];\n\t\t\t}\n\t\t}\n\t\treturn extension;\n\t},\n\tcreateCustom: function(pid, custombase) {\n\t\tvar custom = {};\n\t\tvar extension = this.getExtension(pid, custombase);\n\n\t\t// 追加プロパティが指定されているクラスを作成する\n\t\tfor (var key in extension) {\n\t\t\tvar names = this.searchName(key),\n\t\t\t\tNewClass = custom[names.real];\n\t\t\tif (!NewClass) {\n\t\t\t\tNewClass = this.createClass(\n\t\t\t\t\tcustom[names.base] || pzpr.common[names.base]\n\t\t\t\t);\n\t\t\t\tNewClass.prototype.pid = pid;\n\t\t\t}\n\t\t\tthis.extendPrototype(NewClass.prototype, extension[key]);\n\t\t\tcustom[names.real] = NewClass;\n\t\t}\n\n\t\t// 指定がなかった残りの共通クラスを作成(コピー)する\n\t\tfor (var classname in pzpr.common) {\n\t\t\tif (!custom[classname]) {\n\t\t\t\tcustom[classname] = this.createClass(pzpr.common[classname]);\n\t\t\t\tcustom[classname].prototype.pid = pid;\n\t\t\t}\n\t\t}\n\n\t\treturn custom;\n\t},\n\n\t//---------------------------------------------------------------\n\t// createCommon, createCustomから呼び出される共通処理\n\t//---------------------------------------------------------------\n\tsearchName: function(key) {\n\t\tkey = key.replace(/\\s+/g, \"\");\n\t\tvar colon = key.indexOf(\":\"),\n\t\t\tbasename = \"\",\n\t\t\trealname = key;\n\t\tif (colon >= 0) {\n\t\t\tbasename = key.substr(colon + 1);\n\t\t\trealname = key.substr(0, colon);\n\t\t}\n\t\treturn { base: basename || realname, real: realname };\n\t},\n\tcreateClass: function(BaseClass) {\n\t\tfunction NewClass() {}\n\t\tif (!!BaseClass) {\n\t\t\tthis.extendPrototype(NewClass.prototype, BaseClass.prototype);\n\t\t}\n\t\treturn NewClass;\n\t},\n\textendPrototype: function(NewProto, proto) {\n\t\tproto = proto || {};\n\t\tfor (var name in proto) {\n\t\t\tif (\n\t\t\t\tproto[name] !== null &&\n\t\t\t\ttypeof proto[name] === \"object\" &&\n\t\t\t\tproto[name].constructor === Object\n\t\t\t) {\n\t\t\t\tif (!NewProto[name]) {\n\t\t\t\t\tNewProto[name] = {};\n\t\t\t\t}\n\t\t\t\tthis.extendPrototype(NewProto[name], proto[name]);\n\t\t\t} else {\n\t\t\t\tNewProto[name] = proto[name];\n\t\t\t}\n\t\t}\n\t},\n\n\t//---------------------------------------------------------------\n\t// 単体ファイルの読み込み\n\t// idを取得して、ファイルを読み込み\n\t//---------------------------------------------------------------\n\tincludeCustomFile: function(pid) {\n\t\tvar scriptid = pzpr.variety(pid).script;\n\t\tif (this.includedFile[scriptid]) {\n\t\t\treturn;\n\t\t}\n\t\tthis.includedFile[scriptid] = true;\n\n\t\tvar customfile = pzpr.util.getpath() + \"./pzpr-variety/\" + scriptid + \".js\";\n\t\tif (pzpr.env.browser && !pzpr.env.node) {\n\t\t\tvar _script = document.createElement(\"script\");\n\t\t\t_script.type = \"text/javascript\";\n\t\t\t_script.src = customfile + \"?\" + pzpr.version;\n\t\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(_script);\n\t\t} else {\n\t\t\tvar exporteddata = require(customfile);\n\t\t\tthis.makeCustom(exporteddata[0], exporteddata[1]);\n\t\t}\n\t},\n\tincludedFile: {},\n\n\t//---------------------------------------------------------------------------\n\t// 新しくパズルのファイルを開く時の処理\n\t//---------------------------------------------------------------------------\n\tsetPuzzleClass: function(puzzle, newpid, callback) {\n\t\tif (!pzpr.variety(newpid).valid) {\n\t\t\tpuzzle.emit(\"fail-open\");\n\t\t\tthrow \"Invalid Puzzle Variety Selected\";\n\t\t}\n\n\t\t/* 今のパズルと別idの時 */\n\t\tif (puzzle.pid !== newpid) {\n\t\t\tif (!pzpr.custom[newpid]) {\n\t\t\t\tthis.includeCustomFile(newpid);\n\t\t\t\tif (!pzpr.custom[newpid]) {\n\t\t\t\t\t/* Customファイルが読み込みできるまで待つ */\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tpzpr.classmgr.setPuzzleClass(puzzle, newpid, callback);\n\t\t\t\t\t}, 10);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* 各クラスをpzpr.customから設定する */\n\t\t\tthis.setClasses(puzzle, newpid);\n\t\t}\n\n\t\tcallback();\n\t},\n\n\t//---------------------------------------------------------------\n\t// パズル種類別のクラスをパズルのクラス一覧に設定する\n\t//      共通クラス        (pzpr.common)\n\t//   -> パズル種類別クラス (pzpr.custom)\n\t//   -> パズルが保持するクラス (initialize()の呼び出しやthis.puzzle等がつく)\n\t// と、ちょっとずつ変わっている状態になります\n\t//---------------------------------------------------------------\n\tsetClasses: function(puzzle, pid) {\n\t\t/* 現在のクラスを消去する */\n\t\tpuzzle.klass = {};\n\n\t\tvar custom = pzpr.custom[pid];\n\t\tfor (var classname in custom) {\n\t\t\tvar PuzzleClass = (puzzle.klass[classname] = function() {\n\t\t\t\tvar args = Array.prototype.slice.apply(arguments);\n\t\t\t\tif (!!this.initialize) {\n\t\t\t\t\tthis.initialize.apply(this, args);\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar CustomProto = custom[classname].prototype;\n\t\t\tfor (var name in CustomProto) {\n\t\t\t\tPuzzleClass.prototype[name] = CustomProto[name];\n\t\t\t}\n\t\t}\n\n\t\tthis.setPrototypeRef(puzzle, \"puzzle\", puzzle);\n\t\tthis.setPrototypeRef(puzzle, \"klass\", puzzle.klass);\n\n\t\tpuzzle.pid = pid;\n\t\tpuzzle.info = pzpr.variety(pid);\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// パズルオブジェクト下に存在するクラスのprototypeへ一括でプロパティを付加する\n\t//---------------------------------------------------------------------------\n\tsetPrototypeRef: function(puzzle, name, ref) {\n\t\tfor (var klassname in puzzle.klass) {\n\t\t\tpuzzle.klass[klassname].prototype[name] = ref;\n\t\t}\n\t}\n};\n","// Variety.js v3.4.1\n\n(function() {\n\tvar _info = {},\n\t\t_list = [];\n\tfunction toPID(name) {\n\t\tif (!!_info[name]) {\n\t\t\treturn name;\n\t\t}\n\t\tfor (var pid in _info) {\n\t\t\tif (!_info[pid].alias) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor (var type in _info[pid].alias) {\n\t\t\t\tif (_info[pid].alias[type] === name) {\n\t\t\t\t\treturn pid;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tvar variety = (pzpr.variety = pzpr.genre = function(pid) {\n\t\treturn _info[toPID(pid)] || { valid: false };\n\t});\n\tvariety.extend = function(obj) {\n\t\tfor (var n in obj) {\n\t\t\tthis[n] = obj[n];\n\t\t}\n\t};\n\tvariety.extend({\n\t\tinfo: _info,\n\t\ttoPID: toPID,\n\t\texists: function(name) {\n\t\t\treturn variety(name).valid;\n\t\t},\n\t\teach: function(func) {\n\t\t\tfor (var pid in _info) {\n\t\t\t\tfunc(pid);\n\t\t\t}\n\t\t},\n\t\tgetList: function() {\n\t\t\treturn _list.slice();\n\t\t}\n\t});\n\tdelete variety.extend;\n\n\t(function(Genre, obj) {\n\t\tfor (var pzprid in obj) {\n\t\t\t_info[pzprid] = new Genre(pzprid, obj[pzprid]);\n\t\t\ttry {\n\t\t\t\tObject.freeze(_info[pzprid]);\n\t\t\t\tObject.freeze(_info[pzprid].exists);\n\t\t\t\tObject.freeze(_info[pzprid].alias);\n\t\t\t} catch (e) {}\n\t\t}\n\t})(\n\t\t// eslint-disable-next-line no-unexpected-multiline\n\t\tfunction Genre(pzprid, datalist) {\n\t\t\tthis.valid = true;\n\t\t\tthis.pid = pzprid; /* パズルID */\n\t\t\tthis.script = !!datalist[4]\n\t\t\t\t? datalist[4]\n\t\t\t\t: pzprid; /* スクリプトファイル(クラス) */\n\t\t\tthis.ja = datalist[2]; /* 日本語パズル名 */\n\t\t\tthis.en = datalist[3]; /* 英語パズル名 */\n\t\t\tthis.exists = {\n\t\t\t\tpzprapp: !!datalist[0],\n\t\t\t\tkanpen: !!datalist[1],\n\t\t\t\tpencilbox: !!datalist[1]\n\t\t\t};\n\t\t\tthis.exists.pencilbox =\n\t\t\t\tthis.exists.pencilbox &&\n\t\t\t\tpzprid !== \"nanro\" &&\n\t\t\t\tpzprid !== \"ayeheya\" &&\n\t\t\t\tpzprid !== \"kurochute\";\n\t\t\t/* pzprurl : ぱずぷれID(URL出力用) */\n\t\t\t/* kanpen  : カンペンID            */\n\t\t\t/* kanpen2 : カンペンID(入力のみ)  */\n\t\t\tthis.alias = !!datalist[5] ? datalist[5] : {};\n\t\t\tthis.urlid = this.alias.pzprurl || pzprid;\n\t\t\tthis.kanpenid = !!datalist[1] ? this.alias.kanpen || pzprid : \"\";\n\t\t\t_list.push(pzprid);\n\t\t},\n\t\t{\n\t\t\taho: [0, 0, \"アホになり切れ\", \"Aho-ni-Narikire\", \"shikaku\"],\n\t\t\tamibo: [0, 0, \"あみぼー\", \"Amibo\", \"amibo\"],\n\t\t\tangleloop: [0, 0, \"鋭直鈍ループ\", \"Angle Loop\", \"kouchoku\"],\n\t\t\taqre: [0, 0, \"Aqre\", \"Aqre\", \"aqre\"],\n\t\t\taquarium: [0, 0, \"アクアプレース\", \"Aquarium\", \"aquarium\"],\n\t\t\taraf: [0, 0, \"相ダ部屋\", \"Araf\", \"araf\"],\n\t\t\tarmyants: [0, 0, \"ぐんたいあり\", \"Army Ants\", \"kaero\"],\n\t\t\tarukone: [0, 0, \"アルコネ\", \"Arukone\", \"numlin\"],\n\t\t\tayeheya: [0, 1, \"∀人∃ＨＥＹＡ\", \"ekawayeh\", \"heyawake\"],\n\t\t\tbalance: [0, 0, \"Balance Loop\", \"Balance Loop\"],\n\t\t\tcave: [\n\t\t\t\t1,\n\t\t\t\t0,\n\t\t\t\t\"バッグ\",\n\t\t\t\t\"Cave\",\n\t\t\t\t\"kurodoko\",\n\t\t\t\t{ alias: \"bag\", alias2: \"corral\", alias3: \"correl\" }\n\t\t\t],\n\t\t\tbarns: [1, 0, \"バーンズ\", \"Barns\"],\n\t\t\tbdblock: [1, 0, \"ボーダーブロック\", \"Border Block\"],\n\t\t\tbonsan: [1, 0, \"ぼんさん\", \"Bonsan\", \"bonsan\"],\n\t\t\tbosanowa: [1, 0, \"ボサノワ\", \"Bosanowa\", \"\", { alias: \"bossanova\" }],\n\t\t\tbox: [0, 0, \"ボックス\", \"Box\"],\n\t\t\tskyscrapers: [\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t\"ビルディングパズル\",\n\t\t\t\t\"Skyscrapers\",\n\t\t\t\t\"\",\n\t\t\t\t{ alias: \"building\", alias2: \"skyscraper\" }\n\t\t\t],\n\t\t\tcastle: [0, 0, \"Castle Wall\", \"Castle Wall\"],\n\t\t\tcbblock: [0, 0, \"コンビブロック\", \"Combi Block\"],\n\t\t\tchocona: [0, 0, \"チョコナ\", \"Chocona\", \"shimaguni\"],\n\t\t\tcojun: [0, 0, \"コージュン\", \"Cojun\", \"ripple\"],\n\t\t\tcompass: [0, 0, \"Compass\", \"Compass\", \"compass\"],\n\t\t\tcountry: [1, 0, \"カントリーロード\", \"Country Road\"],\n\t\t\tcreek: [1, 0, \"クリーク\", \"Creek\"],\n\t\t\tcurvedata: [0, 0, \"カーブデータ\", \"Curve Data\"],\n\t\t\t\"curvedata-aux\": [0, 0, \"図形の編集\", \"Edit shape\"],\n\t\t\tdbchoco: [0, 0, \"ダブルチョコ\", \"Double Choco\", \"cbblock\"],\n\t\t\tdetour: [0, 0, \"Detour\", \"Detour\", \"country\"],\n\t\t\tdoppelblock: [0, 0, \"Doppelblock\", \"Doppelblock\", \"doppelblock\"],\n\t\t\tdosufuwa: [0, 0, \"ドッスンフワリ\", \"Dosun-Fuwari\"],\n\t\t\tdoubleback: [0, 0, \"Double Back\", \"Double Back\", \"country\"],\n\t\t\teasyasabc: [0, 0, \"ABCプレース\", \"Easy as ABC\"],\n\t\t\tfactors: [0, 0, \"因子の部屋\", \"Rooms of Factors\"],\n\t\t\tfillmat: [1, 0, \"フィルマット\", \"Fillmat\", \"fillmat\"],\n\t\t\tfillomino: [\n\t\t\t\t0,\n\t\t\t\t1,\n\t\t\t\t\"フィルオミノ\",\n\t\t\t\t\"Fillomino\",\n\t\t\t\t\"\",\n\t\t\t\t{ kanpen2: \"fillomino01\" }\n\t\t\t],\n\t\t\tfirefly: [1, 0, \"ホタルビーム\", \"Hotaru Beam\"],\n\t\t\tfivecells: [0, 0, \"ファイブセルズ\", \"FiveCells\", \"nawabari\"],\n\t\t\tfourcells: [0, 0, \"フォーセルズ\", \"FourCells\", \"nawabari\"],\n\t\t\tgeradeweg: [0, 0, \"グラーデヴェグ\", \"Geradeweg\"],\n\t\t\tgoishi: [0, 1, \"碁石ひろい\", \"Goishi\"],\n\t\t\tgokigen: [1, 0, \"ごきげんななめ\", \"Slant\", \"gokigen\"],\n\t\t\thaisu: [0, 0, \"Haisu\", \"Haisu\"],\n\t\t\thakoiri: [1, 0, \"はこいり○△□\", \"Hakoiri-masashi\"],\n\t\t\thanare: [0, 0, \"はなれ組\", \"Hanare-gumi\", \"hanare\"],\n\t\t\thashikake: [\n\t\t\t\t0,\n\t\t\t\t1,\n\t\t\t\t\"橋をかけろ\",\n\t\t\t\t\"Hashiwokakero\",\n\t\t\t\t\"\",\n\t\t\t\t{ pzprurl: \"hashi\", kanpen: \"hashi\", alias: \"bridges\" }\n\t\t\t],\n\t\t\thebi: [1, 0, \"へびいちご\", \"Hebi-Ichigo\", \"\", { old: \"snakes\" }],\n\t\t\therugolf: [0, 0, \"ヘルゴルフ\", \"Herugolf\"],\n\t\t\theteromino: [0, 0, \"ヘテロミノ\", \"Heteromino\", \"nawabari\"],\n\t\t\theyabon: [1, 0, \"へやぼん\", \"Heya-Bon\", \"bonsan\"],\n\t\t\theyawake: [\n\t\t\t\t0,\n\t\t\t\t1,\n\t\t\t\t\"へやわけ\",\n\t\t\t\t\"Heyawake\",\n\t\t\t\t\"heyawake\",\n\t\t\t\t{ alias: \"heyawacky\" }\n\t\t\t],\n\t\t\thitori: [0, 1, \"ひとりにしてくれ\", \"Hitori\"],\n\t\t\ticebarn: [1, 0, \"アイスバーン\", \"Icebarn\", \"icebarn\"],\n\t\t\ticelom: [0, 0, \"アイスローム\", \"Icelom\", \"icebarn\"],\n\t\t\ticelom2: [0, 0, \"アイスローム２\", \"Icelom 2\", \"icebarn\"],\n\t\t\tichimaga: [0, 0, \"イチマガ\", \"Ichimaga\", \"ichimaga\"],\n\t\t\tichimagam: [0, 0, \"磁石イチマガ\", \"Magnetic Ichimaga\", \"ichimaga\"],\n\t\t\tichimagax: [\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t\"一回曲がって交差もするの\",\n\t\t\t\t\"Crossing Ichimaga\",\n\t\t\t\t\"ichimaga\"\n\t\t\t],\n\t\t\tinterbd: [0, 0, \"International Borders\", \"International Borders\"],\n\t\t\tjuosan: [0, 0, \"縦横さん\", \"Juosan\"],\n\t\t\tkaero: [1, 0, \"お家に帰ろう\", \"Return Home\"],\n\t\t\tkakuro: [0, 1, \"カックロ\", \"Kakuro\"],\n\t\t\tkakuru: [0, 0, \"カックル\", \"Kakuru\"],\n\t\t\tkazunori: [0, 0, \"かずのりのへや\", \"Kazunori Room\"],\n\t\t\tkinkonkan: [1, 0, \"キンコンカン\", \"Kin-Kon-Kan\"],\n\t\t\tkouchoku: [0, 0, \"交差は直角に限る\", \"Kouchoku\"],\n\t\t\tkramma: [0, 0, \"快刀乱麻\", \"KaitoRamma\", \"kramma\"],\n\t\t\tkramman: [0, 0, \"新・快刀乱麻\", \"New KaitoRamma\", \"kramma\"],\n\t\t\tkropki: [0, 0, \"Kropki\", \"Kropki\", \"minarism\"],\n\t\t\tkurochute: [0, 1, \"クロシュート\", \"Kurochute\"],\n\t\t\tkurodoko: [0, 1, \"黒どこ(黒マスはどこだ)\", \"Kurodoko\"],\n\t\t\tkurotto: [0, 0, \"クロット\", \"Kurotto\"],\n\t\t\tkusabi: [0, 0, \"クサビリンク\", \"Kusabi\"],\n\t\t\tlightup: [\n\t\t\t\t0,\n\t\t\t\t1,\n\t\t\t\t\"美術館\",\n\t\t\t\t\"Akari\",\n\t\t\t\t\"\",\n\t\t\t\t{ pzprurl: \"akari\", kanpen: \"bijutsukan\" }\n\t\t\t],\n\t\t\tlits: [1, 1, \"ＬＩＴＳ\", \"LITS\", \"lits\"],\n\t\t\tlookair: [0, 0, \"るっくえあ\", \"Look-Air\"],\n\t\t\tloopsp: [1, 0, \"環状線スペシャル\", \"Loop Special\", \"pipelink\"],\n\t\t\tloute: [0, 0, \"エルート\", \"L-route\"],\n\t\t\tmakaro: [0, 0, \"マカロ\", \"Makaro\"],\n\t\t\tmashu: [0, 1, \"ましゅ\", \"Masyu\", \"\", { kanpen: \"masyu\", alias: \"pearl\" }],\n\t\t\tmaxi: [0, 0, \"Maxi Loop\", \"Maxi Loop\", \"country\"],\n\t\t\tmeander: [0, 0, \"にょろにょろナンバー\", \"Meandering Numbers\", \"ripple\"],\n\t\t\tmejilink: [0, 0, \"メジリンク\", \"Mejilink\"],\n\t\t\tminarism: [1, 0, \"マイナリズム\", \"Minarism\"],\n\t\t\tmines: [0, 0, \"マインスイーパ\", \"Minesweeper\", \"kurotto\"],\n\t\t\tmidloop: [0, 0, \"ミッドループ\", \"Mid-loop\"],\n\t\t\tmochikoro: [1, 0, \"モチコロ\", \"Mochikoro\", \"nurikabe\"],\n\t\t\tmochinyoro: [1, 0, \"モチにょろ\", \"Mochinyoro\", \"nurikabe\"],\n\t\t\tmoonsun: [0, 0, \"月か太陽\", \"Moon or Sun\", \"country\"],\n\t\t\tnagare: [0, 0, \"流れるループ\", \"Nagareru-Loop\"],\n\t\t\tnagenawa: [0, 0, \"なげなわ\", \"Nagenawa\", \"nagenawa\"],\n\t\t\tnanro: [0, 1, \"ナンロー\", \"Nanro\"],\n\t\t\tnawabari: [1, 0, \"なわばり\", \"Territory\", \"nawabari\"],\n\t\t\tnikoji: [0, 0, \"NIKOJI\", \"NIKOJI\", \"cbblock\"],\n\t\t\tnondango: [0, 0, \"ノンダンゴ\", \"Nondango\"],\n\t\t\tnonogram: [0, 0, \"ののぐらむ\", \"Nonogram\"],\n\t\t\tnorinori: [0, 1, \"のりのり\", \"Norinori\", \"lits\"],\n\t\t\tnumlin: [\n\t\t\t\t0,\n\t\t\t\t1,\n\t\t\t\t\"ナンバーリンク\",\n\t\t\t\t\"Numberlink\",\n\t\t\t\t\"\",\n\t\t\t\t{ kanpen: \"numberlink\" }\n\t\t\t],\n\t\t\tnuribou: [1, 0, \"ぬりぼう\", \"Nuribou\", \"nurikabe\"],\n\t\t\tnurikabe: [0, 1, \"ぬりかべ\", \"Nurikabe\", \"nurikabe\"],\n\t\t\tnurimaze: [0, 0, \"ぬりめいず\", \"Nuri-Maze\", \"nurimaze\"],\n\t\t\tnurimisaki: [0, 0, \"ぬりみさき\", \"Nurimisaki\", \"kurodoko\"],\n\t\t\tonsen: [0, 0, \"温泉めぐり\", \"Onsen-meguri\", \"country\"],\n\t\t\tpaintarea: [1, 0, \"ペイントエリア\", \"Paintarea\"],\n\t\t\tpencils: [0, 0, \"ペンシルズ\", \"Pencils\"],\n\t\t\tpipelink: [1, 0, \"パイプリンク\", \"Pipelink\", \"pipelink\"],\n\t\t\tpipelinkr: [\n\t\t\t\t1,\n\t\t\t\t0,\n\t\t\t\t\"帰ってきたパイプリンク\",\n\t\t\t\t\"Pipelink Returns\",\n\t\t\t\t\"pipelink\"\n\t\t\t],\n\t\t\tputteria: [0, 0, \"プッテリア\", \"Putteria\", \"hanare\"],\n\t\t\trectslider: [0, 0, \"四角スライダー\", \"Rectangle-Slider\", \"bonsan\"],\n\t\t\treflect: [1, 0, \"リフレクトリンク\", \"Reflect Link\"],\n\t\t\trenban: [0, 0, \"連番窓口\", \"Renban-Madoguchi\"],\n\t\t\tringring: [0, 0, \"リングリング\", \"Ring-ring\", \"nagenawa\"],\n\t\t\tripple: [\n\t\t\t\t0,\n\t\t\t\t1,\n\t\t\t\t\"波及効果\",\n\t\t\t\t\"Ripple Effect\",\n\t\t\t\t\"ripple\",\n\t\t\t\t{ kanpen: \"hakyukoka\" }\n\t\t\t],\n\t\t\troma: [0, 0, \"ろーま\", \"Roma\", \"\", { alias: \"rome\" }],\n\t\t\tsashigane: [0, 0, \"さしがね\", \"Sashigane\", \"loute\"],\n\t\t\tsatogaeri: [\n\t\t\t\t0,\n\t\t\t\t1,\n\t\t\t\t\"さとがえり\",\n\t\t\t\t\"Satogaeri\",\n\t\t\t\t\"bonsan\",\n\t\t\t\t{ alias: \"sato\", kanpen: \"satogaeri\" }\n\t\t\t],\n\t\t\tscrin: [0, 0, \"スクリン\", \"Scrin\"],\n\t\t\tshakashaka: [0, 1, \"シャカシャカ\", \"Shakashaka\"],\n\t\t\tshikaku: [0, 1, \"四角に切れ\", \"Shikaku\", \"shikaku\"],\n\t\t\tshimaguni: [1, 0, \"島国\", \"Islands\", \"shimaguni\"],\n\t\t\tshugaku: [1, 0, \"修学旅行の夜\", \"School Trip\"],\n\t\t\tshwolf: [0, 0, \"ヤギとオオカミ\", \"Goats and Wolves\", \"kramma\"],\n\t\t\tsimpleloop: [0, 0, \"Simple Loop\", \"Simple Loop\", \"country\"],\n\t\t\tslalom: [1, 1, \"スラローム\", \"Slalom\", \"\", { alias: \"suraromu\" }],\n\t\t\tslither: [\n\t\t\t\t0,\n\t\t\t\t1,\n\t\t\t\t\"スリザーリンク\",\n\t\t\t\t\"Slitherlink\",\n\t\t\t\t\"\",\n\t\t\t\t{ kanpen: \"slitherlink\" }\n\t\t\t],\n\t\t\tsnake: [0, 0, \"Snake\", \"Snake\"],\n\t\t\tstarbattle: [0, 0, \"スターバトル\", \"Star Battle\"],\n\t\t\tstostone: [0, 0, \"ストストーン\", \"Stostone\", \"shimaguni\"],\n\t\t\tsudoku: [0, 1, \"数独\", \"Sudoku\"],\n\t\t\tsukoro: [1, 0, \"数コロ\", \"Sukoro\", \"sukoro\"],\n\t\t\tsukororoom: [0, 0, \"数コロ部屋\", \"Sukoro-room\", \"sukoro\"],\n\t\t\tsymmarea: [0, 0, \"シンメトリーエリア\", \"Symmetry Area\", \"fillomino\"],\n\t\t\ttapa: [0, 0, \"Tapa\", \"Tapa\"],\n\t\t\ttapaloop: [0, 0, \"Tapa-Like Loop\", \"Tapa-Like Loop\"],\n\t\t\ttasquare: [0, 0, \"たすくえあ\", \"Tasquare\"],\n\t\t\ttatamibari: [1, 0, \"タタミバリ\", \"Tatamibari\"],\n\t\t\ttateyoko: [1, 0, \"タテボーヨコボー\", \"Tatebo-Yokobo\"],\n\t\t\ttawa: [0, 0, \"たわむれんが\", \"Tawamurenga\"],\n\t\t\ttentaisho: [0, 0, \"天体ショー\", \"Tentaisho\"],\n\t\t\ttents: [0, 0, \"Tents\", \"Tents\", \"tents\"],\n\t\t\ttilepaint: [1, 0, \"タイルペイント\", \"Tilepaint\"],\n\t\t\ttoichika: [0, 0, \"遠い誓い\", \"Toichika\"],\n\t\t\ttoichika2: [0, 0, \"遠い誓い２\", \"Toichika 2\", \"toichika\"],\n\t\t\ttriplace: [0, 0, \"トリプレイス\", \"Tri-place\"],\n\t\t\tusotatami: [0, 0, \"ウソタタミ\", \"Uso-tatami\", \"fillmat\"],\n\t\t\tusoone: [0, 0, \"ウソワン\", \"Uso-one\"],\n\t\t\tview: [1, 0, \"ヴィウ\", \"View\", \"sukoro\"],\n\t\t\twagiri: [0, 0, \"ごきげんななめ・輪切\", \"Wagiri\", \"gokigen\"],\n\t\t\twalllogic: [0, 0, \"ウォールロジック\", \"Wall Logic\"],\n\t\t\twblink: [0, 0, \"シロクロリンク\", \"Shirokuro-link\"],\n\t\t\tyajikazu: [1, 0, \"やじさんかずさん\", \"Yajisan-Kazusan\"],\n\t\t\tyajilin: [\n\t\t\t\t0,\n\t\t\t\t1,\n\t\t\t\t\"ヤジリン\",\n\t\t\t\t\"Yajilin\",\n\t\t\t\t\"\",\n\t\t\t\t{ pzprurl: \"yajilin\", kanpen: \"yajilin\", alias: \"yajirin\" }\n\t\t\t],\n\t\t\t\"yajilin-regions\": [\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t\"ヘヤジリン\",\n\t\t\t\t\"Regional Yajilin\",\n\t\t\t\t\"yajilin\",\n\t\t\t\t{ alias: \"yajirin-regions\" }\n\t\t\t],\n\t\t\tyajitatami: [0, 0, \"ヤジタタミ\", \"Yajitatami\"],\n\t\t\tyinyang: [0, 0, \"しろまるくろまる\", \"Yin-Yang\"],\n\t\t\tyosenabe: [0, 0, \"よせなべ\", \"Yosenabe\"]\n\t\t}\n\t);\n})();\n","// Parser.js v3.4.1\n\n(function() {\n\tvar URL_AUTO = 0,\n\t\tURL_PZPRV3 = 1,\n\t\tURL_PZPRAPP = 2,\n\t\tURL_KANPEN = 3,\n\t\tURL_KANPENP = 4,\n\t\tURL_HEYAAPP = 5,\n\t\tURL_PZPRFILE = 6,\n\t\tFILE_AUTO = 0,\n\t\tFILE_PZPR = 1,\n\t\tFILE_PBOX = 2,\n\t\tFILE_PBOX_XML = 3;\n\n\tvar URLData, FileData, Parser;\n\n\tParser = pzpr.parser = function(data, variety) {\n\t\treturn Parser.parse(data, variety);\n\t};\n\tParser.extend = function(obj) {\n\t\tfor (var n in obj) {\n\t\t\tthis[n] = obj[n];\n\t\t}\n\t};\n\tParser.extend({\n\t\t// 定数(URL形式)\n\t\tURL_AUTO: URL_AUTO,\n\t\tURL_PZPRV3: URL_PZPRV3,\n\t\tURL_PZPRAPP: URL_PZPRAPP,\n\t\tURL_KANPEN: URL_KANPEN,\n\t\tURL_KANPENP: URL_KANPENP,\n\t\tURL_HEYAAPP: URL_HEYAAPP,\n\t\tURL_PZPRFILE: URL_PZPRFILE,\n\n\t\t// 定数(ファイル形式)\n\t\tFILE_AUTO: FILE_AUTO,\n\t\tFILE_PZPR: FILE_PZPR,\n\t\tFILE_PBOX: FILE_PBOX,\n\t\tFILE_PBOX_XML: FILE_PBOX_XML,\n\n\t\t/* 入力された文字列を、URLおよびファイルデータとして解析し返します        */\n\t\t/* ただし最初から解析済みのデータが渡された場合は、それをそのまま返します */\n\t\tparse: function(data, variety) {\n\t\t\tif (data instanceof URLData || data instanceof FileData) {\n\t\t\t\treturn data;\n\t\t\t}\n\n\t\t\treturn this.parseFile(data, variety) || this.parseURL(data);\n\t\t},\n\n\t\tparseURL: function(url) {\n\t\t\tif (url instanceof URLData) {\n\t\t\t\treturn url;\n\t\t\t}\n\n\t\t\turl = url.replace(/(\\r|\\n)/g, \"\"); // textarea上の改行が実際の改行扱いになるUAに対応(Operaとか)\n\t\t\treturn new URLData(url).parse();\n\t\t},\n\t\tparseFile: function(fstr, variety) {\n\t\t\tif (fstr instanceof FileData) {\n\t\t\t\treturn fstr;\n\t\t\t}\n\n\t\t\tif (!fstr.match(/^\\<\\?xml/)) {\n\t\t\t\tfstr = fstr.replace(/[\\t\\r]*\\n/g, \"\\n\").replace(/\\//g, \"\\n\");\n\t\t\t}\n\t\t\treturn new FileData(fstr, variety).parse();\n\t\t}\n\t});\n\tdelete Parser.extend;\n\n\t//---------------------------------------------------------------------------\n\t// ★ URLData() URLデータのencode/decodeのためのオブジェクト\n\t//---------------------------------------------------------------------------\n\tURLData = pzpr.parser.URLData = function(url, mode) {\n\t\tthis.url = url;\n\t\tif (mode !== void 0) {\n\t\t\tthis.mode = mode;\n\t\t}\n\t};\n\tpzpr.parser.URLData.prototype = {\n\t\tpid: \"\",\n\t\tmode: \"\",\n\t\ttype: URL_AUTO /* ==0 */,\n\t\turl: \"\",\n\t\tqdata: \"\",\n\t\tpflag: null,\n\t\tvariant: null,\n\t\tcols: 0,\n\t\trows: 0,\n\t\tbody: \"\",\n\n\t\tisurl: true,\n\t\tisfile: false,\n\n\t\t// 定数(URL形式)\n\t\tURL_AUTO: URL_AUTO,\n\t\tURL_PZPRV3: URL_PZPRV3,\n\t\tURL_PZPRAPP: URL_PZPRAPP,\n\t\tURL_KANPEN: URL_KANPEN,\n\t\tURL_KANPENP: URL_KANPENP,\n\t\tURL_HEYAAPP: URL_HEYAAPP,\n\t\tURL_PZPRFILE: URL_PZPRFILE,\n\n\t\tparse: function() {\n\t\t\tthis.parseURLType();\n\t\t\tthis.parseURLData();\n\t\t\tthis.changeProperPid();\n\t\t\treturn this;\n\t\t},\n\t\tgenerate: function() {\n\t\t\treturn this.outputURLType() + this.outputURLData();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ★ parseURLType() 入力されたURLからどのパズルか、およびURLの種類を抽出する\n\t\t//                   入力=URL 例:http://pzv.jp/p.html?(pid)/(qdata)\n\t\t//                   出力={pid:パズル種類, type:URL種類, qdata:タテヨコ以下のデータ}\n\t\t//                         qdata -> [(variant)/][(pflag)/](cols)/(rows)/(bstr)\n\t\t//---------------------------------------------------------------------------\n\t\tparseURLType: function() {\n\t\t\t/* URLからパズルの種類・URLの種類を判定する */\n\t\t\tvar url = this.url;\n\t\t\tdelete this.url;\n\t\t\t// カンペンの場合\n\t\t\tif (\n\t\t\t\turl.match(/www\\.kanpen\\.net/) ||\n\t\t\t\turl.match(/www\\.geocities(\\.co)?\\.jp\\/pencil_applet/)\n\t\t\t) {\n\t\t\t\turl.match(/([0-9a-z]+)\\.html/);\n\t\t\t\tthis.pid = RegExp.$1;\n\t\t\t\t// カンペンだけどデータ形式はへやわけアプレット\n\t\t\t\tif (url.indexOf(\"?heyawake=\") >= 0) {\n\t\t\t\t\tthis.qdata = url.substr(url.indexOf(\"?heyawake=\") + 10);\n\t\t\t\t\tthis.type = URL_HEYAAPP;\n\t\t\t\t}\n\t\t\t\t// カンペンだけどデータ形式はぱずぷれ\n\t\t\t\telse if (url.indexOf(\"?pzpr=\") >= 0) {\n\t\t\t\t\tthis.qdata = url.substr(url.indexOf(\"?pzpr=\") + 6);\n\t\t\t\t\tthis.type = URL_KANPENP;\n\t\t\t\t} else {\n\t\t\t\t\tthis.qdata = url.substr(url.indexOf(\"?problem=\") + 9);\n\t\t\t\t\tthis.type = URL_KANPEN;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// へやわけアプレットの場合\n\t\t\telse if (url.match(/www\\.geocities(\\.co)?\\.jp\\/heyawake/)) {\n\t\t\t\tthis.pid = \"heyawake\";\n\t\t\t\tthis.qdata = url.substr(url.indexOf(\"?problem=\") + 9);\n\t\t\t\tthis.type = URL_HEYAAPP;\n\t\t\t}\n\t\t\t// ぱずぷれアプレットの場合\n\t\t\telse if (url.match(/indi\\.s58\\.xrea\\.com\\/(.+)\\/(sa|sc)\\//)) {\n\t\t\t\tthis.pid = RegExp.$1;\n\t\t\t\tthis.qdata = url.substr(url.indexOf(\"?\"));\n\t\t\t\tthis.type = URL_PZPRAPP;\n\t\t\t}\n\t\t\t// ぱずぷれv3の場合\n\t\t\telse {\n\t\t\t\tvar qs = url.indexOf(\"/\", url.indexOf(\"?\"));\n\t\t\t\tvar first = \"\";\n\t\t\t\tif (qs > -1) {\n\t\t\t\t\tfirst = url.substring(url.indexOf(\"?\") + 1, qs);\n\t\t\t\t} else {\n\t\t\t\t\tfirst = url.substr(url.indexOf(\"?\") + 1);\n\t\t\t\t}\n\t\t\t\tif (first.match(/^pzprv[0-9.]*$/)) {\n\t\t\t\t\t// encoded file; extract pid\n\t\t\t\t\turl = decodeURIComponent(url);\n\t\t\t\t\tvar parts = url.split(\"/\");\n\t\t\t\t\tif (parts.length >= 2) {\n\t\t\t\t\t\tthis.pid = parts[1];\n\t\t\t\t\t}\n\t\t\t\t\tthis.qdata = url;\n\t\t\t\t\tthis.type = URL_PZPRFILE;\n\t\t\t\t} else {\n\t\t\t\t\tif (qs > -1) {\n\t\t\t\t\t\tthis.qdata = url.substr(qs + 1);\n\t\t\t\t\t}\n\t\t\t\t\tvar pid = first;\n\t\t\t\t\tif (pid.match(/_edit$/)) {\n\t\t\t\t\t\tthis.mode = \"editor\";\n\t\t\t\t\t} else if (pid.match(/_play$/)) {\n\t\t\t\t\t\tthis.mode = \"player\";\n\t\t\t\t\t}\n\t\t\t\t\tthis.pid = pid.replace(/(_edit|_play)$/, \"\");\n\t\t\t\t\tthis.type = URL_PZPRV3;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.pid = pzpr.variety.toPID(this.pid);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ★ outputURLType() パズル種類, URL種類からURLを生成する\n\t\t//---------------------------------------------------------------------------\n\t\toutputURLType: function() {\n\t\t\tvar url = \"\";\n\t\t\tif (pzpr.env.node) {\n\t\t\t\turl = \"http://pzv.jp/p.html\";\n\t\t\t} else {\n\t\t\t\turl = location.protocol + \"//\" + location.host + location.pathname;\n\t\t\t}\n\t\t\tswitch (this.type) {\n\t\t\t\tcase URL_PZPRV3:\n\t\t\t\t\turl = url + \"?%PID%/\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase URL_KANPEN:\n\t\t\t\t\turl = \"http://www.kanpen.net/%KID%.html?problem=\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase URL_KANPENP:\n\t\t\t\t\turl = \"http://www.kanpen.net/%KID%.html?pzpr=\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase URL_HEYAAPP:\n\t\t\t\t\turl = \"http://www.geocities.co.jp/heyawake/?problem=\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase URL_PZPRFILE:\n\t\t\t\t\turl = url + \"?\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar pid = this.pid,\n\t\t\t\ttyp = \"\";\n\t\t\tswitch (this.mode) {\n\t\t\t\tcase \"player\":\n\t\t\t\t\tpid = pid + \"_play\";\n\t\t\t\t\ttyp = \"type=player&\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"editor\":\n\t\t\t\t\tpid = pid + \"_edit\";\n\t\t\t\t\ttyp = \"type=editor&\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (this.type === URL_PZPRFILE) {\n\t\t\t\turl = url + typ;\n\t\t\t}\n\t\t\treturn url\n\t\t\t\t.replace(\"%PID%\", pzpr.variety(pid).urlid)\n\t\t\t\t.replace(\"%KID%\", pzpr.variety(this.pid).kanpenid);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ★ parseURLData() URLを縦横・問題部分などに分解する\n\t\t//                   qdata -> [(variant)/][(pflag)/](cols)/(rows)/(bstr)\n\t\t//---------------------------------------------------------------------------\n\t\tparseURLData: function() {\n\t\t\tif (this.type === URL_PZPRFILE) {\n\t\t\t\tvar parts = this.qdata.split(\"/\");\n\t\t\t\tthis.cols = +parts[2];\n\t\t\t\tthis.rows = +parts[3];\n\t\t\t\tthis.body = this.qdata.replace(/\\//g, \"\\n\");\n\t\t\t\tdelete this.qdata;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar inp = this.qdata.split(\"/\"),\n\t\t\t\tcol = 0,\n\t\t\t\trow = 0;\n\t\t\tdelete this.qdata;\n\t\t\t/* URLにつけるオプション */\n\t\t\tif (this.type !== URL_KANPEN && this.type !== URL_HEYAAPP) {\n\t\t\t\tif (!!inp[0] && inp[0].match(/^v:(.*)/)) {\n\t\t\t\t\tthis.variant = RegExp.$1;\n\t\t\t\t\tinp.shift();\n\t\t\t\t}\n\t\t\t\tif (!!inp[0] && isNaN(inp[0])) {\n\t\t\t\t\tthis.pflag = inp[0];\n\t\t\t\t\tinp.shift();\n\t\t\t\t} else {\n\t\t\t\t\tthis.pflag = \"\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* サイズを表す文字列 */\n\t\t\tif (this.type === URL_KANPEN) {\n\t\t\t\tif (this.pid === \"kakuro\") {\n\t\t\t\t\trow = +inp.shift() - 1;\n\t\t\t\t\tcol = +inp.shift() - 1;\n\t\t\t\t} else if (this.pid === \"sudoku\") {\n\t\t\t\t\trow = col = +inp.shift();\n\t\t\t\t} else {\n\t\t\t\t\trow = +inp.shift();\n\t\t\t\t\tcol = +inp.shift();\n\t\t\t\t}\n\t\t\t} else if (this.type === URL_HEYAAPP) {\n\t\t\t\tvar size = inp.shift().split(\"x\");\n\t\t\t\tcol = +size[0];\n\t\t\t\trow = +size[1];\n\t\t\t} else {\n\t\t\t\tcol = +inp.shift() || NaN;\n\t\t\t\trow = +inp.shift() || NaN;\n\t\t\t}\n\t\t\tthis.rows = row;\n\t\t\tthis.cols = col;\n\n\t\t\t/* サイズ以降のデータを取得 */\n\t\t\tif (!inp[inp.length - 1]) {\n\t\t\t\tinp.pop();\n\t\t\t}\n\t\t\tthis.body = inp.join(\"/\");\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ★ outputURLData() qdataを生成する\n\t\t//---------------------------------------------------------------------------\n\t\toutputURLData: function() {\n\t\t\tvar pzl = this,\n\t\t\t\tcol = pzl.cols,\n\t\t\t\trow = pzl.rows,\n\t\t\t\tout = [];\n\n\t\t\t/* URLにつけるオプション */\n\t\t\tif (pzl.type !== URL_KANPEN && pzl.type !== URL_HEYAAPP) {\n\t\t\t\tif (pzl.variant !== null) {\n\t\t\t\t\tout.push(\"v:\" + pzl.variant);\n\t\t\t\t}\n\t\t\t\tif (pzl.type === URL_KANPENP || !!pzl.pflag) {\n\t\t\t\t\tout.push(pzl.pflag);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* サイズを表す文字列 */\n\t\t\tif (pzl.type === URL_KANPEN) {\n\t\t\t\tif (pzl.pid === \"kakuro\") {\n\t\t\t\t\tout.push(row + 1);\n\t\t\t\t\tout.push(col + 1);\n\t\t\t\t} else if (pzl.pid === \"sudoku\") {\n\t\t\t\t\tout.push(col);\n\t\t\t\t} else {\n\t\t\t\t\tout.push(row);\n\t\t\t\t\tout.push(col);\n\t\t\t\t}\n\t\t\t} else if (pzl.type === URL_HEYAAPP) {\n\t\t\t\tout.push([col, row].join(\"x\"));\n\t\t\t} else if (pzl.type !== URL_PZPRFILE) {\n\t\t\t\tout.push(col);\n\t\t\t\tout.push(row);\n\t\t\t}\n\n\t\t\t/* サイズ以降のデータを設定 */\n\t\t\tout.push(pzl.body);\n\n\t\t\t/* 末尾が0-9,a-z,A-Z以外の時にt.coで情報が欠落しないよう/を追加 */\n\t\t\tvar body = out.join(\"/\");\n\t\t\tif (!body.charAt(body.length - 1).match(/[a-zA-Z0-9]/)) {\n\t\t\t\tbody += \"/\";\n\t\t\t}\n\t\t\treturn body;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ★ changeProperPid() parse後パズル種類が実際には別だった場合にpidを変更する\n\t\t//---------------------------------------------------------------------------\n\t\tchangeProperPid: function() {\n\t\t\t// this.bodyが空の場合はEncode.jsの仕様により対象外\n\t\t\t// カンペンには以下のパズルは存在しないのでURL_KANPENPも対象外\n\t\t\tif (\n\t\t\t\t!this.body ||\n\t\t\t\t(this.type !== URL_PZPRV3 && this.type !== URL_PZPRAPP)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch (this.pid) {\n\t\t\t\tcase \"ichimaga\":\n\t\t\t\t\tif (this.pflag.indexOf(\"m\") >= 0) {\n\t\t\t\t\t\tthis.pid = \"ichimagam\";\n\t\t\t\t\t} else if (this.pflag.indexOf(\"x\") >= 0) {\n\t\t\t\t\t\tthis.pid = \"ichimagax\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.pid = \"ichimaga\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"icelom\":\n\t\t\t\t\tif (this.pflag.indexOf(\"a\") < 0) {\n\t\t\t\t\t\tthis.pid = \"icelom2\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"pipelink\":\n\t\t\t\t\tif (this.body.match(/[0-9]/)) {\n\t\t\t\t\t\tthis.pid = \"pipelinkr\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"bonsan\":\n\t\t\t\t\tif (this.pflag.indexOf(\"c\") < 0) {\n\t\t\t\t\t\tvar col = this.cols,\n\t\t\t\t\t\t\trow = this.rows;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.body\n\t\t\t\t\t\t\t\t.substr(\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t((((col - 1) * row + 4) / 5) | 0) +\n\t\t\t\t\t\t\t\t\t\t(((col * (row - 1) + 4) / 5) | 0) || 0\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.match(/[^0]/)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis.pid = \"heyabon\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"kramma\":\n\t\t\t\t\tif (this.pflag.indexOf(\"c\") < 0) {\n\t\t\t\t\t\tvar len = (this.cols - 1) * (this.rows - 1),\n\t\t\t\t\t\t\tcc = 0;\n\t\t\t\t\t\tfor (var i = 0; i < this.body.length; i++) {\n\t\t\t\t\t\t\tvar ca = this.body.charAt(i);\n\t\t\t\t\t\t\tif (ca.match(/\\w/)) {\n\t\t\t\t\t\t\t\tcc += parseInt(ca, 36);\n\t\t\t\t\t\t\t\tif (cc < len) {\n\t\t\t\t\t\t\t\t\tthis.pid = \"kramman\";\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (ca === \".\") {\n\t\t\t\t\t\t\t\tcc += 36;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (cc >= len) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\t//---------------------------------------------------------------------------\n\t// ★ FileData() ファイルデータのencode/decodeのためのオブジェクト\n\t//---------------------------------------------------------------------------\n\tFileData = pzpr.parser.FileData = function(fstr, variety) {\n\t\tthis.pid = !!variety ? variety : \"\";\n\t\tthis.fstr = fstr;\n\t\tthis.metadata = new pzpr.MetaData();\n\t};\n\tpzpr.parser.FileData.prototype = {\n\t\tpid: \"\",\n\t\ttype: FILE_AUTO /* == 0 */,\n\t\tfilever: 0,\n\t\tfstr: \"\",\n\t\tqdata: \"\",\n\t\tcols: 0,\n\t\trows: 0,\n\t\tbody: \"\",\n\t\thistory: \"\",\n\t\tmetadata: null,\n\t\txmldoc: null,\n\n\t\tisurl: false,\n\t\tisfile: true,\n\n\t\t// 定数(ファイル形式)\n\t\tFILE_AUTO: FILE_AUTO,\n\t\tFILE_PZPR: FILE_PZPR,\n\t\tFILE_PBOX: FILE_PBOX,\n\t\tFILE_PBOX_XML: FILE_PBOX_XML,\n\n\t\tparse: function() {\n\t\t\tvar result = this.parseFileType() && this.parseFileData();\n\t\t\tif (result) {\n\t\t\t\tthis.changeProperPid();\n\t\t\t}\n\t\t\treturn result ? this : null;\n\t\t},\n\t\tgenerate: function() {\n\t\t\treturn this.outputFileType() + this.outputFileData();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ★ parseFileType() 入力されたファイルのデータからどのパズルか、およびパズルの種類を抽出する\n\t\t//                   出力={pid:パズル種類, type:ファイル種類, fstr:ファイルの内容}\n\t\t//---------------------------------------------------------------------------\n\t\tparseFileType: function() {\n\t\t\tvar lines = this.fstr.split(\"\\n\");\n\t\t\tvar firstline = lines.shift();\n\t\t\tdelete this.fstr;\n\n\t\t\t/* ヘッダからパズルの種類・ファイルの種類を判定する */\n\t\t\tif (firstline.match(/^pzprv3/)) {\n\t\t\t\tthis.type = FILE_PZPR;\n\t\t\t\tif (firstline.match(/pzprv3\\.(\\d+)/)) {\n\t\t\t\t\tthis.filever = +RegExp.$1;\n\t\t\t\t}\n\t\t\t\tthis.pid = lines.shift();\n\t\t\t\tthis.qdata = lines.join(\"\\n\");\n\t\t\t} else if (firstline.match(/^\\<\\?xml/)) {\n\t\t\t\tthis.type = FILE_PBOX_XML;\n\t\t\t\tlines.unshift(firstline);\n\t\t\t\tthis.qdata = lines.join(\"\\n\");\n\t\t\t\tif (!!DOMParser) {\n\t\t\t\t\tthis.body = new DOMParser().parseFromString(this.qdata, \"text/xml\");\n\t\t\t\t\tthis.pid = this.body.querySelector(\"puzzle\").getAttribute(\"type\");\n\t\t\t\t} else {\n\t\t\t\t\tthis.pid = \"\";\n\t\t\t\t}\n\t\t\t} else if (firstline.match(/^\\d+$/)) {\n\t\t\t\tthis.type = FILE_PBOX;\n\t\t\t\tlines.unshift(firstline);\n\t\t\t\tthis.qdata = lines.join(\"\\n\");\n\t\t\t} else {\n\t\t\t\tthis.pid = \"\";\n\t\t\t}\n\t\t\tthis.pid = pzpr.variety.toPID(this.pid);\n\n\t\t\treturn !!this.pid;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ★ outputFileType() パズル種類, ファイル種類からヘッダを生成する\n\t\t//---------------------------------------------------------------------------\n\t\toutputFileType: function() {\n\t\t\t/* ヘッダの処理 */\n\t\t\tif (this.type === FILE_PZPR) {\n\t\t\t\treturn [\n\t\t\t\t\tthis.filever === 0 ? \"pzprv3\" : \"pzprv3.\" + this.filever,\n\t\t\t\t\tthis.pid,\n\t\t\t\t\t\"\"\n\t\t\t\t].join(\"\\n\");\n\t\t\t} else if (this.type === FILE_PBOX_XML) {\n\t\t\t\tthis.body\n\t\t\t\t\t.querySelector(\"puzzle\")\n\t\t\t\t\t.setAttribute(\"type\", pzpr.variety(this.pid).kanpenid);\n\t\t\t}\n\t\t\treturn \"\";\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ★ parseFileData() ファイルの内容からサイズなどを求める\n\t\t//---------------------------------------------------------------------------\n\t\tparseFileData: function() {\n\t\t\tvar lines = this.qdata.split(\"\\n\"),\n\t\t\t\tcol = 0,\n\t\t\t\trow = 0;\n\t\t\tdelete this.qdata;\n\n\t\t\t/* サイズを表す文字列 */\n\t\t\tif (this.type === FILE_PBOX_XML) {\n\t\t\t\trow = +this.body.querySelector(\"size\").getAttribute(\"row\");\n\t\t\t\tcol = +this.body.querySelector(\"size\").getAttribute(\"col\");\n\t\t\t\tif (this.pid === \"slither\" || this.pid === \"kakuro\") {\n\t\t\t\t\trow--;\n\t\t\t\t\tcol--;\n\t\t\t\t}\n\t\t\t} else if (this.type === FILE_PBOX && this.pid === \"kakuro\") {\n\t\t\t\trow = +lines.shift() - 1;\n\t\t\t\tcol = +lines.shift() - 1;\n\t\t\t} else if (this.pid === \"sudoku\") {\n\t\t\t\trow = col = +lines.shift();\n\t\t\t} else {\n\t\t\t\trow = +lines.shift();\n\t\t\t\tcol = +lines.shift();\n\t\t\t}\n\t\t\tif (row <= 0 || col <= 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.rows = row;\n\t\t\tthis.cols = col;\n\n\t\t\t/* サイズ以降のデータを取得 */\n\t\t\tif (this.type === FILE_PZPR) {\n\t\t\t\tvar historypos = null,\n\t\t\t\t\tstr = \"\",\n\t\t\t\t\tstrs = [],\n\t\t\t\t\tisinfo = false;\n\t\t\t\tfor (var i = 0; i < lines.length; i++) {\n\t\t\t\t\t/* かなり昔のぱずぷれファイルは最終行にURLがあったので、末尾扱いする */\n\t\t\t\t\tif (lines[i].match(/^http\\:\\/\\//)) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* info行に到達した場合 */\n\t\t\t\t\tif (lines[i].match(/info:\\{/)) {\n\t\t\t\t\t\thistorypos = i;\n\t\t\t\t\t\tisinfo = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* 履歴行に到達した場合 */\n\t\t\t\t\tif (lines[i].match(/history:\\{|__HISTORY__/)) {\n\t\t\t\t\t\thistorypos = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tstrs.push(lines[i]);\n\t\t\t\t}\n\t\t\t\tthis.body += strs.join(\"\\n\");\n\n\t\t\t\t/* 履歴部分の読み込み */\n\t\t\t\tif (historypos !== null && !!JSON) {\n\t\t\t\t\tvar count = 0,\n\t\t\t\t\t\tcnt;\n\t\t\t\t\tfor (var i = historypos; i < lines.length; i++) {\n\t\t\t\t\t\tstr += lines[i];\n\n\t\t\t\t\t\tcnt = count;\n\t\t\t\t\t\tcount += (lines[i].match(/\\{/g) || []).length;\n\t\t\t\t\t\tcount -= (lines[i].match(/\\}/g) || []).length;\n\t\t\t\t\t\tif (cnt > 0 && count === 0) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* 履歴出力があったら入力する */\n\t\t\t\tif (!!JSON) {\n\t\t\t\t\tif (isinfo && str.substr(0, 5) === \"info:\") {\n\t\t\t\t\t\tvar info = JSON.parse(str.substr(5));\n\t\t\t\t\t\tthis.metadata.update(info.metadata);\n\t\t\t\t\t\tthis.history = info.history || \"\";\n\t\t\t\t\t} else if (str.substr(0, 8) === \"history:\") {\n\t\t\t\t\t\tthis.history = JSON.parse(str.substr(8));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (this.type === FILE_PBOX) {\n\t\t\t\tthis.body = lines.join(\"\\n\");\n\t\t\t} else if (this.type === FILE_PBOX_XML) {\n\t\t\t\tif (!!this.body) {\n\t\t\t\t\tvar metanode = this.body.querySelector(\"property\"),\n\t\t\t\t\t\tmeta = this.metadata;\n\t\t\t\t\tmeta.author = metanode.querySelector(\"author\").getAttribute(\"value\");\n\t\t\t\t\tmeta.source = metanode.querySelector(\"source\").getAttribute(\"value\");\n\t\t\t\t\tmeta.hard = metanode\n\t\t\t\t\t\t.querySelector(\"difficulty\")\n\t\t\t\t\t\t.getAttribute(\"value\");\n\t\t\t\t\tvar commentnode = metanode.querySelector(\"comment\");\n\t\t\t\t\tmeta.comment = !!commentnode ? commentnode.childNodes[0].data : \"\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ★ outputFileData() パズル種類, URL種類, fstrからファイルのデータを生成する\n\t\t//---------------------------------------------------------------------------\n\t\toutputFileData: function() {\n\t\t\tvar pzl = this,\n\t\t\t\tcol = pzl.cols,\n\t\t\t\trow = pzl.rows,\n\t\t\t\tout = [];\n\t\t\tvar puzzlenode =\n\t\t\t\tthis.type === FILE_PBOX_XML ? this.body.querySelector(\"puzzle\") : null;\n\n\t\t\t/* サイズを表す文字列 */\n\t\t\tif (pzl.type === FILE_PBOX_XML) {\n\t\t\t\tvar sizenode = puzzlenode.querySelector(\"size\");\n\t\t\t\tif (sizenode) {\n\t\t\t\t\tpuzzlenode.removeChild(sizenode);\n\t\t\t\t}\n\t\t\t\tif (pzl.pid === \"slither\" || pzl.pid === \"kakuro\") {\n\t\t\t\t\trow++;\n\t\t\t\t\tcol++;\n\t\t\t\t}\n\t\t\t\tpuzzlenode.appendChild(\n\t\t\t\t\tthis.createXMLNode(\"size\", { row: row, col: col })\n\t\t\t\t);\n\t\t\t} else if (pzl.type === FILE_PBOX && pzl.pid === \"kakuro\") {\n\t\t\t\tout.push(row + 1);\n\t\t\t\tout.push(col + 1);\n\t\t\t} else if (pzl.pid === \"sudoku\") {\n\t\t\t\tout.push(col);\n\t\t\t} else {\n\t\t\t\tout.push(row);\n\t\t\t\tout.push(col);\n\t\t\t}\n\n\t\t\t/* サイズ以降のデータを設定 */\n\t\t\tif (pzl.type !== FILE_PBOX_XML) {\n\t\t\t\tout.push(pzl.body);\n\t\t\t}\n\n\t\t\t/* 履歴・メタデータ出力がある形式ならば出力する */\n\t\t\tif (pzl.type === FILE_PZPR && !!JSON) {\n\t\t\t\tif (!pzl.metadata.empty()) {\n\t\t\t\t\tvar info = { metadata: pzl.metadata.getvaliddata() };\n\t\t\t\t\tif (pzl.history) {\n\t\t\t\t\t\tinfo.history = pzl.history;\n\t\t\t\t\t}\n\t\t\t\t\tout.push(\"info:\" + JSON.stringify(info, null, 1));\n\t\t\t\t} else if (pzl.history) {\n\t\t\t\t\tout.push(\"history:\" + JSON.stringify(pzl.history, null, 1));\n\t\t\t\t}\n\t\t\t} else if (pzl.type === FILE_PBOX_XML) {\n\t\t\t\tvar propnode = puzzlenode.querySelector(\"property\");\n\t\t\t\tif (propnode) {\n\t\t\t\t\tpuzzlenode.removeChild(propnode);\n\t\t\t\t}\n\t\t\t\tpropnode = this.createXMLNode(\"property\");\n\t\t\t\tvar meta = pzl.metadata;\n\t\t\t\tpropnode.appendChild(\n\t\t\t\t\tthis.createXMLNode(\"author\", { value: meta.author })\n\t\t\t\t);\n\t\t\t\tpropnode.appendChild(\n\t\t\t\t\tthis.createXMLNode(\"source\", { value: meta.source })\n\t\t\t\t);\n\t\t\t\tpropnode.appendChild(\n\t\t\t\t\tthis.createXMLNode(\"difficulty\", { value: meta.hard })\n\t\t\t\t);\n\t\t\t\tif (!!meta.comment) {\n\t\t\t\t\tvar commentnode = this.createXMLNode(\"comment\");\n\t\t\t\t\tcommentnode.appendChild(this.body.createTextNode(meta.comment));\n\t\t\t\t\tpropnode.appendChild(commentnode);\n\t\t\t\t}\n\t\t\t\tpuzzlenode.appendChild(propnode);\n\n\t\t\t\t// 順番を入れ替え\n\t\t\t\tpuzzlenode.appendChild(puzzlenode.querySelector(\"board\"));\n\t\t\t\tpuzzlenode.appendChild(puzzlenode.querySelector(\"answer\"));\n\t\t\t}\n\n\t\t\tvar outputdata;\n\t\t\tif (pzl.type !== FILE_PBOX_XML) {\n\t\t\t\toutputdata = out.join(\"\\n\");\n\t\t\t} else {\n\t\t\t\toutputdata = new XMLSerializer().serializeToString(this.body);\n\t\t\t\tif (!outputdata.match(/^\\<\\?xml/)) {\n\t\t\t\t\toutputdata = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n' + outputdata;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn outputdata;\n\t\t},\n\n\t\tcreateXMLNode: function(name, attrs) {\n\t\t\tvar node = this.body.createElement(name);\n\t\t\tif (!!attrs) {\n\t\t\t\tfor (var i in attrs) {\n\t\t\t\t\tnode.setAttribute(i, attrs[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn node;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ★ changeProperPid() parse後パズル種類が実際には別だった場合にpidを変更する\n\t\t//---------------------------------------------------------------------------\n\t\tchangeProperPid: function() {\n\t\t\tif (this.type !== FILE_PZPR) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch (this.pid) {\n\t\t\t\tcase \"ichimaga\":\n\t\t\t\t\tvar pzlflag = this.body.split(\"\\n\")[0];\n\t\t\t\t\tif (pzlflag === \"mag\") {\n\t\t\t\t\t\tthis.pid = \"ichimagam\";\n\t\t\t\t\t} else if (pzlflag === \"cross\") {\n\t\t\t\t\t\tthis.pid = \"ichimagax\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"icelom\":\n\t\t\t\t\tvar pzltype = this.body.split(\"\\n\")[2];\n\t\t\t\t\tif (pzltype === \"skipwhite\") {\n\t\t\t\t\t\tthis.pid = \"icelom2\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"pipelink\":\n\t\t\t\t\tvar lines = this.body.split(\"\\n\"),\n\t\t\t\t\t\trow = 1,\n\t\t\t\t\t\tlen = this.rows;\n\t\t\t\t\tif (\n\t\t\t\t\t\tlines\n\t\t\t\t\t\t\t.slice(row, row + len)\n\t\t\t\t\t\t\t.join(\"\")\n\t\t\t\t\t\t\t.match(/o/)\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.pid = \"pipelinkr\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"bonsan\":\n\t\t\t\t\tvar lines = this.body.split(\"\\n\"),\n\t\t\t\t\t\trow = 2 * this.rows,\n\t\t\t\t\t\tlen = 2 * this.rows - 1;\n\t\t\t\t\tif (\n\t\t\t\t\t\tlines\n\t\t\t\t\t\t\t.slice(row, row + len)\n\t\t\t\t\t\t\t.join(\"\")\n\t\t\t\t\t\t\t.match(/1/)\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.pid = \"heyabon\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"kramma\":\n\t\t\t\t\tvar lines = this.body.split(\"\\n\"),\n\t\t\t\t\t\trow = this.rows,\n\t\t\t\t\t\tlen = this.rows + 1;\n\t\t\t\t\tif (\n\t\t\t\t\t\tlines\n\t\t\t\t\t\t\t.slice(row, row + len)\n\t\t\t\t\t\t\t.join(\"\")\n\t\t\t\t\t\t\t.match(/1/)\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.pid = \"kramman\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n})();\n","// metadata.js v3.5.2\n\n//---------------------------------------------------------------------------\n//  MetaData構造体  作者やコメントなどの情報を保持する\n//---------------------------------------------------------------------------\npzpr.MetaData = function() {};\npzpr.MetaData.prototype = {\n\tauthor: \"\",\n\tsource: \"\",\n\thard: \"\",\n\tcomment: \"\",\n\titems: { author: \"\", source: \"\", hard: \"\", comment: \"\" },\n\n\tupdate: function(metadata) {\n\t\tif (!metadata) {\n\t\t\treturn;\n\t\t}\n\t\tfor (var i in this.items) {\n\t\t\tif (typeof metadata[i] === \"string\") {\n\t\t\t\tthis[i] = metadata[i];\n\t\t\t}\n\t\t}\n\t},\n\tgetvaliddata: function() {\n\t\tvar obj = {};\n\t\tfor (var i in this.items) {\n\t\t\tif (!!this[i]) {\n\t\t\t\tobj[i] = this[i];\n\t\t\t}\n\t\t}\n\t\treturn obj;\n\t},\n\treset: function() {\n\t\tfor (var i in this.items) {\n\t\t\tthis[i] = \"\";\n\t\t}\n\t},\n\tempty: function() {\n\t\tfor (var i in this.items) {\n\t\t\tif (!!this[i]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n};\n","// util.js v3.4.0\n\n(function() {\n\tvar api = pzpr.env.API,\n\t\teventMouseDown = [\"mousedown\"],\n\t\teventMouseMove = [\"mousemove\"],\n\t\teventMouseUp = [\"mouseup\"],\n\t\teventMouseCancel = [\"\"];\n\n\tif (pzpr.env.bz.AndroidBrowser) {\n\t\teventMouseDown = [\"\"];\n\t\teventMouseMove = [\"\"];\n\t\teventMouseUp = [\"\"];\n\t}\n\n\tif (api.pointerevent) {\n\t\teventMouseDown = [\"pointerdown\"];\n\t\teventMouseMove = [\"pointermove\"];\n\t\teventMouseUp = [\"pointerup\"];\n\t\teventMouseCancel = [\"pointercancel\"];\n\t} else if (api.mspointerevent) {\n\t\teventMouseDown = [\"MSPointerDown\"];\n\t\teventMouseMove = [\"MSPointerMove\"];\n\t\teventMouseUp = [\"MSPointerUp\"];\n\t\teventMouseCancel = [\"MSPointerCancel\"];\n\t} else if (api.touchevent) {\n\t\teventMouseDown.push(\"touchstart\");\n\t\teventMouseMove.push(\"touchmove\");\n\t\teventMouseUp.push(\"touchend\");\n\t\teventMouseCancel.push(\"touchcancel\");\n\t}\n\n\t//----------------------------------------------------------------------\n\t// EventやDOM関連のツール的関数群\n\t//----------------------------------------------------------------------\n\tpzpr.util = {\n\t\t//---------------------------------------------------------------\n\t\t// pzpr.jsが読み込まれているスクリプトのパスを取得する\n\t\tgetpath: function() {\n\t\t\tif (pzpr.env.browser) {\n\t\t\t\tvar srcs = document.getElementsByTagName(\"script\");\n\t\t\t\tfor (var i = 0; i < srcs.length; i++) {\n\t\t\t\t\tvar result = srcs[i].src.match(/^(.*\\/)pzpr\\.js(?:\\?.*)?$/);\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\treturn result[1] + (!result[1].match(/\\/$/) ? \"/\" : \"\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\trequire(\"path\").dirname(__filename) +\n\t\t\t\t\t\"/\" +\n\t\t\t\t\t(__filename.match(\"pzpr.js\") ? \"\" : \"../\")\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn \"\";\n\t\t},\n\n\t\t//---------------------------------------------------------------\n\t\t// 現在の時間を取得\n\t\tcurrentTime: function() {\n\t\t\treturn new Date().getTime();\n\t\t},\n\n\t\t//---------------------------------------------------------------\n\t\t// Elementの生成関連\n\t\t//---------------------------------------------------------------\n\t\tunselectable: function(el) {\n\t\t\tel.style.MozUserSelect = \"none\";\n\t\t\tel.style.KhtmlUserSelect = \"none\";\n\t\t\tel.style.webkitUserSelect = \"none\";\n\t\t\tel.style.msUserSelect = \"none\";\n\t\t\tel.style.userSelect = \"none\";\n\t\t\tel.unselectable = \"on\";\n\t\t\treturn this;\n\t\t},\n\n\t\t//----------------------------------------------------------------------\n\t\t// pzpr.util.addEvent()          addEventListener()を呼び出す\n\t\t//----------------------------------------------------------------------\n\t\taddEvent: function(el, type, self, callback, capt) {\n\t\t\tvar types = [type];\n\t\t\tif (type === \"mousedown\") {\n\t\t\t\ttypes = eventMouseDown;\n\t\t\t} else if (type === \"mousemove\") {\n\t\t\t\ttypes = eventMouseMove;\n\t\t\t} else if (type === \"mouseup\") {\n\t\t\t\ttypes = eventMouseUp;\n\t\t\t} else if (type === \"mousecancel\") {\n\t\t\t\ttypes = eventMouseCancel;\n\t\t\t}\n\n\t\t\tfunction executer(e) {\n\t\t\t\tcallback.call(self, e);\n\t\t\t}\n\t\t\ttypes.forEach(function(type) {\n\t\t\t\tel.addEventListener(type, executer, !!capt);\n\t\t\t});\n\n\t\t\treturn function remover() {\n\t\t\t\ttypes.forEach(function(type) {\n\t\t\t\t\tel.removeEventListener(type, executer, !!capt);\n\t\t\t\t});\n\t\t\t};\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pzpr.util.getMouseButton() 左/中/右ボタンが押されているかチェックする\n\t\t//---------------------------------------------------------------------------\n\t\tgetMouseButton: function(e) {\n\t\t\tif (e.touches !== void 0) {\n\t\t\t\t/* touchイベントだった場合 */\n\t\t\t\treturn e.touches.length === 1 ? \"left\" : \"\";\n\t\t\t} else if (!!e.pointerType && e.pointerType !== \"mouse\") {\n\t\t\t\t/* pointerイベントだった場合 */\n\t\t\t\treturn e.isPrimary ? \"left\" : \"\";\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t[\"left\", \"middle\", \"right\"][\n\t\t\t\t\te.button !== void 0 ? e.button : e.which - 1\n\t\t\t\t] || \"\"\n\t\t\t);\n\t\t},\n\n\t\t//----------------------------------------------------------------------\n\t\t// pzpr.util.getPagePos() イベントが起こったページ上の座標を返す\n\t\t// pzpr.util.pageX()      イベントが起こったページ上のX座標を返す\n\t\t// pzpr.util.pageY()      イベントが起こったページ上のY座標を返す\n\t\t//----------------------------------------------------------------------\n\t\tgetPagePos: function(e) {\n\t\t\treturn { px: this.pageX(e), py: this.pageY(e) };\n\t\t},\n\t\tpageX: function(e) {\n\t\t\tif (e.touches !== void 0 && e.touches.length > 0) {\n\t\t\t\tvar len = e.touches.length,\n\t\t\t\t\tpos = 0;\n\t\t\t\tif (len > 0) {\n\t\t\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t\t\tpos += e.touches[i].pageX;\n\t\t\t\t\t}\n\t\t\t\t\treturn pos / len;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn e.pageX || 0;\n\t\t},\n\t\tpageY: function(e) {\n\t\t\tif (e.touches !== void 0 && e.touches.length > 0) {\n\t\t\t\tvar len = e.touches.length,\n\t\t\t\t\tpos = 0;\n\t\t\t\tif (len > 0) {\n\t\t\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t\t\tpos += e.touches[i].pageY;\n\t\t\t\t\t}\n\t\t\t\t\treturn pos / len;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn e.pageY || 0;\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// pzpr.util.getRect()   エレメントの四辺の座標を返す\n\t\t//--------------------------------------------------------------------------------\n\t\tgetRect: function(el) {\n\t\t\tif (!pzpr.env.browser) {\n\t\t\t\treturn { top: 0, bottom: 0, left: 0, right: 0, height: 0, width: 0 };\n\t\t\t}\n\t\t\tvar rect = el.getBoundingClientRect(),\n\t\t\t\tscrollLeft,\n\t\t\t\tscrollTop;\n\t\t\tif (window.scrollX !== void 0) {\n\t\t\t\tscrollLeft = window.scrollX;\n\t\t\t\tscrollTop = window.scrollY;\n\t\t\t} else {\n\t\t\t\t/* IE11以下向け */\n\t\t\t\tvar _html = document.documentElement;\n\t\t\t\tscrollLeft = _html.scrollLeft;\n\t\t\t\tscrollTop = _html.scrollTop;\n\t\t\t}\n\t\t\tvar left = rect.left + scrollLeft;\n\t\t\tvar top = rect.top + scrollTop;\n\t\t\tvar right = rect.right + scrollLeft;\n\t\t\tvar bottom = rect.bottom + scrollTop;\n\t\t\treturn {\n\t\t\t\ttop: top,\n\t\t\t\tbottom: bottom,\n\t\t\t\tleft: left,\n\t\t\t\tright: right,\n\t\t\t\theight: bottom - top,\n\t\t\t\twidth: right - left\n\t\t\t};\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pzpr.util.checkpid()  メニューなどが表示対象のパズルかどうか返す\n\t\t//---------------------------------------------------------------------------\n\t\tcheckpid: function(str, pid) {\n\t\t\tvar matches = str.match(/!?[a-z0-9-]+/g),\n\t\t\t\tisdisp = true;\n\t\t\tif (!!matches) {\n\t\t\t\tisdisp = false;\n\t\t\t\tfor (var i = 0; i < matches.length; i++) {\n\t\t\t\t\tif (matches[i].charAt(0) !== \"!\") {\n\t\t\t\t\t\tif (matches[i] === pid) {\n\t\t\t\t\t\t\tisdisp = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tisdisp = matches[i].substr(1) !== pid;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn isdisp;\n\t\t}\n\t};\n})();\n","// Puzzle.js v3.6.0\n\n(function() {\n\t//---------------------------------------------------------------------------\n\t// ★Puzzleクラス ぱずぷれv3のベース処理やその他の処理を行う\n\t//---------------------------------------------------------------------------\n\tpzpr.Puzzle = function(canvas, option) {\n\t\tthis.pzpr = pzpr;\n\n\t\tif (option === void 0 && (!canvas || !canvas.parentNode)) {\n\t\t\toption = canvas;\n\t\t\tcanvas = void 0;\n\t\t}\n\t\toption = option || {};\n\n\t\tthis.instancetype = option.type || \"editor\";\n\t\tvar modeid = { player: 1, viewer: 2 }[this.instancetype || 0] || 0;\n\t\tthis.playeronly = !!modeid; // 回答モードのみで動作する\n\t\tthis.editmode = !this.playeronly; // 問題配置モード\n\t\tthis.playmode = !this.editmode; // 回答モード\n\n\t\tthis.resetTime();\n\n\t\tthis.preInitCanvasInfo = {\n\t\t\ttype: option.graphic || \"\",\n\t\t\twidth: option.width || null,\n\t\t\theight: option.height || null,\n\t\t\tcellsize: option.cellsize || null\n\t\t};\n\n\t\tthis.listeners = {};\n\n\t\tthis.metadata = new pzpr.MetaData();\n\n\t\tthis.config = new this.Config(this);\n\t\tif (option.config !== void 0) {\n\t\t\tthis.config.setAll(option.config);\n\t\t}\n\t\tif (option.mode !== void 0) {\n\t\t\tthis.setMode(option.mode);\n\t\t}\n\t\tif (option.variant !== void 0) {\n\t\t\tthis.config.set(\"variant\", true);\n\t\t}\n\n\t\tif (!!canvas) {\n\t\t\tthis.setCanvas(canvas);\n\t\t}\n\n\t\tpzpr.classmgr.setClasses(this, \"\");\n\t\tinitObjects(this);\n\t};\n\tpzpr.Puzzle.prototype = {\n\t\tpid: null, // パズルのID(\"creek\"など)\n\t\tinfo: {}, // VarietyInfoへの参照\n\n\t\tklass: null,\n\n\t\tready: false, // 盤面の準備ができたかを示す (Canvas準備完了前にtrueになる)\n\t\teditmode: false, // 問題配置モード\n\t\tplaymode: false, // 回答モード\n\t\tplayeronly: false, // 回答モードのみで動作する\n\t\tinstancetype: \"\", // editpr/player/viewerのいずれか\n\n\t\tstarttime: 0,\n\n\t\tcanvas: null, // 描画canvas本体\n\t\tsubcanvas: null, // 補助canvas\n\n\t\tlisteners: null,\n\n\t\tconfig: null,\n\n\t\tmetadata: null, // 作者やコメントなどの情報\n\n\t\t// モード設定用定数\n\t\tMODE_EDITOR: 1,\n\t\tMODE_PLAYER: 3,\n\n\t\t//---------------------------------------------------------------------------\n\t\t// owner.open()    パズルデータを入力して盤面の初期化を行う\n\t\t//---------------------------------------------------------------------------\n\t\topen: function(data, variety, callback) {\n\t\t\topenExecute(this, data, variety, callback);\n\t\t\treturn this;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// owner.on()   イベントが発生した時に呼ぶ関数を登録する\n\t\t// owner.once() イベントが発生した時に1回だけ呼ぶ関数を登録する\n\t\t// owner.addListener() on, onceの共通処理\n\t\t// owner.emit() イベントが発生した時に呼ぶ関数を実行する\n\t\t//---------------------------------------------------------------------------\n\t\ton: function(eventname, func) {\n\t\t\tthis.addListener(eventname, func, false);\n\t\t},\n\t\tonce: function(eventname, func) {\n\t\t\tthis.addListener(eventname, func, true);\n\t\t},\n\t\taddListener: function(eventname, func, once) {\n\t\t\tif (!this.listeners[eventname]) {\n\t\t\t\tthis.listeners[eventname] = [];\n\t\t\t}\n\t\t\tthis.listeners[eventname].push({ func: func, once: !!once });\n\t\t},\n\t\temit: function() {\n\t\t\tvar args = Array.prototype.slice.apply(arguments),\n\t\t\t\teventname = args.shift();\n\t\t\tvar evlist = this.listeners[eventname];\n\t\t\tif (!!evlist) {\n\t\t\t\targs.unshift(this);\n\t\t\t\tfor (var i = 0; i < evlist.length; i++) {\n\t\t\t\t\tvar ev = evlist[i];\n\t\t\t\t\tif (evlist[i].once) {\n\t\t\t\t\t\tevlist.splice(i, 1);\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\t\t\t\t\tev.func.apply(this, args);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// owner.setCanvas()  描画キャンバスをセットする\n\t\t//---------------------------------------------------------------------------\n\t\tsetCanvas: function(el, type) {\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar rect = pzpr.util.getRect(el);\n\t\t\tvar _div = document.createElement(\"div\");\n\t\t\t_div.style.width = rect.width + \"px\";\n\t\t\t_div.style.height = rect.height + \"px\";\n\t\t\tel.appendChild(_div);\n\t\t\tthis.canvas = _div;\n\n\t\t\tsetCanvas_main(this, type || this.preInitCanvasInfo.type);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// owner.setCanvasSize()           盤面のサイズを設定する\n\t\t// owner.setCanvasSizeByCellSize() セルのサイズを指定して盤面のサイズを設定する\n\t\t//---------------------------------------------------------------------------\n\t\tsetCanvasSize: function(width, height) {\n\t\t\tif (!this.preInitCanvasInfo) {\n\t\t\t\tthis.painter.resizeCanvas(width, height);\n\t\t\t} else {\n\t\t\t\tthis.preInitCanvasInfo.width = width;\n\t\t\t\tthis.preInitCanvasInfo.height = height;\n\t\t\t}\n\t\t},\n\t\tsetCanvasSizeByCellSize: function(cellsize) {\n\t\t\tif (!this.preInitCanvasInfo) {\n\t\t\t\tthis.painter.resizeCanvasByCellSize(cellsize);\n\t\t\t} else {\n\t\t\t\tthis.preInitCanvasInfo.cellsize = cellsize;\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// owner.redraw()      盤面の再描画を行う\n\t\t// owner.irowake()     色分けをする場合、色をふり直すルーチンを呼び出す\n\t\t//---------------------------------------------------------------------------\n\t\tredraw: function(forcemode) {\n\t\t\tif (!forcemode) {\n\t\t\t\tthis.painter.paintAll();\n\t\t\t} // 盤面キャッシュを保持して再描画\n\t\t\telse {\n\t\t\t\tthis.painter.resizeCanvas();\n\t\t\t} // 盤面キャッシュを破棄して再描画\n\t\t},\n\t\tirowake: function() {\n\t\t\tthis.board.irowakeRemake();\n\t\t\tif (this.execConfig(\"irowake\") || this.execConfig(\"irowakeblk\")) {\n\t\t\t\tthis.redraw();\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// owner.toDataURL() 盤面画像をDataURLとして出力する\n\t\t// owner.toBlob()    盤面画像をBlobとして出力する\n\t\t// owner.toBuffer()  盤面画像をファイルデータそのままで出力する\n\t\t//---------------------------------------------------------------------------\n\t\ttoDataURL: function(type, quality, option) {\n\t\t\tvar imageopt = parseImageOption(type, quality, option);\n\t\t\tvar canvas = getLocalCanvas(this, imageopt);\n\t\t\tvar dataurl = canvas.toDataURL(imageopt.mimetype, imageopt.quality);\n\t\t\tif (!!canvas.parentNode) {\n\t\t\t\tcanvas.parentNode.removeChild(canvas);\n\t\t\t}\n\t\t\treturn dataurl;\n\t\t},\n\t\ttoBlob: function(callback, type, quality, option) {\n\t\t\tvar imageopt = parseImageOption(type, quality, option);\n\t\t\tvar canvas = getLocalCanvas(this, imageopt);\n\t\t\tcanvas.toBlob(\n\t\t\t\tfunction(blob) {\n\t\t\t\t\tcallback(blob);\n\t\t\t\t\tif (!!canvas.parentNode) {\n\t\t\t\t\t\tcanvas.parentNode.removeChild(canvas);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\timageopt.mimetype,\n\t\t\t\timageopt.quality\n\t\t\t);\n\t\t},\n\t\ttoBuffer: function(type, quality, option) {\n\t\t\tvar imageopt = parseImageOption(type, quality, option);\n\t\t\tvar canvas = getLocalCanvas(this, imageopt);\n\t\t\tvar data = canvas.toBuffer(imageopt.mimetype, imageopt.quality);\n\t\t\tif (!!canvas.parentNode) {\n\t\t\t\tcanvas.parentNode.removeChild(canvas);\n\t\t\t}\n\t\t\treturn data;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// owner.getURL()      URLを取得する\n\t\t// owner.getFileData() ファイルデータを取得する\n\t\t//---------------------------------------------------------------------------\n\t\tgetURL: function(type, mode) {\n\t\t\treturn new this.klass.Encode().encodeURL(type, mode);\n\t\t},\n\t\tgetFileData: function(type, option) {\n\t\t\treturn new this.klass.FileIO().fileencode(type, option);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// owner.resetTime()      開始時間をリセットする\n\t\t// owner.getTime()        開始からの時間をミリ秒単位で取得する\n\t\t//---------------------------------------------------------------------------\n\t\tresetTime: function() {\n\t\t\tthis.starttime = pzpr.util.currentTime();\n\t\t},\n\t\tgetTime: function() {\n\t\t\treturn pzpr.util.currentTime() - this.starttime;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// owner.undo()  Undoを実行する\n\t\t// owner.redo()  Redoを実行する\n\t\t// owner.undoall()  Undoを最後まで実行する\n\t\t// owner.redoall()  Redoを最後まで実行する\n\t\t// owner.isModified() ファイルに保存されていない操作がある時にtrueを返す\n\t\t// owner.saved()      ismodifiedで返す値をfalseに戻す\n\t\t//---------------------------------------------------------------------------\n\t\tundo: function() {\n\t\t\treturn this.opemgr.undo();\n\t\t},\n\t\tredo: function() {\n\t\t\treturn this.opemgr.redo();\n\t\t},\n\t\tundoall: function() {\n\t\t\twhile (this.opemgr.undo()) {}\n\t\t},\n\t\tredoall: function() {\n\t\t\twhile (this.opemgr.redo()) {}\n\t\t},\n\t\tismodified: function() {\n\t\t\treturn this.opemgr.isModified();\n\t\t},\n\t\tsaved: function() {\n\t\t\treturn this.opemgr.resetModifiedState();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// puzzle.enterTrial()      TrialModeに設定する (多重設定可能)\n\t\t// puzzle.acceptTrial()     TrialModeを確定する\n\t\t// puzzle.rejectTrial()     TrialModeの履歴をすべて破棄する\n\t\t// puzzle.rejectCurrentTrial() TrialModeの現在の履歴を破棄して一つ前のTrial mode stageに戻る\n\t\t//---------------------------------------------------------------------------\n\t\tenterTrial: function() {\n\t\t\tthis.opemgr.enterTrial();\n\t\t},\n\t\tacceptTrial: function() {\n\t\t\tthis.opemgr.acceptTrial();\n\t\t},\n\t\trejectTrial: function() {\n\t\t\tthis.opemgr.rejectTrial(true);\n\t\t},\n\t\trejectCurrentTrial: function() {\n\t\t\tthis.opemgr.rejectTrial(false);\n\t\t},\n\n\t\t//------------------------------------------------------------------------------\n\t\t// owner.check()          正答判定処理を行う\n\t\t//------------------------------------------------------------------------------\n\t\tcheck: function(activemode) {\n\t\t\tif (!!activemode) {\n\t\t\t\tthis.key.keyreset();\n\t\t\t\tthis.mouse.mousereset();\n\t\t\t}\n\t\t\treturn this.checker.check(activemode);\n\t\t},\n\n\t\t//------------------------------------------------------------------------------\n\t\t// owner.ansclear()       回答を消去する\n\t\t// owner.subclear()       補助記号を消去する\n\t\t// owner.errclear()       エラー表示を消去する\n\t\t// owner.clear()          回答・履歴を消去する\n\t\t//------------------------------------------------------------------------------\n\t\tansclear: function() {\n\t\t\tthis.board.ansclear();\n\t\t\tthis.board.rebuildInfo();\n\t\t\tthis.redraw();\n\t\t},\n\t\tsubclear: function() {\n\t\t\tthis.board.subclear();\n\t\t\tthis.redraw();\n\t\t},\n\t\terrclear: function() {\n\t\t\tvar isclear = this.board.errclear();\n\t\t\tif (isclear) {\n\t\t\t\tthis.redraw(true); /* 描画キャッシュを破棄して描画し直す */\n\t\t\t}\n\t\t\treturn isclear;\n\t\t},\n\t\tclear: function() {\n\t\t\tif (this.playeronly) {\n\t\t\t\tthis.ansclear();\n\t\t\t\tthis.opemgr.allerase();\n\t\t\t} else {\n\t\t\t\tthis.board.initBoardSize();\n\t\t\t\tthis.redraw();\n\t\t\t}\n\t\t},\n\n\t\t//------------------------------------------------------------------------------\n\t\t// owner.setMode() モード変更時の処理を行う\n\t\t//------------------------------------------------------------------------------\n\t\tsetMode: function(newval) {\n\t\t\tif (this.playeronly) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (typeof newval === \"string\") {\n\t\t\t\tnewval = { edit: 1, play: 3 }[newval.substr(0, 4)];\n\t\t\t\tif (newval === void 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.editmode = newval === this.MODE_EDITOR;\n\t\t\tthis.playmode = !this.editmode;\n\n\t\t\tif (!!this.klass) {\n\t\t\t\tthis.cursor.adjust_modechange();\n\t\t\t\tthis.key.keyreset();\n\t\t\t\tthis.mouse.modechange();\n\t\t\t\tthis.board.errclear();\n\t\t\t\tthis.redraw();\n\t\t\t}\n\n\t\t\tthis.emit(\"config\", \"mode\", newval);\n\t\t\tthis.emit(\"mode\");\n\t\t},\n\n\t\t//------------------------------------------------------------------------------\n\t\t// owner.getConfig()  設定値の取得を行う\n\t\t// owner.setConfig()  設定値の設定を行う\n\t\t// owner.resetConfig()設定値を初期値に戻す\n\t\t// owner.validConfig() 設定値が現在のパズルで有効な設定値かどうか返す\n\t\t// owner.execConfig() 設定値と、パズルごとに有効かどうかの条件をANDして返す\n\t\t//------------------------------------------------------------------------------\n\t\tgetConfig: function(idname) {\n\t\t\treturn this.config.get(idname);\n\t\t},\n\t\tsetConfig: function(idname, val) {\n\t\t\treturn this.config.set(idname, val);\n\t\t},\n\t\tresetConfig: function(idname) {\n\t\t\treturn this.config.reset(idname);\n\t\t},\n\t\tvalidConfig: function(idname) {\n\t\t\treturn this.config.getexec(idname);\n\t\t},\n\t\texecConfig: function(idname) {\n\t\t\treturn this.config.get(idname) && this.config.getexec(idname);\n\t\t},\n\n\t\t//------------------------------------------------------------------------------\n\t\t// owner.getCurrentConfig() 現在有効な設定と設定値を返す\n\t\t// owner.saveConfig()     設定値の保存を行う\n\t\t// owner.restoreConfig()  設定値の復帰を行う\n\t\t//------------------------------------------------------------------------------\n\t\tgetCurrentConfig: function() {\n\t\t\treturn this.config.getList();\n\t\t},\n\t\tsaveConfig: function() {\n\t\t\treturn this.config.getAll();\n\t\t},\n\t\trestoreConfig: function(obj) {\n\t\t\tthis.config.setAll(obj);\n\t\t}\n\t};\n\n\t//---------------------------------------------------------------------------\n\t//  openExecute()      各オブジェクトの生成などの処理\n\t//---------------------------------------------------------------------------\n\tfunction openExecute(puzzle, data, variety, callback) {\n\t\tif (typeof variety !== \"string\" && !callback) {\n\t\t\tcallback = variety;\n\t\t\tvariety = void 0;\n\t\t}\n\n\t\tpuzzle.ready = false;\n\n\t\tvar classes = puzzle.klass;\n\t\tvar Board = !!classes && !!classes.Board ? classes.Board : null;\n\t\tvar pzl = pzpr.parser(data, variety || puzzle.pid);\n\n\t\tpzpr.classmgr.setPuzzleClass(puzzle, pzl.pid, function() {\n\t\t\t/* パズルの種類が変わっていればオブジェクトを設定しなおす */\n\t\t\tif (Board !== puzzle.klass.Board) {\n\t\t\t\tinitObjects(puzzle);\n\t\t\t} else {\n\t\t\t\tpuzzle.painter.suspendAll();\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tpuzzle.metadata.reset();\n\t\t\t\tif (pzl.isurl) {\n\t\t\t\t\tnew puzzle.klass.Encode().decodeURL(pzl);\n\t\t\t\t} else if (pzl.isfile) {\n\t\t\t\t\tnew puzzle.klass.FileIO().filedecode(pzl);\n\t\t\t\t}\n\n\t\t\t\tpuzzle.ready = true;\n\t\t\t\tpuzzle.emit(\"ready\");\n\t\t\t\tpuzzle.emit(\"mode\");\n\n\t\t\t\tif (!!puzzle.canvas) {\n\t\t\t\t\tpostCanvasReady(puzzle);\n\t\t\t\t}\n\n\t\t\t\tpuzzle.resetTime();\n\n\t\t\t\tif (!!callback) {\n\t\t\t\t\tcallback(puzzle);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tpuzzle.emit(\"fail-open\");\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t});\n\t}\n\n\t//---------------------------------------------------------------------------\n\t//  initObjects()      各オブジェクトの生成などの処理\n\t//---------------------------------------------------------------------------\n\tfunction initObjects(puzzle) {\n\t\tvar classes = puzzle.klass;\n\n\t\t// クラス初期化\n\t\tpuzzle.board = new classes.Board(); // 盤面オブジェクト\n\t\tpzpr.classmgr.setPrototypeRef(puzzle, \"board\", puzzle.board);\n\n\t\tpuzzle.checker = new classes.AnsCheck(); // 正解判定オブジェクト\n\t\tpuzzle.painter = new classes.Graphic(); // 描画系オブジェクト\n\n\t\tpuzzle.cursor = new classes.TargetCursor(); // 入力用カーソルオブジェクト\n\t\tpuzzle.mouse = new classes.MouseEvent(); // マウス入力オブジェクト\n\t\tpuzzle.key = new classes.KeyEvent(); // キーボード入力オブジェクト\n\n\t\tpuzzle.opemgr = new classes.OperationManager(); // 操作情報管理オブジェクト\n\n\t\tpuzzle.faillist = new classes.FailCode(); // 正答判定文字列を保持するオブジェクト\n\t}\n\n\t//---------------------------------------------------------------------------\n\t//  setCanvas_main()  描画キャンバスをセットする\n\t//  createSubCanvas() 補助キャンバスを作成する\n\t//---------------------------------------------------------------------------\n\tfunction setCanvas_main(puzzle, type) {\n\t\t/* fillTextが使えない場合は強制的にSVG描画に変更する */\n\t\tif (\n\t\t\ttype === \"canvas\" &&\n\t\t\t!!pzpr.Candle.enable.canvas &&\n\t\t\t!CanvasRenderingContext2D.prototype.fillText\n\t\t) {\n\t\t\ttype = \"svg\";\n\t\t}\n\n\t\tpzpr.Candle.start(puzzle.canvas, type, function(g) {\n\t\t\tpzpr.util.unselectable(g.canvas);\n\t\t\tg.child.style.pointerEvents = \"none\";\n\t\t\tif (g.use.canvas && !puzzle.subcanvas) {\n\t\t\t\tvar canvas = (puzzle.subcanvas = createSubCanvas(\"canvas\"));\n\t\t\t\tif (!!document.body) {\n\t\t\t\t\tcanvas.id =\n\t\t\t\t\t\t\"_\" + new Date().getTime() + type; /* 何か他とかぶらないようなID */\n\t\t\t\t\tcanvas.style.position = \"absolute\";\n\t\t\t\t\tcanvas.style.left = \"-10000px\";\n\t\t\t\t\tcanvas.style.top = \"0px\";\n\t\t\t\t\tdocument.body.appendChild(canvas);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (puzzle.ready) {\n\t\t\t\tpostCanvasReady(puzzle);\n\t\t\t}\n\t\t});\n\t}\n\tfunction createSubCanvas(type) {\n\t\tif (!pzpr.Candle.enable[type]) {\n\t\t\treturn null;\n\t\t}\n\t\tvar el = document.createElement(\"div\");\n\t\tpzpr.Candle.start(el, type);\n\t\treturn el;\n\t}\n\n\t//---------------------------------------------------------------------------\n\t//  postCanvasReady()  Canvas設定＆ready後の初期化処理を行う\n\t//---------------------------------------------------------------------------\n\tfunction postCanvasReady(puzzle) {\n\t\tvar pc = puzzle.painter,\n\t\t\topt = puzzle.preInitCanvasInfo;\n\n\t\tif (puzzle.preInitCanvasInfo) {\n\t\t\tif (puzzle.instancetype !== \"viewer\") {\n\t\t\t\tsetCanvasEvents(puzzle);\n\t\t\t} else {\n\t\t\t\tpc.outputImage = true;\n\t\t\t}\n\t\t\tif (!pc.canvasWidth || !pc.canvasHeight) {\n\t\t\t\tif (!!opt.width && !!opt.height) {\n\t\t\t\t\tpc.resizeCanvas(opt.width, opt.height);\n\t\t\t\t} else if (!!opt.cellsize) {\n\t\t\t\t\tpc.resizeCanvasByCellSize(opt.cellsize);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdelete puzzle.preInitCanvasInfo;\n\t\t}\n\n\t\tpc.initCanvas();\n\t}\n\n\t//---------------------------------------------------------------------------\n\t//  setCanvasEvents() マウス入力に関するイベントを設定する\n\t//  exec????()        マウス入力へ分岐する(puzzle.mouseが不変でないためバイパスする)\n\t//---------------------------------------------------------------------------\n\tfunction setCanvasEvents(puzzle) {\n\t\tfunction ae(type, func) {\n\t\t\tpzpr.util.addEvent(puzzle.canvas, type, puzzle, func);\n\t\t}\n\n\t\t// マウス入力イベントの設定\n\t\tae(\"mousedown\", execMouseDown);\n\t\tae(\"mousemove\", execMouseMove);\n\t\tae(\"mouseup\", execMouseUp);\n\t\tae(\"mousecancel\", execMouseCancel);\n\t\tpuzzle.canvas.oncontextmenu = function() {\n\t\t\treturn false;\n\t\t};\n\t\tpuzzle.canvas.style.touchAction = \"pinch-zoom\";\n\n\t\t// キー入力イベントの設定\n\t\tae(\"keydown\", execKeyDown);\n\t\tae(\"keyup\", execKeyUp);\n\n\t\tae(\"click\", function(e) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t});\n\t}\n\tfunction execMouseDown(e) {\n\t\tif (!!this.mouse) {\n\t\t\tthis.mouse.e_mousedown(e);\n\t\t}\n\t}\n\tfunction execMouseMove(e) {\n\t\tif (!!this.mouse) {\n\t\t\tthis.mouse.e_mousemove(e);\n\t\t}\n\t}\n\tfunction execMouseUp(e) {\n\t\tif (!!this.mouse) {\n\t\t\tthis.mouse.e_mouseup(e);\n\t\t}\n\t}\n\tfunction execMouseCancel(e) {\n\t\tif (!!this.mouse) {\n\t\t\tthis.mouse.e_mousecancel(e);\n\t\t}\n\t}\n\tfunction execKeyDown(e) {\n\t\tif (!!this.key) {\n\t\t\tthis.key.e_keydown(e);\n\t\t}\n\t}\n\tfunction execKeyUp(e) {\n\t\tif (!!this.key) {\n\t\t\tthis.key.e_keyup(e);\n\t\t}\n\t}\n\n\t//---------------------------------------------------------------------------\n\t//  generateLocalCanvas()  toDataURL, toBlobの共通処理\n\t//---------------------------------------------------------------------------\n\tfunction getLocalCanvas(puzzle, imageopt) {\n\t\tvar imgcanvas = createSubCanvas(imageopt.type);\n\n\t\tvar pc2 = new puzzle.klass.Graphic();\n\t\tpc2.context = imgcanvas.getContext(\"2d\");\n\t\tpc2.context.enableTextLengthWA = false;\n\t\tpc2.outputImage = true; /* 一部画像出力時に描画しないオブジェクトがあるパズル向け設定 */\n\t\tif (\"bgcolor\" in imageopt) {\n\t\t\tpc2.bgcolor = imageopt.bgcolor;\n\t\t}\n\t\tif (puzzle.pid === \"kramma\") {\n\t\t\tpc2.imgtile = puzzle.painter.imgtile;\n\t\t}\n\n\t\t// canvasの設定を適用して、再描画\n\t\tpc2.resizeCanvasByCellSize(imageopt.cellsize);\n\t\tpc2.unsuspend();\n\n\t\treturn imgcanvas;\n\t}\n\n\t//---------------------------------------------------------------------------\n\t//  generateLocalCanvas()  toDataURL, toBlobの入力オプション解析処理\n\t//---------------------------------------------------------------------------\n\tfunction parseImageOption() {\n\t\t// (type,quality,option)のはず\n\t\tvar imageopt = {};\n\t\tvar type = pzpr.Candle.current;\n\t\tvar cellsize = null,\n\t\t\tbgcolor = null,\n\t\t\tquality = null;\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar argv = arguments[i];\n\t\t\tswitch (typeof argv) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\ttype = argv;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"number\":\n\t\t\t\t\tif (argv > 1.01) {\n\t\t\t\t\t\tcellsize = argv;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tquality = argv;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif (\"cellsize\" in argv) {\n\t\t\t\t\t\tcellsize = argv.cellsize;\n\t\t\t\t\t}\n\t\t\t\t\tif (\"bgcolor\" in argv) {\n\t\t\t\t\t\tbgcolor = argv.bgcolor;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\timageopt.type = (type || pzpr.Candle.current).match(/svg/)\n\t\t\t? \"svg\"\n\t\t\t: \"canvas\";\n\t\timageopt.mimetype =\n\t\t\timageopt.type !== \"svg\" ? \"image/\" + type : \"image/svg+xml\";\n\t\tif (quality !== null && quality !== void 0) {\n\t\t\timageopt.quality = quality;\n\t\t}\n\n\t\tif (cellsize !== null) {\n\t\t\timageopt.cellsize = cellsize;\n\t\t}\n\t\tif (bgcolor !== null) {\n\t\t\timageopt.bgcolor = bgcolor;\n\t\t}\n\n\t\treturn imageopt;\n\t}\n})();\n","// Config.js v3.4.1\n\n(function() {\n\t//---------------------------------------------------------------------------\n\t// ★Configクラス 設定値の値などを保持する\n\t//---------------------------------------------------------------------------\n\tvar Config = (pzpr.Puzzle.prototype.Config = function(puzzle) {\n\t\tthis.puzzle = puzzle;\n\t\tthis.init();\n\t});\n\tConfig.prototype = {\n\t\tlist: null /* 設定値 */,\n\n\t\t//---------------------------------------------------------------------------\n\t\t// config.init()        各設定値を初期化する\n\t\t// config.add()         初期化時に設定を追加する\n\t\t//---------------------------------------------------------------------------\n\t\tinit: function() {\n\t\t\tthis.list = {};\n\n\t\t\t/* 盤面表示設定 */\n\t\t\tthis.add(\"font\", 1, {\n\t\t\t\toption: [1, 2]\n\t\t\t}); /* 文字の描画 1:ゴシック 2:明朝 */\n\t\t\tthis.add(\"cursor\", true); /* カーソルの表示 */\n\t\t\tthis.add(\"trialmarker\", true); /* show trial marker */\n\t\t\tthis.add(\"irowake\", false, { variety: true }); /* 線の色分け */\n\t\t\tthis.add(\"irowakeblk\", false, { variety: true }); /* 黒マスの色分け */\n\n\t\t\tthis.add(\"dispmove\", true); /* 線で動かすパズルで実際に動いたように描画 */\n\t\t\tthis.add(\"disptype_yajilin\", 1, {\n\t\t\t\toption: [1, 2]\n\t\t\t}); /* yajilin: 表示形式 */\n\t\t\tthis.add(\"disptype_bosanowa\", 1, {\n\t\t\t\toption: [1, 2, 3]\n\t\t\t}); /* bosanowa: 表示形式 */\n\t\t\tthis.add(\"disptype_interbd\", 3, {\n\t\t\t\toption: [1, 2, 3]\n\t\t\t}); /* interbd: Clue display mode */\n\t\t\tthis.add(\"snakebd\", false); /* hebi: へびの境界線を表示する */\n\t\t\tthis.add(\"dispqnumbg\", false); /* yinyang: 問題のまるに背景色をつける */\n\t\t\tthis.add(\"undefcell\", true); /* shugaku: 未確定マスはグレー表示にする */\n\n\t\t\tthis.add(\"squarecell\", true); /* セルは正方形にする */\n\n\t\t\t/* 入力方法設定 */\n\t\t\tthis.add(\"use\", !pzpr.env.API.touchevent ? 1 : 2, {\n\t\t\t\toption: [1, 2]\n\t\t\t}); /* 黒マスの入力方法 */\n\t\t\tthis.add(\"use_tri\", 1, {\n\t\t\t\toption: [1, 2, 3]\n\t\t\t}); /* shakashaka: 三角形の入力方法 */\n\t\t\tthis.add(\n\t\t\t\t\"support_tri\",\n\t\t\t\ttrue\n\t\t\t); /* shakashaka: 三角形の入力補助 (for 2つ以上の壁に接したCell) */\n\n\t\t\tthis.add(\"bgcolor\", false); /* slither 背景色入力 */\n\t\t\tthis.add(\n\t\t\t\t\"singlenum\",\n\t\t\t\t!pzpr.env.API.touchevent\n\t\t\t); /* hanare: 部屋に回答数字を一つだけ入力 */\n\t\t\tthis.add(\"enline\", true); /* kouchoku: 線は点の間のみ引ける */\n\t\t\tthis.add(\"lattice\", true); /* kouchoku: 格子点チェック */\n\n\t\t\t/* 回答お助け機能 */\n\t\t\tthis.add(\"autocmp\", true, {\n\t\t\t\tvariety: true\n\t\t\t}); /* 数字 or kouchokuの正解の点をグレーにする */\n\t\t\tthis.add(\"autoerr\", false, {\n\t\t\t\tvariety: true\n\t\t\t}); /* hitori:ひとくれの重複した数字を表示, gokigen,wagiri:斜線の色分け */\n\n\t\t\t/* 正解判定 */\n\t\t\tthis.add(\"multierr\", false); /* エラー判定で複数エラーを出力する */\n\t\t\tthis.add(\n\t\t\t\t\"forceallcell\",\n\t\t\t\tfalse\n\t\t\t); /* fillomino: すべての数字が入っている時のみ正解とする */\n\n\t\t\t/* puzzle variant rules; must defaut to false */\n\t\t\tthis.add(\"dontpassallcell\", false, {\n\t\t\t\tvariant: true,\n\t\t\t\tvolatile: true\n\t\t\t}); /* arukone: don't require passing all cells */\n\t\t\tthis.add(\"aquarium_regions\", false, {\n\t\t\t\tvariant: true,\n\t\t\t\tvolatile: true\n\t\t\t}); /* aquarium: Rule variation for disconnected cells in one region */\n\t\t\tthis.add(\"country_empty\", false, { variant: true, volatile: true });\n\t\t\t/* generic variant */\n\t\t\tthis.add(\"variant\", false, { variant: true, volatile: true });\n\t\t\tthis.add(\"variantid\", \"\", { volatile: true });\n\n\t\t\t/* EDITORのみ */\n\t\t\tthis.add(\"discolor\", false); /* tentaisho: 色分け無効化 */\n\t\t\t/* その他の特殊項目(保存なし) */\n\t\t\tthis.add(\"uramashu\", false, { volatile: true }); /* 裏ましゅにする */\n\t\t},\n\t\tadd: function(name, defvalue, extoption) {\n\t\t\tif (!extoption) {\n\t\t\t\textoption = {};\n\t\t\t}\n\t\t\tvar item = {\n\t\t\t\tval: defvalue,\n\t\t\t\tdefval: defvalue,\n\t\t\t\tvolatile: !!extoption.volatile,\n\t\t\t\textoption: extoption // stored for the benefit of ui.MenuConfig\n\t\t\t};\n\t\t\tif (!!extoption.option) {\n\t\t\t\titem.option = extoption.option;\n\t\t\t}\n\t\t\tif (!!extoption.variety) {\n\t\t\t\titem.variety = {};\n\t\t\t}\n\t\t\tif (!!extoption.variant) {\n\t\t\t\titem.variant = true;\n\t\t\t}\n\t\t\tthis.list[name] = item;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// config.getCurrentName() 以前のconfig名から現在使用している名称を取得する\n\t\t// config.getNormalizedName() Config名が@付きだった場合varietyのpidを返す\n\t\t//---------------------------------------------------------------------------\n\t\tgetCurrentName: function(name) {\n\t\t\tswitch (name) {\n\t\t\t\tcase \"color_qanscolor\":\n\t\t\t\t\tname = \"color_shadecolor\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"autocmp_area\":\n\t\t\t\t\tif (this.getexec(\"autocmp\")) {\n\t\t\t\t\t\tname = \"autocmp\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"autocmp_border\":\n\t\t\t\t\tif (this.getexec(\"autocmp\")) {\n\t\t\t\t\t\tname = \"autocmp\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn name;\n\t\t},\n\t\tgetNormalizedName: function(argname) {\n\t\t\tvar info = { name: argname };\n\t\t\tif (argname.match(/\\@/)) {\n\t\t\t\tvar splitted = argname.split(/\\@/);\n\t\t\t\tinfo.name = splitted[0];\n\t\t\t\tvar pid = pzpr.variety.toPID(splitted[1]);\n\t\t\t\tif (!!pid) {\n\t\t\t\t\tinfo.pid = pid;\n\t\t\t\t}\n\t\t\t}\n\t\t\tinfo.name = this.getCurrentName(info.name);\n\t\t\treturn info;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// config.get()  各フラグの設定値を返す\n\t\t// config.set()  各フラグの設定値を設定する\n\t\t// config.reset()各フラグの設定値を初期値に戻す\n\t\t//---------------------------------------------------------------------------\n\t\tget: function(argname) {\n\t\t\tvar names = this.getNormalizedName(argname),\n\t\t\t\tname = names.name;\n\t\t\tvar item = this.list[name];\n\t\t\tif (!item) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (!!item.variety) {\n\t\t\t\tvar pid = names.pid !== void 0 ? names.pid : this.puzzle.pid;\n\t\t\t\tif (item.variety[pid] !== void 0) {\n\t\t\t\t\treturn item.variety[pid];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn item.val;\n\t\t},\n\t\tset: function(argname, newval) {\n\t\t\tvar names = this.getNormalizedName(argname),\n\t\t\t\tname = names.name;\n\t\t\tif (!this.list[name]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnewval = this.setproper(names, newval);\n\t\t\tthis.configevent(name, newval);\n\t\t\tthis.puzzle.emit(\"config\", name, newval);\n\t\t},\n\t\treset: function(argname) {\n\t\t\tvar names = this.getNormalizedName(argname);\n\t\t\tvar item = this.list[names.name];\n\t\t\tif (!item) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!!item.variety && !names.pid) {\n\t\t\t\titem.variety = {};\n\t\t\t\tthis.set(names.name, item.defval);\n\t\t\t} else {\n\t\t\t\tthis.set(argname, item.defval);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// config.getList()  現在有効な設定値のリストを返す\n\t\t//---------------------------------------------------------------------------\n\t\tgetList: function() {\n\t\t\tvar conf = {};\n\t\t\tfor (var idname in this.list) {\n\t\t\t\tif (this.getexec(idname)) {\n\t\t\t\t\tconf[idname] = this.get(idname);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn conf;\n\t\t},\n\n\t\tgetvariant: function(name) {\n\t\t\tvar item = this.list[name];\n\t\t\tif (!item) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn item.variant;\n\t\t},\n\t\tgetVariants: function() {\n\t\t\tvar conf = {};\n\t\t\tfor (var key in this.list) {\n\t\t\t\tvar item = this.list[key];\n\t\t\t\tif (!item.variant) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (this.getexec(key)) {\n\t\t\t\t\tconf[key] = this.get(key);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn conf;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// config.getAll()  全フラグの設定値を返す\n\t\t// config.setAll()  全フラグの設定値を設定する\n\t\t//---------------------------------------------------------------------------\n\t\tgetAll: function() {\n\t\t\tvar object = {};\n\t\t\tfor (var key in this.list) {\n\t\t\t\tvar item = this.list[key];\n\t\t\t\tif (item.volatile) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (item.val !== item.defval) {\n\t\t\t\t\tobject[key] = item.val;\n\t\t\t\t}\n\t\t\t\tif (!item.variety) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tfor (var pid in item.variety) {\n\t\t\t\t\tif (item.variety[pid] !== item.defval) {\n\t\t\t\t\t\tobject[key + \"@\" + pid] = item.variety[pid];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn object;\n\t\t},\n\t\tsetAll: function(settings) {\n\t\t\tthis.init();\n\t\t\tfor (var key in settings) {\n\t\t\t\tthis.set(key, settings[key]);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// config.setproper()    設定値の型を正しいものに変換して設定変更する\n\t\t//---------------------------------------------------------------------------\n\t\tsetproper: function(names, newval) {\n\t\t\tvar name = names.name;\n\t\t\tvar item = this.list[name];\n\t\t\tswitch (typeof item.defval) {\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tnewval = !!newval;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"number\":\n\t\t\t\t\tnewval = +newval;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"string\":\n\t\t\t\t\tnewval = \"\" + newval;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (!item.option || item.option.indexOf(newval) >= 0) {\n\t\t\t\tif (!!item.variety) {\n\t\t\t\t\tvar pid = names.pid !== void 0 ? names.pid : this.puzzle.pid;\n\t\t\t\t\tif (!!pid) {\n\t\t\t\t\t\titem.variety[pid] = newval;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\titem.val = newval;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn newval;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// config.getexec()  設定値を現在のパズルで有効かどうか返す\n\t\t//---------------------------------------------------------------------------\n\t\tgetexec: function(name) {\n\t\t\tvar puzzle = this.puzzle,\n\t\t\t\tpid = puzzle.pid,\n\t\t\t\tEDITOR = !puzzle.playeronly,\n\t\t\t\texec = false;\n\t\t\tswitch (name) {\n\t\t\t\tcase \"use\":\n\t\t\t\t\texec = puzzle.mouse.use;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"use_tri\":\n\t\t\t\t\texec = pid === \"shakashaka\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"support_tri\":\n\t\t\t\t\texec = pid === \"shakashaka\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"dispmove\":\n\t\t\t\t\texec = puzzle.board.linegraph.moveline;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"disptype_bosanowa\":\n\t\t\t\t\texec = pid === \"bosanowa\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"disptype_yajilin\":\n\t\t\t\t\texec = pid === \"yajilin\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"disptype_interbd\":\n\t\t\t\t\texec = pid === \"interbd\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"bgcolor\":\n\t\t\t\t\texec = pid === \"slither\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"irowake\":\n\t\t\t\t\texec = puzzle.painter.irowake;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"irowakeblk\":\n\t\t\t\t\texec = puzzle.painter.irowakeblk;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"snakebd\":\n\t\t\t\t\texec = pid === \"hebi\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"dispqnumbg\":\n\t\t\t\t\texec = pid === \"yinyang\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"undefcell\":\n\t\t\t\t\texec = pid === \"shugaku\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"autocmp\":\n\t\t\t\t\texec = !!puzzle.painter.autocmp;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"autoerr\":\n\t\t\t\t\texec = pid === \"hitori\" || pid === \"gokigen\" || pid === \"wagiri\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"singlenum\":\n\t\t\t\t\texec = pid === \"hanare\" || pid === \"putteria\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"enline\":\n\t\t\t\tcase \"lattice\":\n\t\t\t\t\texec = pid === \"kouchoku\" || pid === \"angleloop\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"discolor\":\n\t\t\t\t\texec = EDITOR && pid === \"tentaisho\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"uramashu\":\n\t\t\t\t\texec = pid === \"mashu\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"forceallcell\":\n\t\t\t\t\texec = pid === \"fillomino\" || pid === \"symmarea\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"dontpassallcell\":\n\t\t\t\t\texec = pid === \"arukone\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"aquarium_regions\":\n\t\t\t\t\texec = pid === \"aquarium\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"country_empty\":\n\t\t\t\t\texec = pid === \"country\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\texec = !!this.list[name];\n\t\t\t}\n\t\t\treturn exec;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// config.configevent()  設定変更時の動作を記述する\n\t\t//---------------------------------------------------------------------------\n\t\tconfigevent: function(name, newval) {\n\t\t\tvar puzzle = this.puzzle;\n\t\t\tif (!puzzle.klass || !this.getexec(name)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tswitch (name) {\n\t\t\t\tcase \"irowake\":\n\t\t\t\tcase \"irowakeblk\":\n\t\t\t\tcase \"dispmove\":\n\t\t\t\tcase \"cursor\":\n\t\t\t\tcase \"trialmarker\":\n\t\t\t\tcase \"undefcell\":\n\t\t\t\tcase \"autocmp\":\n\t\t\t\tcase \"autoerr\":\n\t\t\t\tcase \"aquarium_regions\":\n\t\t\t\tcase \"snakebd\":\n\t\t\t\tcase \"disptype_yajilin\":\n\t\t\t\tcase \"disptype_interbd\":\n\t\t\t\tcase \"dispqnumbg\":\n\t\t\t\t\tpuzzle.redraw();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"font\":\n\t\t\t\t\tpuzzle.painter.initFont();\n\t\t\t\t\tpuzzle.redraw();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"multierr\":\n\t\t\t\t\tpuzzle.checker.resetCache();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"disptype_bosanowa\":\n\t\t\t\t\tpuzzle.setCanvasSizeByCellSize(); /* セルのサイズを変えないために、この関数を引数なしで呼び出す */\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"uramashu\":\n\t\t\t\t\tpuzzle.board.revCircleConfig(newval);\n\t\t\t\t\tpuzzle.redraw();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n})();\n","// Address.js v3.4.1\n\npzpr.classmgr.makeCommon({\n\t//----------------------------------------------------------------------------\n\t// ★Positionクラス Address, Pieceクラスのベースクラス\n\t//---------------------------------------------------------------------------\n\tPosition: {\n\t\tbx: null,\n\t\tby: null,\n\n\t\t// 方向を表す定数\n\t\tNDIR: 0, // 方向なし\n\t\tUP: 1, // up, top\n\t\tDN: 2, // down, bottom\n\t\tLT: 3, // left\n\t\tRT: 4, // right\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pos.equals() 同じ位置にあるかどうか判定する\n\t\t//---------------------------------------------------------------------------\n\t\tequals: function(pos) {\n\t\t\treturn this.bx === pos.bx && this.by === pos.by;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pos.getaddr() 位置をAddressクラスのオブジェクトで取得する\n\t\t//---------------------------------------------------------------------------\n\t\tgetaddr: function() {\n\t\t\treturn new this.klass.Address(this.bx, this.by);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// relcell(), relcross(), relbd(), relexcell(), relobj() 相対位置に存在するオブジェクトを返す\n\t\t//---------------------------------------------------------------------------\n\t\trelcell: function(dx, dy) {\n\t\t\treturn this.board.getc(this.bx + dx, this.by + dy);\n\t\t},\n\t\trelcross: function(dx, dy) {\n\t\t\treturn this.board.getx(this.bx + dx, this.by + dy);\n\t\t},\n\t\trelbd: function(dx, dy) {\n\t\t\treturn this.board.getb(this.bx + dx, this.by + dy);\n\t\t},\n\t\trelexcell: function(dx, dy) {\n\t\t\treturn this.board.getex(this.bx + dx, this.by + dy);\n\t\t},\n\t\trelobj: function(dx, dy) {\n\t\t\treturn this.board.getobj(this.bx + dx, this.by + dy);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// reldirbd()  指定された方向にいるオブジェクトを返す\n\t\t//---------------------------------------------------------------------------\n\t\treldirbd: function(dir, dd) {\n\t\t\treturn this.getaddr()\n\t\t\t\t.movedir(dir, dd)\n\t\t\t\t.getb();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pos.draw() 盤面に自分の周囲を描画する\n\t\t// pos.drawaround() 盤面に自分の周囲1マスを含めて描画する\n\t\t//---------------------------------------------------------------------------\n\t\tdraw: function() {\n\t\t\tthis.puzzle.painter.paintRange(\n\t\t\t\tthis.bx - 1,\n\t\t\t\tthis.by - 1,\n\t\t\t\tthis.bx + 1,\n\t\t\t\tthis.by + 1\n\t\t\t);\n\t\t},\n\t\tdrawaround: function() {\n\t\t\tthis.puzzle.painter.paintRange(\n\t\t\t\tthis.bx - 3,\n\t\t\t\tthis.by - 3,\n\t\t\t\tthis.bx + 3,\n\t\t\t\tthis.by + 3\n\t\t\t);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pos.isinside() この場所が盤面内かどうか判断する\n\t\t//---------------------------------------------------------------------------\n\t\tisinside: function() {\n\t\t\tvar bd = this.board;\n\t\t\treturn (\n\t\t\t\tthis.bx >= bd.minbx &&\n\t\t\t\tthis.bx <= bd.maxbx &&\n\t\t\t\tthis.by >= bd.minby &&\n\t\t\t\tthis.by <= bd.maxby\n\t\t\t);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pos.getdir() 指定されたPositionがどの方向にいるか判定する\n\t\t// pos.getvert() 指定されたPositionが縦か横か判定する\n\t\t//---------------------------------------------------------------------------\n\t\tgetdir: function(pos, diff) {\n\t\t\tvar dx = pos.bx - this.bx,\n\t\t\t\tdy = pos.by - this.by;\n\t\t\tif (dx === 0 && dy === -diff) {\n\t\t\t\treturn this.UP;\n\t\t\t} else if (dx === 0 && dy === diff) {\n\t\t\t\treturn this.DN;\n\t\t\t} else if (dx === -diff && dy === 0) {\n\t\t\t\treturn this.LT;\n\t\t\t} else if (dx === diff && dy === 0) {\n\t\t\t\treturn this.RT;\n\t\t\t}\n\t\t\treturn this.NDIR;\n\t\t},\n\t\tgetvert: function(pos, diff) {\n\t\t\tvar dir = this.getdir(pos, diff);\n\t\t\tif (dir === this.UP || dir === this.DN) {\n\t\t\t\treturn true;\n\t\t\t} else if (dir === this.LT || dir === this.RT) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn void 0;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pos.getnb()         上下左右に隣接する境界線のIDを取得する\n\t\t// pos.getborderobj()  入力対象となる境界線オブジェクトを取得する\n\t\t//---------------------------------------------------------------------------\n\t\tgetnb: function(pos) {\n\t\t\tif (pos.bx - this.bx === 0 && pos.by - this.by === -2) {\n\t\t\t\treturn this.relbd(0, -1);\n\t\t\t} else if (pos.bx - this.bx === 0 && pos.by - this.by === 2) {\n\t\t\t\treturn this.relbd(0, 1);\n\t\t\t} else if (pos.bx - this.bx === -2 && pos.by - this.by === 0) {\n\t\t\t\treturn this.relbd(-1, 0);\n\t\t\t} else if (pos.bx - this.bx === 2 && pos.by - this.by === 0) {\n\t\t\t\treturn this.relbd(1, 0);\n\t\t\t}\n\t\t\treturn this.board.emptyborder;\n\t\t},\n\t\tgetborderobj: function(pos) {\n\t\t\tif (\n\t\t\t\t((pos.bx & 1) === 0 &&\n\t\t\t\t\tthis.bx === pos.bx &&\n\t\t\t\t\tMath.abs(this.by - pos.by) === 1) ||\n\t\t\t\t((pos.by & 1) === 0 &&\n\t\t\t\t\tthis.by === pos.by &&\n\t\t\t\t\tMath.abs(this.bx - pos.bx) === 1)\n\t\t\t) {\n\t\t\t\treturn (this.onborder() ? this : pos).getb();\n\t\t\t}\n\t\t\treturn this.board.nullobj;\n\t\t}\n\t},\n\n\t//----------------------------------------------------------------------------\n\t// ★Addressクラス (bx,by)座標を扱う\n\t//---------------------------------------------------------------------------\n\t\"Address:Position\": {\n\t\tinitialize: function(bx, by) {\n\t\t\tif (arguments.length >= 2) {\n\t\t\t\tthis.init(bx, by);\n\t\t\t}\n\t\t},\n\n\t\treset: function() {\n\t\t\tthis.bx = null;\n\t\t\tthis.by = null;\n\t\t},\n\t\tclone: function() {\n\t\t\treturn new this.constructor(this.bx, this.by);\n\t\t},\n\n\t\tset: function(addr) {\n\t\t\tthis.bx = addr.bx;\n\t\t\tthis.by = addr.by;\n\t\t\treturn this;\n\t\t},\n\t\tinit: function(bx, by) {\n\t\t\tthis.bx = bx;\n\t\t\tthis.by = by;\n\t\t\treturn this;\n\t\t},\n\t\tmove: function(dx, dy) {\n\t\t\tthis.bx += dx;\n\t\t\tthis.by += dy;\n\t\t\treturn this;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// oncell(), oncross(), onborder()  オブジェクトが存在する位置にいるかどうかを返す\n\t\t//---------------------------------------------------------------------------\n\t\toncell: function() {\n\t\t\treturn !!(this.bx & 1 && this.by & 1);\n\t\t},\n\t\toncross: function() {\n\t\t\treturn !!(!(this.bx & 1) && !(this.by & 1));\n\t\t},\n\t\tonborder: function() {\n\t\t\treturn !!((this.bx + this.by) & 1);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// getc(), getx(), getb(), getex(), getobj() Positionに存在するオブジェクトを返す\n\t\t//---------------------------------------------------------------------------\n\t\tgetc: function() {\n\t\t\treturn this.board.getc(this.bx, this.by);\n\t\t},\n\t\tgetx: function() {\n\t\t\treturn this.board.getx(this.bx, this.by);\n\t\t},\n\t\tgetb: function() {\n\t\t\treturn this.board.getb(this.bx, this.by);\n\t\t},\n\t\tgetex: function() {\n\t\t\treturn this.board.getex(this.bx, this.by);\n\t\t},\n\t\tgetobj: function() {\n\t\t\treturn this.board.getobj(this.bx, this.by);\n\t\t},\n\t\tgetDot: function() {\n\t\t\treturn this.board.getDot(this.bx, this.by);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// addr.movedir() 指定した方向に指定した数移動する\n\t\t//---------------------------------------------------------------------------\n\t\tmovedir: function(dir, dd) {\n\t\t\tswitch (dir) {\n\t\t\t\tcase this.UP:\n\t\t\t\t\tthis.by -= dd;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.DN:\n\t\t\t\t\tthis.by += dd;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.LT:\n\t\t\t\t\tthis.bx -= dd;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.RT:\n\t\t\t\t\tthis.bx += dd;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t},\n\n\t//----------------------------------------------------------------------------\n\t// ★RawAddressクラス (bx,by)座標を扱う ※端数あり\n\t//---------------------------------------------------------------------------\n\t\"RawAddress:Address\": {},\n\n\t//----------------------------------------------------------------------------\n\t// ★Dot class: Puzzle element using multiple underlying Piece subclasses\n\t//----------------------------------------------------------------------------\n\t\"Dot:Position\": {\n\t\tisnull: true,\n\t\tid: null,\n\n\t\tpiece: null,\n\n\t\tgetDot: function() {\n\t\t\treturn this.piece.qnum;\n\t\t},\n\t\tsetDot: function(val) {\n\t\t\tthis.puzzle.opemgr.disCombine = true;\n\t\t\tthis.piece.setQnum(val);\n\t\t\tthis.puzzle.opemgr.disCombine = false;\n\t\t},\n\t\tiserror: function() {\n\t\t\treturn this.piece.error > 0;\n\t\t},\n\n\t\tgetaddr: function() {\n\t\t\treturn new this.klass.Address(this.bx, this.by);\n\t\t}\n\t}\n});\n","// Piece.js v3.4.1\n\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------------------------\n\t// ★BoardPieceクラス Cell, Cross, Border, ExCellクラスのベース\n\t//---------------------------------------------------------------------------\n\t\"BoardPiece:Position\": {\n\t\tgroup: \"none\",\n\t\tid: null,\n\t\tisnull: true,\n\n\t\t// デフォルト値\n\t\t/* 問題データを保持するプロパティ */\n\t\tques: 0, // cell  :(1:黒マス 2-5:三角形 6:アイス・なべ等 7:盤面外 8:盤面内だが入力不可\n\t\t//         11-17:十字型パーツ 21-22:旗門 31:Hole 41-42:ぬりめいずの○△ 51:カックロ)\n\t\t// cross :(交点の黒点)\n\t\t// border:(問題の境界線)\n\t\tqdir: 0, // cell  :(数字につく矢印の向き)\n\t\t// border:(アイスバーンの矢印/マイナリズムの不等号)\n\t\tqnum: -1, // cell  :(セルの数字/○△□/マカロ以外の単体矢印/白丸黒丸/カックロの右側)\n\t\t// cross :(交点の数字)\n\t\t// border:(マイナリズムの数字/天体ショーの星)\n\t\tqnum2: -1, // cell  :(カックロの下側/よせなべの丸無し数字)\n\t\tqnum3: -1,\n\t\tqnum4: -1,\n\n\t\tqchar: 0, // excell:キンコンカンの文字\n\n\t\t/* 回答データを保持するプロパティ */\n\t\tqans: 0, // cell  :(1:黒マス/あかり 2-5:三角形 11-13:棒 31-32:斜線 41-50:ふとん)\n\t\t// border:(回答の境界線)\n\t\tanum: -1, // cell  :(セルの数字/○△□/単体矢印)\n\t\tline: 0, // border:(ましゅやスリリンなどの線)\n\n\t\t/* 補助データを保持するプロパティ */\n\t\tqsub: 0, // cell  :(1:白マス 1-2:背景色/○× 3:絵になる部分)\n\t\t// border:(1:補助線 2:× 11-14:方向記号)\n\t\tqcmp: 0, // cell  :(1:cmpマス 1-2:○×)\n\t\tsnum: -1, // cell  :補助数字を保持する\n\n\t\t/* 履歴保存しないプロパティ */\n\t\terror: 0,\n\t\tqinfo: 0,\n\t\ttrial: 0, // TrialModeのstateを保持する変数\n\n\t\tpropques: [\"ques\", \"qdir\", \"qnum\", \"qnum2\", \"qchar\"],\n\t\tpropans: [\"qans\", \"anum\", \"line\", \"trial\"],\n\t\tpropsub: [\"qsub\", \"qcmp\", \"snum\"],\n\t\tpropinfo: [\"error\", \"qinfo\"],\n\t\tpropnorec: { color: 1, error: 1, qinfo: 1 },\n\n\t\t// 入力できる最大・最小の数字\n\t\tmaxnum: 999,\n\t\tminnum: 1,\n\n\t\t//---------------------------------------------------------------------------\n\t\t// initAdjacent()   隣接セルの情報を設定する\n\t\t// initAdjBorder()  隣接境界線の情報を設定する\n\t\t//---------------------------------------------------------------------------\n\t\tinitAdjacent: function() {\n\t\t\tthis.adjacent = {\n\t\t\t\ttop: this.relobj(0, -2),\n\t\t\t\tbottom: this.relobj(0, 2),\n\t\t\t\tleft: this.relobj(-2, 0),\n\t\t\t\tright: this.relobj(2, 0)\n\t\t\t};\n\t\t},\n\t\tinitAdjBorder: function() {\n\t\t\tthis.adjborder = {\n\t\t\t\ttop: this.relbd(0, -1),\n\t\t\t\tbottom: this.relbd(0, 1),\n\t\t\t\tleft: this.relbd(-1, 0),\n\t\t\t\tright: this.relbd(1, 0)\n\t\t\t};\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// オブジェクト設定値のgetter/setter\n\t\t//---------------------------------------------------------------------------\n\t\tsetQues: function(val) {\n\t\t\tthis.setdata(\"ques\", val);\n\t\t},\n\t\tsetQans: function(val) {\n\t\t\tthis.setdata(\"qans\", val);\n\t\t},\n\t\tsetQdir: function(val) {\n\t\t\tthis.setdata(\"qdir\", val);\n\t\t},\n\t\tsetQnum: function(val) {\n\t\t\tthis.setdata(\"qnum\", val);\n\t\t},\n\t\tsetQnum2: function(val) {\n\t\t\tthis.setdata(\"qnum2\", val);\n\t\t},\n\t\tsetQchar: function(val) {\n\t\t\tthis.setdata(\"qchar\", val);\n\t\t},\n\t\tsetAnum: function(val) {\n\t\t\tthis.setdata(\"anum\", val);\n\t\t},\n\t\tsetLineVal: function(val) {\n\t\t\tthis.setdata(\"line\", val);\n\t\t},\n\t\tsetQsub: function(val) {\n\t\t\tthis.setdata(\"qsub\", val);\n\t\t},\n\t\tsetQcmp: function(val) {\n\t\t\tthis.setdata(\"qcmp\", val);\n\t\t},\n\t\tsetSnum: function(val) {\n\t\t\tthis.setdata(\"snum\", val);\n\t\t},\n\n\t\tsetQnumDir: function(dir, val) {\n\t\t\tswitch (dir) {\n\t\t\t\tcase this.RT:\n\t\t\t\t\tthis.setdata(\"qnum\", val);\n\t\t\t\t\treturn;\n\t\t\t\tcase this.DN:\n\t\t\t\t\tthis.setdata(\"qnum2\", val);\n\t\t\t\t\treturn;\n\t\t\t\tcase this.LT:\n\t\t\t\t\tthis.setdata(\"qnum3\", val);\n\t\t\t\t\treturn;\n\t\t\t\tcase this.UP:\n\t\t\t\t\tthis.setdata(\"qnum4\", val);\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t},\n\t\tgetQnumDir: function(dir) {\n\t\t\tswitch (dir) {\n\t\t\t\tcase this.RT:\n\t\t\t\t\treturn this.qnum;\n\t\t\t\tcase this.DN:\n\t\t\t\t\treturn this.qnum2;\n\t\t\t\tcase this.LT:\n\t\t\t\t\treturn this.qnum3;\n\t\t\t\tcase this.UP:\n\t\t\t\t\treturn this.qnum4;\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// setdata() Cell,Cross,Border,ExCellの値を設定する\n\t\t// addOpe()  履歴情報にプロパティの変更を通知する\n\t\t//---------------------------------------------------------------------------\n\t\tsetdata: function(prop, num, force) {\n\t\t\tif (this[prop] === num) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!!this.prehook[prop]) {\n\t\t\t\t// when force is set (undo, redo), bypass the check\n\t\t\t\t// but still execute the prehook for side-effects\n\t\t\t\tif (this.prehook[prop].call(this, num) && !force) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.addOpe(prop, this[prop], num);\n\t\t\tthis[prop] = num;\n\n\t\t\tvar trialstage = this.board.trialstage;\n\t\t\tif (trialstage > 0) {\n\t\t\t\tthis.trial = trialstage;\n\t\t\t}\n\n\t\t\tthis.board.modifyInfo(this, this.group + \".\" + prop);\n\n\t\t\tif (!!this.posthook[prop]) {\n\t\t\t\tthis.posthook[prop].call(this, num);\n\t\t\t}\n\t\t},\n\t\taddOpe: function(property, old, num) {\n\t\t\tif (old === num) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.puzzle.opemgr.add(\n\t\t\t\tnew this.klass.ObjectOperation(this, property, old, num)\n\t\t\t);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// setdata2() Cell,Cross,Border,ExCellのpos付きの値を設定する\n\t\t//---------------------------------------------------------------------------\n\t\tsetdata2: function(prop, pos, num, bypassPrehook) {\n\t\t\tif (this[prop][pos] === num) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!!this.prehook[prop]) {\n\t\t\t\tif (this.prehook[prop].call(this, pos, num) && !bypassPrehook) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.addOpe(prop + pos, this[prop][pos], num);\n\t\t\tthis[prop][pos] = num;\n\n\t\t\tvar trialstage = this.board.trialstage;\n\t\t\tif (trialstage > 0) {\n\t\t\t\tthis.trial = trialstage;\n\t\t\t}\n\n\t\t\tif (!!this.posthook[prop]) {\n\t\t\t\tthis.posthook[prop].call(this, pos, num);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// getprops() プロパティの値のみを取得する\n\t\t// compare()  プロパティの値を比較し違っていたらcallback関数を呼びだす\n\t\t//---------------------------------------------------------------------------\n\t\tgetprops: function() {\n\t\t\tvar props = {};\n\t\t\tvar proplist = this.getproplist([\"ques\", \"ans\", \"sub\"]);\n\t\t\tfor (var i = 0; i < proplist.length; i++) {\n\t\t\t\tvar a = proplist[i];\n\t\t\t\tprops[a] = this[a];\n\t\t\t}\n\t\t\treturn props;\n\t\t},\n\t\tcompare: function(props, callback) {\n\t\t\tvar proplist = this.getproplist([\"ques\", \"ans\", \"sub\"]);\n\t\t\tfor (var i = 0; i < proplist.length; i++) {\n\t\t\t\tvar a = proplist[i];\n\t\t\t\tif (props[a] !== this[a]) {\n\t\t\t\t\tcallback(this.group, this.id, a);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// getproplist() ansclear等で使用するプロパティの配列を取得する\n\t\t//---------------------------------------------------------------------------\n\t\tgetproplist: function(types) {\n\t\t\tvar array = [];\n\t\t\tfor (var i = 0; i < types.length; i++) {\n\t\t\t\tvar array1 = [];\n\t\t\t\tswitch (types[i]) {\n\t\t\t\t\tcase \"ques\":\n\t\t\t\t\t\tarray1 = this.propques;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"ans\":\n\t\t\t\t\t\tarray1 = this.propans;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"sub\":\n\t\t\t\t\t\tarray1 = this.propsub;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"info\":\n\t\t\t\t\t\tarray1 = this.propinfo;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"trial\":\n\t\t\t\t\t\tarray1 = [\"trial\"];\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tarray = array.concat(array1);\n\t\t\t}\n\t\t\tif (array.indexOf(\"snum\") >= 0 && this.enableSubNumberArray) {\n\t\t\t\tarray.splice(\n\t\t\t\t\tarray.indexOf(\"snum\"),\n\t\t\t\t\t1,\n\t\t\t\t\t\"snum0\",\n\t\t\t\t\t\"snum1\",\n\t\t\t\t\t\"snum2\",\n\t\t\t\t\t\"snum3\"\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn array;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// getmaxnum() 入力できる数字の最大値を返す\n\t\t// getminnum() 入力できる数字の最小値を返す\n\t\t//---------------------------------------------------------------------------\n\t\tgetmaxnum: function() {\n\t\t\treturn typeof this.maxnum === \"function\" ? this.maxnum() : this.maxnum;\n\t\t},\n\t\tgetminnum: function() {\n\t\t\treturn typeof this.minnum === \"function\" ? this.minnum() : this.minnum;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// prehook  値の設定前にやっておく処理や、設定禁止処理を行う\n\t\t// posthook 値の設定後にやっておく処理を行う\n\t\t//---------------------------------------------------------------------------\n\t\tprehook: {},\n\t\tposthook: {},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// seterr()  error値を設定する\n\t\t// setinfo() qinfo値を設定する\n\t\t//---------------------------------------------------------------------------\n\t\tseterr: function(num) {\n\t\t\tif (this.board.isenableSetError()) {\n\t\t\t\tthis.error = num;\n\t\t\t}\n\t\t},\n\t\tsetinfo: function(num) {\n\t\t\tthis.qinfo = num;\n\t\t}\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// ★Cellクラス BoardクラスがCellの数だけ保持する\n\t//---------------------------------------------------------------------------\n\t// ボードメンバデータの定義(1)\n\t// Cellクラスの定義\n\t\"Cell:BoardPiece\": {\n\t\tgroup: \"cell\",\n\n\t\tlcnt: 0, // セルに存在する線の本数\n\t\tbase: null, // 丸数字やアルファベットが移動してきた場合の移動元のセルを示す (移動なし時は自分自身を指す)\n\t\tdirs51: 2,\n\n\t\tdisInputHatena: false, // qnum==-2を入力できないようにする\n\n\t\tnumberWithMB: false, // 回答の数字と○×が入るパズル(○は数字が入っている扱いされる)\n\t\tnumberAsObject: false, // 数字以外でqnum/anumを使用する(同じ値を入力で消去できたり、回答で・が入力できる)\n\t\tnumberAsLetter: false, // 数字の代わりにアルファベットを入力する\n\n\t\tnumberRemainsUnshaded: false, // 数字のあるマスが黒マスにならないパズル\n\t\tenableSubNumberArray: false, // 補助数字の配列を作るパズル\n\t\tsupportQnumAnum: false, // True if qnum and anum can appear at the same time.\n\n\t\tadjacent: {}, // 四方向に隣接するセルを保持する\n\t\tadjborder: {}, // 四方向に隣接する境界線を保持する\n\n\t\tinitialize: function() {\n\t\t\tthis.temp = this.constructor.prototype;\n\t\t\tif (this.enableSubNumberArray) {\n\t\t\t\tvar anum0 = this.temp.anum;\n\t\t\t\tthis.snum = [anum0, anum0, anum0, anum0];\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// prehook  値の設定前にやっておく処理や、設定禁止処理を行う\n\t\t// posthook 値の設定後にやっておく処理を行う\n\t\t//---------------------------------------------------------------------------\n\t\tprehook: {\n\t\t\tqnum: function(num) {\n\t\t\t\treturn this.getminnum() > 0 && num === 0;\n\t\t\t},\n\t\t\tqnum2: function(num) {\n\t\t\t\treturn this.getminnum() > 0 && num === 0;\n\t\t\t},\n\t\t\tanum: function(num) {\n\t\t\t\treturn this.getminnum() > 0 && num === 0;\n\t\t\t}\n\t\t},\n\t\tposthook: {},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// cell.isShade()   該当するCellが黒マスかどうか返す\n\t\t// cell.isUnshade() 該当するCellが白マスかどうか返す\n\t\t// cell.setShade()  該当するCellに黒マスをセットする\n\t\t// cell.clrShade()  該当するCellに白マスをセットする\n\t\t//---------------------------------------------------------------------------\n\t\tisShade: function() {\n\t\t\treturn !this.isnull && this.qans === 1;\n\t\t},\n\t\tisUnshade: function() {\n\t\t\treturn !this.isnull && this.qans !== 1;\n\t\t},\n\t\tsetShade: function() {\n\t\t\tthis.setQans(1);\n\t\t},\n\t\tclrShade: function() {\n\t\t\tthis.setQans(0);\n\t\t},\n\n\t\t// disallow certain inputs\n\t\tallowShade: function() {\n\t\t\tif (this.numberRemainsUnshaded) {\n\t\t\t\treturn this.qnum === -1;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\tallowUnshade: function() {\n\t\t\tif (this.numberRemainsUnshaded) {\n\t\t\t\treturn this.qnum === -1 || this.puzzle.painter.enablebcolor;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t// is cell shading status decided for the purpose of auto-answer check\n\t\tisShadeDecided: function() {\n\t\t\tif (this.isnull) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (this.isShade()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (this.qsub > 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (!this.allowShade() || !this.allowUnshade()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\t//-----------------------------------------------------------------------\n\t\t// cell.getNum()     該当するCellの数字を返す\n\t\t// cell.setNum()     該当するCellに数字を設定する\n\t\t//-----------------------------------------------------------------------\n\t\tgetNum: function() {\n\t\t\treturn this.qnum !== -1 ? this.qnum : this.anum;\n\t\t},\n\t\tsetNum: function(val) {\n\t\t\tif (this.getminnum() > 0 && val === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// editmode時 val>=0は数字 val=-1は消去 val=-2は？など\n\t\t\tif (this.puzzle.editmode) {\n\t\t\t\tval =\n\t\t\t\t\t(this.numberAsObject || val === -2) && this.qnum === val ? -1 : val;\n\t\t\t\tthis.setQnum(val);\n\t\t\t\tthis.setAnum(-1);\n\t\t\t\tif (this.numberRemainsUnshaded) {\n\t\t\t\t\tthis.setQans(0);\n\t\t\t\t}\n\t\t\t\tif (!this.puzzle.painter.enablebcolor) {\n\t\t\t\t\tthis.setQsub(0);\n\t\t\t\t}\n\t\t\t\tthis.setQcmp(0);\n\t\t\t\tthis.clrSnum();\n\t\t\t}\n\t\t\t// playmode時 val>=0は数字 val=-1は消去 numberAsObjectの・はval=-2 numberWithMBの○×はval=-2,-3\n\t\t\telse if (this.qnum === -1) {\n\t\t\t\tvar vala =\n\t\t\t\t\tval > -1 && !(this.numberAsObject && this.anum === val) ? val : -1;\n\t\t\t\tvar vals =\n\t\t\t\t\tval < -1 && !(this.numberAsObject && this.qsub === -val - 1)\n\t\t\t\t\t\t? -val - 1\n\t\t\t\t\t\t: 0;\n\t\t\t\tthis.setAnum(vala);\n\t\t\t\tthis.setQsub(vals);\n\t\t\t\tthis.setQdir(0);\n\t\t\t\tthis.setQcmp(0);\n\t\t\t\tif (!(this.numberWithMB && vala === -1)) {\n\t\t\t\t\tthis.clrSnum();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//-----------------------------------------------------------------------\n\t\t// cell.isNum()       該当するCellに数字があるか返す\n\t\t// cell.noNum()       該当するCellに数字がないか返す\n\t\t// cell.isValidNum()  該当するCellに0以上の数字があるか返す\n\t\t// cell.isNumberObj() 該当するCellに数字or○があるか返す\n\t\t// cell.sameNumber()  ２つのCellに同じ有効な数字があるか返す\n\t\t//-----------------------------------------------------------------------\n\t\tisNum: function() {\n\t\t\treturn (\n\t\t\t\t!this.isnull &&\n\t\t\t\t(this.qnum !== this.temp.qnum || this.anum !== this.temp.anum)\n\t\t\t);\n\t\t},\n\t\tnoNum: function() {\n\t\t\treturn (\n\t\t\t\t!this.isnull &&\n\t\t\t\tthis.qnum === this.temp.qnum &&\n\t\t\t\tthis.anum === this.temp.anum\n\t\t\t);\n\t\t},\n\t\tisValidNum: function() {\n\t\t\treturn (\n\t\t\t\t!this.isnull &&\n\t\t\t\t(this.qnum >= 0 || (this.anum >= 0 && this.qnum === this.temp.qnum))\n\t\t\t);\n\t\t},\n\t\tisNumberObj: function() {\n\t\t\treturn (\n\t\t\t\tthis.qnum !== this.temp.qnum ||\n\t\t\t\tthis.anum !== this.temp.anum ||\n\t\t\t\t(this.numberWithMB && this.qsub === 1)\n\t\t\t);\n\t\t},\n\t\tsameNumber: function(cell) {\n\t\t\treturn this.isValidNum() && this.getNum() === cell.getNum();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// cell.setSnum() Cellの補助数字を設定する\n\t\t// cell.clrSnum() Cellの補助数字を消去する\n\t\t//---------------------------------------------------------------------------\n\t\tsetSnum: function(pos, num) {\n\t\t\tif (this.isNum() && num !== -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this.enableSubNumberArray) {\n\t\t\t\tthis.setdata(\"snum\", num); // 1つ目の数字のみ\n\t\t\t} else {\n\t\t\t\tthis.setdata2(\"snum\", pos, num);\n\t\t\t}\n\t\t},\n\t\tclrSnum: function() {\n\t\t\tif (!this.enableSubNumberArray) {\n\t\t\t\tthis.setSnum(-1);\n\t\t\t} else {\n\t\t\t\tthis.setSnum(0, -1);\n\t\t\t\tthis.setSnum(1, -1);\n\t\t\t\tthis.setSnum(2, -1);\n\t\t\t\tthis.setSnum(3, -1);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// cell.is51cell()     [＼]のセルかチェックする(カックロ以外はオーバーライドされる)\n\t\t// cell.set51cell()    [＼]を作成する(カックロ以外はオーバーライドされる)\n\t\t// cell.remove51cell() [＼]を消去する(カックロ以外はオーバーライドされる)\n\t\t//---------------------------------------------------------------------------\n\t\t// ※とりあえずカックロ用\n\t\tis51cell: function() {\n\t\t\treturn this.ques === 51;\n\t\t},\n\t\tset51cell: function(val) {\n\t\t\tthis.setQues(51);\n\t\t\tfor (var dir = 1; dir <= 4; dir++) {\n\t\t\t\tthis.setQnumDir(dir, -1);\n\t\t\t}\n\t\t\tthis.setAnum(-1);\n\t\t},\n\t\tremove51cell: function(val) {\n\t\t\tthis.setQues(0);\n\t\t\tfor (var dir = 1; dir <= 4; dir++) {\n\t\t\t\tthis.setQnumDir(dir, -1);\n\t\t\t}\n\t\t\tthis.setAnum(-1);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// cell.ice() アイスのマスかどうか判定する\n\t\t//---------------------------------------------------------------------------\n\t\tice: function() {\n\t\t\treturn this.ques === 6;\n\t\t},\n\n\t\tisDot: function() {\n\t\t\treturn this.qsub === 1;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// cell.isEmpty() / cell.isValid() 不定形盤面などで、入力できるマスか判定する\n\t\t//---------------------------------------------------------------------------\n\t\tisEmpty: function() {\n\t\t\treturn this.isnull || this.ques === 7;\n\t\t},\n\t\tisValid: function() {\n\t\t\treturn !this.isnull && this.ques !== 7;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// cell.isDeparture()   オブジェクトを動かすパズルで移動元セルかどうか判定する\n\t\t// cell.isDestination() オブジェクトを動かすパズルで移動先セルかどうか判定する\n\t\t// ※動いていない場合は、isDestinationのみtrueを返します\n\t\t//---------------------------------------------------------------------------\n\t\tisDeparture: function() {\n\t\t\treturn !this.isnull && !!this.base && this.isNum();\n\t\t},\n\t\tisDestination: function() {\n\t\t\treturn !this.isnull && !!this.base && !this.base.isnull;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// cell.isLineStraight()   セルの上で線が直進しているか判定する\n\t\t// cell.isLineCurve()      セルの上で線がカーブしているか判定する\n\t\t//---------------------------------------------------------------------------\n\t\tisLineStraight: function() {\n\t\t\t// 0:直進ではない 1:縦に直進 2:横に直進\n\t\t\tif (\n\t\t\t\tthis.lcnt === 2 &&\n\t\t\t\tthis.adjborder.top.isLine() &&\n\t\t\t\tthis.adjborder.bottom.isLine()\n\t\t\t) {\n\t\t\t\treturn 1;\n\t\t\t} else if (\n\t\t\t\tthis.lcnt === 2 &&\n\t\t\t\tthis.adjborder.left.isLine() &&\n\t\t\t\tthis.adjborder.right.isLine()\n\t\t\t) {\n\t\t\t\treturn 2;\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\t\tisLineCurve: function() {\n\t\t\treturn this.lcnt === 2 && !this.isLineStraight();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// cell.isLP()  線が必ず存在するセルの条件を判定する\n\t\t// cell.noLP()  線が引けないセルの条件を判定する\n\t\t//---------------------------------------------------------------------------\n\t\t// 下記の関数で用いる定数\n\t\tisLPobj: {\n\t\t\t1: { 11: 1, 12: 1, 14: 1, 15: 1 } /* UP */,\n\t\t\t2: { 11: 1, 12: 1, 16: 1, 17: 1 } /* DN */,\n\t\t\t3: { 11: 1, 13: 1, 15: 1, 16: 1 } /* LT */,\n\t\t\t4: { 11: 1, 13: 1, 14: 1, 17: 1 } /* RT */\n\t\t},\n\t\tnoLPobj: {\n\t\t\t1: { 1: 1, 4: 1, 5: 1, 13: 1, 16: 1, 17: 1, 21: 1 } /* UP */,\n\t\t\t2: { 1: 1, 2: 1, 3: 1, 13: 1, 14: 1, 15: 1, 21: 1 } /* DN */,\n\t\t\t3: { 1: 1, 2: 1, 5: 1, 12: 1, 14: 1, 17: 1, 22: 1 } /* LT */,\n\t\t\t4: { 1: 1, 3: 1, 4: 1, 12: 1, 15: 1, 16: 1, 22: 1 } /* RT */\n\t\t},\n\n\t\tisLP: function(dir) {\n\t\t\treturn !!this.isLPobj[dir][this.ques];\n\t\t},\n\t\t// ans.checkenableLinePartsからnoLP()関数が直接呼ばれている\n\t\tnoLP: function(dir) {\n\t\t\treturn !!this.noLPobj[dir][this.ques];\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// cell.countDir4Cell()  上下左右4方向で条件func==trueになるマスの数をカウントする\n\t\t//---------------------------------------------------------------------------\n\t\tcountDir4Cell: function(func) {\n\t\t\tvar adc = this.adjacent,\n\t\t\t\tcnt = 0;\n\t\t\tvar cells = [adc.top, adc.bottom, adc.left, adc.right];\n\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\tif (cells[i].group === \"cell\" && !cells[i].isnull && func(cells[i])) {\n\t\t\t\t\tcnt++;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn cnt;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// cell.getdir4clist()   上下左右4方向の存在するセルを返す\n\t\t// cell.getdir4cblist()  上下左右4方向のセル＆境界線＆方向を返す\n\t\t//---------------------------------------------------------------------------\n\t\tgetdir4clist: function() {\n\t\t\tvar adc = this.adjacent,\n\t\t\t\tlist = [];\n\t\t\tvar cells = [adc.top, adc.bottom, adc.left, adc.right];\n\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\tif (cells[i].group === \"cell\" && !cells[i].isnull) {\n\t\t\t\t\tlist.push([cells[i], i + 1]);\n\t\t\t\t} /* i+1==dir */\n\t\t\t}\n\t\t\treturn list;\n\t\t},\n\t\tgetdir4cblist: function() {\n\t\t\tvar adc = this.adjacent,\n\t\t\t\tadb = this.adjborder,\n\t\t\t\tcblist = [];\n\t\t\tvar cells = [adc.top, adc.bottom, adc.left, adc.right];\n\t\t\tvar bds = [adb.top, adb.bottom, adb.left, adb.right];\n\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\tif ((cells[i].group === \"cell\" && !cells[i].isnull) || !bds[i].isnull) {\n\t\t\t\t\tcblist.push([cells[i], bds[i], i + 1]);\n\t\t\t\t} /* i+1==dir */\n\t\t\t}\n\t\t\treturn cblist;\n\t\t},\n\n\t\t//------------------------------------------------------------------------------------\n\t\t// cell.getOrthogonalCell()  Get an adjacent cell in the direction of the target cell.\n\t\t//------------------------------------------------------------------------------------\n\t\tgetOrthogonalCell: function(target) {\n\t\t\tif (this.bx === target.bx) {\n\t\t\t\tif (this.by === target.by) {\n\t\t\t\t\treturn this.board.emptycell;\n\t\t\t\t}\n\t\t\t\treturn this.by > target.by ? this.adjacent.top : this.adjacent.bottom;\n\t\t\t} else if (this.by === target.by) {\n\t\t\t\treturn this.bx > target.bx ? this.adjacent.left : this.adjacent.right;\n\t\t\t}\n\n\t\t\treturn this.board.emptycell;\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// cell.eraseMovedLines()  移動系パズルの丸が消えたとき等、領域に含まれる線を消去する\n\t\t//--------------------------------------------------------------------------------\n\t\teraseMovedLines: function() {\n\t\t\tif (this.path === null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar clist = this.path.clist,\n\t\t\t\tcount = 0;\n\t\t\tfor (var i = 0, len = clist.length; i < len; i++) {\n\t\t\t\tfor (var j = i + 1; j < len; j++) {\n\t\t\t\t\tvar border = clist[i].getnb(clist[j]);\n\t\t\t\t\tif (!border.isnull) {\n\t\t\t\t\t\tborder.removeLine();\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count > 0) {\n\t\t\t\tclist.draw();\n\t\t\t}\n\t\t}\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// ★Crossクラス BoardクラスがCrossの数だけ保持する(hascross>=1の時)\n\t//---------------------------------------------------------------------------\n\t// ボードメンバデータの定義(2)\n\t// Crossクラスの定義\n\t\"Cross:BoardPiece\": {\n\t\tgroup: \"cross\",\n\n\t\tlcnt: 0, // 交点に存在する線の本数\n\n\t\tadjborder: {}, // 四方向に隣接する境界線を保持する\n\n\t\t//-----------------------------------------------------------------------\n\t\t// cross.getNum()     該当するCrossの数字を返す\n\t\t// cross.setNum()     該当するCrossに数字を設定する\n\t\t// cross.noNum()      該当するCrossに数字がないか返す\n\t\t//-----------------------------------------------------------------------\n\t\tgetNum: function() {\n\t\t\treturn this.qnum;\n\t\t},\n\t\tsetNum: function(val) {\n\t\t\tval = val === -2 && this.qnum === val ? -1 : val;\n\t\t\tthis.setQnum(val);\n\t\t},\n\t\tnoNum: function() {\n\t\t\treturn !this.isnull && this.qnum === -1;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// cross.setCrossBorderError() 交点とその周り四方向のBorderにエラーフラグを設定する\n\t\t//---------------------------------------------------------------------------\n\t\tsetCrossBorderError: function() {\n\t\t\tthis.seterr(1);\n\t\t\tthis.board\n\t\t\t\t.borderinside(this.bx - 1, this.by - 1, this.bx + 1, this.by + 1)\n\t\t\t\t.seterr(1);\n\t\t}\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// ★Borderクラス BoardクラスがBorderの数だけ保持する(hasborder>0の時)\n\t//---------------------------------------------------------------------------\n\t// ボードメンバデータの定義(3)\n\t// Borderクラスの定義\n\t\"Border:BoardPiece\": {\n\t\tinitialize: function() {\n\t\t\tthis.sidecell = [null, null]; // 隣接セルのオブジェクト\n\t\t\tthis.sidecross = [null, null]; // 隣接交点のオブジェクト\n\t\t\tthis.sideobj = []; // LineManager用\n\t\t},\n\t\tgroup: \"border\",\n\n\t\tisvert: false, // true:境界線が垂直(縦) false:境界線が水平(横)\n\t\tinside: false, // true:盤面内 false:外枠上or盤面外\n\n\t\tpath: null, // このLineを含む線情報への参照\n\n\t\t// isLineNG関連の変数など\n\t\tenableLineNG: false,\n\n\t\t//---------------------------------------------------------------------------\n\t\t// initSideObject() 隣接オブジェクトの情報を設定する\n\t\t//---------------------------------------------------------------------------\n\t\tinitSideObject: function() {\n\t\t\tvar allowexcell =\n\t\t\t\tthis.board.hasborder === 2 && this.board.hasexcell === 2;\n\t\t\tif (this.isvert) {\n\t\t\t\tthis.sidecell[0] =\n\t\t\t\t\t!allowexcell || this.bx > 0\n\t\t\t\t\t\t? this.relcell(-1, 0)\n\t\t\t\t\t\t: this.relexcell(-1, 0);\n\t\t\t\tthis.sidecell[1] =\n\t\t\t\t\t!allowexcell || this.bx < this.board.cols * 2\n\t\t\t\t\t\t? this.relcell(1, 0)\n\t\t\t\t\t\t: this.relexcell(1, 0);\n\t\t\t\tthis.sidecross[0] = this.relcross(0, -1);\n\t\t\t\tthis.sidecross[1] = this.relcross(0, 1);\n\t\t\t} else {\n\t\t\t\tthis.sidecell[0] =\n\t\t\t\t\t!allowexcell || this.by > 0\n\t\t\t\t\t\t? this.relcell(0, -1)\n\t\t\t\t\t\t: this.relexcell(0, -1);\n\t\t\t\tthis.sidecell[1] =\n\t\t\t\t\t!allowexcell || this.by < this.board.rows * 2\n\t\t\t\t\t\t? this.relcell(0, 1)\n\t\t\t\t\t\t: this.relexcell(0, 1);\n\t\t\t\tthis.sidecross[0] = this.relcross(-1, 0);\n\t\t\t\tthis.sidecross[1] = this.relcross(1, 0);\n\t\t\t}\n\n\t\t\t// LineManager用\n\t\t\tthis.sideobj = !this.board.borderAsLine ? this.sidecell : this.sidecross;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// prehook  値の設定前にやっておく処理や、設定禁止処理を行う\n\t\t// posthook 値の設定後にやっておく処理を行う\n\t\t//---------------------------------------------------------------------------\n\t\tprehook: {\n\t\t\tqans: function(num) {\n\t\t\t\treturn this.ques !== 0;\n\t\t\t},\n\t\t\tline: function(num) {\n\t\t\t\treturn this.checkStableLine(num);\n\t\t\t}\n\t\t},\n\t\tposthook: {},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// border.draw() 盤面に自分の周囲を描画する (Borderはちょっと範囲が広い)\n\t\t//---------------------------------------------------------------------------\n\t\tdraw: function() {\n\t\t\tthis.puzzle.painter.paintRange(\n\t\t\t\tthis.bx - 2,\n\t\t\t\tthis.by - 2,\n\t\t\t\tthis.bx + 2,\n\t\t\t\tthis.by + 2\n\t\t\t);\n\t\t},\n\n\t\t//-----------------------------------------------------------------------\n\t\t// border.isLine()      該当するBorderにlineが引かれているか判定する\n\t\t// border.setLine()     該当するBorderに線を引く\n\t\t// border.setPeke()     該当するBorderに×印をつける\n\t\t// border.removeLine()  該当するBorderから線を消す\n\t\t// border.removeLineAndQsub()  removes line and qsub\n\t\t//-----------------------------------------------------------------------\n\t\tisLine: function() {\n\t\t\treturn this.line > 0;\n\t\t},\n\t\tsetLine: function(id) {\n\t\t\tthis.setLineVal(1);\n\t\t\tif (this.qsub === 2) {\n\t\t\t\tthis.setQsub(0);\n\t\t\t}\n\t\t},\n\t\tsetPeke: function(id) {\n\t\t\tthis.setLineVal(0);\n\t\t\tthis.setQsub(2);\n\t\t},\n\t\tremoveLine: function(id) {\n\t\t\tthis.setLineVal(0);\n\t\t\tif (this.qsub === 2) {\n\t\t\t\tthis.setQsub(0);\n\t\t\t}\n\t\t},\n\t\tremoveLineAndQsub: function(id) {\n\t\t\tthis.setLineVal(0);\n\t\t\tthis.setQsub(0);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// border.isBorder()     該当するBorderに境界線が引かれているか判定する\n\t\t// border.setBorder()    該当するBorderに境界線を引く\n\t\t// border.removeBorder() 該当するBorderから線を消す\n\t\t//---------------------------------------------------------------------------\n\t\tisBorder: function() {\n\t\t\treturn this.ques > 0 || this.qans > 0;\n\t\t},\n\t\tsetBorder: function() {\n\t\t\tif (this.puzzle.editmode) {\n\t\t\t\tthis.setQues(1);\n\t\t\t\tthis.setQans(0);\n\t\t\t} else if (this.ques !== 1) {\n\t\t\t\tthis.setQans(1);\n\t\t\t}\n\t\t},\n\t\tremoveBorder: function() {\n\t\t\tif (this.puzzle.editmode) {\n\t\t\t\tthis.setQues(0);\n\t\t\t\tthis.setQans(0);\n\t\t\t} else if (this.ques !== 1) {\n\t\t\t\tthis.setQans(0);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// border.isVert()  該当するBorderが垂直(縦)かどうか返す\n\t\t// border.isHorz()  該当するBorderに水平(横)かどうか返す\n\t\t//---------------------------------------------------------------------------\n\t\tisVert: function() {\n\t\t\treturn this.isvert;\n\t\t},\n\t\tisHorz: function() {\n\t\t\treturn !this.isvert;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// border.checkStableLine() 線が引けない or 必ず存在する状態になっているか判定する\n\t\t// border.isLineEX() 線が必ず存在するborderの条件を判定する\n\t\t// border.isLineNG() 線が引けないborderの条件を判定する\n\t\t//---------------------------------------------------------------------------\n\t\t// [pipelink, loopsp], [barns, slalom, reflect, yajirin]で呼ばれる関数\n\t\tcheckStableLine: function(num) {\n\t\t\t// border.setLineから呼ばれる\n\t\t\tif (this.enableLineNG) {\n\t\t\t\treturn num !== 0 && this.isLineNG();\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\t// Check if adding a line would create a corner in the side cells.\n\t\tcheckFormCurve: function(num) {\n\t\t\tif (num === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tfor (var i = 0; i <= 1; i++) {\n\t\t\t\tif (\n\t\t\t\t\tthis.isVert() &&\n\t\t\t\t\t(this.sidecell[i].adjborder.top.isLine() ||\n\t\t\t\t\t\tthis.sidecell[i].adjborder.bottom.isLine())\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t!this.isVert() &&\n\t\t\t\t\t(this.sidecell[i].adjborder.left.isLine() ||\n\t\t\t\t\t\tthis.sidecell[i].adjborder.right.isLine())\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\t// cell.setQues => setCombinedLineから呼ばれる関数 (exist->ex)\n\t\t//  -> cellidの片方がnullになっていることを考慮していません\n\t\tisLineEX: function() {\n\t\t\treturn false;\n\t\t},\n\t\t// border.setLineCal => checkStableLineから呼ばれる関数\n\t\t//  -> cellidの片方がnullになっていることを考慮していません\n\t\tisLineNG: function() {\n\t\t\tvar cell1 = this.sidecell[0],\n\t\t\t\tcell2 = this.sidecell[1];\n\t\t\treturn this.isVert()\n\t\t\t\t? cell1.noLP(cell1.RT) || cell2.noLP(cell2.LT)\n\t\t\t\t: cell1.noLP(cell1.DN) || cell2.noLP(cell2.UP);\n\t\t}\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// ★ExCellクラス BoardクラスがExCellの数だけ保持する\n\t//---------------------------------------------------------------------------\n\t// ボードメンバデータの定義(4)\n\t// ExCellクラスの定義\n\t\"ExCell:BoardPiece\": {\n\t\tgroup: \"excell\",\n\n\t\tadjacent: {}, // 四方向に隣接するセルを保持する\n\n\t\t//-----------------------------------------------------------------------\n\t\t// excell.getNum()     該当するCellの数字を返す\n\t\t// excell.setNum()     該当するCellに数字を設定する\n\t\t// excell.noNum()      該当するCellに数字がないか返す\n\t\t//-----------------------------------------------------------------------\n\t\tgetNum: function() {\n\t\t\treturn this.qnum;\n\t\t},\n\t\tsetNum: function(val) {\n\t\t\tthis.setQnum(val);\n\t\t},\n\t\tnoNum: function() {\n\t\t\treturn !this.isnull && this.qnum === -1;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// excell.is51cell()   [＼]のセルかチェックする\n\t\t//---------------------------------------------------------------------------\n\t\tis51cell: function() {\n\t\t\treturn this.ques === 51;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// excell.ice() アイスのマスかどうか判定する\n\t\t//---------------------------------------------------------------------------\n\t\tice: function() {\n\t\t\treturn false;\n\t\t}\n\t}\n});\n","// PieceList.js v3.4.1\n\npzpr.classmgr.makeCommon({\n\t//----------------------------------------------------------------------------\n\t// ★PieceListクラス オブジェクトの配列を扱う\n\t//---------------------------------------------------------------------------\n\tPieceList: {\n\t\tinitialize: function(list) {\n\t\t\tif (!!list) {\n\t\t\t\tthis.extend(list);\n\t\t\t}\n\t\t},\n\n\t\tlength: 0,\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// ☆Arrayオブジェクト関連の関数\n\t\t// list.add()      与えられたオブジェクトを配列の末尾に追加する(push()相当)\n\t\t// list.extend()   与えられたPieceListを配列の末尾に追加する\n\t\t// list.pop()      配列の最後のオブジェクトを取り除いて返す\n\t\t//--------------------------------------------------------------------------------\n\t\tadd: Array.prototype.push,\n\t\textend: function(list) {\n\t\t\tvar len = list.length,\n\t\t\t\tn = this.length;\n\t\t\tthis.length += len;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tthis[n + i] = list[i];\n\t\t\t}\n\t\t},\n\t\tpop: Array.prototype.pop,\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// ☆Arrayオブジェクトiterator関連の関数\n\t\t// list.each()     全てのオブジェクトに指定された関数を実行する\n\t\t// list.some()     条件がtrueとなるオブジェクトが存在するか判定する\n\t\t//--------------------------------------------------------------------------------\n\t\teach: Array.prototype.forEach,\n\t\tsome: Array.prototype.some,\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// list.filter()   条件がtrueとなるオブジェクトを抽出したclistを新たに作成する\n\t\t// list.notnull()  nullではないオブジェクトを抽出したclistを新たに作成する\n\t\t//--------------------------------------------------------------------------------\n\t\t/* constructorが変わってしまうので、Array.prototypeが使用できない */\n\t\tfilter: function(cond) {\n\t\t\tvar list = new this.constructor(),\n\t\t\t\tlen = this.length,\n\t\t\t\tn = 0;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tif (cond(this[i])) {\n\t\t\t\t\tlist[n] = this[i];\n\t\t\t\t\tn++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlist.length = n;\n\t\t\treturn list;\n\t\t},\n\t\tnotnull: function(cond) {\n\t\t\treturn this.filter(function(piece) {\n\t\t\t\treturn !piece.isnull;\n\t\t\t});\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// list.map()      clistの各要素に指定された関数を適用したclistを新たに作成する\n\t\t//--------------------------------------------------------------------------------\n\t\t/* constructorが変わってしまうので、Array.prototypeが使用できない */\n\t\tmap: function(changer) {\n\t\t\tvar list = new this.constructor(),\n\t\t\t\tlen = (list.length = this.length);\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tlist[i] = changer(this[i]);\n\t\t\t}\n\t\t\treturn list;\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// list.indexOf()  与えられたオブジェクトの配列上の位置を取得する\n\t\t// list.include()  与えられたオブジェクトが配列に存在するか判定する\n\t\t// list.remove()   与えられたオブジェクトを配列から取り除く\n\t\t//--------------------------------------------------------------------------------\n\t\tindexOf: Array.prototype.indexOf,\n\t\tinclude: function(target) {\n\t\t\treturn this.indexOf(target) >= 0;\n\t\t},\n\t\tremove: function(piece) {\n\t\t\tvar idx = this.indexOf(piece);\n\t\t\tif (idx >= 0) {\n\t\t\t\tArray.prototype.splice.call(this, idx, 1);\n\t\t\t}\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// list.seterr()   保持しているオブジェクトにerror値を設定する\n\t\t// list.setnoerr() エラー値が設定されていないオブジェクトにerror=-1を設定する\n\t\t// list.setinfo()  保持しているオブジェクトにqinfo値を設定する\n\t\t//--------------------------------------------------------------------------------\n\t\tseterr: function(num) {\n\t\t\tif (!this.board.isenableSetError()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tthis[i].error = num;\n\t\t\t}\n\t\t},\n\t\tsetnoerr: function() {\n\t\t\tif (!this.board.isenableSetError()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tif (this[i].error === 0) {\n\t\t\t\t\tthis[i].error = -1;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsetinfo: function(num) {\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tthis[i].qinfo = num;\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// list.allclear() 位置,描画情報以外をクリアする\n\t\t// list.ansclear() qans,anum,line,qsub,error情報をクリアする\n\t\t// list.subclear() qsub,error情報をクリアする\n\t\t// list.errclear() error情報をクリアする\n\t\t// list.trialclear() Trial情報をクリアする\n\t\t// list.propclear() 4つの共通処理\n\t\t//---------------------------------------------------------------------------\n\t\t/* undo,redo以外で盤面縮小やったときは, isrec===true */\n\t\tallclear: function(isrec) {\n\t\t\tthis.propclear([\"ques\", \"ans\", \"sub\", \"info\"], isrec);\n\t\t},\n\t\tansclear: function() {\n\t\t\tthis.propclear([\"ans\", \"sub\", \"info\"], true);\n\t\t},\n\t\tsubclear: function() {\n\t\t\tthis.propclear([\"sub\", \"info\"], true);\n\t\t},\n\t\terrclear: function() {\n\t\t\tthis.propclear([\"info\"], false);\n\t\t},\n\t\ttrialclear: function() {\n\t\t\tthis.propclear([\"trial\"], false);\n\t\t},\n\t\tpropclear: function(target, isrec) {\n\t\t\tvar props = [],\n\t\t\t\tnorec = {};\n\t\t\tif (this.length > 0) {\n\t\t\t\tprops = this[0].getproplist(target);\n\t\t\t\tnorec = this[0].propnorec;\n\t\t\t}\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tvar piece = this[i];\n\t\t\t\tfor (var j = 0; j < props.length; j++) {\n\t\t\t\t\tvar pp = props[j],\n\t\t\t\t\t\tpos = \"\";\n\t\t\t\t\tif (pp.length > 4 && pp.substr(0, 4) === \"snum\") {\n\t\t\t\t\t\tpos = pp.charAt(4);\n\t\t\t\t\t\tpp = pp.substr(0, 4);\n\t\t\t\t\t\tvar def = piece.constructor.prototype[pp];\n\t\t\t\t\t\tif (piece[pp][pos] !== def) {\n\t\t\t\t\t\t\tif (isrec && !norec[pp]) {\n\t\t\t\t\t\t\t\tpiece.addOpe(pp + pos, piece[pp][pos], def);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpiece[pp][pos] = def;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar def = piece.constructor.prototype[pp];\n\t\t\t\t\t\tif (piece[pp] !== def) {\n\t\t\t\t\t\t\tif (isrec && !norec[pp]) {\n\t\t\t\t\t\t\t\tpiece.addOpe(pp, piece[pp], def);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpiece[pp] = def;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t//----------------------------------------------------------------------------\n\t// ★CellListクラス Cellの配列を扱う\n\t//---------------------------------------------------------------------------\n\t\"CellList:PieceList\": {\n\t\t//---------------------------------------------------------------------------\n\t\t// clist.getRectSize()  指定されたCellのリストの上下左右の端と、セルの数を返す\n\t\t//---------------------------------------------------------------------------\n\t\tgetRectSize: function() {\n\t\t\tvar bd = this.board;\n\t\t\tvar d = {\n\t\t\t\tx1: bd.maxbx + 1,\n\t\t\t\tx2: bd.minbx - 1,\n\t\t\t\ty1: bd.maxby + 1,\n\t\t\t\ty2: bd.minby - 1,\n\t\t\t\tcols: 0,\n\t\t\t\trows: 0,\n\t\t\t\tcnt: 0\n\t\t\t};\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tvar cell = this[i];\n\t\t\t\tif (d.x1 > cell.bx) {\n\t\t\t\t\td.x1 = cell.bx;\n\t\t\t\t}\n\t\t\t\tif (d.x2 < cell.bx) {\n\t\t\t\t\td.x2 = cell.bx;\n\t\t\t\t}\n\t\t\t\tif (d.y1 > cell.by) {\n\t\t\t\t\td.y1 = cell.by;\n\t\t\t\t}\n\t\t\t\tif (d.y2 < cell.by) {\n\t\t\t\t\td.y2 = cell.by;\n\t\t\t\t}\n\t\t\t\td.cnt++;\n\t\t\t}\n\t\t\td.cols = (d.x2 - d.x1 + 2) / 2;\n\t\t\td.rows = (d.y2 - d.y1 + 2) / 2;\n\t\t\treturn d;\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// clist.getQnumCell()  指定されたClistの中で一番左上にある数字のあるセルを返す\n\t\t//--------------------------------------------------------------------------------\n\t\tgetQnumCell: function() {\n\t\t\tfor (var i = 0, len = this.length; i < len; i++) {\n\t\t\t\tif (this[i].isNum()) {\n\t\t\t\t\treturn this[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.board.emptycell;\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// clist.getTopCell()  指定されたClistの中で一番左上にあるセルを返す\n\t\t//--------------------------------------------------------------------------------\n\t\tgetTopCell: function() {\n\t\t\tvar bd = this.board,\n\t\t\t\ttcell = null,\n\t\t\t\tbx = bd.maxbx,\n\t\t\t\tby = bd.maxby;\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tvar cell = this[i];\n\t\t\t\tif (cell.bx > bx || (cell.bx === bx && cell.by >= by)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\ttcell = this[i];\n\t\t\t\tbx = cell.bx;\n\t\t\t\tby = cell.by;\n\t\t\t}\n\t\t\treturn tcell;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// clist.eraseLines()  Clistに含まれるlineを消去します\n\t\t//---------------------------------------------------------------------------\n\t\teraseLines: function() {\n\t\t\tvar count = 0;\n\t\t\tfor (var i = 0, len = this.length; i < len; i++) {\n\t\t\t\tfor (var j = i + 1; j < len; j++) {\n\t\t\t\t\tvar border = this.puzzle.mouse.getnb(\n\t\t\t\t\t\tthis[i].getaddr(),\n\t\t\t\t\t\tthis[j].getaddr()\n\t\t\t\t\t);\n\t\t\t\t\tif (!border.isnull) {\n\t\t\t\t\t\tborder.removeLine();\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count > 0) {\n\t\t\t\tthis.draw();\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// clist.draw()   盤面に自分の周囲を描画する\n\t\t//---------------------------------------------------------------------------\n\t\tdraw: function() {\n\t\t\tvar d = this.getRectSize();\n\t\t\tthis.puzzle.painter.paintRange(d.x1 - 1, d.y1 - 1, d.x2 + 1, d.y2 + 1);\n\t\t}\n\t},\n\n\t//----------------------------------------------------------------------------\n\t// ★CrossListクラス Crossの配列を扱う\n\t//---------------------------------------------------------------------------\n\t\"CrossList:PieceList\": {},\n\n\t//----------------------------------------------------------------------------\n\t// ★BorderListクラス Borderの配列を扱う\n\t//---------------------------------------------------------------------------\n\t\"BorderList:PieceList\": {\n\t\t//---------------------------------------------------------------------------\n\t\t// blist.cellinside()  線が重なるセルのリストを取得する\n\t\t// blist.crossinside() 線が重なる交点のリストを取得する\n\t\t//---------------------------------------------------------------------------\n\t\tcellinside: function() {\n\t\t\tvar clist = new this.klass.CellList(),\n\t\t\t\tpushed = [];\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tvar border = this[i],\n\t\t\t\t\tcell1 = border.sidecell[0],\n\t\t\t\t\tcell2 = border.sidecell[1];\n\t\t\t\tif (!cell1.isnull && pushed[cell1.id] !== true) {\n\t\t\t\t\tclist.add(cell1);\n\t\t\t\t\tpushed[cell1.id] = true;\n\t\t\t\t}\n\t\t\t\tif (!cell2.isnull && pushed[cell2.id] !== true) {\n\t\t\t\t\tclist.add(cell2);\n\t\t\t\t\tpushed[cell2.id] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn clist;\n\t\t},\n\t\tcrossinside: function() {\n\t\t\tvar clist = new this.klass.CrossList(),\n\t\t\t\tpushed = [];\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tvar border = this[i],\n\t\t\t\t\tcross1 = border.sidecross[0],\n\t\t\t\t\tcross2 = border.sidecross[1];\n\t\t\t\tif (!cross1.isnull && pushed[cross1.id] !== true) {\n\t\t\t\t\tclist.add(cross1);\n\t\t\t\t\tpushed[cross1.id] = true;\n\t\t\t\t}\n\t\t\t\tif (!cross2.isnull && pushed[cross2.id] !== true) {\n\t\t\t\t\tclist.add(cross2);\n\t\t\t\t\tpushed[cross2.id] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn clist;\n\t\t}\n\t},\n\n\t//----------------------------------------------------------------------------\n\t// ★ExCellListクラス ExCellの配列を扱う\n\t//---------------------------------------------------------------------------\n\t\"ExCellList:PieceList\": {}\n});\n","// Board.js v3.4.1\n\n//---------------------------------------------------------------------------\n// ★Boardクラス 盤面の情報を保持する。Cell, Cross, Borderのオブジェクトも保持する\n//---------------------------------------------------------------------------\n// Boardクラスの定義\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\tBoard: {\n\t\tinitialize: function() {\n\t\t\tvar classes = this.klass;\n\n\t\t\t// 盤面の範囲\n\t\t\tthis.minbx = 0;\n\t\t\tthis.minby = 0;\n\t\t\tthis.maxbx = 0;\n\t\t\tthis.maxby = 0;\n\n\t\t\t// エラー設定可能状態かどうか\n\t\t\tthis.diserror = 0;\n\n\t\t\t// エラー表示中かどうか\n\t\t\tthis.haserror = false;\n\n\t\t\t// Info表示中かどうか\n\t\t\tthis.hasinfo = false;\n\n\t\t\t// 盤面上にあるセル・境界線等のオブジェクト\n\t\t\tthis.cell = new classes.CellList();\n\t\t\tthis.cross = new classes.CrossList();\n\t\t\tthis.border = new classes.BorderList();\n\t\t\tthis.excell = new classes.ExCellList();\n\n\t\t\t// 空オブジェクト\n\t\t\tthis.nullobj = new classes.BoardPiece();\n\t\t\tthis.emptycell = new classes.Cell();\n\t\t\tthis.emptycross = new classes.Cross();\n\t\t\tthis.emptyborder = new classes.Border();\n\t\t\tthis.emptyexcell = new classes.ExCell();\n\t\t\ttry {\n\t\t\t\tObject.freeze(this.nullobj);\n\t\t\t\tObject.freeze(this.emptycell);\n\t\t\t\tObject.freeze(this.emptycross);\n\t\t\t\tObject.freeze(this.emptyborder);\n\t\t\t\tObject.freeze(this.emptyexcell);\n\t\t\t} catch (e) {}\n\n\t\t\tthis.createExtraObject();\n\n\t\t\t// 補助オブジェクト\n\t\t\tthis.disrecinfo = 0;\n\t\t\tthis.infolist = [];\n\n\t\t\tthis.linegraph = this.addInfoList(classes.LineGraph); // 交差なし線のグラフ\n\t\t\tthis.roommgr = this.addInfoList(classes.AreaRoomGraph); // 部屋情報を保持する\n\t\t\tthis.sblkmgr = this.addInfoList(classes.AreaShadeGraph); // 黒マス情報を保持する\n\t\t\tthis.ublkmgr = this.addInfoList(classes.AreaUnshadeGraph); // 白マス情報を保持する\n\t\t\tthis.nblkmgr = this.addInfoList(classes.AreaNumberGraph); // 数字情報を保持する\n\n\t\t\tthis.addExtraInfo();\n\n\t\t\tthis.exec = new classes.BoardExec();\n\t\t\tthis.exec.insex.cross = this.hascross === 1 ? { 2: true } : { 0: true };\n\n\t\t\tthis.trialstage = 0; // TrialMode\n\t\t},\n\t\taddInfoList: function(Klass) {\n\t\t\tvar instance = new Klass();\n\t\t\tif (instance.enabled) {\n\t\t\t\tthis.infolist.push(instance);\n\t\t\t}\n\t\t\treturn instance;\n\t\t},\n\t\taddExtraInfo: function() {},\n\n\t\tcols: 10 /* 盤面の横幅(デフォルト) */,\n\t\trows: 10 /* 盤面の縦幅(デフォルト) */,\n\n\t\thascross: 2, // 1:盤面内側のCrossが操作可能なパズル 2:外枠上を含めてCrossが操作可能なパズル (どちらもCrossは外枠上に存在します)\n\t\thasborder: 0, // 1:Border/Lineが操作可能なパズル 2:外枠上も操作可能なパズル\n\t\thasexcell: 0, // 1:上・左側にセルを用意するパズル 2:四方にセルを用意するパズル\n\t\thasflush: 0,\n\t\tborderAsLine: false, // 境界線をlineとして扱う\n\t\tdisable_subclear: false, // \"補助消去\"ボタン不要\n\n\t\texcellRows: function(cols, rows) {\n\t\t\treturn 1;\n\t\t},\n\t\texcellCols: function(cols, rows) {\n\t\t\treturn 1;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.initBoardSize() 指定されたサイズで盤面の初期化を行う\n\t\t//---------------------------------------------------------------------------\n\t\tinitBoardSize: function(col, row) {\n\t\t\tif (col === void 0 || isNaN(col)) {\n\t\t\t\tcol = this.cols;\n\t\t\t\trow = this.rows;\n\t\t\t}\n\n\t\t\tthis.allclear(false); // initGroupで、新Objectに対しては別途allclearが呼ばれます\n\n\t\t\tthis.initGroup(\"cell\", col, row);\n\t\t\tthis.initGroup(\"cross\", col, row);\n\t\t\tthis.initGroup(\"border\", col, row);\n\t\t\tthis.initGroup(\"excell\", col, row);\n\n\t\t\tthis.cols = col;\n\t\t\tthis.rows = row;\n\t\t\tthis.setminmax();\n\t\t\tthis.setposAll();\n\n\t\t\tif (this.hasdots === 1) {\n\t\t\t\tthis.initDots(this.cols, this.rows);\n\t\t\t}\n\n\t\t\tthis.initExtraObject(col, row);\n\n\t\t\tthis.rebuildInfo();\n\n\t\t\tthis.puzzle.cursor.initCursor();\n\t\t\tthis.puzzle.opemgr.allerase();\n\t\t},\n\t\tcreateExtraObject: function() {},\n\t\tinitExtraObject: function(col, row) {},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.initGroup()     数を比較して、オブジェクトの追加か削除を行う\n\t\t// bd.getGroup()      指定したタイプのオブジェクト配列を返す\n\t\t// bd.estimateSize()  指定したオブジェクトがいくつになるか計算を行う\n\t\t// bd.newObject()     指定されたタイプの新しいオブジェクトを返す\n\t\t//---------------------------------------------------------------------------\n\t\tinitGroup: function(group, col, row) {\n\t\t\tvar groups = this.getGroup(group);\n\t\t\tvar len = this.estimateSize(group, col, row),\n\t\t\t\tclen = groups.length;\n\t\t\t// 既存のサイズより小さくなるならdeleteする\n\t\t\tif (clen > len) {\n\t\t\t\tfor (var id = clen - 1; id >= len; id--) {\n\t\t\t\t\tgroups.pop();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 既存のサイズより大きくなるなら追加する\n\t\t\telse if (clen < len) {\n\t\t\t\tvar groups2 = new groups.constructor();\n\t\t\t\tfor (var id = clen; id < len; id++) {\n\t\t\t\t\tvar piece = this.newObject(group, id);\n\t\t\t\t\tgroups.add(piece);\n\t\t\t\t\tgroups2.add(piece);\n\t\t\t\t}\n\t\t\t\tgroups2.allclear(false);\n\t\t\t}\n\t\t\tgroups.length = len;\n\t\t\treturn len - clen;\n\t\t},\n\t\tgetGroup: function(group) {\n\t\t\tif (group === \"cell\") {\n\t\t\t\treturn this.cell;\n\t\t\t} else if (group === \"cross\") {\n\t\t\t\treturn this.cross;\n\t\t\t} else if (group === \"border\") {\n\t\t\t\treturn this.border;\n\t\t\t} else if (group === \"excell\") {\n\t\t\t\treturn this.excell;\n\t\t\t}\n\t\t\treturn new this.klass.PieceList();\n\t\t},\n\t\testimateSize: function(group, col, row) {\n\t\t\tif (group === \"cell\") {\n\t\t\t\treturn col * row;\n\t\t\t} else if (group === \"cross\") {\n\t\t\t\treturn (col + 1) * (row + 1);\n\t\t\t} else if (group === \"border\") {\n\t\t\t\tif (this.hasborder === 1) {\n\t\t\t\t\treturn 2 * col * row - (col + row);\n\t\t\t\t} else if (this.hasborder === 2) {\n\t\t\t\t\treturn 2 * col * row + (col + row);\n\t\t\t\t}\n\t\t\t} else if (group === \"excell\") {\n\t\t\t\tif (this.hasexcell === 1) {\n\t\t\t\t\tvar exrows = this.excellRows(col, row);\n\t\t\t\t\tvar excols = this.excellCols(col, row);\n\t\t\t\t\tcol *= exrows;\n\t\t\t\t\trow *= excols;\n\t\t\t\t\treturn col + row + (this.emptyexcell.ques === 51 ? 1 : 0);\n\t\t\t\t} /* 左上角のExCellを追加 */ else if (this.hasexcell === 2) {\n\t\t\t\t\treturn 2 * (col + row);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\t\tnewObject: function(group, id) {\n\t\t\tvar piece = this.nullobj,\n\t\t\t\tclasses = this.klass;\n\t\t\tif (group === \"cell\") {\n\t\t\t\tpiece = new classes.Cell();\n\t\t\t} else if (group === \"cross\") {\n\t\t\t\tpiece = new classes.Cross();\n\t\t\t} else if (group === \"border\") {\n\t\t\t\tpiece = new classes.Border();\n\t\t\t} else if (group === \"excell\") {\n\t\t\t\tpiece = new classes.ExCell();\n\t\t\t}\n\t\t\tif (piece !== this.nullobj && id !== void 0) {\n\t\t\t\tpiece.id = id;\n\t\t\t}\n\t\t\treturn piece;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.setposAll()    全てのCell, Cross, BorderオブジェクトのsetposCell()等を呼び出す\n\t\t//                   盤面の新規作成や、拡大/縮小/回転/反転時などに呼び出される\n\t\t// bd.setposGroup()  指定されたタイプのsetpos関数を呼び出す\n\t\t// bd.setposCell()   該当するidのセルのbx,byプロパティを設定する\n\t\t// bd.setposCross()  該当するidの交差点のbx,byプロパティを設定する\n\t\t// bd.setposBorder() 該当するidの境界線/Lineのbx,byプロパティを設定する\n\t\t// bd.setposExCell() 該当するidのExtendセルのbx,byプロパティを設定する\n\t\t// bd.set_xnum()     crossは存在しないが、bd._xnumだけ設定したい場合に呼び出す\n\t\t//---------------------------------------------------------------------------\n\t\t/* setpos関連関数 */\n\t\tsetposAll: function() {\n\t\t\tthis.setposCells();\n\t\t\tthis.setposCrosses();\n\t\t\tthis.setposBorders();\n\t\t\tthis.setposExCells();\n\t\t},\n\t\tsetposGroup: function(group) {\n\t\t\tif (group === \"cell\") {\n\t\t\t\tthis.setposCells();\n\t\t\t} else if (group === \"cross\") {\n\t\t\t\tthis.setposCrosses();\n\t\t\t} else if (group === \"border\") {\n\t\t\t\tthis.setposBorders();\n\t\t\t} else if (group === \"excell\") {\n\t\t\t\tthis.setposExCells();\n\t\t\t}\n\t\t},\n\n\t\tsetposCells: function() {\n\t\t\tvar qc = this.cols;\n\t\t\tfor (var id = 0; id < this.cell.length; id++) {\n\t\t\t\tvar cell = this.cell[id];\n\t\t\t\tcell.id = id;\n\t\t\t\tcell.isnull = false;\n\n\t\t\t\tcell.bx = (id % qc) * 2 + 1;\n\t\t\t\tcell.by = ((id / qc) << 1) + 1;\n\n\t\t\t\tcell.initAdjacent();\n\t\t\t\tcell.initAdjBorder();\n\t\t\t}\n\t\t},\n\t\tsetposCrosses: function() {\n\t\t\tvar qc = this.cols;\n\t\t\tfor (var id = 0; id < this.cross.length; id++) {\n\t\t\t\tvar cross = this.cross[id];\n\t\t\t\tcross.id = id;\n\t\t\t\tcross.isnull = false;\n\n\t\t\t\tcross.bx = (id % (qc + 1)) * 2;\n\t\t\t\tcross.by = (id / (qc + 1)) << 1;\n\n\t\t\t\tcross.initAdjBorder();\n\t\t\t}\n\t\t},\n\t\tsetposBorders: function() {\n\t\t\tvar qc = this.cols,\n\t\t\t\tqr = this.rows;\n\t\t\tvar bdinside = 2 * qc * qr - qc - qr;\n\t\t\tfor (var id = 0; id < this.border.length; id++) {\n\t\t\t\tvar border = this.border[id],\n\t\t\t\t\ti = id;\n\t\t\t\tborder.id = id;\n\t\t\t\tborder.isnull = false;\n\n\t\t\t\tif (i >= 0 && i < (qc - 1) * qr) {\n\t\t\t\t\tborder.bx = (i % (qc - 1)) * 2 + 2;\n\t\t\t\t\tborder.by = ((i / (qc - 1)) << 1) + 1;\n\t\t\t\t}\n\t\t\t\ti -= (qc - 1) * qr;\n\t\t\t\tif (i >= 0 && i < qc * (qr - 1)) {\n\t\t\t\t\tborder.bx = (i % qc) * 2 + 1;\n\t\t\t\t\tborder.by = ((i / qc) << 1) + 2;\n\t\t\t\t}\n\t\t\t\ti -= qc * (qr - 1);\n\t\t\t\tif (this.hasborder === 2) {\n\t\t\t\t\tif (i >= 0 && i < qc) {\n\t\t\t\t\t\tborder.bx = i * 2 + 1;\n\t\t\t\t\t\tborder.by = 0;\n\t\t\t\t\t}\n\t\t\t\t\ti -= qc;\n\t\t\t\t\tif (i >= 0 && i < qc) {\n\t\t\t\t\t\tborder.bx = i * 2 + 1;\n\t\t\t\t\t\tborder.by = 2 * qr;\n\t\t\t\t\t}\n\t\t\t\t\ti -= qc;\n\t\t\t\t\tif (i >= 0 && i < qr) {\n\t\t\t\t\t\tborder.bx = 0;\n\t\t\t\t\t\tborder.by = i * 2 + 1;\n\t\t\t\t\t}\n\t\t\t\t\ti -= qr;\n\t\t\t\t\tif (i >= 0 && i < qr) {\n\t\t\t\t\t\tborder.bx = 2 * qc;\n\t\t\t\t\t\tborder.by = i * 2 + 1;\n\t\t\t\t\t}\n\t\t\t\t\ti -= qr;\n\t\t\t\t}\n\t\t\t\tborder.isvert = !(border.bx & 1);\n\t\t\t\tborder.inside = id < bdinside;\n\n\t\t\t\tborder.initSideObject();\n\t\t\t}\n\t\t},\n\t\tsetposExCells: function() {\n\t\t\tvar exrows = this.excellRows(this.cols, this.rows),\n\t\t\t\texcols = this.excellCols(this.cols, this.rows),\n\t\t\t\tqc = this.cols * exrows,\n\t\t\t\tqr = this.rows * excols;\n\t\t\tfor (var id = 0; id < this.excell.length; id++) {\n\t\t\t\tvar excell = this.excell[id],\n\t\t\t\t\ti = id;\n\t\t\t\texcell.id = id;\n\t\t\t\texcell.isnull = false;\n\n\t\t\t\tif (this.hasexcell === 1) {\n\t\t\t\t\tif (i >= 0 && i < qc) {\n\t\t\t\t\t\texcell.bx = ((i / exrows) | 0) * 2 + 1;\n\t\t\t\t\t\texcell.by = (i % exrows) * -2 - 1;\n\t\t\t\t\t}\n\t\t\t\t\ti -= qc;\n\t\t\t\t\tif (i >= 0 && i < qr) {\n\t\t\t\t\t\texcell.bx = (i % excols) * -2 - 1;\n\t\t\t\t\t\texcell.by = ((i / excols) | 0) * 2 + 1;\n\t\t\t\t\t}\n\t\t\t\t\ti -= qr;\n\t\t\t\t\tif (i === 0 && excell.ques === 51) {\n\t\t\t\t\t\texcell.bx = -1;\n\t\t\t\t\t\texcell.by = -1;\n\t\t\t\t\t}\n\t\t\t\t\ti--; /* 左上角のExCellを追加 */\n\t\t\t\t} else if (this.hasexcell === 2) {\n\t\t\t\t\tif (i >= 0 && i < qc) {\n\t\t\t\t\t\texcell.bx = i * 2 + 1;\n\t\t\t\t\t\texcell.by = -1;\n\t\t\t\t\t}\n\t\t\t\t\ti -= qc;\n\t\t\t\t\tif (i >= 0 && i < qc) {\n\t\t\t\t\t\texcell.bx = i * 2 + 1;\n\t\t\t\t\t\texcell.by = 2 * qr + 1;\n\t\t\t\t\t}\n\t\t\t\t\ti -= qc;\n\t\t\t\t\tif (i >= 0 && i < qr) {\n\t\t\t\t\t\texcell.bx = -1;\n\t\t\t\t\t\texcell.by = i * 2 + 1;\n\t\t\t\t\t}\n\t\t\t\t\ti -= qr;\n\t\t\t\t\tif (i >= 0 && i < qr) {\n\t\t\t\t\t\texcell.bx = 2 * qc + 1;\n\t\t\t\t\t\texcell.by = i * 2 + 1;\n\t\t\t\t\t}\n\t\t\t\t\ti -= qr;\n\t\t\t\t}\n\n\t\t\t\texcell.initAdjacent();\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.setminmax()   盤面のbx,byの最小値/最大値をセットする\n\t\t//---------------------------------------------------------------------------\n\t\tsetminmax: function() {\n\t\t\tvar extUL = this.hasexcell > 0;\n\t\t\tvar extDR = this.hasexcell === 2;\n\t\t\tthis.minbx = !extUL ? 0 : -2 * this.excellCols(this.cols, this.rows);\n\t\t\tthis.minby = !extUL ? 0 : -2 * this.excellRows(this.cols, this.rows);\n\t\t\tthis.maxbx = !extDR ? 2 * this.cols : 2 * this.cols + 2;\n\t\t\tthis.maxby = !extDR ? 2 * this.rows : 2 * this.rows + 2;\n\n\t\t\tthis.puzzle.cursor.setminmax();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.allclear() 全てのCell, Cross, Borderオブジェクトのallclear()を呼び出す\n\t\t// bd.ansclear() 全てのCell, Cross, Borderオブジェクトのansclear()を呼び出す\n\t\t// bd.subclear() 全てのCell, Cross, Borderオブジェクトのsubclear()を呼び出す\n\t\t// bd.errclear() 全てのCell, Cross, Borderオブジェクトのerrorプロパティを0にして、Canvasを再描画する\n\t\t// bd.trialclear() 全てのCell, Cross, Borderオブジェクトのtrialプロパティを0にして、Canvasを再描画する\n\t\t//---------------------------------------------------------------------------\n\t\t// 呼び出し元：this.initBoardSize()\n\t\tallclear: function(isrec) {\n\t\t\tthis.cell.allclear(isrec);\n\t\t\tthis.cross.allclear(isrec);\n\t\t\tthis.border.allclear(isrec);\n\t\t\tthis.excell.allclear(isrec);\n\t\t\tif (isrec) {\n\t\t\t\tthis.puzzle.opemgr.rejectTrial(true);\n\t\t\t}\n\t\t},\n\t\t// 呼び出し元：回答消去ボタン押した時\n\t\tansclear: function() {\n\t\t\tvar opemgr = this.puzzle.opemgr;\n\t\t\topemgr.rejectTrial(true);\n\t\t\topemgr.newOperation();\n\t\t\topemgr.add(new this.puzzle.klass.BoardClearOperation());\n\n\t\t\tthis.cell.ansclear();\n\t\t\tthis.cross.ansclear();\n\t\t\tthis.border.ansclear();\n\t\t\tthis.excell.ansclear();\n\t\t\tthis.rebuildInfo();\n\t\t},\n\t\t// 呼び出し元：補助消去ボタン押した時\n\t\tsubclear: function() {\n\t\t\tthis.puzzle.opemgr.newOperation();\n\n\t\t\tthis.cell.subclear();\n\t\t\tthis.cross.subclear();\n\t\t\tthis.border.subclear();\n\t\t\tthis.excell.subclear();\n\t\t},\n\n\t\terrclear: function() {\n\t\t\tvar isclear = this.haserror || this.hasinfo;\n\t\t\tif (isclear) {\n\t\t\t\tthis.cell.errclear();\n\t\t\t\tthis.cross.errclear();\n\t\t\t\tthis.border.errclear();\n\t\t\t\tthis.excell.errclear();\n\t\t\t\tthis.haserror = false;\n\t\t\t\tthis.hasinfo = false;\n\t\t\t}\n\t\t\treturn isclear;\n\t\t},\n\n\t\ttrialclear: function(forcemode) {\n\t\t\tif (this.trialstage > 0 || !!forcemode) {\n\t\t\t\tthis.cell.trialclear();\n\t\t\t\tthis.cross.trialclear();\n\t\t\t\tthis.border.trialclear();\n\t\t\t\tthis.excell.trialclear();\n\t\t\t\tthis.puzzle.redraw();\n\t\t\t\tthis.trialstage = 0;\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.getObjectPos()  (X,Y)の位置にあるオブジェクトを計算して返す\n\t\t//---------------------------------------------------------------------------\n\t\tgetObjectPos: function(group, bx, by) {\n\t\t\tvar obj = this.nullobj;\n\t\t\tif (group === \"cell\") {\n\t\t\t\tobj = this.getc(bx, by);\n\t\t\t} else if (group === \"cross\") {\n\t\t\t\tobj = this.getx(bx, by);\n\t\t\t} else if (group === \"border\") {\n\t\t\t\tobj = this.getb(bx, by);\n\t\t\t} else if (group === \"excell\") {\n\t\t\t\tobj = this.getex(bx, by);\n\t\t\t} else if (group === \"obj\") {\n\t\t\t\tobj = this.getobj(bx, by);\n\t\t\t}\n\t\t\treturn obj;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.getc()  (X,Y)の位置にあるCellオブジェクトを返す\n\t\t// bd.getx()  (X,Y)の位置にあるCrossオブジェクトを返す\n\t\t// bd.getb()  (X,Y)の位置にあるBorderオブジェクトを返す\n\t\t// bd.getex() (X,Y)の位置にあるextendCellオブジェクトを返す\n\t\t// bd.getobj() (X,Y)の位置にある何らかのオブジェクトを返す\n\t\t//---------------------------------------------------------------------------\n\t\tgetc: function(bx, by) {\n\t\t\tvar id = null,\n\t\t\t\tqc = this.cols,\n\t\t\t\tqr = this.rows;\n\t\t\tif (\n\t\t\t\tbx < 0 ||\n\t\t\t\tbx > qc << 1 ||\n\t\t\t\tby < 0 ||\n\t\t\t\tby > qr << 1 ||\n\t\t\t\t!(bx & 1) ||\n\t\t\t\t!(by & 1)\n\t\t\t) {\n\t\t\t} else {\n\t\t\t\tid = (bx >> 1) + (by >> 1) * qc;\n\t\t\t}\n\n\t\t\treturn id !== null ? this.cell[id] : this.emptycell;\n\t\t},\n\t\tgetx: function(bx, by) {\n\t\t\tvar id = null,\n\t\t\t\tqc = this.cols,\n\t\t\t\tqr = this.rows;\n\t\t\tif (\n\t\t\t\tbx < 0 ||\n\t\t\t\tbx > qc << 1 ||\n\t\t\t\tby < 0 ||\n\t\t\t\tby > qr << 1 ||\n\t\t\t\t!!(bx & 1) ||\n\t\t\t\t!!(by & 1)\n\t\t\t) {\n\t\t\t} else {\n\t\t\t\tid = (bx >> 1) + (by >> 1) * (qc + 1);\n\t\t\t}\n\n\t\t\tif (this.hascross !== 0) {\n\t\t\t\treturn id !== null ? this.cross[id] : this.emptycross;\n\t\t\t}\n\t\t\treturn this.emptycross;\n\t\t},\n\t\tgetb: function(bx, by) {\n\t\t\tvar id = null,\n\t\t\t\tqc = this.cols,\n\t\t\t\tqr = this.rows;\n\t\t\tif (\n\t\t\t\t!!this.hasborder &&\n\t\t\t\tbx >= 1 &&\n\t\t\t\tbx <= 2 * qc - 1 &&\n\t\t\t\tby >= 1 &&\n\t\t\t\tby <= 2 * qr - 1\n\t\t\t) {\n\t\t\t\tif (!(bx & 1) && by & 1) {\n\t\t\t\t\tid = (bx >> 1) - 1 + (by >> 1) * (qc - 1);\n\t\t\t\t} else if (bx & 1 && !(by & 1)) {\n\t\t\t\t\tid = (bx >> 1) + ((by >> 1) - 1) * qc + (qc - 1) * qr;\n\t\t\t\t}\n\t\t\t} else if (this.hasborder === 2) {\n\t\t\t\tif (by === 0 && bx & 1 && bx >= 1 && bx <= 2 * qc - 1) {\n\t\t\t\t\tid = (qc - 1) * qr + qc * (qr - 1) + (bx >> 1);\n\t\t\t\t} else if (by === 2 * qr && bx & 1 && bx >= 1 && bx <= 2 * qc - 1) {\n\t\t\t\t\tid = (qc - 1) * qr + qc * (qr - 1) + qc + (bx >> 1);\n\t\t\t\t} else if (bx === 0 && by & 1 && by >= 1 && by <= 2 * qr - 1) {\n\t\t\t\t\tid = (qc - 1) * qr + qc * (qr - 1) + 2 * qc + (by >> 1);\n\t\t\t\t} else if (bx === 2 * qc && by & 1 && by >= 1 && by <= 2 * qr - 1) {\n\t\t\t\t\tid = (qc - 1) * qr + qc * (qr - 1) + 2 * qc + qr + (by >> 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn id !== null ? this.border[id] : this.emptyborder;\n\t\t},\n\t\tgetex: function(bx, by) {\n\t\t\tvar xr = this.excellRows(this.cols, this.rows);\n\t\t\tvar xc = this.excellCols(this.cols, this.rows);\n\t\t\tvar id = null,\n\t\t\t\tqc = this.cols * xr,\n\t\t\t\tqr = this.rows * xc;\n\n\t\t\tif (this.hasexcell === 1) {\n\t\t\t\tif (this.emptyexcell.ques === 51 && bx === -1 && by === -1) {\n\t\t\t\t\tid = qc + qr; /* 左上角のExCellを追加 */\n\t\t\t\t} else if (by >= this.minby && by < 0 && bx > 0 && bx < 2 * qc) {\n\t\t\t\t\tid = (-by >> 1) + (bx >> 1) * xr;\n\t\t\t\t} else if (bx >= this.minbx && bx < 0 && by > 0 && by < 2 * qr) {\n\t\t\t\t\tid = (-bx >> 1) + qc + (by >> 1) * xc;\n\t\t\t\t}\n\t\t\t} else if (this.hasexcell === 2) {\n\t\t\t\tif (by === -1 && bx > 0 && bx < 2 * qc) {\n\t\t\t\t\tid = bx >> 1;\n\t\t\t\t} else if (by === 2 * qr + 1 && bx > 0 && bx < 2 * qc) {\n\t\t\t\t\tid = qc + (bx >> 1);\n\t\t\t\t} else if (bx === -1 && by > 0 && by < 2 * qr) {\n\t\t\t\t\tid = 2 * qc + (by >> 1);\n\t\t\t\t} else if (bx === 2 * qc + 1 && by > 0 && by < 2 * qr) {\n\t\t\t\t\tid = 2 * qc + qr + (by >> 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn id !== null ? this.excell[id] : this.emptyexcell;\n\t\t},\n\n\t\tgetobj: function(bx, by) {\n\t\t\tif ((bx + by) & 1) {\n\t\t\t\treturn this.getb(bx, by);\n\t\t\t} else if (!(bx & 1) && !(by & 1)) {\n\t\t\t\treturn this.getx(bx, by);\n\t\t\t}\n\n\t\t\tvar cell = this.getc(bx, by);\n\t\t\treturn cell !== this.emptycell || !this.hasexcell\n\t\t\t\t? cell\n\t\t\t\t: this.getex(bx, by);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.operate()  BoardExecの拡大縮小・回転反転処理を実行する\n\t\t//---------------------------------------------------------------------------\n\t\toperate: function(type) {\n\t\t\tif (this.trialstage > 0 && this.exec.isBoardOp(type)) {\n\t\t\t\tthrow \"board operations are not possible in trial mode\";\n\t\t\t}\n\t\t\tthis.exec.execadjust(type);\n\t\t},\n\n\t\tflushexcell: function() {\n\t\t\tthis.puzzle.opemgr.newOperation();\n\t\t\tvar cols = this.cols,\n\t\t\t\trows = this.rows,\n\t\t\t\texcell = this.excell;\n\t\t\tthis.genericFlush(\n\t\t\t\tthis.excellCols(cols, rows),\n\t\t\t\tthis.excellRows(cols, rows),\n\t\t\t\tcols,\n\t\t\t\trows,\n\t\t\t\tfunction(i) {\n\t\t\t\t\treturn excell[i].qnum;\n\t\t\t\t},\n\t\t\t\tfunction(i, num) {\n\t\t\t\t\texcell[i].setQnum(num);\n\t\t\t\t}\n\t\t\t);\n\t\t\tthis.puzzle.redraw();\n\t\t},\n\n\t\tgenericFlush: function(excols, exrows, cols, rows, get_func, set_func) {\n\t\t\tvar qc = cols * exrows,\n\t\t\t\tqr = rows * excols,\n\t\t\t\tdest = 0;\n\n\t\t\tfor (var id = 0; id < qc + qr; id++) {\n\t\t\t\tif (get_func(id) !== -1) {\n\t\t\t\t\tif (id !== dest - 1) {\n\t\t\t\t\t\tset_func(dest, get_func(id));\n\t\t\t\t\t}\n\t\t\t\t\tdest++;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(id < qc && id % exrows === exrows - 1) ||\n\t\t\t\t\t(id >= qc && (id - qc) % excols === excols - 1)\n\t\t\t\t) {\n\t\t\t\t\tfor (var b = dest; b <= id; b++) {\n\t\t\t\t\t\tset_func(b, -1);\n\t\t\t\t\t}\n\t\t\t\t\tdest = id + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.objectinside() 座標(x1,y1)-(x2,y2)に含まれるオブジェクトのリストを取得する\n\t\t//---------------------------------------------------------------------------\n\t\tobjectinside: function(group, x1, y1, x2, y2) {\n\t\t\tif (group === \"cell\") {\n\t\t\t\treturn this.cellinside(x1, y1, x2, y2);\n\t\t\t} else if (group === \"cross\") {\n\t\t\t\treturn this.crossinside(x1, y1, x2, y2);\n\t\t\t} else if (group === \"border\") {\n\t\t\t\treturn this.borderinside(x1, y1, x2, y2);\n\t\t\t} else if (group === \"excell\") {\n\t\t\t\treturn this.excellinside(x1, y1, x2, y2);\n\t\t\t}\n\t\t\treturn new this.klass.PieceList();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.cellinside()   座標(x1,y1)-(x2,y2)に含まれるCellのリストを取得する\n\t\t// bd.crossinside()  座標(x1,y1)-(x2,y2)に含まれるCrossのリストを取得する\n\t\t// bd.borderinside() 座標(x1,y1)-(x2,y2)に含まれるBorderのリストを取得する\n\t\t// bd.excellinside() 座標(x1,y1)-(x2,y2)に含まれるExCellのリストを取得する\n\t\t//---------------------------------------------------------------------------\n\t\tcellinside: function(x1, y1, x2, y2) {\n\t\t\tvar clist = new this.klass.CellList();\n\t\t\tfor (var by = y1 | 1; by <= y2; by += 2) {\n\t\t\t\tfor (var bx = x1 | 1; bx <= x2; bx += 2) {\n\t\t\t\t\tvar cell = this.getc(bx, by);\n\t\t\t\t\tif (!cell.isnull) {\n\t\t\t\t\t\tclist.add(cell);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn clist;\n\t\t},\n\t\tcrossinside: function(x1, y1, x2, y2) {\n\t\t\tvar clist = new this.klass.CrossList();\n\t\t\tif (!!this.hascross) {\n\t\t\t\tfor (var by = y1 + (y1 & 1); by <= y2; by += 2) {\n\t\t\t\t\tfor (var bx = x1 + (x1 & 1); bx <= x2; bx += 2) {\n\t\t\t\t\t\tvar cross = this.getx(bx, by);\n\t\t\t\t\t\tif (!cross.isnull) {\n\t\t\t\t\t\t\tclist.add(cross);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn clist;\n\t\t},\n\t\tborderinside: function(x1, y1, x2, y2) {\n\t\t\tvar blist = new this.klass.BorderList();\n\t\t\tif (!!this.hasborder) {\n\t\t\t\tfor (var by = y1; by <= y2; by++) {\n\t\t\t\t\tfor (var bx = x1 + (((x1 + by) & 1) ^ 1); bx <= x2; bx += 2) {\n\t\t\t\t\t\tvar border = this.getb(bx, by);\n\t\t\t\t\t\tif (!border.isnull) {\n\t\t\t\t\t\t\tblist.add(border);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn blist;\n\t\t},\n\t\texcellinside: function(x1, y1, x2, y2) {\n\t\t\tvar exlist = new this.klass.ExCellList();\n\t\t\tif (!!this.hasexcell) {\n\t\t\t\tfor (var by = y1 | 1; by <= y2; by += 2) {\n\t\t\t\t\tfor (var bx = x1 | 1; bx <= x2; bx += 2) {\n\t\t\t\t\t\tvar excell = this.getex(bx, by);\n\t\t\t\t\t\tif (excell && !excell.isnull) {\n\t\t\t\t\t\t\texlist.add(excell);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn exlist;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.disableInfo()  Area/LineManagerへの登録を禁止する\n\t\t// bd.enableInfo()   Area/LineManagerへの登録を許可する\n\t\t// bd.isenableInfo() 操作の登録できるかを返す\n\t\t//---------------------------------------------------------------------------\n\t\tdisableInfo: function() {\n\t\t\tthis.puzzle.opemgr.disableRecord();\n\t\t\tthis.disrecinfo++;\n\t\t},\n\t\tenableInfo: function() {\n\t\t\tthis.puzzle.opemgr.enableRecord();\n\t\t\tif (this.disrecinfo > 0) {\n\t\t\t\tthis.disrecinfo--;\n\t\t\t}\n\t\t},\n\t\tisenableInfo: function() {\n\t\t\treturn this.disrecinfo === 0;\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// bd.rebuildInfo()      部屋、黒マス、白マスの情報を再生成する\n\t\t// bd.modifyInfo()       黒マス・白マス・境界線や線が入力されたり消された時に情報を変更する\n\t\t//--------------------------------------------------------------------------------\n\t\trebuildInfo: function() {\n\t\t\tthis.infolist.forEach(function(info) {\n\t\t\t\tinfo.rebuild();\n\t\t\t});\n\t\t},\n\t\tmodifyInfo: function(obj, type) {\n\t\t\tif (!this.isenableInfo()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (var i = 0; i < this.infolist.length; ++i) {\n\t\t\t\tvar info = this.infolist[i];\n\t\t\t\tif (!!info.relation[type]) {\n\t\t\t\t\tinfo.modifyInfo(obj, type);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.irowakeRemake() 「色分けしなおす」ボタンを押した時などに色分けしなおす\n\t\t//---------------------------------------------------------------------------\n\t\tirowakeRemake: function() {\n\t\t\tfor (var i = 0; i < this.infolist.length; ++i) {\n\t\t\t\tvar info = this.infolist[i];\n\t\t\t\tif (info.coloring) {\n\t\t\t\t\tinfo.newIrowake();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.disableSetError()  盤面のオブジェクトにエラーフラグを設定できないようにする\n\t\t// bd.enableSetError()   盤面のオブジェクトにエラーフラグを設定できるようにする\n\t\t// bd.isenableSetError() 盤面のオブジェクトにエラーフラグを設定できるかどうかを返す\n\t\t//---------------------------------------------------------------------------\n\t\tdisableSetError: function() {\n\t\t\tthis.diserror++;\n\t\t},\n\t\tenableSetError: function() {\n\t\t\tthis.diserror--;\n\t\t},\n\t\tisenableSetError: function() {\n\t\t\treturn this.diserror <= 0;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// bd.freezecopy()  盤面のオブジェクト値のみを取得する\n\t\t// bd.compareData() 盤面のオブジェクト値のみを比較し異なる場合にcallback関数を呼ぶ\n\t\t//---------------------------------------------------------------------------\n\t\tfreezecopy: function() {\n\t\t\tvar bd2 = { cell: [], cross: [], border: [], excell: [] };\n\t\t\tfor (var group in bd2) {\n\t\t\t\tfor (var c = 0; c < this[group].length; c++) {\n\t\t\t\t\tbd2[group][c] = this[group][c].getprops();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn bd2;\n\t\t},\n\t\tcompareData: function(bd2, callback) {\n\t\t\tfor (var group in bd2) {\n\t\t\t\tif (!this[group]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tfor (var c = 0; c < bd2[group].length; c++) {\n\t\t\t\t\tif (!this[group][c]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tthis[group][c].compare(bd2[group][c], callback);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdotsmax: 0,\n\t\tdots: [],\n\n\t\t//---------------------------------------------------------------------------\n\t\tinitDots: function(col, row) {\n\t\t\tthis.dotsmax = (2 * col - 1) * (2 * row - 1);\n\t\t\tthis.dots = [];\n\t\t\tfor (var id = 0; id < this.dotsmax; id++) {\n\t\t\t\tthis.dots[id] = new this.klass.Dot();\n\t\t\t\tvar dot = this.dots[id];\n\t\t\t\tdot.id = id;\n\n\t\t\t\tdot.bx = (id % (2 * col - 1)) + 1;\n\t\t\t\tdot.by = ((id / (2 * col - 1)) | 0) + 1;\n\n\t\t\t\tdot.isnull = false;\n\t\t\t\tdot.piece = dot.getaddr().getobj();\n\t\t\t}\n\t\t},\n\n\t\tgetDot: function(bx, by) {\n\t\t\tvar qc = this.cols,\n\t\t\t\tqr = this.rows;\n\t\t\tif (bx <= 0 || bx >= qc << 1 || by <= 0 || by >= qr << 1) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar id = bx - 1 + (by - 1) * (2 * qc - 1);\n\t\t\tvar dot = this.dots[id];\n\t\t\treturn dot.isnull ? null : dot;\n\t\t},\n\n\t\tdotinside: function(x1, y1, x2, y2) {\n\t\t\tvar dlist = new this.klass.PieceList();\n\t\t\tfor (var by = y1; by <= y2; by++) {\n\t\t\t\tfor (var bx = x1; bx <= x2; bx++) {\n\t\t\t\t\tvar dot = this.getDot(bx, by);\n\t\t\t\t\tif (!!dot) {\n\t\t\t\t\t\tdlist.add(dot);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn dlist;\n\t\t}\n\t}\n});\n","// BoardExec.js v3.4.1\n\n(function() {\n\t// 拡大縮小・回転反転用定数\n\tvar UP = 0x01,\n\t\tDN = 0x02,\n\t\tLT = 0x03,\n\t\tRT = 0x04,\n\t\tEXPAND = 0x10,\n\t\tREDUCE = 0x20,\n\t\tTURN = 0x40,\n\t\tFLIP = 0x80;\n\n\tpzpr.classmgr.makeCommon({\n\t\t//---------------------------------------------------------------------------\n\t\t// ★BoardExecクラス 盤面の拡大縮小、反転回転等を行う (MenuExec.js, Board.jsから移動)\n\t\t//---------------------------------------------------------------------------\n\t\tBoardExec: {\n\t\t\t// 拡大縮小・回転反転用定数\n\t\t\tUP: UP,\n\t\t\tDN: DN,\n\t\t\tLT: LT,\n\t\t\tRT: RT,\n\n\t\t\tEXPAND: EXPAND,\n\t\t\tREDUCE: REDUCE,\n\t\t\tTURN: TURN,\n\t\t\tFLIP: FLIP,\n\t\t\tTURNFLIP: TURN | FLIP,\n\n\t\t\tEXPANDUP: EXPAND | UP,\n\t\t\tEXPANDDN: EXPAND | DN,\n\t\t\tEXPANDLT: EXPAND | LT,\n\t\t\tEXPANDRT: EXPAND | RT,\n\n\t\t\tREDUCEUP: REDUCE | UP,\n\t\t\tREDUCEDN: REDUCE | DN,\n\t\t\tREDUCELT: REDUCE | LT,\n\t\t\tREDUCERT: REDUCE | RT,\n\n\t\t\tTURNL: TURN | 1,\n\t\t\tTURNR: TURN | 2,\n\n\t\t\tFLIPX: FLIP | 1,\n\t\t\tFLIPY: FLIP | 2,\n\n\t\t\tboardtype: {\n\t\t\t\texpandup: [REDUCE | UP, EXPAND | UP],\n\t\t\t\texpanddn: [REDUCE | DN, EXPAND | DN],\n\t\t\t\texpandlt: [REDUCE | LT, EXPAND | LT],\n\t\t\t\texpandrt: [REDUCE | RT, EXPAND | RT],\n\t\t\t\treduceup: [EXPAND | UP, REDUCE | UP],\n\t\t\t\treducedn: [EXPAND | DN, REDUCE | DN],\n\t\t\t\treducelt: [EXPAND | LT, REDUCE | LT],\n\t\t\t\treducert: [EXPAND | RT, REDUCE | RT],\n\t\t\t\tturnl: [TURN | 2, TURN | 1],\n\t\t\t\tturnr: [TURN | 1, TURN | 2],\n\t\t\t\tflipy: [FLIP | 2, FLIP | 2],\n\t\t\t\tflipx: [FLIP | 1, FLIP | 1]\n\t\t\t},\n\n\t\t\t// expand/reduce処理用\n\t\t\tqnumw: [], // ques==51の回転･反転用\n\t\t\tqnumh: [], // ques==51の回転･反転用\n\n\t\t\t// expand/reduce処理で消える/増えるオブジェクトの判定用\n\t\t\tinsex: {\n\t\t\t\tcell: { 1: true },\n\t\t\t\tcross: {} /* Board初期化時に設定します */,\n\t\t\t\tborder: { 1: true, 2: true },\n\t\t\t\texcell: { 1: true }\n\t\t\t},\n\n\t\t\tisBoardOp: function(name) {\n\t\t\t\treturn !!this.boardtype[name];\n\t\t\t},\n\n\t\t\t//------------------------------------------------------------------------------\n\t\t\t// bd.exec.execadjust()   盤面の調整、回転、反転で対応する関数へジャンプする\n\t\t\t// bd.exec.execadjust_main() 盤面の調整、回転、反転処理の実行部\n\t\t\t//------------------------------------------------------------------------------\n\t\t\texecadjust: function(name) {\n\t\t\t\tif (!this.isBoardOp(name)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar puzzle = this.puzzle,\n\t\t\t\t\tbd = this.board;\n\t\t\t\tif (name.indexOf(\"reduce\") === 0) {\n\t\t\t\t\tif (name === \"reduceup\" || name === \"reducedn\") {\n\t\t\t\t\t\tif (bd.rows <= 1) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (name === \"reducelt\" || name === \"reducert\") {\n\t\t\t\t\t\tif (bd.cols <= 1) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tpuzzle.opemgr.newOperation();\n\n\t\t\t\tpuzzle.painter.suspendAll();\n\n\t\t\t\t// undo/redo時はexecadjust_mainを直接呼びます\n\t\t\t\tvar d = { x1: 0, y1: 0, x2: 2 * bd.cols, y2: 2 * bd.rows }; // TURNFLIPには範囲が必要\n\t\t\t\tthis.execadjust_main(this.boardtype[name][1], d);\n\t\t\t\tthis.addOpe(d, name);\n\n\t\t\t\tbd.setminmax();\n\t\t\t\tbd.rebuildInfo();\n\n\t\t\t\t// Canvasを更新する\n\t\t\t\tpuzzle.painter.resizeCanvas();\n\t\t\t\tpuzzle.emit(\"adjust\");\n\t\t\t\tpuzzle.painter.unsuspend();\n\t\t\t},\n\t\t\texecadjust_main: function(key, d) {\n\t\t\t\tvar bd = this.board;\n\t\t\t\tthis.adjustBoardData(key, d);\n\t\t\t\tif (bd.roommgr.hastop && key & REDUCE) {\n\t\t\t\t\tthis.reduceRoomNumber(key, d);\n\t\t\t\t}\n\n\t\t\t\tif (key & TURN) {\n\t\t\t\t\tvar tmp = bd.cols;\n\t\t\t\t\tbd.cols = bd.rows;\n\t\t\t\t\tbd.rows = tmp;\n\t\t\t\t\td = { x1: 0, y1: 0, x2: 2 * bd.cols, y2: 2 * bd.rows };\n\t\t\t\t} else if (key & EXPAND) {\n\t\t\t\t\tif (key === this.EXPANDUP || key === this.EXPANDDN) {\n\t\t\t\t\t\tbd.rows++;\n\t\t\t\t\t} else if (key === this.EXPANDLT || key === this.EXPANDRT) {\n\t\t\t\t\t\tbd.cols++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// main operation\n\t\t\t\t[\"cell\", \"cross\", \"border\", \"excell\"].forEach(function(group) {\n\t\t\t\t\tif (key & EXPAND) {\n\t\t\t\t\t\tbd.exec.expandGroup(group, key);\n\t\t\t\t\t} else if (key & REDUCE) {\n\t\t\t\t\t\tbd.exec.reduceGroup(group, key);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbd.exec.turnflipGroup(group, key, d);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (key & REDUCE) {\n\t\t\t\t\tif (key === this.REDUCEUP || key === this.REDUCEDN) {\n\t\t\t\t\t\tbd.rows--;\n\t\t\t\t\t} else if (key === this.REDUCELT || key === this.REDUCERT) {\n\t\t\t\t\t\tbd.cols--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbd.setminmax();\n\t\t\t\tbd.setposAll();\n\n\t\t\t\tif (bd.hasdots === 1) {\n\t\t\t\t\tbd.initDots(bd.cols, bd.rows);\n\t\t\t\t}\n\n\t\t\t\tthis.adjustBoardData2(key, d);\n\t\t\t},\n\n\t\t\t//------------------------------------------------------------------------------\n\t\t\t// bd.exec.addOpe() 指定された盤面(拡大・縮小, 回転・反転)操作を追加する\n\t\t\t//------------------------------------------------------------------------------\n\t\t\taddOpe: function(d, name) {\n\t\t\t\tvar key = this.boardtype[name][1],\n\t\t\t\t\tpuzzle = this.puzzle,\n\t\t\t\t\tope;\n\t\t\t\tif (key & this.TURNFLIP) {\n\t\t\t\t\tope = new puzzle.klass.BoardFlipOperation(d, name);\n\t\t\t\t} else {\n\t\t\t\t\tope = new puzzle.klass.BoardAdjustOperation(name);\n\t\t\t\t}\n\t\t\t\tpuzzle.opemgr.add(ope);\n\t\t\t},\n\n\t\t\t//------------------------------------------------------------------------------\n\t\t\t// bd.exec.expandGroup()  オブジェクトの追加を行う\n\t\t\t// bd.exec.reduceGroup()  オブジェクトの消去を行う\n\t\t\t// bd.exec.isdel()        消去されるオブジェクトかどうか判定する\n\t\t\t//------------------------------------------------------------------------------\n\t\t\texpandGroup: function(group, key) {\n\t\t\t\tvar bd = this.board;\n\t\t\t\tvar margin = bd.initGroup(group, bd.cols, bd.rows);\n\t\t\t\tvar groups = bd.getGroup(group);\n\t\t\t\tvar groups2 = new groups.constructor();\n\t\t\t\tbd.setposGroup(group);\n\t\t\t\tfor (var i = groups.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar piece = groups[i];\n\t\t\t\t\tif (this.isdel(key, piece)) {\n\t\t\t\t\t\tpiece = bd.newObject(group, i);\n\t\t\t\t\t\tgroups[i] = piece;\n\t\t\t\t\t\tgroups2.add(piece);\n\t\t\t\t\t\tmargin--;\n\t\t\t\t\t} else if (margin > 0) {\n\t\t\t\t\t\tgroups[i] = groups[i - margin];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tgroups2.allclear(false);\n\n\t\t\t\tif (group === \"border\") {\n\t\t\t\t\tthis.expandborder(key);\n\t\t\t\t}\n\t\t\t},\n\t\t\treduceGroup: function(group, key) {\n\t\t\t\tvar bd = this.board;\n\t\t\t\tif (group === \"border\") {\n\t\t\t\t\tthis.reduceborder(key);\n\t\t\t\t}\n\n\t\t\t\tvar margin = 0,\n\t\t\t\t\tgroups = bd.getGroup(group),\n\t\t\t\t\tgroups2 = new groups.constructor();\n\t\t\t\tfor (var i = 0; i < groups.length; i++) {\n\t\t\t\t\tvar piece = groups[i];\n\t\t\t\t\tif (this.isdel(key, piece)) {\n\t\t\t\t\t\tpiece.id = i;\n\t\t\t\t\t\tgroups2.add(piece);\n\t\t\t\t\t\tmargin++;\n\t\t\t\t\t} else if (margin > 0) {\n\t\t\t\t\t\tgroups[i - margin] = groups[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar opemgr = this.puzzle.opemgr;\n\t\t\t\tif (!opemgr.undoExec && !opemgr.redoExec) {\n\t\t\t\t\topemgr.forceRecord = true;\n\t\t\t\t\tgroups2.allclear(true);\n\t\t\t\t\topemgr.forceRecord = false;\n\t\t\t\t}\n\t\t\t\tfor (var i = 0; i < margin; i++) {\n\t\t\t\t\tgroups.pop();\n\t\t\t\t}\n\t\t\t},\n\t\t\tisdel: function(key, piece) {\n\t\t\t\tif (piece.group === \"excell\" && key & (this.EXPAND | this.REDUCE)) {\n\t\t\t\t\tvar bd = this.board,\n\t\t\t\t\t\toldcols = bd.cols,\n\t\t\t\t\t\toldrows = bd.rows;\n\n\t\t\t\t\tif ((key & 7) === this.UP || (key & 7) === this.DN) {\n\t\t\t\t\t\toldrows--;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toldcols--;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar oldexcols = bd.excellCols(oldcols, oldrows);\n\t\t\t\t\tvar oldexrows = bd.excellRows(oldcols, oldrows);\n\n\t\t\t\t\tvar oldminx = oldexcols * -2 + 1;\n\t\t\t\t\tvar oldminy = oldexrows * -2 + 1;\n\n\t\t\t\t\tif (piece.bx < oldminx || piece.by < oldminy) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn !!this.insex[piece.group][this.distObj(key, piece)];\n\t\t\t},\n\n\t\t\t//------------------------------------------------------------------------------\n\t\t\t// bd.exec.turnflipGroup() execadjust_main()から内部的に呼ばれる回転反転実行部\n\t\t\t//------------------------------------------------------------------------------\n\t\t\tturnflipGroup: function(group, key, d) {\n\t\t\t\tvar bd = this.board;\n\t\t\t\tif (group === \"excell\") {\n\t\t\t\t\tif (bd.hasexcell === 1 && key & this.FLIP) {\n\t\t\t\t\t\tvar d2 = { x1: d.x1, y1: d.y1, x2: d.x2, y2: d.y2 };\n\t\t\t\t\t\tif (key === this.FLIPY) {\n\t\t\t\t\t\t\td2.x1 = bd.excellCols(bd.cols, bd.rows) * -2 + 1;\n\t\t\t\t\t\t\td2.x2 = -1;\n\t\t\t\t\t\t} else if (key === this.FLIPX) {\n\t\t\t\t\t\t\td2.y1 = bd.excellRows(bd.cols, bd.rows) * -2 + 1;\n\t\t\t\t\t\t\td2.y2 = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\td = d2;\n\t\t\t\t\t} else if (bd.hasexcell === 2) {\n\t\t\t\t\t\td = { x1: -1, y1: -1, x2: d.x2 + 1, y2: d.y2 + 1 };\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar objlist = bd.objectinside(group, d.x1, d.y1, d.x2, d.y2);\n\t\t\t\tvar converted = {},\n\t\t\t\t\txx = d.x1 + d.x2,\n\t\t\t\t\tyy = d.y1 + d.y2;\n\t\t\t\tfor (var i = 0; i < objlist.length; i++) {\n\t\t\t\t\tvar obj = objlist[i],\n\t\t\t\t\t\tid = null;\n\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\tcase this.FLIPY:\n\t\t\t\t\t\t\tid = bd.getObjectPos(group, obj.bx, yy - obj.by).id;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase this.FLIPX:\n\t\t\t\t\t\t\tid = bd.getObjectPos(group, xx - obj.bx, obj.by).id;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase this.TURNL:\n\t\t\t\t\t\t\tid = bd.getObjectPos(group, obj.by, yy - obj.bx).id;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase this.TURNR:\n\t\t\t\t\t\t\tid = bd.getObjectPos(group, xx - obj.by, obj.bx).id;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconverted[id] = obj;\n\t\t\t\t}\n\n\t\t\t\tvar groups = bd.getGroup(group);\n\t\t\t\tfor (var n in converted) {\n\t\t\t\t\tgroups[+n] = converted[n];\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// bd.exec.distObj()      上下左右いずれかの外枠との距離を求める\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tdistObj: function(key, piece) {\n\t\t\t\tvar bd = this.board;\n\t\t\t\tif (piece.isnull) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\tkey &= 0x0f;\n\t\t\t\tif (key === this.UP) {\n\t\t\t\t\treturn piece.by;\n\t\t\t\t} else if (key === this.DN) {\n\t\t\t\t\treturn 2 * bd.rows - piece.by;\n\t\t\t\t} else if (key === this.LT) {\n\t\t\t\t\treturn piece.bx;\n\t\t\t\t} else if (key === this.RT) {\n\t\t\t\t\treturn 2 * bd.cols - piece.bx;\n\t\t\t\t}\n\t\t\t\treturn -1;\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// bd.exec.expandborder() 盤面の拡大時、境界線を伸ばす\n\t\t\t// bd.exec.reduceborder() 盤面の縮小時、線を移動する\n\t\t\t//---------------------------------------------------------------------------\n\t\t\texpandborder: function(key) {\n\t\t\t\tvar bd = this.board,\n\t\t\t\t\tbdAsLine = bd.borderAsLine;\n\t\t\t\t// borderAsLineじゃないUndo時は、後でオブジェクトを代入するので下の処理はパス\n\t\t\t\tif (bdAsLine || !bd.puzzle.opemgr.undoExec) {\n\t\t\t\t\tvar group2 = new this.klass.BorderList();\n\t\t\t\t\t// 直前のexpandGroupで、bx,byプロパティが不定なままなので設定する\n\t\t\t\t\tbd.setposBorders();\n\n\t\t\t\t\tvar dist = bdAsLine ? 2 : 1;\n\t\t\t\t\tfor (var id = 0; id < bd.border.length; id++) {\n\t\t\t\t\t\tvar border = bd.border[id];\n\t\t\t\t\t\tif (this.distObj(key, border) !== dist) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar source = bdAsLine\n\t\t\t\t\t\t\t? this.outerBorder(id, key)\n\t\t\t\t\t\t\t: this.innerBorder(id, key);\n\t\t\t\t\t\tthis.copyBorder(border, source);\n\t\t\t\t\t\tgroup2.add(source);\n\t\t\t\t\t}\n\t\t\t\t\tif (bdAsLine) {\n\t\t\t\t\t\tgroup2.allclear(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\treduceborder: function(key) {\n\t\t\t\tvar bd = this.board;\n\t\t\t\tif (bd.borderAsLine) {\n\t\t\t\t\tfor (var id = 0; id < bd.border.length; id++) {\n\t\t\t\t\t\tvar border = bd.border[id];\n\t\t\t\t\t\tif (this.distObj(key, border) !== 0) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar source = this.innerBorder(id, key);\n\t\t\t\t\t\tthis.copyBorder(border, source);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// bd.exec.copyBorder()   (expand/reduceBorder用) 指定したデータをコピーする\n\t\t\t// bd.exec.innerBorder()  (expand/reduceBorder用) ひとつ内側に入ったborderのidを返す\n\t\t\t// bd.exec.outerBorder()  (expand/reduceBorder用) ひとつ外側に行ったborderのidを返す\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tcopyBorder: function(border1, border2) {\n\t\t\t\tborder1.ques = border2.ques;\n\t\t\t\tborder1.qans = border2.qans;\n\t\t\t\tif (this.board.borderAsLine) {\n\t\t\t\t\tborder1.line = border2.line;\n\t\t\t\t\tborder1.qsub = border2.qsub;\n\t\t\t\t}\n\t\t\t},\n\t\t\tinnerBorder: function(id, key) {\n\t\t\t\tvar border = this.board.border[id];\n\t\t\t\tkey &= 0x0f;\n\t\t\t\tif (key === this.UP) {\n\t\t\t\t\treturn border.relbd(0, 2);\n\t\t\t\t} else if (key === this.DN) {\n\t\t\t\t\treturn border.relbd(0, -2);\n\t\t\t\t} else if (key === this.LT) {\n\t\t\t\t\treturn border.relbd(2, 0);\n\t\t\t\t} else if (key === this.RT) {\n\t\t\t\t\treturn border.relbd(-2, 0);\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\touterBorder: function(id, key) {\n\t\t\t\tvar border = this.board.border[id];\n\t\t\t\tkey &= 0x0f;\n\t\t\t\tif (key === this.UP) {\n\t\t\t\t\treturn border.relbd(0, -2);\n\t\t\t\t} else if (key === this.DN) {\n\t\t\t\t\treturn border.relbd(0, 2);\n\t\t\t\t} else if (key === this.LT) {\n\t\t\t\t\treturn border.relbd(-2, 0);\n\t\t\t\t} else if (key === this.RT) {\n\t\t\t\t\treturn border.relbd(2, 0);\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// bd.exec.reduceRoomNumber()   盤面縮小時に数字つき部屋の処理を行う\n\t\t\t//---------------------------------------------------------------------------\n\t\t\treduceRoomNumber: function(key, d) {\n\t\t\t\tvar qnums = [];\n\t\t\t\tvar bd = this.board;\n\t\t\t\tfor (var c = 0; c < bd.cell.length; c++) {\n\t\t\t\t\tvar cell = bd.cell[c];\n\t\t\t\t\tif (!!this.insex.cell[this.distObj(key, cell)]) {\n\t\t\t\t\t\tif (cell.qnum !== -1) {\n\t\t\t\t\t\t\tqnums.push({\n\t\t\t\t\t\t\t\tcell: cell,\n\t\t\t\t\t\t\t\tarea: cell.room,\n\t\t\t\t\t\t\t\tpos: [cell.bx, cell.by],\n\t\t\t\t\t\t\t\tval: cell.qnum\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tcell.qnum = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcell.room.clist.remove(cell);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (var i = 0; i < qnums.length; i++) {\n\t\t\t\t\tvar data = qnums[i],\n\t\t\t\t\t\tarea = data.area;\n\t\t\t\t\tvar tcell = area.clist.getTopCell();\n\t\t\t\t\tif (tcell.isnull) {\n\t\t\t\t\t\tvar opemgr = this.puzzle.opemgr;\n\t\t\t\t\t\tif (!opemgr.undoExec && !opemgr.redoExec) {\n\t\t\t\t\t\t\topemgr.forceRecord = true;\n\t\t\t\t\t\t\tdata.cell.addOpe(\"qnum\", data.val, -1);\n\t\t\t\t\t\t\topemgr.forceRecord = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttcell.qnum = data.val;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t//------------------------------------------------------------------------------\n\t\t\t// bd.exec.adjustBoardData()    回転・反転開始前に各セルの調節を行う(共通処理)\n\t\t\t// bd.exec.adjustBoardData2()   回転・反転終了後に各セルの調節を行う(共通処理)\n\t\t\t//------------------------------------------------------------------------------\n\t\t\tadjustBoardData: function(key, d) {},\n\t\t\tadjustBoardData2: function(key, d) {}\n\t\t}\n\t});\n})();\n","// GraphBase.js\n\n//---------------------------------------------------------------------------\n// ★GraphBaseクラス 線や領域情報を管理する\n//---------------------------------------------------------------------------\n// GraphBaseクラスの定義\npzpr.classmgr.makeCommon({\n\tGraphBase: {\n\t\tenabled: false,\n\t\trelation: {},\n\n\t\tpointgroup: \"\",\n\t\tlinkgroup: \"\",\n\n\t\tcoloring: false,\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// graph.removeFromArray()    Arrayからitemを取り除く\n\t\t//--------------------------------------------------------------------------------\n\t\tremoveFromArray: function(array, item) {\n\t\t\tvar idx = array.indexOf(item);\n\t\t\tif (idx >= 0) {\n\t\t\t\tArray.prototype.splice.call(array, idx, 1);\n\t\t\t}\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// graph.setComponentRefs()    objにcomponentの設定を行う (性能対策)\n\t\t//\n\t\t// graph.getObjNodeList()      objにあるnodeを取得する\n\t\t// graph.resetObjNodeList()    objからnodeをクリアする\n\t\t//--------------------------------------------------------------------------------\n\t\tsetComponentRefs: function(obj, component) {},\n\n\t\tgetObjNodeList: function(nodeobj) {\n\t\t\treturn [];\n\t\t},\n\t\tresetObjNodeList: function(nodeobj) {},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// graph.isnodevalid()           そのセルにNodeが存在すべきかどうか返す\n\t\t// graph.isedgevalidbylinkobj()  そのborderにEdgeが存在すべきかどうか返す\n\t\t// graph.isedgevalidbynodeobj()  接続してはいけないかどうか判定する\n\t\t// graph.isedgeexistsbylinkobj() linkobjにedgeが存在するか判定する\n\t\t//--------------------------------------------------------------------------------\n\t\tisnodevalid: function(nodeobj) {\n\t\t\treturn false;\n\t\t},\n\t\tisedgevalidbylinkobj: function(linkobj) {\n\t\t\treturn true;\n\t\t},\n\t\tisedgevalidbynodeobj: function(nodeobj1, nodeobj2) {\n\t\t\treturn true;\n\t\t},\n\t\tisedgeexistsbylinkobj: function(linkobj) {\n\t\t\tvar sidenodes = this.getSideNodesBySeparator(linkobj);\n\t\t\tif (!sidenodes) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn sidenodes[0].nodes.indexOf(sidenodes[1]) >= 0;\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// graph.calcNodeCount()    そのセルにあるべきNode数を返す\n\t\t//--------------------------------------------------------------------------------\n\t\tcalcNodeCount: function(cell) {\n\t\t\treturn this.isnodevalid(cell) ? 1 : 0;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.rebuild()  既存の情報からデータを再設定する\n\t\t// graph.rebuild2() 継承先に固有のデータを設定する\n\t\t//---------------------------------------------------------------------------\n\t\trebuildmode: false,\n\t\trebuild: function() {\n\t\t\tif (!this.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.rebuildmode = true;\n\n\t\t\tthis.components = [];\n\t\t\tthis.modifyNodes = [];\n\n\t\t\tthis.rebuild2();\n\n\t\t\tthis.searchGraph();\n\n\t\t\tthis.rebuildmode = false;\n\t\t},\n\t\trebuild2: function() {\n\t\t\tvar nodeobjs = this.board[this.pointgroup],\n\t\t\t\tlinkobjs = this.board[this.linkgroup];\n\t\t\tfor (var c = 0; c < nodeobjs.length; c++) {\n\t\t\t\tthis.setComponentRefs(nodeobjs[c], null);\n\t\t\t\tthis.resetObjNodeList(nodeobjs[c]);\n\t\t\t\tif (this.isnodevalid(nodeobjs[c])) {\n\t\t\t\t\tthis.createNode(nodeobjs[c]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.linkgroup) {\n\t\t\t\tfor (var id = 0; id < linkobjs.length; id++) {\n\t\t\t\t\tthis.setComponentRefs(linkobjs[id], null);\n\t\t\t\t\tif (this.isedgevalidbylinkobj(linkobjs[id])) {\n\t\t\t\t\t\tthis.addEdgeByLinkObj(linkobjs[id]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (var c = 0; c < nodeobjs.length; c++) {\n\t\t\t\t\tif (this.isnodevalid(nodeobjs[c])) {\n\t\t\t\t\t\tthis.setEdgeByNodeObj(nodeobjs[c]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.createComponent()  GraphComponentオブジェクトを作成する\n\t\t// graph.deleteComponent()  GraphComponentオブジェクトを削除してNodeをmodifyNodesに戻す\n\t\t//---------------------------------------------------------------------------\n\t\tcreateComponent: function() {\n\t\t\tvar component = new this.klass.GraphComponent();\n\t\t\tthis.components.push(component);\n\t\t\treturn component;\n\t\t},\n\t\tdeleteComponent: function(component) {\n\t\t\tfor (var i = 0; i < component.nodes.length; i++) {\n\t\t\t\tthis.modifyNodes.push(component.nodes[i]);\n\t\t\t\tthis.setComponentRefs(component.nodes[i].obj, null);\n\t\t\t\tcomponent.nodes[i].component = null;\n\t\t\t}\n\t\t\tthis.removeFromArray(this.components, component);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.createNode()    GraphNodeオブジェクトを生成する\n\t\t// graph.deleteNode()    GraphNodeオブジェクトをグラフから削除する (先にEdgeを0本にしてください)\n\t\t//---------------------------------------------------------------------------\n\t\tcreateNode: function(cell) {\n\t\t\tvar node = new this.klass.GraphNode(cell);\n\t\t\tthis.getObjNodeList(cell).push(node);\n\t\t\tthis.modifyNodes.push(node);\n\t\t\treturn node;\n\t\t},\n\t\tdeleteNode: function(node) {\n\t\t\tvar cell = node.obj;\n\t\t\tthis.setComponentRefs(cell, null);\n\t\t\tthis.removeFromArray(this.getObjNodeList(cell), node);\n\n\t\t\t// rebuildmode中にはこの関数は呼ばれません\n\t\t\tthis.removeFromArray(this.modifyNodes, node);\n\t\t\tvar component = node.component;\n\t\t\tif (component !== null) {\n\t\t\t\tthis.removeFromArray(component.nodes, node);\n\t\t\t\tthis.resetExtraData(cell);\n\t\t\t\tif (component.nodes.length === 0) {\n\t\t\t\t\tthis.deleteComponent(component);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// linegraph.createNodeIfEmpty()  指定されたオブジェクトの場所にNodeを生成する\n\t\t// linegraph.deleteNodeIfEmpty()  指定されたオブジェクトの場所からNodeを除去する\n\t\t//---------------------------------------------------------------------------\n\t\tcreateNodeIfEmpty: function(nodeobj) {\n\t\t\t// 周囲のNode生成が必要かもしれないのでチェック＆create\n\t\t\tif (this.getObjNodeList(nodeobj).length === 0) {\n\t\t\t\tthis.createNode(nodeobj);\n\t\t\t}\n\t\t},\n\t\tdeleteNodeIfEmpty: function(nodeobj) {\n\t\t\tvar nodes = this.getObjNodeList(nodeobj);\n\n\t\t\t// 周囲のNodeが消えるかもしれないのでチェック＆remove\n\t\t\tif (nodes[0].nodes.length === 0 && !this.isnodevalid(nodeobj)) {\n\t\t\t\tthis.deleteNode(nodes[0]);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.addEdge()    Node間にEdgeを追加する\n\t\t// graph.removeEdge() Node間からEdgeを除外する\n\t\t//---------------------------------------------------------------------------\n\t\taddEdge: function(node1, node2) {\n\t\t\tif (node1.nodes.indexOf(node2) >= 0) {\n\t\t\t\treturn;\n\t\t\t} // 多重辺にしないため\n\t\t\tnode1.nodes.push(node2);\n\t\t\tnode2.nodes.push(node1);\n\n\t\t\tif (!this.rebuildmode) {\n\t\t\t\tif (this.modifyNodes.indexOf(node1) < 0) {\n\t\t\t\t\tthis.modifyNodes.push(node1);\n\t\t\t\t}\n\t\t\t\tif (this.modifyNodes.indexOf(node2) < 0) {\n\t\t\t\t\tthis.modifyNodes.push(node2);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tremoveEdge: function(node1, node2) {\n\t\t\tif (node1.nodes.indexOf(node2) < 0) {\n\t\t\t\treturn;\n\t\t\t} // 存在しない辺を削除しない\n\t\t\tthis.removeFromArray(node1.nodes, node2);\n\t\t\tthis.removeFromArray(node2.nodes, node1);\n\n\t\t\tif (!this.rebuildmode) {\n\t\t\t\tif (this.modifyNodes.indexOf(node1) < 0) {\n\t\t\t\t\tthis.modifyNodes.push(node1);\n\t\t\t\t}\n\t\t\t\tif (this.modifyNodes.indexOf(node2) < 0) {\n\t\t\t\t\tthis.modifyNodes.push(node2);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.getSideObjByLinkObj()   borderから接続するNodeにあるobjを取得する\n\t\t// graph.getSideObjByNodeObj()   cellから接続するNodeにあるobjを取得する\n\t\t//---------------------------------------------------------------------------\n\t\tgetSideObjByLinkObj: function(border) {\n\t\t\treturn border.sideobj;\n\t\t},\n\t\tgetSideObjByNodeObj: function(cell) {\n\t\t\tvar list = cell.getdir4clist(),\n\t\t\t\tcells = [];\n\t\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\t\tvar cell2 = list[i][0];\n\t\t\t\tif (this.isnodevalid(cell2)) {\n\t\t\t\t\tcells.push(cell2);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn cells;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.getSideNodesByLinkObj()   borderからEdgeに接続するNodeを取得する\n\t\t// graph.getSideNodesBySeparator() borderからEdgeに接続するNodeを取得する\n\t\t//---------------------------------------------------------------------------\n\t\tgetSideNodesByLinkObj: function(border) {\n\t\t\tvar sidenodes = [],\n\t\t\t\tsidenodeobj = this.getSideObjByLinkObj(border);\n\t\t\tfor (var i = 0; i < sidenodeobj.length; i++) {\n\t\t\t\tvar cell = sidenodeobj[i],\n\t\t\t\t\tnodes = this.getObjNodeList(cell),\n\t\t\t\t\tnode = nodes[0];\n\t\t\t\t// 交差あり盤面の特殊処理 border.isvertはfalseの時タテヨコ線\n\t\t\t\tif (!!nodes[1] && border.isvert) {\n\t\t\t\t\tnode = nodes[1];\n\t\t\t\t}\n\t\t\t\tsidenodes.push(node);\n\t\t\t}\n\t\t\treturn sidenodes;\n\t\t},\n\t\tgetSideNodesBySeparator: function(border) {\n\t\t\tvar sidenodes = [],\n\t\t\t\tsidenodeobj = border.sideobj;\n\t\t\tfor (var i = 0; i < sidenodeobj.length; i++) {\n\t\t\t\tvar nodes = this.getObjNodeList(sidenodeobj[i]);\n\t\t\t\tif (!!nodes && !!nodes[0]) {\n\t\t\t\t\tsidenodes.push(nodes[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn sidenodes.length >= 2 ? sidenodes : null;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.modifyInfo() 黒マスや線が引かれたり消された時に、lcnt変数や線の情報を生成しなおす\n\t\t//---------------------------------------------------------------------------\n\t\tmodifyInfo: function(obj, type) {\n\t\t\tif (!this.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar relation = this.relation[type];\n\t\t\tif (!relation) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.modifyNodes = [];\n\n\t\t\tswitch (relation) {\n\t\t\t\tcase \"node\":\n\t\t\t\t\tthis.setEdgeByNodeObj(obj);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"link\":\n\t\t\t\t\tthis.setEdgeByLinkObj(obj);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"separator\":\n\t\t\t\t\tthis.setEdgeBySeparator(obj);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.modifyOtherInfo(obj, relation);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (this.modifyNodes.length > 0) {\n\t\t\t\tthis.remakeComponent();\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.setEdgeBySeparator() 境界線が引かれたり消された時に、lcnt変数や線の情報を生成しなおす\n\t\t//---------------------------------------------------------------------------\n\t\tsetEdgeBySeparator: function(border) {\n\t\t\tvar isset = this.isedgevalidbylinkobj(border);\n\t\t\tif (isset === this.isedgeexistsbylinkobj(border)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!!this.incdecBorderCount) {\n\t\t\t\tthis.incdecBorderCount(border, !isset);\n\t\t\t}\n\n\t\t\tif (isset) {\n\t\t\t\tthis.addEdgeBySeparator(border);\n\t\t\t} else {\n\t\t\t\tthis.removeEdgeBySeparator(border);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.addEdgeBySeparator()    指定されたオブジェクトの場所にEdgeを生成する\n\t\t// graph.removeEdgeBySeparator() 指定されたオブジェクトの場所からEdgeを除去する\n\t\t//---------------------------------------------------------------------------\n\t\taddEdgeBySeparator: function(border) {\n\t\t\t// 境界線を消した時の処理\n\t\t\tvar sidenodes = this.getSideNodesBySeparator(border);\n\t\t\tif (!sidenodes) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.addEdge(sidenodes[0], sidenodes[1]);\n\t\t},\n\t\tremoveEdgeBySeparator: function(border) {\n\t\t\t// 境界線を引いた時の処理\n\t\t\tvar sidenodes = this.getSideNodesBySeparator(border);\n\t\t\tif (!sidenodes) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.removeEdge(sidenodes[0], sidenodes[1]);\n\t\t\tif (this.linkgroup) {\n\t\t\t\tthis.setComponentRefs(border, null);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.attachNode()    指定されたオブジェクトを別Componentにくっつけて終了する\n\t\t//---------------------------------------------------------------------------\n\t\tattachNode: function(node, component) {\n\t\t\tnode.component = component;\n\t\t\tcomponent.nodes.push(node);\n\t\t\tthis.setComponentInfo(component);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.remakeComponent() modifyNodesに含まれるsubgraph成分からremakeしたりします\n\t\t// graph.getAffectedComponents() modifyNodesを含むcomponentsを取得します\n\t\t// graph.checkDividedComponent() 指定されたComponentがひとつながりかどうか探索します\n\t\t// graph.remakeMaximalComponents()指定されたcomponentsを探索し直します\n\t\t//---------------------------------------------------------------------------\n\t\tremakeComponent: function() {\n\t\t\t// subgraph中にcomponentが何種類あるか調べる\n\t\t\tvar remakeComponents = this.getAffectedComponents();\n\n\t\t\t// Component数が1ならsubgraphが分断していないかどうかチェック\n\t\t\tif (remakeComponents.length === 1) {\n\t\t\t\tthis.checkDividedComponent(remakeComponents[0]);\n\t\t\t}\n\n\t\t\t// Component数が0なら現在のmodifyNodesに新規IDを割り振り終了\n\t\t\t// Component数が2以上ならmodifyNodesに極大部分グラフを取り込んで再探索\n\t\t\tif (!!this.modifyNodes && this.modifyNodes.length > 0) {\n\t\t\t\tthis.remakeMaximalComponents(remakeComponents);\n\t\t\t}\n\t\t},\n\t\tgetAffectedComponents: function() {\n\t\t\tvar remakeComponents = [];\n\t\t\tfor (var i = 0; i < this.modifyNodes.length; i++) {\n\t\t\t\tvar component = this.modifyNodes[i].component;\n\t\t\t\tif (component !== null) {\n\t\t\t\t\tif (!component.isremake) {\n\t\t\t\t\t\tremakeComponents.push(component);\n\t\t\t\t\t\tcomponent.isremake = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn remakeComponents;\n\t\t},\n\t\tcheckDividedComponent: function(component) {\n\t\t\t// 1つだけsubgraphを生成してみる\n\t\t\tfor (var i = 0, len = this.modifyNodes.length; i < len; i++) {\n\t\t\t\tvar node = this.modifyNodes[i];\n\t\t\t\tnode.component = null;\n\t\t\t\tthis.setComponentRefs(node.obj, null);\n\t\t\t\tthis.removeFromArray(component.nodes, node);\n\t\t\t}\n\t\t\tvar pseudoComponent = new this.klass.GraphComponent();\n\t\t\tthis.searchSingle(this.modifyNodes[0], pseudoComponent);\n\t\t\t// subgraphがひとつながりならComponentに属していないNodeをそのComponentに割り当てる\n\t\t\tif (pseudoComponent.nodes.length === this.modifyNodes.length) {\n\t\t\t\tfor (var i = 0; i < this.modifyNodes.length; i++) {\n\t\t\t\t\tvar node = this.modifyNodes[i];\n\t\t\t\t\tnode.component = component;\n\t\t\t\t\tcomponent.nodes.push(node);\n\t\t\t\t}\n\t\t\t\tthis.modifyNodes = [];\n\t\t\t\tthis.setComponentInfo(component);\n\t\t\t\tcomponent.isremake = false;\n\t\t\t}\n\t\t\t// subgraphがひとつながりでないなら再探索ルーチンを回す\n\t\t},\n\t\tremakeMaximalComponents: function(remakeComponents) {\n\t\t\tvar longColor = this.coloring\n\t\t\t\t? this.getLongColor(remakeComponents)\n\t\t\t\t: null;\n\t\t\tfor (var p = 0; p < remakeComponents.length; p++) {\n\t\t\t\tthis.deleteComponent(remakeComponents[p]);\n\t\t\t}\n\t\t\tvar newComponents = this.searchGraph();\n\t\t\tif (this.coloring) {\n\t\t\t\tthis.setLongColor(newComponents, longColor);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.searchGraph()  ひとつながりの線にlineidを設定する\n\t\t// graph.searchSingle() 初期idを含む一つの領域内のareaidを指定されたものにする\n\t\t//---------------------------------------------------------------------------\n\t\tsearchGraph: function() {\n\t\t\tvar partslist = this.modifyNodes;\n\t\t\tvar newcomponents = [];\n\t\t\tfor (var i = 0, len = partslist.length; i < len; i++) {\n\t\t\t\tpartslist[i].component = null;\n\t\t\t}\n\t\t\tfor (var i = 0, len = partslist.length; i < len; i++) {\n\t\t\t\tif (partslist[i].component !== null) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} // 既にidがついていたらスルー\n\t\t\t\tvar component = this.createComponent();\n\t\t\t\tthis.searchSingle(partslist[i], component);\n\n\t\t\t\t// defer setExtraData to avoid problems with half-built graph, compare #117\n\t\t\t\tthis.setComponentInfoExtra(component, false);\n\n\t\t\t\tnewcomponents.push(component);\n\t\t\t}\n\t\t\tthis.modifyNodes = [];\n\n\t\t\tfor (var i = 0; i < newcomponents.length; i++) {\n\t\t\t\tthis.setExtraData(newcomponents[i]);\n\t\t\t}\n\t\t\treturn newcomponents;\n\t\t},\n\t\tsearchSingle: function(startparts, component) {\n\t\t\tvar stack = [startparts];\n\t\t\twhile (stack.length > 0) {\n\t\t\t\tvar node = stack.pop();\n\t\t\t\tif (node.component !== null) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tnode.component = component;\n\t\t\t\tcomponent.nodes.push(node);\n\n\t\t\t\tfor (var i = 0; i < node.nodes.length; i++) {\n\t\t\t\t\tstack.push(node.nodes[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// graph.setComponentInfo() Componentオブジェクトのデータを設定する\n\t\t//--------------------------------------------------------------------------------\n\t\tsetComponentInfo: function(component) {\n\t\t\tthis.setComponentInfoExtra(component, true);\n\t\t},\n\t\tsetComponentInfoExtra: function(component, setExtra) {\n\t\t\tvar edges = 0;\n\t\t\tfor (var i = 0; i < component.nodes.length; i++) {\n\t\t\t\tvar node = component.nodes[i];\n\t\t\t\tedges += node.nodes.length;\n\n\t\t\t\tthis.setComponentRefs(node.obj, component);\n\t\t\t}\n\t\t\tcomponent.circuits = (edges >> 1) - component.nodes.length + 1;\n\n\t\t\tif (setExtra) {\n\t\t\t\tthis.setExtraData(component);\n\t\t\t}\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// graph.resetExtraData() 指定されたオブジェクトの拡張データをリセットする\n\t\t// graph.setExtraData()   指定された領域の拡張データを設定する\n\t\t//--------------------------------------------------------------------------------\n\t\tresetExtraData: function(nodeobj) {},\n\t\tsetExtraData: function(component) {},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// graph.getLargeComponent()\n\t\t// graph.getLongColor() ブロックを設定した時、ブロックにつける色を取得する\n\t\t// graph.setLongColor() ブロックに色をつけなおす\n\t\t// graph.repaintNodes() ブロックを再描画する\n\t\t//--------------------------------------------------------------------------------\n\t\tgetLargeComponent: function(components) {\n\t\t\tif (components.length === 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar largeComponent = components[0];\n\t\t\tvar largeTrial = largeComponent.isTrial();\n\t\t\tfor (var i = 1; i < components.length; i++) {\n\t\t\t\tvar comp = components[i],\n\t\t\t\t\ttrial = comp.isTrial();\n\t\t\t\tif (trial === largeTrial) {\n\t\t\t\t\tif (largeComponent.nodes.length < comp.nodes.length) {\n\t\t\t\t\t\tlargeComponent = comp;\n\t\t\t\t\t\tlargeTrial = trial;\n\t\t\t\t\t}\n\t\t\t\t} else if (!trial) {\n\t\t\t\t\tlargeComponent = comp;\n\t\t\t\t\tlargeTrial = trial;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn largeComponent;\n\t\t},\n\t\tgetLongColor: function(components) {\n\t\t\tvar largeComponent = this.getLargeComponent(components);\n\t\t\treturn !!largeComponent ? largeComponent.color : null;\n\t\t},\n\t\tsetLongColor: function(components, longColor) {\n\t\t\tif (components.length === 0 || !longColor) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar puzzle = this.puzzle;\n\n\t\t\t// できた線の中でもっとも長いものを取得する\n\t\t\tvar largeComponent = this.getLargeComponent(components);\n\t\t\tif (!!largeComponent) {\n\t\t\t\tlargeComponent.color = longColor;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.coloring &&\n\t\t\t\t(puzzle.execConfig(\"irowake\") || puzzle.execConfig(\"irowakeblk\"))\n\t\t\t) {\n\t\t\t\tthis.repaintNodes(components);\n\t\t\t}\n\t\t},\n\t\trepaintNodes: function(components) {},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.newIrowake()  線の情報が再構築された際、線に色をつける\n\t\t//---------------------------------------------------------------------------\n\t\tnewIrowake: function() {\n\t\t\tvar paths = this.components;\n\t\t\tfor (var i = 0; i < paths.length; i++) {\n\t\t\t\tpaths[i].color = this.puzzle.painter.getNewLineColor();\n\t\t\t}\n\t\t}\n\t},\n\tGraphComponent: {\n\t\tinitialize: function() {\n\t\t\tthis.nodes = [];\n\t\t\tthis.color = \"\";\n\t\t\tthis.circuits = -1;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// component.getLinkObjByNodes()  node間のオブジェクトを取得する\n\t\t//---------------------------------------------------------------------------\n\t\tgetLinkObjByNodes: function(node1, node2) {\n\t\t\tvar bx1 = node1.obj.bx,\n\t\t\t\tby1 = node1.obj.by,\n\t\t\t\tbx2 = node2.obj.bx,\n\t\t\t\tby2 = node2.obj.by;\n\t\t\tif (bx1 > bx2 || (bx1 === bx2 && by1 > by2)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.board.getobj((bx1 + bx2) >> 1, (by1 + by2) >> 1);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// component.getnodeobjs()  nodeのオブジェクトリストを取得する\n\t\t// component.getedgeobjs()  edgeのオブジェクトリストを取得する\n\t\t//---------------------------------------------------------------------------\n\t\tgetnodeobjs: function() {\n\t\t\tvar objs = new (this.board.getGroup(\n\t\t\t\tthis.nodes[0].obj.group\n\t\t\t).constructor)();\n\t\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\t\t\t\tobjs.add(this.nodes[i].obj);\n\t\t\t}\n\t\t\treturn objs;\n\t\t},\n\t\tgetedgeobjs: function() {\n\t\t\tvar objs = [];\n\t\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\t\t\t\tvar node = this.nodes[i];\n\t\t\t\tfor (var n = 0; n < node.nodes.length; n++) {\n\t\t\t\t\tvar obj = this.getLinkObjByNodes(node, node.nodes[n]);\n\t\t\t\t\tif (!!obj) {\n\t\t\t\t\t\tobjs.push(obj);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn objs;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// component.checkAutoCmp()  autocmp設定有効時に条件を満たしているかチェックして背景を描画する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckAutoCmp: function() {\n\t\t\tvar iscmp = !!this.clist.checkCmp ? this.clist.checkCmp() : false;\n\t\t\tif (this.cmp !== iscmp) {\n\t\t\t\tthis.cmp = iscmp;\n\t\t\t\tif (this.puzzle.execConfig(\"autocmp\")) {\n\t\t\t\t\tthis.clist.draw();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// component.isTrial()  check whether this component is entirely made up of trial edges (irowake)\n\t\t//---------------------------------------------------------------------------\n\t\tisTrial: function() {\n\t\t\tvar edges = this.getedgeobjs();\n\t\t\tfor (var i = 0; i < edges.length; i++) {\n\t\t\t\tif (!edges[i].trial) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// component.setedgeerr()   edgeにerror値を設定する\n\t\t// component.setedgeinfo()  edgeにqinfo値を設定する\n\t\t//---------------------------------------------------------------------------\n\t\tsetedgeerr: function(val) {\n\t\t\tvar objs = this.getedgeobjs();\n\t\t\tfor (var i = 0; i < objs.length; i++) {\n\t\t\t\tobjs[i].seterr(val);\n\t\t\t}\n\t\t},\n\t\tsetedgeinfo: function(val) {\n\t\t\tvar objs = this.getedgeobjs();\n\t\t\tfor (var i = 0; i < objs.length; i++) {\n\t\t\t\tobjs[i].setinfo(val);\n\t\t\t}\n\t\t}\n\t},\n\tGraphNode: {\n\t\tinitialize: function(obj) {\n\t\t\tthis.obj = obj;\n\t\t\tthis.nodes = []; // Array of Linked GraphNode\n\t\t\tthis.component = null;\n\t\t}\n\t}\n});\n","// LineManager.js\n\n//---------------------------------------------------------------------------\n// ★LineGraphクラス 主に線や色分けの情報を管理する\n//---------------------------------------------------------------------------\npzpr.classmgr.makeCommon({\n\t\"LineGraph:GraphBase\": {\n\t\tinitialize: function() {\n\t\t\tif (this.moveline) {\n\t\t\t\tthis.relation[\"cell.qnum\"] = \"move\";\n\t\t\t}\n\t\t},\n\n\t\tenabled: false,\n\t\trelation: { \"border.line\": \"link\" },\n\n\t\tpointgroup: \"cell\",\n\t\tlinkgroup: \"border\",\n\n\t\tisLineCross: false, // 線が交差するパズル\n\n\t\tmakeClist: false, // 線が存在するclistを生成する\n\t\tmoveline: false, // 丸数字などを動かすパズル\n\n\t\tcoloring: true,\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// linegraph.setComponentRefs()    objにcomponentの設定を行う (性能対策)\n\t\t// linegraph.isedgeexistsbylinkobj() linkobjにedgeが存在するか判定する\n\t\t//\n\t\t// linegraph.getObjNodeList()      objにあるnodeを取得する\n\t\t// linegraph.resetObjNodeList()    objからnodeをクリアする\n\t\t//--------------------------------------------------------------------------------\n\t\tsetComponentRefs: function(obj, component) {\n\t\t\tobj.path = component;\n\t\t},\n\t\tisedgeexistsbylinkobj: function(linkobj) {\n\t\t\treturn linkobj.path !== null;\n\t\t},\n\n\t\tgetObjNodeList: function(nodeobj) {\n\t\t\treturn nodeobj.pathnodes;\n\t\t},\n\t\tresetObjNodeList: function(nodeobj) {\n\t\t\tnodeobj.pathnodes = [];\n\t\t\tif (this.moveline) {\n\t\t\t\tthis.resetExtraData(nodeobj);\n\t\t\t}\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// linegraph.isnodevalid()           そのセルにNodeが存在すべきかどうか返す\n\t\t// linegraph.isedgevalidbylinkobj()  そのborderにEdgeが存在すべきかどうか返す\n\t\t// linegraph.iscrossing()            そのセルで交差するかどうか返す\n\t\t//--------------------------------------------------------------------------------\n\t\tisnodevalid: function(cell) {\n\t\t\treturn cell.lcnt > 0 || (this.moveline && cell.isNum());\n\t\t},\n\t\tisedgevalidbylinkobj: function(border) {\n\t\t\treturn border.isLine();\n\t\t},\n\t\tiscrossing: function(cell) {\n\t\t\treturn this.isLineCross;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// linegraph.rebuild()  既存の情報からデータを再設定する\n\t\t// linegraph.rebuild2() 継承先に固有のデータを設定する\n\t\t//---------------------------------------------------------------------------\n\t\trebuild: function() {\n\t\t\tif (this.board.borderAsLine) {\n\t\t\t\tthis.pointgroup = \"cross\";\n\t\t\t}\n\t\t\tpzpr.common.GraphBase.prototype.rebuild.call(this);\n\t\t},\n\t\trebuild2: function() {\n\t\t\tif (!!this.incdecLineCount) {\n\t\t\t\tthis.resetLineCount();\n\t\t\t}\n\t\t\tpzpr.common.GraphBase.prototype.rebuild2.call(this);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// linegraph.resetLineCount()  初期化時に、lcnt情報を初期化する\n\t\t// linegraph.incdecLineCount() 線が引かれたり消された時に、lcnt変数を生成し直す\n\t\t//---------------------------------------------------------------------------\n\t\tresetLineCount: function() {\n\t\t\tvar cells = this.board[this.pointgroup],\n\t\t\t\tborders = this.board[this.linkgroup];\n\t\t\tthis.ltotal = [cells.length];\n\t\t\tfor (var c = 0; c < cells.length; c++) {\n\t\t\t\tcells[c].lcnt = 0;\n\t\t\t}\n\t\t\tfor (var id = 0; id < borders.length; id++) {\n\t\t\t\tif (this.isedgevalidbylinkobj(borders[id])) {\n\t\t\t\t\tthis.incdecLineCount(borders[id], true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tincdecLineCount: function(border, isset) {\n\t\t\tif (border.group !== this.linkgroup) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (var i = 0; i < 2; i++) {\n\t\t\t\tvar cell = border.sideobj[i];\n\t\t\t\tif (!cell.isnull) {\n\t\t\t\t\tthis.ltotal[cell.lcnt]--;\n\t\t\t\t\tif (isset) {\n\t\t\t\t\t\tcell.lcnt++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcell.lcnt--;\n\t\t\t\t\t}\n\t\t\t\t\tthis.ltotal[cell.lcnt] = (this.ltotal[cell.lcnt] || 0) + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// linegraph.setEdgeByLinkObj() 線が引かれたり消された時に、lcnt変数や線の情報を生成しなおす\n\t\t//---------------------------------------------------------------------------\n\t\tsetEdgeByLinkObj: function(linkobj) {\n\t\t\tvar isset = this.isedgevalidbylinkobj(linkobj);\n\t\t\tif (isset === this.isedgeexistsbylinkobj(linkobj)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!!this.incdecLineCount) {\n\t\t\t\tthis.incdecLineCount(linkobj, isset);\n\t\t\t}\n\n\t\t\tif (isset) {\n\t\t\t\tthis.addEdgeByLinkObj(linkobj);\n\t\t\t} else {\n\t\t\t\tthis.removeEdgeByLinkObj(linkobj);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// graph.addEdgeByLinkObj()    指定されたオブジェクトの場所にEdgeを生成する\n\t\t// graph.removeEdgeByLinkObj() 指定されたオブジェクトの場所からEdgeを除去する\n\t\t//---------------------------------------------------------------------------\n\t\taddEdgeByLinkObj: function(linkobj) {\n\t\t\t// 線(など)を引いた時の処理\n\t\t\tvar enattach = this.modifyNodes.length === 0;\n\t\t\tvar sidenodeobj = this.getSideObjByLinkObj(linkobj);\n\n\t\t\t// 周囲のNodeをグラフに追加するかどうか確認する\n\t\t\tthis.createNodeIfEmpty(sidenodeobj[0]);\n\t\t\tthis.createNodeIfEmpty(sidenodeobj[1]);\n\n\t\t\t// linkするNodeを取得する\n\t\t\tvar sidenodes = this.getSideNodesByLinkObj(linkobj);\n\n\t\t\t// 周囲のNodeとlink\n\t\t\tthis.addEdge(sidenodes[0], sidenodes[1]);\n\n\t\t\t// 周囲のComponentにくっついただけの場合は情報を更新して終了\n\t\t\tif (this.rebuildmode || !enattach) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar attachnodes = null,\n\t\t\t\tnode1 = sidenodes[0],\n\t\t\t\tnode2 = sidenodes[1];\n\t\t\tif (\n\t\t\t\tnode1.obj.lcnt === 1 &&\n\t\t\t\tnode1.component === null &&\n\t\t\t\tnode2.component !== null\n\t\t\t) {\n\t\t\t\tattachnodes = [sidenodes[0], sidenodes[1]];\n\t\t\t} else if (\n\t\t\t\tnode2.obj.lcnt === 1 &&\n\t\t\t\tnode2.component === null &&\n\t\t\t\tnode1.component !== null\n\t\t\t) {\n\t\t\t\tattachnodes = [sidenodes[1], sidenodes[0]];\n\t\t\t}\n\t\t\tif (!!attachnodes) {\n\t\t\t\tthis.attachNode(attachnodes[0], attachnodes[1].component);\n\t\t\t\tthis.modifyNodes = [];\n\t\t\t}\n\t\t},\n\t\tremoveEdgeByLinkObj: function(linkobj) {\n\t\t\t// 線(など)を消した時の処理\n\t\t\t// unlinkするNodeを取得する\n\t\t\tvar endetach = this.modifyNodes.length === 0;\n\t\t\tvar sidenodes = this.getSideNodesByLinkObj(linkobj);\n\n\t\t\t// 周囲のNodeとunlink\n\t\t\tthis.removeEdge(sidenodes[0], sidenodes[1]);\n\n\t\t\t// 周囲のNodeをグラフから取り除くかどうか確認する\n\t\t\tthis.deleteNodeIfEmpty(sidenodes[0].obj);\n\t\t\tthis.deleteNodeIfEmpty(sidenodes[1].obj);\n\n\t\t\tthis.setComponentRefs(linkobj, null);\n\n\t\t\t// 周囲のComponent末端から切り離されただけの場合は情報を更新して終了\n\t\t\tif (!endetach) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar detachnodes = null,\n\t\t\t\tnode1 = sidenodes[0],\n\t\t\t\tnode2 = sidenodes[1];\n\t\t\tvar lcnt1 = node1.obj.lcnt,\n\t\t\t\tlcnt2 = node2.obj.lcnt;\n\t\t\tif (\n\t\t\t\tlcnt1 === 0 &&\n\t\t\t\t(lcnt2 === 1 || (!this.isLineCross && lcnt2 > 1)) &&\n\t\t\t\tnode2.component !== null\n\t\t\t) {\n\t\t\t\tdetachnodes = [sidenodes[0], sidenodes[1]];\n\t\t\t} else if (\n\t\t\t\tlcnt2 === 0 &&\n\t\t\t\t(lcnt1 === 1 || (!this.isLineCross && lcnt1 > 1)) &&\n\t\t\t\tnode1.component !== null\n\t\t\t) {\n\t\t\t\tdetachnodes = [sidenodes[1], sidenodes[0]];\n\t\t\t}\n\t\t\tif (!!detachnodes) {\n\t\t\t\tthis.setComponentInfo(detachnodes[1].component);\n\t\t\t\tthis.modifyNodes = [];\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// linegraph.setOtherInformation() 移動系パズルで数字などが入力された時に線の情報を生成しなおす\n\t\t//---------------------------------------------------------------------------\n\t\tmodifyOtherInfo: function(cell, relation) {\n\t\t\tvar haspath = !!cell.path;\n\t\t\tif (haspath !== this.isnodevalid(cell)) {\n\t\t\t\tif (haspath) {\n\t\t\t\t\tthis.deleteNodeIfEmpty(cell);\n\t\t\t\t} else {\n\t\t\t\t\tthis.createNodeIfEmpty(cell);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (haspath) {\n\t\t\t\t\tthis.setComponentInfo(cell.path);\n\t\t\t\t} else {\n\t\t\t\t\tthis.resetExtraData(cell);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// linegraph.createNodeIfEmpty()  指定されたオブジェクトの場所にNodeを生成する\n\t\t// linegraph.deleteNodeIfEmpty()  指定されたオブジェクトの場所からNodeを除去する\n\t\t//---------------------------------------------------------------------------\n\t\tcreateNodeIfEmpty: function(cell) {\n\t\t\tvar nodes = this.getObjNodeList(cell);\n\n\t\t\t// 周囲のNode生成が必要かもしれないのでチェック＆create\n\t\t\tif (nodes.length === 0) {\n\t\t\t\tthis.createNode(cell);\n\t\t\t}\n\t\t\t// 交差あり盤面の処理\n\t\t\telse if (\n\t\t\t\t!nodes[1] &&\n\t\t\t\tnodes[0].nodes.length === 2 &&\n\t\t\t\tthis.iscrossing(cell)\n\t\t\t) {\n\t\t\t\t// 2本->3本になる時はNodeを追加して分離します\n\t\t\t\t// 上下/左右の線が1本ずつだった場合は左右の線をnodes[1]に付加し直します\n\t\t\t\tvar nbnodes = nodes[0].nodes;\n\t\t\t\tvar isvert = [\n\t\t\t\t\tcell.getvert(nbnodes[0].obj, 2),\n\t\t\t\t\tcell.getvert(nbnodes[1].obj, 2)\n\t\t\t\t];\n\t\t\t\tif (isvert[0] !== isvert[1]) {\n\t\t\t\t\t// breaking up a corner; we create two new nodes to ensure\n\t\t\t\t\t// that the graph gets rebuilt correctly\n\t\t\t\t\tvar vertnode = nbnodes[isvert[0] ? 0 : 1];\n\t\t\t\t\tvar horiznode = nbnodes[isvert[0] ? 1 : 0];\n\t\t\t\t\tthis.removeEdge(nodes[0], vertnode);\n\t\t\t\t\tthis.removeEdge(nodes[0], horiznode);\n\t\t\t\t\tthis.deleteNode(nodes[0]);\n\t\t\t\t\tthis.createNode(cell);\n\t\t\t\t\tthis.createNode(cell);\n\t\t\t\t\tthis.addEdge(nodes[0], vertnode);\n\t\t\t\t\tthis.addEdge(nodes[1], horiznode);\n\t\t\t\t}\n\t\t\t\t// 両方左右線の場合はnodes[0], nodes[1]を交換してnodes[0]に0本、nodes[1]に2本付加する\n\t\t\t\telse {\n\t\t\t\t\tthis.createNode(cell);\n\t\t\t\t\tif (!isvert[0] && !isvert[1]) {\n\t\t\t\t\t\tnodes.push(nodes.shift());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdeleteNodeIfEmpty: function(cell) {\n\t\t\tvar nodes = this.getObjNodeList(cell);\n\n\t\t\t// 周囲のNodeが消えるかもしれないのでチェック＆remove\n\t\t\tif (\n\t\t\t\tnodes.length === 1 &&\n\t\t\t\tnodes[0].nodes.length === 0 &&\n\t\t\t\t!this.isnodevalid(cell)\n\t\t\t) {\n\t\t\t\tthis.deleteNode(nodes[0]);\n\t\t\t}\n\t\t\t// 交差あり盤面の処理\n\t\t\telse if (\n\t\t\t\t!!nodes[1] &&\n\t\t\t\tnodes[0].nodes.length + nodes[1].nodes.length === 2 &&\n\t\t\t\tthis.iscrossing(cell)\n\t\t\t) {\n\t\t\t\t// 3本->2本になってnodes[0], nodes[1]に1本ずつEdgeが存在する場合はnodes[0]に統合\n\t\t\t\tif (nodes[1].nodes.length === 1) {\n\t\t\t\t\tvar lrnode = nodes[1].nodes[0];\n\t\t\t\t\tthis.removeEdge(nodes[1], lrnode);\n\t\t\t\t\tthis.addEdge(nodes[0], lrnode);\n\t\t\t\t}\n\t\t\t\t// 両方左右線の場合はnodes[0], nodes[1]を交換してnodes[0]に2本、nodes[1]に0本にする\n\t\t\t\telse if (nodes[1].nodes.length === 2) {\n\t\t\t\t\tnodes.push(nodes.shift());\n\t\t\t\t}\n\n\t\t\t\t// 不要になったNodeを削除\n\t\t\t\tthis.deleteNode(nodes[1]);\n\t\t\t}\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// linegraph.resetExtraData() 指定されたオブジェクトの拡張データをリセットする\n\t\t// linegraph.setExtraData()   指定された領域の拡張データを設定する\n\t\t//--------------------------------------------------------------------------------\n\t\tresetExtraData: function(nodeobj) {\n\t\t\tif (this.moveline) {\n\t\t\t\tnodeobj.base = nodeobj.isNum() ? nodeobj : this.board.emptycell;\n\t\t\t}\n\t\t},\n\t\tsetExtraData: function(component) {\n\t\t\tif (this.coloring && !component.color) {\n\t\t\t\tcomponent.color = this.puzzle.painter.getNewLineColor();\n\t\t\t}\n\n\t\t\tvar edgeobjs = component.getedgeobjs();\n\t\t\tfor (var i = 0; i < edgeobjs.length; i++) {\n\t\t\t\tthis.setComponentRefs(edgeobjs[i], component);\n\t\t\t}\n\n\t\t\tif (this.makeClist || this.moveline) {\n\t\t\t\tcomponent.clist = new this.klass.CellList(component.getnodeobjs());\n\t\t\t\tif (this.moveline) {\n\t\t\t\t\tthis.setMovedBase(component);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// linegraph.repaintNodes() ブロックを再描画する\n\t\t//--------------------------------------------------------------------------------\n\t\trepaintNodes: function(components) {\n\t\t\tvar blist_all = new this.klass.BorderList();\n\t\t\tfor (var i = 0; i < components.length; i++) {\n\t\t\t\tblist_all.extend(components[i].getedgeobjs());\n\t\t\t}\n\t\t\tthis.puzzle.painter.repaintLines(blist_all);\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// linemgr.setMovedBase()    指定された領域の移動情報を設定する\n\t\t//--------------------------------------------------------------------------------\n\t\tsetMovedBase: function(component) {\n\t\t\tvar emptycell = this.board.emptycell;\n\t\t\tcomponent.departure = component.destination = emptycell;\n\t\t\tcomponent.movevalid = false;\n\n\t\t\tvar clist = component.clist;\n\t\t\tif (clist.length < 1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i];\n\t\t\t\tcell.base = cell.isNum() ? cell : emptycell;\n\t\t\t}\n\n\t\t\tvar before = null,\n\t\t\t\tafter = null,\n\t\t\t\tpoint = 0;\n\t\t\tif (clist.length === 1) {\n\t\t\t\tbefore = after = clist[0];\n\t\t\t\tpoint = 2;\n\t\t\t} else {\n\t\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\t\tvar cell = clist[i];\n\t\t\t\t\tif (cell.lcnt === 1) {\n\t\t\t\t\t\tpoint++;\n\t\t\t\t\t\tif (cell.isNum()) {\n\t\t\t\t\t\t\tbefore = cell;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tafter = cell;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (before !== null && after !== null && point === 2) {\n\t\t\t\tbefore.base = emptycell;\n\t\t\t\tcomponent.departure = after.base = before;\n\t\t\t\tcomponent.destination = after;\n\t\t\t\tcomponent.movevalid = true;\n\t\t\t}\n\t\t}\n\t}\n});\n","// AreaManager.js\n\npzpr.classmgr.makeCommon({\n\t//--------------------------------------------------------------------------------\n\t// ★AreaGraphBaseクラス セルの部屋情報などを保持するクラス\n\t//   ※このクラスで管理しているroomsは左上からの順番に並ばないので\n\t//     回答チェックやURL出力前には一旦resetRoomNumber()等が必要です。\n\t//--------------------------------------------------------------------------------\n\t\"AreaGraphBase:GraphBase\": {\n\t\tpointgroup: \"cell\",\n\n\t\tisedgevalidbynodeobj: function(cell1, cell2) {\n\t\t\treturn this.isedgevalidbylinkobj(\n\t\t\t\tthis.board.getb((cell1.bx + cell2.bx) >> 1, (cell1.by + cell2.by) >> 1)\n\t\t\t);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// areagraph.setEdgeByNodeObj() 黒マスになったりした時にブロックの情報を生成しなおす\n\t\t//---------------------------------------------------------------------------\n\t\tsetEdgeByNodeObj: function(nodeobj) {\n\t\t\t// 一度Edgeを取り外す\n\t\t\tif (this.getObjNodeList(nodeobj).length > 0) {\n\t\t\t\tthis.removeEdgeByNodeObj(nodeobj);\n\t\t\t}\n\n\t\t\t// Edgeを付け直す\n\t\t\tif (this.calcNodeCount(nodeobj) > 0) {\n\t\t\t\tthis.addEdgeByNodeObj(nodeobj);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// areagraph.removeEdgeByNodeObj() 黒マスになったりした時にブロックの情報を消去する\n\t\t// areagraph.addEdgeByNodeObj()    黒マスになったりした時にブロックの情報を生成する\n\t\t//---------------------------------------------------------------------------\n\t\tremoveEdgeByNodeObj: function(cell) {\n\t\t\t// Edgeの除去\n\t\t\tvar sidenodeobj = this.getSideObjByNodeObj(cell);\n\t\t\tvar node1 = this.getObjNodeList(cell)[0];\n\t\t\tvar preedges = node1.nodes.length,\n\t\t\t\tcomponent = node1.component,\n\t\t\t\tendetach = this.modifyNodes.length === 0;\n\t\t\tfor (var i = 0; i < sidenodeobj.length; i++) {\n\t\t\t\tvar node2 = this.getObjNodeList(sidenodeobj[i])[0];\n\t\t\t\tif (!!node1 && !!node2) {\n\t\t\t\t\tthis.removeEdge(node1, node2);\n\n\t\t\t\t\tif (!!this.incdecBorderCount) {\n\t\t\t\t\t\tthis.incdecBorderCount(\n\t\t\t\t\t\t\tthis.board.getb(\n\t\t\t\t\t\t\t\t(node1.obj.bx + node2.obj.bx) >> 1,\n\t\t\t\t\t\t\t\t(node1.obj.by + node2.obj.by) >> 1\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Nodeを一旦取り除く\n\t\t\tif (!!node1) {\n\t\t\t\tthis.deleteNode(node1);\n\t\t\t}\n\n\t\t\t// 周囲のComponent末端から切り離されただけの場合は情報を更新して終了\n\t\t\tif (!this.rebuildmode && preedges === 1 && endetach) {\n\t\t\t\tthis.setComponentInfo(component);\n\t\t\t\tthis.modifyNodes = [];\n\t\t\t}\n\t\t},\n\t\taddEdgeByNodeObj: function(cell) {\n\t\t\t// Nodeを付加する\n\t\t\tfor (var i = 0, len = this.calcNodeCount(cell); i < len; i++) {\n\t\t\t\tthis.createNode(cell);\n\t\t\t}\n\n\t\t\t// Edgeの付加\n\t\t\tvar sidenodeobj = this.getSideObjByNodeObj(cell);\n\t\t\tvar node1 = this.getObjNodeList(cell)[0];\n\t\t\tvar enattach = this.modifyNodes.length === 0;\n\t\t\tfor (var i = 0; i < sidenodeobj.length; i++) {\n\t\t\t\tif (!this.isedgevalidbynodeobj(cell, sidenodeobj[i])) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar node2 = this.getObjNodeList(sidenodeobj[i])[0];\n\t\t\t\tif (!!node1 && !!node2) {\n\t\t\t\t\tthis.addEdge(node1, node2);\n\n\t\t\t\t\tif (!!this.incdecBorderCount) {\n\t\t\t\t\t\tthis.incdecBorderCount(\n\t\t\t\t\t\t\tthis.board.getb(\n\t\t\t\t\t\t\t\t(node1.obj.bx + node2.obj.bx) >> 1,\n\t\t\t\t\t\t\t\t(node1.obj.by + node2.obj.by) >> 1\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 周囲のComponentに1か所くっついただけの場合は情報を更新して終了\n\t\t\tif (!this.rebuildmode && node1.nodes.length === 1 && enattach) {\n\t\t\t\tthis.attachNode(node1, node1.nodes[0].component);\n\t\t\t\tthis.modifyNodes = [];\n\t\t\t}\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// areagraph.setExtraData()   指定された領域の拡張データを設定する\n\t\t//--------------------------------------------------------------------------------\n\t\tsetExtraData: function(component) {\n\t\t\tcomponent.clist = new this.klass.CellList(component.getnodeobjs());\n\t\t}\n\t},\n\n\t//--------------------------------------------------------------------------------\n\t// ☆AreaShadeGraphクラス  黒マス情報オブジェクトのクラス\n\t// ☆AreaUnshadeGraphクラス  白マス情報オブジェクトのクラス\n\t// ☆AreaNumberGraphクラス 数字情報オブジェクトのクラス\n\t//--------------------------------------------------------------------------------\n\t\"AreaShadeGraph:AreaGraphBase\": {\n\t\trelation: { \"cell.qans\": \"node\" },\n\t\tsetComponentRefs: function(obj, component) {\n\t\t\tobj.sblk = component;\n\t\t},\n\t\tgetObjNodeList: function(nodeobj) {\n\t\t\treturn nodeobj.sblknodes;\n\t\t},\n\t\tresetObjNodeList: function(nodeobj) {\n\t\t\tnodeobj.sblknodes = [];\n\t\t},\n\n\t\tisnodevalid: function(cell) {\n\t\t\treturn cell.isShade();\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// sblkmgr.setExtraData()   指定された領域の拡張データを設定する\n\t\t//--------------------------------------------------------------------------------\n\t\tsetExtraData: function(component) {\n\t\t\tcomponent.clist = new this.klass.CellList(component.getnodeobjs());\n\t\t\tif (this.coloring && !component.color) {\n\t\t\t\tcomponent.color = this.puzzle.painter.getNewLineColor();\n\t\t\t}\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// sblkmgr.repaintNodes() ブロックを再描画する\n\t\t//--------------------------------------------------------------------------------\n\t\trepaintNodes: function(components) {\n\t\t\tvar clist_all = new this.klass.CellList();\n\t\t\tfor (var i = 0; i < components.length; i++) {\n\t\t\t\tclist_all.extend(components[i].getnodeobjs());\n\t\t\t}\n\t\t\tthis.puzzle.painter.repaintBlocks(clist_all);\n\t\t}\n\t},\n\n\t\"AreaUnshadeGraph:AreaGraphBase\": {\n\t\trelation: { \"cell.qans\": \"node\" },\n\t\tsetComponentRefs: function(obj, component) {\n\t\t\tobj.ublk = component;\n\t\t},\n\t\tgetObjNodeList: function(nodeobj) {\n\t\t\treturn nodeobj.ublknodes;\n\t\t},\n\t\tresetObjNodeList: function(nodeobj) {\n\t\t\tnodeobj.ublknodes = [];\n\t\t},\n\n\t\tisnodevalid: function(cell) {\n\t\t\treturn cell.isUnshade();\n\t\t}\n\t},\n\n\t\"AreaNumberGraph:AreaGraphBase\": {\n\t\trelation: { \"cell.qnum\": \"node\", \"cell.anum\": \"node\", \"cell.qsub\": \"node\" },\n\t\tsetComponentRefs: function(obj, component) {\n\t\t\tobj.nblk = component;\n\t\t},\n\t\tgetObjNodeList: function(nodeobj) {\n\t\t\treturn nodeobj.nblknodes;\n\t\t},\n\t\tresetObjNodeList: function(nodeobj) {\n\t\t\tnodeobj.nblknodes = [];\n\t\t},\n\n\t\tisnodevalid: function(cell) {\n\t\t\treturn cell.isNumberObj();\n\t\t}\n\t},\n\n\t//--------------------------------------------------------------------------------\n\t// ☆AreaRoomGraphクラス 部屋情報オブジェクトのクラス\n\t//--------------------------------------------------------------------------------\n\t\"AreaRoomGraph:AreaGraphBase\": {\n\t\trelation: {\n\t\t\t\"cell.ques\": \"node\",\n\t\t\t\"border.ques\": \"separator\",\n\t\t\t\"border.qans\": \"separator\"\n\t\t},\n\n\t\thastop: false,\n\n\t\tgetComponentRefs: function(obj) {\n\t\t\treturn obj.room;\n\t\t}, // getSideAreaInfo用\n\t\tsetComponentRefs: function(obj, component) {\n\t\t\tobj.room = component;\n\t\t},\n\t\tgetObjNodeList: function(nodeobj) {\n\t\t\treturn nodeobj.roomnodes;\n\t\t},\n\t\tresetObjNodeList: function(nodeobj) {\n\t\t\tnodeobj.roomnodes = [];\n\t\t},\n\n\t\tisnodevalid: function(cell) {\n\t\t\treturn cell.ques !== 7;\n\t\t},\n\t\tisedgevalidbylinkobj: function(border) {\n\t\t\treturn !border.isBorder();\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// roomgraph.rebuild2() 部屋情報の再設定を行う\n\t\t//--------------------------------------------------------------------------------\n\t\trebuild2: function() {\n\t\t\tthis.klass.AreaGraphBase.prototype.rebuild2.call(this);\n\t\t\tthis.resetBorderCount();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// roomgraph.resetBorderCount()  初期化時に、lcnt情報を初期化する\n\t\t// roomgraph.incdecBorderCount() 線が引かれたり消された時に、lcnt変数を生成し直す\n\t\t//---------------------------------------------------------------------------\n\t\tresetBorderCount: function() {\n\t\t\tvar bd = this.board,\n\t\t\t\tborders = bd.border;\n\t\t\t/* 外枠のカウントをあらかじめ足しておく */\n\t\t\tfor (var c = 0; c < bd.cross.length; c++) {\n\t\t\t\tvar cross = bd.cross[c],\n\t\t\t\t\tbx = cross.bx,\n\t\t\t\t\tby = cross.by;\n\t\t\t\tvar ischassis =\n\t\t\t\t\tbd.hasborder === 1\n\t\t\t\t\t\t? bx === 0 || bx === bd.cols * 2 || by === 0 || by === bd.rows * 2\n\t\t\t\t\t\t: false;\n\t\t\t\tcross.lcnt = ischassis ? 2 : 0;\n\t\t\t}\n\t\t\tfor (var id = 0; id < borders.length; id++) {\n\t\t\t\tif (!this.isedgevalidbylinkobj(borders[id])) {\n\t\t\t\t\tthis.incdecBorderCount(borders[id], true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tincdecBorderCount: function(border, isset) {\n\t\t\tfor (var i = 0; i < 2; i++) {\n\t\t\t\tvar cross = border.sidecross[i];\n\t\t\t\tif (!cross.isnull) {\n\t\t\t\t\tif (isset) {\n\t\t\t\t\t\tcross.lcnt++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcross.lcnt--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// roommgr.addEdgeBySeparator()    指定されたオブジェクトの場所にEdgeを生成する\n\t\t// roommgr.removeEdgeBySeparator() 指定されたオブジェクトの場所からEdgeを除去する\n\t\t//---------------------------------------------------------------------------\n\t\taddEdgeBySeparator: function(border) {\n\t\t\t// 境界線を消した時の処理\n\t\t\tvar sidenodes = this.getSideNodesBySeparator(border);\n\t\t\tif (!sidenodes) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.addEdge(sidenodes[0], sidenodes[1]);\n\t\t\tif (border.sidecross[0].lcnt === 0 || border.sidecross[1].lcnt === 0) {\n\t\t\t\tthis.modifyNodes = [];\n\t\t\t} else if (this.hastop && sidenodes.length >= 2) {\n\t\t\t\tthis.setTopOfRoom_combine(sidenodes[0].obj, sidenodes[1].obj);\n\t\t\t}\n\t\t},\n\t\tremoveEdgeBySeparator: function(border) {\n\t\t\t// 境界線を引いた時の処理\n\t\t\tvar sidenodes = this.getSideNodesBySeparator(border);\n\t\t\tif (!sidenodes) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.removeEdge(sidenodes[0], sidenodes[1]);\n\t\t\tif (border.sidecross[0].lcnt === 1 || border.sidecross[1].lcnt === 1) {\n\t\t\t\tthis.modifyNodes = [];\n\t\t\t}\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// roommgr.setTopOfRoom_combine()  部屋が繋がったとき、部屋のTOPを設定する\n\t\t//--------------------------------------------------------------------------------\n\t\tsetTopOfRoom_combine: function(cell1, cell2) {\n\t\t\tif (!cell1.room || !cell2.room || cell1.room === cell2.room) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar merged, keep;\n\t\t\tvar tcell1 = cell1.room.top;\n\t\t\tvar tcell2 = cell2.room.top;\n\t\t\tif (\n\t\t\t\ttcell1.bx > tcell2.bx ||\n\t\t\t\t(tcell1.bx === tcell2.bx && tcell1.by > tcell2.by)\n\t\t\t) {\n\t\t\t\tmerged = tcell1;\n\t\t\t\tkeep = tcell2;\n\t\t\t} else {\n\t\t\t\tmerged = tcell2;\n\t\t\t\tkeep = tcell1;\n\t\t\t}\n\n\t\t\t// 消える部屋のほうの数字を消す\n\t\t\tif (merged.isNum()) {\n\t\t\t\t// 数字が消える部屋にしかない場合 -> 残るほうに移動させる\n\t\t\t\tif (keep.noNum()) {\n\t\t\t\t\tkeep.setQnum(merged.qnum);\n\t\t\t\t\tkeep.draw();\n\t\t\t\t}\n\t\t\t\tmerged.setQnum(-1);\n\t\t\t\tmerged.draw();\n\t\t\t}\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// roommgr.setExtraData()   指定された領域の拡張データを設定する\n\t\t//--------------------------------------------------------------------------------\n\t\tsetExtraData: function(component) {\n\t\t\tvar clist = (component.clist = new this.klass.CellList(\n\t\t\t\tcomponent.getnodeobjs()\n\t\t\t));\n\t\t\tif (this.hastop) {\n\t\t\t\tcomponent.top = clist.getTopCell();\n\n\t\t\t\tif (this.rebuildmode) {\n\t\t\t\t\tvar val = -1,\n\t\t\t\t\t\tclist = clist,\n\t\t\t\t\t\ttop = component.top;\n\t\t\t\t\tfor (var i = 0, len = clist.length; i < len; i++) {\n\t\t\t\t\t\tvar cell = clist[i];\n\t\t\t\t\t\tif (cell.room === component && cell.qnum !== -1) {\n\t\t\t\t\t\t\tif (val === -1) {\n\t\t\t\t\t\t\t\tval = cell.qnum;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (top !== cell) {\n\t\t\t\t\t\t\t\tcell.qnum = -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (val !== -1 && top.qnum === -1) {\n\t\t\t\t\t\ttop.qnum = val;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.puzzle.validConfig(\"autocmp\")) {\n\t\t\t\tcomponent.checkAutoCmp();\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// roommgr.getSideAreaInfo()  接しているが異なる領域部屋の情報を取得する\n\t\t//---------------------------------------------------------------------------\n\t\tgetSideAreaInfo: function() {\n\t\t\tvar sides = [],\n\t\t\t\tlen = this.components.length,\n\t\t\t\tadjs = {},\n\t\t\t\tbd = this.board;\n\t\t\tfor (var r = 0; r < this.components.length; r++) {\n\t\t\t\tthis.components[r].id = r;\n\t\t\t}\n\t\t\tfor (var id = 0; id < bd.border.length; id++) {\n\t\t\t\tvar room1 = this.getComponentRefs(bd.border[id].sidecell[0]);\n\t\t\t\tvar room2 = this.getComponentRefs(bd.border[id].sidecell[1]);\n\t\t\t\tif (room1 === room2 || !room1 || !room2) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar key =\n\t\t\t\t\troom1.id < room2.id\n\t\t\t\t\t\t? room1.id * len + room2.id\n\t\t\t\t\t\t: room2.id * len + room1.id;\n\t\t\t\tif (!!adjs[key]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tadjs[key] = true;\n\n\t\t\t\tsides.push([room1, room2]);\n\t\t\t}\n\t\t\treturn sides;\n\t\t}\n\t}\n});\n","// Graphic.js v3.4.1\n\n(function() {\n\tvar CENTER = 1,\n\t\tBOTTOMLEFT = 2,\n\t\tBOTTOMRIGHT = 3,\n\t\tTOPRIGHT = 4,\n\t\tTOPLEFT = 5,\n\t\tUP = 6,\n\t\tDN = 7,\n\t\tLT = 8,\n\t\tRT = 9;\n\n\t//---------------------------------------------------------------------------\n\t// ★Graphicクラス Canvasに描画する\n\t//---------------------------------------------------------------------------\n\t// パズル共通 Canvas/DOM制御部\n\t// Graphicクラスの定義\n\tpzpr.classmgr.makeCommon({\n\t\t//---------------------------------------------------------\n\t\tGraphic: {\n\t\t\tinitialize: function() {\n\t\t\t\tthis.gridcolor =\n\t\t\t\t\tthis.gridcolor_list[this.gridcolor_type] || this.gridcolor;\n\n\t\t\t\tvar pc = this;\n\t\t\t\t[\n\t\t\t\t\t[\"getQuesCellColor\", this.fgcellcolor_func],\n\t\t\t\t\t[\"getBGCellColor\", this.bgcellcolor_func],\n\t\t\t\t\t[\"getBorderColor\", this.bordercolor_func],\n\t\t\t\t\t[\"getQuesNumberColor\", this.numbercolor_func],\n\t\t\t\t\t[\"getCircleFillColor\", this.circlefillcolor_func],\n\t\t\t\t\t[\"getCircleStrokeColor\", this.circlestrokecolor_func]\n\t\t\t\t].forEach(function(item) {\n\t\t\t\t\tif (pc[item[0]] !== pzpr.common.Graphic.prototype[item[0]]) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} // パズル個別の関数が定義されている場合はそのまま使用\n\t\t\t\t\tpc[item[0]] = pc[item[0] + \"_\" + item[1]] || pc[item[0]];\n\t\t\t\t});\n\n\t\t\t\tthis.resetRange();\n\n\t\t\t\tthis.initFont();\n\t\t\t},\n\n\t\t\tcontext: null,\n\t\t\tsubcontext: null,\n\n\t\t\tfgcellcolor_func: \"ques\", // getQuesCellColor()の種類\n\t\t\tbgcellcolor_func: \"error1\", // getBGCellColor()の種類\n\t\t\tbordercolor_func: \"ques\", // getBorderColor()の種類\n\t\t\tnumbercolor_func: \"mixed\", // getQuesNumberColor()の種類\n\n\t\t\tcirclefillcolor_func: \"qnum\", // getCircleFillColor()の種類\n\t\t\tcirclestrokecolor_func: \"qnum\", // getCircleStrokeColor()の種類\n\n\t\t\t// 標準の色設定\n\t\t\tquescolor: \"black\",\n\t\t\tqanscolor: \"rgb(0, 160, 0)\",\n\t\t\tqcmpcolor: \"silver\",\n\t\t\tqcmpbgcolor: \"rgb(224, 224, 255)\",\n\t\t\ttrialcolor: \"rgb(160, 160, 160)\",\n\t\t\tsubcolor: \"rgb(127, 127, 255)\",\n\n\t\t\t// 黒マスの色\n\t\t\tshadecolor: \"black\",\n\t\t\terrcolor1: \"rgb(192, 0, 0)\",\n\t\t\terrcolor2: \"rgb(32, 32, 255)\",\n\t\t\tfontShadecolor: \"rgb(224, 224, 224)\",\n\n\t\t\t// 白マス確定マスの背景色\n\t\t\tenablebcolor: false,\n\t\t\tbcolor: \"rgb(160, 255, 160)\",\n\t\t\terrbcolor1: \"rgb(255, 160, 160)\",\n\t\t\terrbcolor2: \"rgb(64, 255, 64)\",\n\n\t\t\tqsubcolor1: \"rgb(160,255,160)\",\n\t\t\tqsubcolor2: \"rgb(255,255,127)\",\n\t\t\tqsubcolor3: \"rgb(192,192,192)\", // 絵が出るパズルの背景入力\n\n\t\t\ticecolor: \"rgb(192, 224, 255)\",\n\t\t\terricecolor: \"rgb(224,  96, 160)\",\n\n\t\t\t// セルの丸数字内部の背景色\n\t\t\tcirclebasecolor: \"white\",\n\n\t\t\t// セルの○×の色(補助記号)\n\t\t\tmbcolor: \"rgb(0, 160, 0)\",\n\n\t\t\t// 線・×の色\n\t\t\tlinecolor: \"rgb(0, 160, 0)\", // 色分けなしの場合\n\t\t\terrlinecolor: \"rgb(255, 0, 0)\",\n\t\t\tnoerrcolor: \"rgb(160, 160, 160)\", // エラー表示時, エラーでない線/境界線の描画色\n\n\t\t\tmovelinecolor: \"silver\",\n\t\t\tmovetrialcolor: \"rgb(255, 160, 0)\",\n\n\t\t\tpekecolor: \"rgb(0, 127, 0)\",\n\n\t\t\t// 境界線と黒マスを分ける色(BoxBorder)\n\t\t\tbbcolor: \"rgb(160, 160, 160)\",\n\n\t\t\t// 入力ターゲットの色\n\t\t\ttargetColorEdit: \"rgb(255, 64,  64)\",\n\t\t\ttargetColorPlay: \"rgb(64,  64, 255)\",\n\t\t\ttargetColorTrial: \"rgb(255,  64, 255)\",\n\t\t\tttcolor: \"rgb(127,255,127)\", // ques=51の入力ターゲット(TargetTriangle)\n\n\t\t\tmovecolor: \"red\",\n\n\t\t\t// 盤面のCellを分ける色\n\t\t\tgridcolor: \"black\",\n\t\t\tgridcolor_type: \"\",\n\t\t\tgridcolor_list: {\n\t\t\t\t// 色々なパズルで定義してた固定色\n\t\t\t\tDARK: \"rgb( 48,  48,  48)\" /* LITSでの指定 */,\n\t\t\t\tLIGHT: \"rgb(127, 127, 127)\" /* ほとんどはこの色を指定している */,\n\t\t\t\tDLIGHT: \"rgb(160, 160, 160)\" /* 領域分割系で使ってることが多い */,\n\t\t\t\tSLIGHT: \"rgb(191, 191, 191)\" /* 部屋＋線を引くパズル           */,\n\t\t\t\tTHIN: \"rgb(224, 224, 224)\" /* 問題入力時のみGrid表示のパズル */\n\t\t\t},\n\n\t\t\t// 盤面(枠の中)の背景色\n\t\t\tbgcolor: \"white\",\n\n\t\t\t// その他サイズ指定\n\t\t\ttextoption: null,\n\t\t\tfontsizeratio: 0.8, // Fontサイズのcellsizeとの比率\n\t\t\tfontwidth: [0.5, 0.4, 0.33], // 2文字以上のTextの横幅 (2文字〜の文字単位横幅を指定する)\n\t\t\tfontfamily: \"\",\n\t\t\tisSupportMaxWidth: true, // maxWidthサポートブラウザ\n\t\t\tcrosssize: 0.4,\n\t\t\tcircleratio: [0.4, 0.35],\n\n\t\t\t// 枠外の一辺のmargin(セル数換算)\n\t\t\tmargin: 0.15,\n\n\t\t\t// canvasの大きさを保持する\n\t\t\tcanvasWidth: null,\n\t\t\tcanvasHeight: null,\n\n\t\t\t// canvas内での盤面の左上座標\n\t\t\tx0: 0,\n\t\t\ty0: 0,\n\n\t\t\t// 描画単位(デフォルト値)\n\t\t\tcw: 36, // セルの横幅\n\t\t\tch: 36, // セルの縦幅\n\t\t\tbw: 18, // セルの横幅/2\n\t\t\tbh: 18, // セルの縦幅/2\n\n\t\t\tdevicePixelRatio: 1,\n\t\t\tgw: 1, // grid width\n\t\t\tlw: 1, // LineWidth 境界線・Lineの太さ\n\t\t\tlwmin: 3,\n\t\t\tlm: 1, // LineMargin\n\t\t\tlwratio: 10, // onresize_processでlwの値の算出に用いる\n\t\t\taddlw: 0, // エラー時に線の太さを広げる\n\n\t\t\t// getNewColorの設定\n\t\t\tlastHdeg: 0,\n\t\t\tlastYdeg: 0,\n\t\t\tminYdeg: 0.18,\n\t\t\tmaxYdeg: 0.7,\n\n\t\t\t// その他の描画設定\n\t\t\trange: null, // 描画領域を保持するオブジェクト\n\n\t\t\tuseBuffer: false, // Buffer描画を行うか\n\t\t\toutputImage: false, // 画像保存中\n\n\t\t\t// resize関数が呼ばれたが、初期化されていない等でresizeしていないことを示すフラグ\n\t\t\tpendingResize: false,\n\n\t\t\t// 初期化前、およびsuspend呼び出し中を示すフラグ\n\t\t\tsuspended: true,\n\t\t\tsuspendedAll: true,\n\n\t\t\t// Cellのqnumが-2のときに？を表示しないパズルごとの設定\n\t\t\thideHatena: false,\n\n\t\t\t// 正解条件を満たしたオブジェクトを描画するかどうかの設定\n\t\t\tautocmp: \"\",\n\n\t\t\t// 色分け設定\n\t\t\tirowake: false,\n\t\t\tirowakeblk: false,\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.initCanvas()       このオブジェクトで使用するキャンバスを設定する\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tinitCanvas: function() {\n\t\t\t\tvar puzzle = this.puzzle;\n\t\t\t\tvar g = (this.context = !!puzzle.canvas\n\t\t\t\t\t? puzzle.canvas.getContext(\"2d\")\n\t\t\t\t\t: null);\n\t\t\t\tif (g.use.canvas) {\n\t\t\t\t\tthis.subcontext = !!puzzle.subcanvas\n\t\t\t\t\t\t? puzzle.subcanvas.getContext(\"2d\")\n\t\t\t\t\t\t: null;\n\t\t\t\t\tthis.useBuffer = !!this.subcontext;\n\t\t\t\t}\n\n\t\t\t\tif (this.canvasWidth === null || this.canvasHeight === null) {\n\t\t\t\t\tvar rect = pzpr.util.getRect(puzzle.canvas);\n\t\t\t\t\tthis.resizeCanvas(rect.width, rect.height);\n\t\t\t\t}\n\n\t\t\t\tthis.pendingResize = true;\n\t\t\t\tthis.resize_canvas_main();\n\t\t\t\tpuzzle.emit(\"canvasReady\");\n\n\t\t\t\tthis.unsuspend();\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.initFont()  数字を記入するためのフォントを設定する\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tinitFont: function() {\n\t\t\t\tvar isgothic = this.puzzle.getConfig(\"font\") === 1;\n\t\t\t\tif (this.puzzle.pzpr.env.OS.Android) {\n\t\t\t\t\tthis.fontfamily = isgothic\n\t\t\t\t\t\t? \"Helvetica, Verdana, Arial, \"\n\t\t\t\t\t\t: '\"Times New Roman\", ';\n\t\t\t\t} else {\n\t\t\t\t\tthis.fontfamily = \"\";\n\t\t\t\t}\n\t\t\t\tthis.fontfamily += isgothic ? \"sans-serif\" : \"serif\";\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.resizeCanvas()    キャンバスのサイズを設定する\n\t\t\t//                      (指定なしの場合は、前のキャンバスのサイズを用いる)\n\t\t\t// pc.resizeCanvasByCellSize() セルのサイズを指定してキャンバスのサイズを変える\n\t\t\t//                             (指定なしの場合は、前のセルのサイズを用いる)\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tresizeCanvas: function(cwid, chgt) {\n\t\t\t\tvar insuspend = this.suspended;\n\t\t\t\tthis.suspendAll();\n\n\t\t\t\tthis.canvasWidth = cwid || this.canvasWidth;\n\t\t\t\tthis.canvasHeight = chgt || this.canvasHeight;\n\n\t\t\t\tthis.pendingResize = true;\n\t\t\t\tif (!insuspend) {\n\t\t\t\t\tthis.unsuspend();\n\t\t\t\t}\n\t\t\t},\n\t\t\tresizeCanvasByCellSize: function(cellsize) {\n\t\t\t\tvar insuspend = this.suspended;\n\t\t\t\tthis.suspendAll();\n\n\t\t\t\tthis.cw = cellsize || this.cw;\n\t\t\t\tthis.ch = cellsize || this.ch;\n\t\t\t\tthis.canvasWidth = this.cw * this.getCanvasCols();\n\t\t\t\tthis.canvasHeight = this.ch * this.getCanvasRows();\n\n\t\t\t\tthis.pendingResize = true;\n\t\t\t\tif (!insuspend) {\n\t\t\t\t\tthis.unsuspend();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.resize_canvas_main() ウィンドウのLoad/Resize時の処理。\n\t\t\t//                         Canvas/表示するマス目の大きさを設定する。\n\t\t\t// pc.setParameter()       cw, ch等の変数を大きさに応じて再設定する\n\t\t\t// pc.setOffset()          盤面のサイズや大きさを再設定する\n\t\t\t// pc.setPagePos()         盤面のページ内座標を設定する\n\t\t\t// pc.clearObject()        contextのclearなどを呼び出す関数\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tresize_canvas_main: function() {\n\t\t\t\tif (!this.pendingResize) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.pendingResize = false;\n\n\t\t\t\t// セルのサイズなどを取得・設定\n\t\t\t\tthis.setParameter();\n\n\t\t\t\t// Canvasのサイズ、オフセット位置の変更\n\t\t\t\tthis.setOffset();\n\n\t\t\t\t// Listener呼び出し\n\t\t\t\tthis.puzzle.emit(\"resize\");\n\n\t\t\t\t// contextのclear等を呼び出す\n\t\t\t\tthis.clearObject();\n\t\t\t},\n\n\t\t\tsetParameter: function() {\n\t\t\t\tvar cwid = this.canvasWidth,\n\t\t\t\t\tchgt = this.canvasHeight;\n\t\t\t\tvar cols = this.getCanvasCols(),\n\t\t\t\t\trows = this.getCanvasRows();\n\t\t\t\tvar cw = (cwid / cols) | 0,\n\t\t\t\t\tch = (chgt / rows) | 0;\n\n\t\t\t\tthis.devicePixelRatio = this.puzzle.pzpr.env.browser\n\t\t\t\t\t? window.devicePixelRatio || 1\n\t\t\t\t\t: 1;\n\n\t\t\t\tif (this.puzzle.getConfig(\"squarecell\")) {\n\t\t\t\t\tthis.cw = this.ch = Math.min(cw, ch);\n\t\t\t\t} else {\n\t\t\t\t\tthis.cw = cw;\n\t\t\t\t\tthis.ch = ch;\n\t\t\t\t}\n\n\t\t\t\tthis.bw = this.cw / 2;\n\t\t\t\tthis.bh = this.ch / 2;\n\n\t\t\t\tvar gwmax = 1,\n\t\t\t\t\tgwratio = 40;\n\t\t\t\tvar gw = Math.min(this.cw / gwratio, gwmax);\n\t\t\t\tvar pxSize = 1 / this.devicePixelRatio;\n\t\t\t\tvar gwdev = Math.max(1, Math.round(gw / pxSize));\n\t\t\t\tthis.gw = gwdev * pxSize;\n\n\t\t\t\tvar lw = Math.max(this.cw / this.lwratio, this.lwmin);\n\t\t\t\tvar lwdev = Math.max(1, Math.round(lw / pxSize));\n\t\t\t\tthis.lw = lwdev * pxSize;\n\t\t\t\tthis.lm = this.lw / 2;\n\t\t\t},\n\t\t\tsetOffset: function() {\n\t\t\t\tvar g = this.context,\n\t\t\t\t\tg2 = this.subcontext;\n\t\t\t\tvar cwid = this.canvasWidth,\n\t\t\t\t\tchgt = this.canvasHeight;\n\n\t\t\t\t// canvas要素のサイズを変更する\n\t\t\t\tg.changeSize(cwid | 0, chgt | 0);\n\t\t\t\tif (!!g2) {\n\t\t\t\t\tg2.changeSize(cwid | 0, chgt | 0);\n\t\t\t\t}\n\n\t\t\t\t// 盤面のセルID:0が描画される左上の位置の設定 (Canvas左上からのオフセット)\n\t\t\t\tvar x0 = (this.x0 =\n\t\t\t\t\t(((cwid - this.cw * this.getBoardCols()) / 2 +\n\t\t\t\t\t\tthis.cw * this.getOffsetCols()) |\n\t\t\t\t\t\t0) +\n\t\t\t\t\t0.5);\n\t\t\t\tvar y0 = (this.y0 =\n\t\t\t\t\t(((chgt - this.ch * this.getBoardRows()) / 2 +\n\t\t\t\t\t\tthis.ch * this.getOffsetRows()) |\n\t\t\t\t\t\t0) +\n\t\t\t\t\t0.5);\n\n\t\t\t\t// CanvasのOffset位置変更 (SVGの時、小数点以下の端数調整を行う)\n\t\t\t\tif (!g.use.canvas) {\n\t\t\t\t\tvar rect = pzpr.util.getRect(g.canvas);\n\t\t\t\t\tg.translate(x0 - (rect.left % 1), y0 - (rect.top % 1));\n\t\t\t\t} else {\n\t\t\t\t\tg.translate(x0, y0);\n\t\t\t\t\tif (!!g2) {\n\t\t\t\t\t\tg2.translate(x0, y0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tclearObject: function() {\n\t\t\t\tthis.context.clear();\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.getCanvasCols()  Canvasの横幅としてセル何個分が必要か返す\n\t\t\t// pc.getCanvasRows()  Canvasの縦幅としてセル何個分が必要か返す\n\t\t\t// pc.getBoardCols()   マージンを除いた盤面の横幅としてセル何個分が必要か返す\n\t\t\t// pc.getBoardRows()   マージンを除いた盤面の縦幅としてセル何個分が必要か返す\n\t\t\t// pc.getOffsetCols()  有効範囲が(0,0)-(C,R)からずれているパズルで、左右の中心位置を調整する\n\t\t\t// pc.getOffsetRows()  有効範囲が(0,0)-(C,R)からずれているパズルで、上下の中心位置を調整する\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tgetCanvasCols: function() {\n\t\t\t\treturn this.getBoardCols() + 2 * this.margin;\n\t\t\t},\n\t\t\tgetCanvasRows: function() {\n\t\t\t\treturn this.getBoardRows() + 2 * this.margin;\n\t\t\t},\n\n\t\t\tgetBoardCols: function() {\n\t\t\t\tvar bd = this.board;\n\t\t\t\treturn (bd.maxbx - bd.minbx) / 2;\n\t\t\t},\n\t\t\tgetBoardRows: function() {\n\t\t\t\tvar bd = this.board;\n\t\t\t\treturn (bd.maxby - bd.minby) / 2;\n\t\t\t},\n\n\t\t\tgetOffsetCols: function() {\n\t\t\t\t/* 右にずらしたい分プラス、左にずらしたい分マイナス */\n\t\t\t\treturn (0 - this.board.minbx) / 2;\n\t\t\t},\n\t\t\tgetOffsetRows: function() {\n\t\t\t\t/* 下にずらしたい分プラス、上にずらしたい分マイナス */\n\t\t\t\treturn (0 - this.board.minby) / 2;\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.suspend()     描画処理を一時停止する\n\t\t\t// pc.suspendAll()  全盤面の描画処理を一時停止する\n\t\t\t// pc.unsuspend()   描画処理を再開する\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tsuspend: function() {\n\t\t\t\tthis.suspended = true;\n\t\t\t},\n\t\t\tsuspendAll: function() {\n\t\t\t\tthis.suspendedAll = true;\n\t\t\t\tthis.suspended = true;\n\t\t\t},\n\t\t\tunsuspend: function() {\n\t\t\t\tif (!this.context) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.resize_canvas_main();\n\n\t\t\t\tif (this.suspendedAll) {\n\t\t\t\t\tvar bd = this.board;\n\t\t\t\t\tthis.setRange(bd.minbx - 2, bd.minby - 2, bd.maxbx + 2, bd.maxby + 2);\n\t\t\t\t\tthis.suspendedAll = false;\n\t\t\t\t}\n\t\t\t\tif (this.suspended) {\n\t\t\t\t\tthis.suspended = false;\n\t\t\t\t\tthis.prepaint();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.prepaint()    paint関数を呼び出す\n\t\t\t// pc.paint()       座標(x1,y1)-(x2,y2)を再描画する。各パズルのファイルでオーバーライドされる。\n\t\t\t//\n\t\t\t// pc.setRange()       rangeオブジェクトを設定する\n\t\t\t// pc.setRangeObject() 描画対象となるオブジェクトを取得する\n\t\t\t// pc.resetRange()     rangeオブジェクトを初期化する\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tprepaint: function() {\n\t\t\t\tif (this.suspended || !this.context) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.isSupportMaxWidth =\n\t\t\t\t\t(this.context.use.svg && pzpr.env.API.svgTextLength) ||\n\t\t\t\t\t(this.context.use.canvas && pzpr.env.API.maxWidth);\n\n\t\t\t\tvar bd = this.board,\n\t\t\t\t\tbm = 2 * this.margin,\n\t\t\t\t\tx1 = this.range.x1,\n\t\t\t\t\ty1 = this.range.y1,\n\t\t\t\t\tx2 = this.range.x2,\n\t\t\t\t\ty2 = this.range.y2;\n\t\t\t\tif (\n\t\t\t\t\tx1 > x2 ||\n\t\t\t\t\ty1 > y2 ||\n\t\t\t\t\tx1 >= bd.maxbx + bm ||\n\t\t\t\t\ty1 >= bd.maxby + bm ||\n\t\t\t\t\tx2 <= bd.minbx - bm ||\n\t\t\t\t\ty2 <= bd.minby - (bm + (this.pid === \"starbattle\" ? 2 : 0))\n\t\t\t\t) {\n\t\t\t\t\t/* 入力が範囲外ならば何もしない */\n\t\t\t\t} else if (!this.useBuffer) {\n\t\t\t\t\tthis.setRangeObject(x1, y1, x2, y2);\n\t\t\t\t\tthis.flushCanvas();\n\t\t\t\t\tthis.paintMain();\n\t\t\t\t} else {\n\t\t\t\t\tvar g = this.context,\n\t\t\t\t\t\tg2 = this.subcontext;\n\t\t\t\t\tthis.context = g2;\n\t\t\t\t\tthis.setRangeObject(x1 - 1, y1 - 1, x2 + 1, y2 + 1);\n\t\t\t\t\tthis.flushCanvas();\n\t\t\t\t\tthis.paintMain();\n\t\t\t\t\tthis.context = g;\n\t\t\t\t\tthis.copyBufferData(g, g2, x1, y1, x2, y2);\n\t\t\t\t}\n\n\t\t\t\tthis.resetRange();\n\t\t\t},\n\t\t\tpaintMain: function() {\n\t\t\t\tthis.paint();\n\t\t\t\tthis.paintPost();\n\t\t\t},\n\t\t\tpaint: function() {}, //オーバーライド用\n\t\t\tpaintPost: function() {},\n\n\t\t\tsetRange: function(x1, y1, x2, y2) {\n\t\t\t\tif (this.range.x1 > x1) {\n\t\t\t\t\tthis.range.x1 = x1;\n\t\t\t\t}\n\t\t\t\tif (this.range.y1 > y1) {\n\t\t\t\t\tthis.range.y1 = y1;\n\t\t\t\t}\n\t\t\t\tif (this.range.x2 < x2) {\n\t\t\t\t\tthis.range.x2 = x2;\n\t\t\t\t}\n\t\t\t\tif (this.range.y2 < y2) {\n\t\t\t\t\tthis.range.y2 = y2;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetRangeObject: function(x1, y1, x2, y2) {\n\t\t\t\tvar bd = this.board;\n\t\t\t\tthis.range.cells = bd.cellinside(x1, y1, x2, y2);\n\t\t\t\tthis.range.crosses = bd.crossinside(x1, y1, x2, y2);\n\t\t\t\tthis.range.borders = bd.borderinside(x1, y1, x2, y2);\n\t\t\t\tthis.range.excells = bd.excellinside(x1, y1, x2, y2);\n\t\t\t},\n\t\t\tresetRange: function() {\n\t\t\t\tvar puzzle = this.puzzle,\n\t\t\t\t\tbd = puzzle.board,\n\t\t\t\t\tclasses = puzzle.klass;\n\t\t\t\tthis.range = {\n\t\t\t\t\tx1: bd.maxbx + 1,\n\t\t\t\t\ty1: bd.maxby + 1,\n\t\t\t\t\tx2: bd.minbx - 1,\n\t\t\t\t\ty2: bd.minby - 1,\n\t\t\t\t\tcells: new classes.CellList(),\n\t\t\t\t\tcrosses: new classes.CrossList(),\n\t\t\t\t\tborders: new classes.BorderList(),\n\t\t\t\t\texcells: new classes.ExCellList()\n\t\t\t\t};\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.copyBufferData()    Bufferに描画したデータを盤面へコピーする\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tcopyBufferData: function(g, g2, x1, y1, x2, y2) {\n\t\t\t\t// source側はtaranslateのぶん足されていないので、加算しておきます\n\t\t\t\tvar sx1 = this.x0 + x1 * this.bw - 1,\n\t\t\t\t\tsy1 = this.y0 + y1 * this.bh - 1,\n\t\t\t\t\tsx2 = this.x0 + x2 * this.bw + 2,\n\t\t\t\t\tsy2 = this.y0 + y2 * this.bh + 2;\n\t\t\t\tif (sx1 < 0) {\n\t\t\t\t\tsx1 = 0;\n\t\t\t\t}\n\t\t\t\tif (sx2 > g2.child.width) {\n\t\t\t\t\tsx2 = g2.child.width;\n\t\t\t\t}\n\t\t\t\tif (sy1 < 0) {\n\t\t\t\t\tsy1 = 0;\n\t\t\t\t}\n\t\t\t\tif (sy2 > g2.child.height) {\n\t\t\t\t\tsy2 = g2.child.height;\n\t\t\t\t}\n\t\t\t\tg.drawImage(\n\t\t\t\t\tg2.child,\n\t\t\t\t\tsx1,\n\t\t\t\t\tsy1,\n\t\t\t\t\tsx2 - sx1,\n\t\t\t\t\tsy2 - sy1,\n\t\t\t\t\tsx1 - this.x0,\n\t\t\t\t\tsy1 - this.y0,\n\t\t\t\t\tsx2 - sx1,\n\t\t\t\t\tsy2 - sy1\n\t\t\t\t);\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.paintRange()  座標(x1,y1)-(x2,y2)を再描画する\n\t\t\t// pc.paintAll()    全体を再描画する\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tpaintRange: function(x1, y1, x2, y2) {\n\t\t\t\tthis.setRange(x1, y1, x2, y2);\n\t\t\t\tthis.prepaint();\n\t\t\t},\n\t\t\tpaintAll: function() {\n\t\t\t\tif (this.suspended) {\n\t\t\t\t\tthis.suspendedAll = true;\n\t\t\t\t}\n\t\t\t\tvar bd = this.board;\n\t\t\t\tthis.paintRange(bd.minbx - 2, bd.minby - 2, bd.maxbx + 2, bd.maxby + 2);\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.getNewLineColor() 新しい色を返す\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tgetNewLineColor: function() {\n\t\t\t\tvar loopcount = 0;\n\n\t\t\t\twhile (1) {\n\t\t\t\t\tvar Rdeg = ((Math.random() * 384) | 0) - 64;\n\t\t\t\t\tif (Rdeg < 0) {\n\t\t\t\t\t\tRdeg = 0;\n\t\t\t\t\t}\n\t\t\t\t\tif (Rdeg > 255) {\n\t\t\t\t\t\tRdeg = 255;\n\t\t\t\t\t}\n\t\t\t\t\tvar Gdeg = ((Math.random() * 384) | 0) - 64;\n\t\t\t\t\tif (Gdeg < 0) {\n\t\t\t\t\t\tGdeg = 0;\n\t\t\t\t\t}\n\t\t\t\t\tif (Gdeg > 255) {\n\t\t\t\t\t\tGdeg = 255;\n\t\t\t\t\t}\n\t\t\t\t\tvar Bdeg = ((Math.random() * 384) | 0) - 64;\n\t\t\t\t\tif (Bdeg < 0) {\n\t\t\t\t\t\tBdeg = 0;\n\t\t\t\t\t}\n\t\t\t\t\tif (Bdeg > 255) {\n\t\t\t\t\t\tBdeg = 255;\n\t\t\t\t\t}\n\n\t\t\t\t\t// HLSの各組成値を求める\n\t\t\t\t\tvar Cmax = Math.max(Rdeg, Math.max(Gdeg, Bdeg));\n\t\t\t\t\tvar Cmin = Math.min(Rdeg, Math.min(Gdeg, Bdeg));\n\n\t\t\t\t\tvar Hdeg = 0;\n\t\t\t\t\tvar Ldeg = ((Cmax + Cmin) * 0.5) / 255;\n\t\t\t\t\tvar Sdeg =\n\t\t\t\t\t\tCmax === Cmin\n\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t: (Cmax - Cmin) /\n\t\t\t\t\t\t\t  (Ldeg <= 0.5 ? Cmax + Cmin : 2 * 255 - Cmax - Cmin);\n\n\t\t\t\t\tif (Cmax === Cmin) {\n\t\t\t\t\t\tHdeg = 0;\n\t\t\t\t\t} else if (Rdeg >= Gdeg && Rdeg >= Bdeg) {\n\t\t\t\t\t\tHdeg = ((60 * (Gdeg - Bdeg)) / (Cmax - Cmin) + 360) % 360;\n\t\t\t\t\t} else if (Gdeg >= Rdeg && Gdeg >= Bdeg) {\n\t\t\t\t\t\tHdeg = (120 + (60 * (Bdeg - Rdeg)) / (Cmax - Cmin) + 360) % 360;\n\t\t\t\t\t} else if (Bdeg >= Gdeg && Bdeg >= Rdeg) {\n\t\t\t\t\t\tHdeg = (240 + (60 * (Rdeg - Gdeg)) / (Cmax - Cmin) + 360) % 360;\n\t\t\t\t\t}\n\n\t\t\t\t\t// YCbCrのYを求める\n\t\t\t\t\tvar Ydeg = (0.29891 * Rdeg + 0.58661 * Gdeg + 0.11448 * Bdeg) / 255;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.minYdeg < Ydeg &&\n\t\t\t\t\t\tYdeg < this.maxYdeg &&\n\t\t\t\t\t\tMath.abs(this.lastYdeg - Ydeg) > 0.15 &&\n\t\t\t\t\t\t(Sdeg < 0.02 || 0.4 < Sdeg) &&\n\t\t\t\t\t\t(360 + this.lastHdeg - Hdeg) % 360 >= 45 &&\n\t\t\t\t\t\t(360 + this.lastHdeg - Hdeg) % 360 <= 315\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.lastHdeg = Hdeg;\n\t\t\t\t\t\tthis.lastYdeg = Ydeg;\n\t\t\t\t\t\t//alert(\"rgb(\"+Rdeg+\", \"+Gdeg+\", \"+Bdeg+\")\\nHLS(\"+(Hdeg|0)+\", \"+(\"\"+((Ldeg*1000)|0)*0.001).slice(0,5)+\", \"+(\"\"+((Sdeg*1000|0))*0.001).slice(0,5)+\")\\nY(\"+(\"\"+((Ydeg*1000)|0)*0.001).slice(0,5)+\")\");\n\t\t\t\t\t\treturn \"rgb(\" + Rdeg + \",\" + Gdeg + \",\" + Bdeg + \")\";\n\t\t\t\t\t}\n\n\t\t\t\t\tloopcount++;\n\t\t\t\t\tif (loopcount > 100) {\n\t\t\t\t\t\treturn \"rgb(\" + Rdeg + \",\" + Gdeg + \",\" + Bdeg + \")\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.repaintBlocks()  色分け時にブロックを再描画する\n\t\t\t// pc.repaintLines()   ひとつながりの線を再描画する\n\t\t\t// pc.repaintParts()   repaintLine()関数で、さらに上から描画しなおしたい処理を書く\n\t\t\t//                     canvas描画時のみ呼ばれます(他は描画しなおす必要なし)\n\t\t\t//---------------------------------------------------------------------------\n\t\t\trepaintBlocks: function(clist) {\n\t\t\t\tclist.draw();\n\t\t\t},\n\t\t\trepaintLines: function(blist) {\n\t\t\t\tthis.range.borders = blist;\n\t\t\t\tthis.drawLines();\n\n\t\t\t\tif (this.context.use.canvas) {\n\t\t\t\t\tthis.repaintParts(blist);\n\t\t\t\t}\n\t\t\t},\n\t\t\trepaintParts: function(blist) {}, // オーバーライド用\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.flushCanvas()    指定された領域を白で塗りつぶす\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tflushCanvas: function() {\n\t\t\t\tvar g = this.vinc(\"background\", \"crispEdges\", true);\n\t\t\t\tvar bw = this.bw,\n\t\t\t\t\tbh = this.bh,\n\t\t\t\t\tfm = this.margin > 0.15 ? this.margin : 0;\n\t\t\t\tvar bd = this.board;\n\t\t\t\tvar minbx = bd.minbx - fm;\n\t\t\t\tvar minby = bd.minby - fm;\n\t\t\t\tvar bwidth = bd.maxbx + fm - minbx;\n\t\t\t\tvar bheight = bd.maxby + fm - minby;\n\n\t\t\t\tg.vid = \"BG\";\n\t\t\t\tg.fillStyle = this.bgcolor;\n\t\t\t\tg.fillRect(\n\t\t\t\t\tminbx * bw - 0.5,\n\t\t\t\t\tminby * bh - 0.5,\n\t\t\t\t\tbwidth * bw + 1,\n\t\t\t\t\tbheight * bh + 1\n\t\t\t\t);\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.vinc()  レイヤーを返す\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tvinc: function(layerid, rendering, freeze) {\n\t\t\t\tvar g = this.context,\n\t\t\t\t\toption = { freeze: !!freeze };\n\t\t\t\toption.rendering = rendering;\n\t\t\t\tg.setLayer(layerid, option);\n\t\t\t\treturn g;\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// pc.disptext()  数字を記入するための共通関数\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tCENTER: CENTER,\n\t\t\tBOTTOMLEFT: BOTTOMLEFT,\n\t\t\tBOTTOMRIGHT: BOTTOMRIGHT,\n\t\t\tTOPRIGHT: TOPRIGHT,\n\t\t\tTOPLEFT: TOPLEFT,\n\t\t\tUP: UP,\n\t\t\tDN: DN,\n\t\t\tRT: RT,\n\t\t\tLT: LT,\n\n\t\t\tdisptext: function(text, px, py, option) {\n\t\t\t\toption = option || {};\n\t\t\t\tvar g = this.context;\n\n\t\t\t\tvar realsize = (this.cw * (option.ratio || this.fontsizeratio)) | 0;\n\t\t\t\tvar maxLength = void 0;\n\t\t\t\tvar widtharray = option.width || this.fontwidth;\n\t\t\t\tvar widthratiopos =\n\t\t\t\t\ttext.length <= widtharray.length + 1\n\t\t\t\t\t\t? text.length - 2\n\t\t\t\t\t\t: widtharray.length - 1;\n\t\t\t\tvar widthratio =\n\t\t\t\t\twidthratiopos >= 0 ? widtharray[widthratiopos] * text.length : null;\n\t\t\t\tif (this.isSupportMaxWidth) {\n\t\t\t\t\t// maxLengthサポートブラウザ\n\t\t\t\t\tmaxLength = !!widthratio ? realsize * widthratio : void 0;\n\t\t\t\t} else {\n\t\t\t\t\t// maxLength非サポートブラウザ\n\t\t\t\t\tif (!!widthratio) {\n\t\t\t\t\t\trealsize = ((realsize * widthratio * 1.5) / text.length) | 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar style = option.style ? option.style + \" \" : \"\";\n\t\t\t\tg.font = style + realsize + \"px \" + this.fontfamily;\n\n\t\t\t\tvar hoffset = this.bw * (option.hoffset || 0.9);\n\t\t\t\tvar voffset = this.bh * (option.voffset || 0.82);\n\t\t\t\tvar position = option.position || CENTER;\n\t\t\t\tswitch (position) {\n\t\t\t\t\tcase CENTER:\n\t\t\t\t\tcase UP:\n\t\t\t\t\tcase DN:\n\t\t\t\t\t\tg.textAlign = \"center\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase BOTTOMLEFT:\n\t\t\t\t\tcase TOPLEFT:\n\t\t\t\t\tcase LT:\n\t\t\t\t\t\tg.textAlign = \"left\";\n\t\t\t\t\t\tpx -= hoffset;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase BOTTOMRIGHT:\n\t\t\t\t\tcase TOPRIGHT:\n\t\t\t\t\tcase RT:\n\t\t\t\t\t\tg.textAlign = \"right\";\n\t\t\t\t\t\tpx += hoffset;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tswitch (position) {\n\t\t\t\t\tcase CENTER:\n\t\t\t\t\tcase LT:\n\t\t\t\t\tcase RT:\n\t\t\t\t\t\tg.textBaseline = \"middle\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase TOPRIGHT:\n\t\t\t\t\tcase TOPLEFT:\n\t\t\t\t\tcase UP:\n\t\t\t\t\t\tg.textBaseline = \"candle-top\";\n\t\t\t\t\t\tpy -= voffset;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase BOTTOMRIGHT:\n\t\t\t\t\tcase BOTTOMLEFT:\n\t\t\t\t\tcase DN:\n\t\t\t\t\t\tg.textBaseline = \"alphabetic\";\n\t\t\t\t\t\tpy += voffset;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tg.fillText(text, px, py, maxLength);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------\n\t\t// ImageTile: Container for a tileset of images.\n\t\t//---------------------------------------------------------\n\t\tImageTile: {\n\t\t\tcols: 1,\n\t\t\trows: 1,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\n\t\t\tinitialize: function() {\n\t\t\t\tvar puzzle = this.puzzle;\n\t\t\t\tif (typeof Image !== \"undefined\") {\n\t\t\t\t\tthis.image_canvas = this.image_svg = new Image();\n\t\t\t\t\tthis.image_canvas.onload = function() {\n\t\t\t\t\t\tpuzzle.painter.paintAll();\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthis.image_canvas = !!puzzle.pzpr.Candle.Canvas\n\t\t\t\t\t\t? new puzzle.pzpr.Candle.Canvas.Image()\n\t\t\t\t\t\t: {};\n\t\t\t\t\tthis.image_svg = {};\n\t\t\t\t}\n\t\t\t\tthis.image_canvas.src = this.image_svg.src = this.imgsrc_dataurl;\n\t\t\t\tthis.image_canvas.height = this.image_svg.height = this.height;\n\t\t\t\tthis.image_canvas.width = this.image_svg.width = this.width;\n\n\t\t\t\tthis.cwidth = this.image_canvas.width / this.cols;\n\t\t\t\tthis.cheight = this.image_canvas.height / this.rows;\n\t\t\t\tthis.loaded = true;\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------\n\t\t\t// imgTile.putImage: Draw one image from the tileset.\n\t\t\t//---------------------------------------------------------\n\t\t\tputImage: function(ctx, key, n, dx, dy, dw, dh) {\n\t\t\t\tvar img = ctx.use.canvas ? this.image_canvas : this.image_svg;\n\t\t\t\tvar sw = this.cwidth,\n\t\t\t\t\tsh = this.cheight;\n\t\t\t\tvar sx = sw * (n % this.cols),\n\t\t\t\t\tsy = sh * ((n / this.cols) | 0);\n\t\t\t\tif (dw === void 0) {\n\t\t\t\t\tdw = sw;\n\t\t\t\t\tdh = sh;\n\t\t\t\t}\n\n\t\t\t\tctx.vid = key;\n\t\t\t\tctx.drawImage(n !== null ? img : null, sx, sy, sw, sh, dx, dy, dw, dh);\n\t\t\t}\n\t\t}\n\t});\n})();\n","// MouseInput.js v3.5.2\n\n//---------------------------------------------------------------------------\n// ★MouseEventクラス マウス入力に関する情報の保持とイベント処理を扱う\n//---------------------------------------------------------------------------\n// パズル共通 マウス入力部\n// MouseEventクラスを定義\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\tMouseEvent: {\n\t\tinitialize: function() {\n\t\t\tthis.cursor = this.puzzle.cursor;\n\n\t\t\tthis.enableMouse = true; // マウス入力は有効か\n\n\t\t\tthis.mouseCell = null; // 入力されたセル等のID\n\t\t\tthis.firstCell = null; // mousedownされた時のセルのID(連黒分断禁用)\n\n\t\t\tthis.inputPoint = new this.klass.RawAddress(); // 入力イベントが発生したborder座標 ※端数あり\n\t\t\tthis.firstPoint = new this.klass.RawAddress(); // mousedownされた時のborder座標 ※端数あり\n\t\t\tthis.prevPos = new this.klass.Address(); // 前回のマウス入力イベントのborder座標\n\n\t\t\tthis.btn = \"\"; // 押されているボタン\n\t\t\tthis.inputData = null; // 入力中のデータ番号(実装依存)\n\t\t\tthis.firstState = null;\n\n\t\t\tthis.bordermode = false; // 境界線を入力中かどうか\n\n\t\t\tthis.mousestart = false; // mousedown/touchstartイベントかどうか\n\t\t\tthis.mousemove = false; // mousemove/touchmoveイベントかどうか\n\t\t\tthis.mouseend = false; // mouseup/touchendイベントかどうか\n\n\t\t\tthis.inputMode = \"auto\";\n\t\t\tthis.savedInputMode = { edit: \"auto\", play: \"auto\" };\n\n\t\t\tthis.mousereset();\n\t\t},\n\n\t\tRBShadeCell: false, // 連黒分断禁のパズル\n\n\t\tuse: false, // 黒マスの入力方法選択\n\t\tbgcolor: false, // 背景色の入力を可能にする\n\n\t\tinputMode: \"auto\", // 現在のinputMode\n\t\tsavedInputMode: {}, // モード変更時の保存値\n\t\tinputModes: { edit: [], play: [] }, // 現在のパズル種類にてauto以外で有効なinputModeの配列\n\n\t\tinversion: false, // マウスのボタンを左右反転する\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.mousereset() マウス入力に関する情報を初期化する\n\t\t// mv.modechange() モード変更時に設定を初期化する\n\t\t//---------------------------------------------------------------------------\n\t\tmousereset: function() {\n\t\t\tvar cell0 = this.mouseCell;\n\n\t\t\tthis.mouseCell = this.firstCell = this.board.emptycell; // 下の行へ続く\n\n\t\t\tthis.firstPoint.reset();\n\t\t\tthis.prevPos.reset();\n\n\t\t\tthis.btn = \"\";\n\t\t\tthis.inputData = null;\n\n\t\t\tthis.bordermode = false;\n\n\t\t\tthis.mousestart = false;\n\t\t\tthis.mousemove = false;\n\t\t\tthis.mouseend = false;\n\n\t\t\tif (this.puzzle.execConfig(\"dispmove\") && !!cell0 && !cell0.isnull) {\n\t\t\t\tcell0.draw();\n\t\t\t}\n\t\t},\n\t\tmodechange: function() {\n\t\t\tthis.mousereset();\n\t\t\tthis.inputMode = this.savedInputMode[\n\t\t\t\tthis.puzzle.editmode ? \"edit\" : \"play\"\n\t\t\t];\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.e_mousedown() Canvas上でマウスのボタンを押した際のイベント共通処理\n\t\t// mv.e_mouseup()   Canvas上でマウスのボタンを放した際のイベント共通処理\n\t\t// mv.e_mousemove() Canvas上でマウスを動かした際のイベント共通処理\n\t\t// mv.e_mousecancel() Canvas上でマウス操作がキャンセルされた場合のイベント共通処理\n\t\t//---------------------------------------------------------------------------\n\t\t//イベントハンドラから呼び出される\n\t\t// この3つのマウスイベントはCanvasから呼び出される(mvをbindしている)\n\t\te_mousedown: function(e) {\n\t\t\tif (!this.enableMouse) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tthis.setMouseButton(e); /* どのボタンが押されたか取得 (mousedown時のみ) */\n\t\t\tif (!this.btn) {\n\t\t\t\tthis.mousereset();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar addrtarget = this.getBoardAddress(e);\n\t\t\tthis.moveTo(addrtarget.bx, addrtarget.by);\n\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t},\n\t\te_mouseup: function(e) {\n\t\t\tif (!this.enableMouse || !this.btn) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tthis.inputEnd();\n\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t},\n\t\te_mousemove: function(e) {\n\t\t\tif (!this.enableMouse || !this.btn) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\te.touches !== void 0 ||\n\t\t\t\te.which === void 0 ||\n\t\t\t\te.which !== 0 ||\n\t\t\t\t(e.type.match(/pointermove/i) && e.buttons > 0)\n\t\t\t) {\n\t\t\t\tvar addrtarget = this.getBoardAddress(e);\n\t\t\t\tthis.lineTo(addrtarget.bx, addrtarget.by);\n\t\t\t} else {\n\t\t\t\tthis.mousereset();\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t},\n\t\te_mousecancel: function(e) {\n\t\t\tthis.mousereset();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.setMouseButton()  イベントが起こったボタンを設定する\n\t\t// mv.getBoardAddress() イベントが起こったcanvas内の座標を取得する\n\t\t//---------------------------------------------------------------------------\n\t\tsetMouseButton: function(e) {\n\t\t\tthis.btn = pzpr.util.getMouseButton(e);\n\n\t\t\t// SHIFTキー/Commandキーを押している時は左右ボタン反転\n\t\t\tvar kc = this.puzzle.key;\n\t\t\tkc.checkmodifiers(e);\n\t\t\tif (\n\t\t\t\t(kc.isSHIFT || kc.isMETA) !== this.inversion ||\n\t\t\t\tthis.inputMode === \"number-\"\n\t\t\t) {\n\t\t\t\tif (this.btn === \"left\") {\n\t\t\t\t\tthis.btn = \"right\";\n\t\t\t\t} else if (this.btn === \"right\") {\n\t\t\t\t\tthis.btn = \"left\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetBoardAddress: function(e) {\n\t\t\tvar puzzle = this.puzzle,\n\t\t\t\tpc = puzzle.painter;\n\t\t\tvar pix = { px: NaN, py: NaN };\n\t\t\tvar g = pc.context;\n\t\t\tif (!g) {\n\t\t\t\treturn pix;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!pzpr.env.API.touchevent ||\n\t\t\t\tpzpr.env.API.pointerevent ||\n\t\t\t\tpzpr.env.OS.iOS\n\t\t\t) {\n\t\t\t\tif (!isNaN(e.offsetX)) {\n\t\t\t\t\tpix = { px: e.offsetX, py: e.offsetY };\n\t\t\t\t} else {\n\t\t\t\t\tpix = { px: e.layerX, py: e.layerY };\n\t\t\t\t} // Firefox 39以前, iOSはこちら\n\t\t\t} else {\n\t\t\t\tvar pagePos = pzpr.util.getPagePos(e),\n\t\t\t\t\trect = pzpr.util.getRect(pc.context.child);\n\t\t\t\tpix = { px: pagePos.px - rect.left, py: pagePos.py - rect.top };\n\t\t\t}\n\t\t\treturn { bx: (pix.px - pc.x0) / pc.bw, by: (pix.py - pc.y0) / pc.bh };\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.moveTo()   Canvas上にマウスの位置を設定する\n\t\t// mv.lineTo()   Canvas上でマウスを動かす\n\t\t// mv.inputEnd() Canvas上のマウス入力処理を終了する\n\t\t// mv.inputPath() Canvas上でひとつながりになる線を入力する\n\t\t//---------------------------------------------------------------------------\n\t\tmoveTo: function(bx, by) {\n\t\t\tthis.inputPoint.init(bx, by);\n\t\t\tthis.mouseevent(0);\n\t\t},\n\t\tlineTo: function(bx, by) {\n\t\t\t/* 前回の位置からの差分を順番に入力していきます */\n\t\t\tvar dx = bx - this.inputPoint.bx,\n\t\t\t\tdy = by - this.inputPoint.by;\n\t\t\tvar distance =\n\t\t\t\t(((dx >= 0 ? dx : -dx) + (dy >= 0 ? dy : -dy)) * 2 + 0.9) |\n\t\t\t\t0; /* 0.5くらいずつ動かす */\n\t\t\tvar mx = dx / distance,\n\t\t\t\tmy = dy / distance;\n\t\t\tfor (var i = 0; i < distance - 1; i++) {\n\t\t\t\tthis.inputPoint.move(mx, my);\n\t\t\t\tthis.mouseevent(1);\n\t\t\t}\n\t\t\tthis.inputPoint.init(bx, by);\n\t\t\tthis.mouseevent(1);\n\t\t},\n\t\tinputEnd: function() {\n\t\t\tthis.mouseevent(2);\n\t\t\tthis.mousereset();\n\t\t},\n\t\tinputPath: function() {\n\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\tthis.mousereset();\n\t\t\tthis.btn = typeof args[0] === \"string\" ? args.shift() : \"left\";\n\t\t\tthis.moveTo(args[0], args[1]);\n\t\t\tfor (var i = 2; i < args.length - 1; i += 2) {\n\t\t\t\t/* 奇数個の最後の一つは切り捨て */\n\t\t\t\tthis.lineTo(args[i], args[i + 1]);\n\t\t\t}\n\t\t\tthis.inputEnd();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.mouseevent() マウスイベント処理\n\t\t//---------------------------------------------------------------------------\n\t\tmouseevent: function(step) {\n\t\t\tthis.cancelEvent = false;\n\t\t\tthis.mousestart = step === 0;\n\t\t\tthis.mousemove = step === 1;\n\t\t\tthis.mouseend = step === 2;\n\t\t\tvar puzzle = this.puzzle;\n\n\t\t\tpuzzle.emit(\"mouse\");\n\t\t\tif (!this.cancelEvent && (this.btn === \"left\" || this.btn === \"right\")) {\n\t\t\t\tif (this.mousestart) {\n\t\t\t\t\tpuzzle.opemgr.newOperation();\n\t\t\t\t\tpuzzle.errclear();\n\t\t\t\t\tpuzzle.opemgr.updateStarts();\n\t\t\t\t} else {\n\t\t\t\t\tpuzzle.opemgr.newChain();\n\t\t\t\t}\n\n\t\t\t\tthis.mouseinput();\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.mouseinput()       マウスイベント共通処理。\n\t\t// mv.mouseinput_number()数字入力処理\n\t\t// mv.mouseinput_clear() セル内容の消去処理\n\t\t// mv.mouseinput_auto()  マウスイベント処理。各パズルのファイルでオーバーライドされる。\n\t\t// mv.mouseinput_other() inputMode指定時のマウスイベント処理。各パズルのファイルでオーバーライドされる。\n\t\t//---------------------------------------------------------------------------\n\t\tmouseinput: function() {\n\t\t\tvar mode = this.inputMode;\n\t\t\tif (this.puzzle.key.isZ && this.inputMode.indexOf(/info\\-/) === -1) {\n\t\t\t\tif (this.inputModes.play.indexOf(\"info-line\") >= 0) {\n\t\t\t\t\tmode = \"info-line\";\n\t\t\t\t} else if (this.inputModes.play.indexOf(\"info-blk\") >= 0) {\n\t\t\t\t\tmode = \"info-blk\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch (mode) {\n\t\t\t\tcase \"auto\":\n\t\t\t\t\tthis.mouseinput_auto();\n\t\t\t\t\tbreak; /* 各パズルのルーチンへ */\n\t\t\t\tcase \"number\":\n\t\t\t\tcase \"number-\":\n\t\t\t\t\tthis.mouseinput_number();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"clear\":\n\t\t\t\t\tthis.mouseinput_clear();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"cell51\":\n\t\t\t\t\tthis.input51_fixed();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"circle-unshade\":\n\t\t\t\t\tthis.inputFixedNumber(1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"circle-shade\":\n\t\t\t\t\tthis.inputFixedNumber(2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"undef\":\n\t\t\t\t\tthis.inputFixedNumber(-2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"ice\":\n\t\t\t\t\tthis.inputIcebarn();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"numexist\":\n\t\t\t\t\tthis.inputFixedNumber(-2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"numblank\":\n\t\t\t\t\tthis.inputFixedNumber(-3);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"bgcolor\":\n\t\t\t\t\tthis.inputBGcolor(true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"subcircle\":\n\t\t\t\tcase \"bgcolor1\":\n\t\t\t\t\tthis.inputFixedQsub(1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"subcross\":\n\t\t\t\tcase \"bgcolor2\":\n\t\t\t\t\tthis.inputFixedQsub(2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"completion\":\n\t\t\t\t\tif (this.mousestart) {\n\t\t\t\t\t\tthis.inputqcmp();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"objblank\":\n\t\t\t\t\tthis.inputDot();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"direc\":\n\t\t\t\t\tthis.inputdirec();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"arrow\":\n\t\t\t\t\tthis.inputarrow_cell();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"crossdot\":\n\t\t\t\t\tif (this.mousestart) {\n\t\t\t\t\t\tthis.inputcrossMark();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"border\":\n\t\t\t\t\tthis.inputborder();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"subline\":\n\t\t\t\t\tthis.inputQsubLine();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"shade\":\n\t\t\t\tcase \"unshade\":\n\t\t\t\t\tthis.inputShade();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"line\":\n\t\t\t\t\tthis.inputLine();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"peke\":\n\t\t\t\t\tthis.inputpeke();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"bar\":\n\t\t\t\t\tthis.inputTateyoko();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"info-line\":\n\t\t\t\t\tif (this.mousestart) {\n\t\t\t\t\t\tthis.dispInfoLine();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"info-blk\":\n\t\t\t\t\tif (this.mousestart) {\n\t\t\t\t\t\tthis.dispInfoBlk();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.mouseinput_other();\n\t\t\t\t\tbreak; /* 各パズルのルーチンへ */\n\t\t\t}\n\t\t},\n\t\tmouseinput_number: function() {\n\t\t\tif (this.mousestart) {\n\t\t\t\tthis.inputqnum();\n\t\t\t}\n\t\t},\n\t\tmouseinput_clear: function() {\n\t\t\tthis.inputclean_cell();\n\t\t},\n\t\t//オーバーライド用\n\t\tmouseinput_auto: function() {},\n\t\tmouseinput_other: function() {},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.notInputted()   盤面への入力が行われたかどうか判定する\n\t\t//---------------------------------------------------------------------------\n\t\tnotInputted: function() {\n\t\t\treturn !this.puzzle.opemgr.changeflag;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.setInputMode()     入力されるinputModeを固定する (falsyな値でresetする)\n\t\t// mv.getInputModeList() 有効なinputModeを配列にして返す (通常はauto)\n\t\t//---------------------------------------------------------------------------\n\t\tsetInputMode: function(mode) {\n\t\t\tmode = mode || \"auto\";\n\t\t\tif (\n\t\t\t\tthis.getInputModeList().indexOf(mode === \"number-\" ? \"number\" : mode) >=\n\t\t\t\t0\n\t\t\t) {\n\t\t\t\tthis.inputMode = mode;\n\t\t\t\tthis.savedInputMode[this.puzzle.editmode ? \"edit\" : \"play\"] = mode;\n\t\t\t} else {\n\t\t\t\tthrow \"Invalid input mode :\" + mode;\n\t\t\t}\n\t\t},\n\t\tgetInputModeList: function(type) {\n\t\t\tif (this.puzzle.instancetype === \"viewer\") {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\ttype = !!type ? type : this.puzzle.editmode ? \"edit\" : \"play\";\n\t\t\tvar list = [\"auto\"];\n\t\t\tlist = list.concat(this.inputModes[type]);\n\t\t\tif (list.indexOf(\"number\") >= 0) {\n\t\t\t\tlist.splice(list.indexOf(\"number\") + 1, 0, \"number-\");\n\t\t\t}\n\t\t\treturn list;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.setInversion()     マウスの左右反転設定を行う\n\t\t//---------------------------------------------------------------------------\n\t\tsetInversion: function(input) {\n\t\t\tthis.inversion = !!input;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.getcell()    入力された位置がどのセルに該当するかを返す\n\t\t// mv.getcell_excell()  入力された位置がどのセル/EXCELLに該当するかを返す\n\t\t// mv.getcross()   入力された位置がどの交差点に該当するかを返す\n\t\t// mv.getborder()  入力された位置がどの境界線・Lineに該当するかを返す(クリック用)\n\t\t// mv.getpos()    入力された位置が仮想セル上でどこの(X*2,Y*2)に該当するかを返す。\n\t\t//                外枠の左上が(0,0)で右下は(bd.cols*2,bd.rows*2)。rcは0～0.5のパラメータ。\n\t\t// mv.isBorderMode() 境界線入力モードかどうか判定する\n\t\t//---------------------------------------------------------------------------\n\t\tgetcell: function() {\n\t\t\treturn this.getpos(0).getc();\n\t\t},\n\t\tgetcell_excell: function() {\n\t\t\tvar pos = this.getpos(0),\n\t\t\t\texcell = pos.getex();\n\t\t\treturn !excell.isnull ? excell : pos.getc();\n\t\t},\n\t\tgetcross: function() {\n\t\t\treturn this.getpos(0.5).getx();\n\t\t},\n\n\t\tgetpos: function(spc) {\n\t\t\tvar addr = this.inputPoint,\n\t\t\t\tm1 = 2 * spc,\n\t\t\t\tm2 = 2 * (1 - spc),\n\t\t\t\tminaxis = Math.min(this.board.minbx, this.board.minby);\n\n\t\t\t// Add a constant to ensure all intermediate values aren't negative\n\t\t\tvar extra = 4 + (minaxis >= 0 ? 0 : -minaxis & ~1);\n\n\t\t\tvar bx = addr.bx + extra,\n\t\t\t\tby = addr.by + extra,\n\t\t\t\tdx = bx % 2,\n\t\t\t\tdy = by % 2;\n\t\t\tbx = (bx & ~1) + +(dx >= m1) + +(dx >= m2) - extra;\n\t\t\tby = (by & ~1) + +(dy >= m1) + +(dy >= m2) - extra;\n\t\t\treturn new this.klass.Address(bx, by);\n\t\t},\n\n\t\tgetborder: function(spc) {\n\t\t\tvar addr = this.inputPoint;\n\t\t\tvar bx = (addr.bx & ~1) + 1,\n\t\t\t\tby = (addr.by & ~1) + 1;\n\t\t\tvar dx = addr.bx + 1 - bx,\n\t\t\t\tdy = addr.by + 1 - by;\n\n\t\t\t// 真ん中のあたりはどこにも該当しないようにする\n\t\t\tvar bd = this.board;\n\t\t\tif (bd.linegraph.isLineCross) {\n\t\t\t\tif (!bd.borderAsLine) {\n\t\t\t\t\tvar m1 = 2 * spc,\n\t\t\t\t\t\tm2 = 2 * (1 - spc);\n\t\t\t\t\tif ((dx < m1 || m2 < dx) && (dy < m1 || m2 < dy)) {\n\t\t\t\t\t\treturn bd.emptyborder;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar m1 = 2 * (0.5 - spc),\n\t\t\t\t\t\tm2 = 2 * (0.5 + spc);\n\t\t\t\t\tif (m1 < dx && dx < m2 && m1 < dy && dy < m2) {\n\t\t\t\t\t\treturn bd.emptyborder;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dx < 2 - dy) {\n\t\t\t\t//左上\n\t\t\t\tif (dx > dy) {\n\t\t\t\t\treturn bd.getb(bx, by - 1);\n\t\t\t\t} //左上＆右上 -> 上\n\t\t\t\telse {\n\t\t\t\t\treturn bd.getb(bx - 1, by);\n\t\t\t\t} //左上＆左下 -> 左\n\t\t\t} else {\n\t\t\t\t//右下\n\t\t\t\tif (dx > dy) {\n\t\t\t\t\treturn bd.getb(bx + 1, by);\n\t\t\t\t} //右下＆右上 -> 右\n\t\t\t\telse {\n\t\t\t\t\treturn bd.getb(bx, by + 1);\n\t\t\t\t} //右下＆左下 -> 下\n\t\t\t}\n\t\t\t// unreachable\n\t\t},\n\n\t\tisBorderMode: function() {\n\t\t\tif (this.mousestart) {\n\t\t\t\tthis.bordermode = !this.getpos(0.25).oncell();\n\t\t\t}\n\t\t\treturn this.bordermode;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.setcursor() TargetCursorの場所を移動する\n\t\t// mv.setcursorsnum() TargetCursorの補助記号に対する場所を移動する\n\t\t//---------------------------------------------------------------------------\n\t\tsetcursor: function(pos) {\n\t\t\tvar pos0 = this.cursor.getaddr();\n\t\t\tthis.cursor.setaddr(pos);\n\t\t\tpos0.draw();\n\t\t\tpos.draw();\n\t\t},\n\t\tsetcursorsnum: function(pos) {\n\t\t\tvar pos0 = this.cursor.getaddr();\n\t\t\tthis.cursor.setaddr(pos);\n\t\t\tvar bx = this.inputPoint.bx,\n\t\t\t\tby = this.inputPoint.by;\n\t\t\tbx = (((bx + 12) % 2) * 1.5) | 0;\n\t\t\tby = (((by + 12) % 2) * 1.5) | 0;\n\t\t\tvar target;\n\t\t\tif (this.pid !== \"factors\") {\n\t\t\t\ttarget = [5, 0, 4, 0, 0, 0, 2, 0, 3][by * 3 + bx];\n\t\t\t} else {\n\t\t\t\ttarget = [0, 0, 4, 0, 0, 0, 2, 0, 3][by * 3 + bx];\n\t\t\t}\n\t\t\tif (this.cursor.targetdir !== target) {\n\t\t\t\tthis.cursor.targetdir = target;\n\t\t\t}\n\t\t\tpos0.draw();\n\t\t\tpos.draw();\n\t\t}\n\t}\n});\n","// KeyInput.js v3.4.1\n\n//---------------------------------------------------------------------------\n// ★KeyEventクラス キーボード入力に関する情報の保持とイベント処理を扱う\n//---------------------------------------------------------------------------\n// パズル共通 キーボード入力部\n// KeyEventクラスを定義\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\tKeyEvent: {\n\t\tinitialize: function() {\n\t\t\tthis.cursor = this.puzzle.cursor;\n\n\t\t\tthis.enableKey = true; // キー入力は有効か\n\n\t\t\tthis.keyreset();\n\t\t},\n\n\t\tenablemake: false,\n\t\tenableplay: false,\n\t\tkeyup_event: false /* keyupイベントでもパズル個別のキーイベント関数を呼び出す */,\n\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.keyreset()     キーボード入力に関する情報を初期化する\n\t\t// kc.isenablemode() 現在のモードでキー入力が有効か判定する\n\t\t//---------------------------------------------------------------------------\n\t\tkeyreset: function() {\n\t\t\tthis.isCTRL = false;\n\t\t\tthis.isMETA = false; // MacのCommandキーなど\n\t\t\tthis.isALT = false; // ALTはメニュー用なので基本的に使わない\n\t\t\tthis.isSHIFT = false;\n\t\t\tthis.isZ = false;\n\t\t\tthis.isX = false;\n\t\t\tthis.isY = false;\n\n\t\t\tthis.keydown = false;\n\t\t\tthis.keyup = false;\n\n\t\t\tthis.ca = \"\";\n\n\t\t\tthis.prev = null;\n\t\t},\n\t\tisenablemode: function() {\n\t\t\treturn (\n\t\t\t\t(this.puzzle.editmode && this.enablemake) ||\n\t\t\t\t(this.puzzle.playmode && this.enableplay)\n\t\t\t);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.e_keydown()  キーを押した際のイベント共通処理\n\t\t// kc.e_keyup()    キーを離した際のイベント共通処理\n\t\t//---------------------------------------------------------------------------\n\t\t// この3つのキーイベントはwindowから呼び出される(kcをbindしている)\n\t\te_keydown: function(e) {\n\t\t\tvar c = this.getchar(e);\n\t\t\tif (!this.enableKey) {\n\t\t\t\tif (c === \"BS\" || c === \" \") {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.checkbutton(c, 0);\n\t\t\tif (c) {\n\t\t\t\tthis.keyevent(c, 0);\n\t\t\t}\n\n\t\t\tif (e.target === this.puzzle.canvas || this.cancelDefault) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t},\n\t\te_keyup: function(e) {\n\t\t\tvar c = this.getchar(e);\n\t\t\tif (!this.enableKey) {\n\t\t\t\tif (c === \"BS\" || c === \" \") {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.checkbutton(c, 1);\n\t\t\tif (c) {\n\t\t\t\tthis.keyevent(c, 1);\n\t\t\t}\n\n\t\t\tif (e.target === this.puzzle.canvas || this.cancelDefault) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.checkmodifiers()  Shift, Ctrl, Alt, Metaキーをチェックする\n\t\t// kc.checkbutton()     Z, X, Yキーの押下状況をチェックする\n\t\t//---------------------------------------------------------------------------\n\t\tcheckmodifiers: function(e) {\n\t\t\tthis.isSHIFT = e.shiftKey;\n\t\t\tthis.isCTRL = e.ctrlKey;\n\t\t\tthis.isMETA = e.metaKey;\n\t\t\tthis.isALT = e.altKey;\n\t\t},\n\t\tcheckbutton: function(charall, step) {\n\t\t\tvar c = charall.split(/\\+/).pop();\n\t\t\tif (c === \"z\") {\n\t\t\t\tthis.isZ = step === 0;\n\t\t\t}\n\t\t\tif (c === \"x\") {\n\t\t\t\tthis.isX = step === 0;\n\t\t\t}\n\t\t\tif (c === \"y\") {\n\t\t\t\tthis.isY = step === 0;\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.getchar()  入力されたキーを表す文字列を返す\n\t\t//---------------------------------------------------------------------------\n\t\t// 48～57は0～9キー、65～90はa～z、96～105はテンキー、112～123はF1～F12キー\n\t\tgetchar: function(e) {\n\t\t\tthis.checkmodifiers(e);\n\n\t\t\tvar key = \"\",\n\t\t\t\tkeycode = !!e.keyCode ? e.keyCode : e.charCode;\n\n\t\t\tif (keycode === 38) {\n\t\t\t\tkey = \"up\";\n\t\t\t} else if (keycode === 40) {\n\t\t\t\tkey = \"down\";\n\t\t\t} else if (keycode === 37) {\n\t\t\t\tkey = \"left\";\n\t\t\t} else if (keycode === 39) {\n\t\t\t\tkey = \"right\";\n\t\t\t} else if (48 <= keycode && keycode <= 57) {\n\t\t\t\tkey = (keycode - 48).toString(36);\n\t\t\t} else if (65 <= keycode && keycode <= 90) {\n\t\t\t\tkey = (keycode - 55).toString(36);\n\t\t\t} //アルファベット\n\t\t\telse if (96 <= keycode && keycode <= 105) {\n\t\t\t\tkey = (keycode - 96).toString(36);\n\t\t\t} //テンキー対応\n\t\t\telse if (112 <= keycode && keycode <= 123) {\n\t\t\t\tkey = \"F\" + (keycode - 111).toString(10);\n\t\t\t} /* 112～123はF1～F12キー */ else if (keycode === 32 || keycode === 46) {\n\t\t\t\tkey = \" \";\n\t\t\t} // 32はスペースキー 46はdelキー\n\t\t\telse if (keycode === 8) {\n\t\t\t\tkey = \"BS\";\n\t\t\t} else if (keycode === 109 || keycode === 189 || keycode === 173) {\n\t\t\t\tkey = \"-\";\n\t\t\t}\n\n\t\t\tvar keylist = !!key ? [key] : [];\n\t\t\tif (this.isMETA) {\n\t\t\t\tkeylist.unshift(\"meta\");\n\t\t\t}\n\t\t\tif (this.isALT) {\n\t\t\t\tkeylist.unshift(\"alt\");\n\t\t\t}\n\t\t\tif (this.isCTRL) {\n\t\t\t\tkeylist.unshift(\"ctrl\");\n\t\t\t}\n\t\t\tif (this.isSHIFT) {\n\t\t\t\tkeylist.unshift(\"shift\");\n\t\t\t}\n\t\t\tkey = keylist.join(\"+\");\n\n\t\t\tif (key === \"alt+h\") {\n\t\t\t\tkey = \"left\";\n\t\t\t} else if (key === \"alt+k\") {\n\t\t\t\tkey = \"up\";\n\t\t\t} else if (key === \"alt+j\") {\n\t\t\t\tkey = \"down\";\n\t\t\t} else if (key === \"alt+l\") {\n\t\t\t\tkey = \"right\";\n\t\t\t}\n\n\t\t\treturn key;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.inputKeys()   キーボードイベントを実行する\n\t\t//---------------------------------------------------------------------------\n\t\tinputKeys: function(array) {\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\t\tthis.keyevent(arguments[i], 0);\n\t\t\t\tthis.keyevent(arguments[i], 1);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.keyevent()  キーイベント処理\n\t\t//---------------------------------------------------------------------------\n\t\tkeyevent: function(c, step) {\n\t\t\tvar puzzle = this.puzzle;\n\t\t\tthis.cancelEvent = false;\n\t\t\tthis.cancelDefault = false;\n\t\t\tthis.keydown = step === 0;\n\t\t\tthis.keyup = step === 1;\n\n\t\t\t// always prevent backspace navigation, space scrolling\n\t\t\tif (c === \"BS\" || c === \" \") {\n\t\t\t\tthis.cancelDefault = true;\n\t\t\t}\n\n\t\t\tif (this.keydown) {\n\t\t\t\tpuzzle.opemgr.newOperation();\n\t\t\t} else {\n\t\t\t\tpuzzle.opemgr.newChain();\n\t\t\t}\n\n\t\t\tif (this.keydown && !this.isZ) {\n\t\t\t\tpuzzle.errclear();\n\t\t\t\tpuzzle.opemgr.updateStarts();\n\t\t\t}\n\n\t\t\tpuzzle.emit(\"key\", c);\n\t\t\tif (this.cancelEvent) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this.keyexec(c)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this.keyDispInfo(c)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this.isenablemode()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.keydown && this.moveTarget(c)) {\n\t\t\t\tthis.cancelDefault = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.keydown || (this.keyup && this.keyup_event)) {\n\t\t\t\tthis.keyinput(c);\n\t\t\t} /* 各パズルのルーチンへ */\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.keyexec() モードに共通で行う処理を実行します\n\t\t//---------------------------------------------------------------------------\n\t\tkeyexec: function(c) {\n\t\t\tvar puzzle = this.puzzle;\n\t\t\tif (this.keydown && c === \"alt+c\" && !puzzle.playeronly) {\n\t\t\t\tpuzzle.setMode(\n\t\t\t\t\tpuzzle.playmode ? puzzle.MODE_EDITOR : puzzle.MODE_PLAYER\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.keyDispInfo() 一時的に情報を表示する処理を追加します\n\t\t//---------------------------------------------------------------------------\n\t\tkeyDispInfo: function(c) {\n\t\t\treturn true;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.keyinput() キーを押した/離した際の各パズルごとのイベント処理。\n\t\t//               各パズルのファイルでオーバーライドされる。\n\t\t//---------------------------------------------------------------------------\n\t\t// オーバーライド用\n\t\tkeyinput: function(c) {\n\t\t\tthis.key_inputqnum(c); /* デフォルトはCell数字入力 */\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.moveTarget()  キーボードからの入力対象を矢印キーで動かす\n\t\t// kc.moveTCell()   Cellのキーボードからの入力対象を矢印キーで動かす\n\t\t// kc.moveTCross()  Crossのキーボードからの入力対象を矢印キーで動かす\n\t\t// kc.moveTBorder() Borderのキーボードからの入力対象を矢印キーで動かす\n\t\t// kc.moveTC()      上記3つの関数の共通処理\n\t\t//---------------------------------------------------------------------------\n\t\tmoveTarget: function(ca) {\n\t\t\treturn this.moveTCell(ca);\n\t\t},\n\t\tmoveTCell: function(ca) {\n\t\t\treturn this.moveTC(ca, 2);\n\t\t},\n\t\tmoveTCross: function(ca) {\n\t\t\treturn this.moveTC(ca, 2);\n\t\t},\n\t\tmoveTBorder: function(ca) {\n\t\t\treturn this.moveTC(ca, 1);\n\t\t},\n\t\tmoveTC: function(ca, mv) {\n\t\t\tvar cursor = this.cursor,\n\t\t\t\tpos0 = cursor.getaddr(),\n\t\t\t\tflag = true,\n\t\t\t\tdir = cursor.NDIR;\n\t\t\tswitch (ca) {\n\t\t\t\tcase \"up\":\n\t\t\t\t\tif (cursor.by - mv >= cursor.miny) {\n\t\t\t\t\t\tdir = cursor.UP;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"down\":\n\t\t\t\t\tif (cursor.by + mv <= cursor.maxy) {\n\t\t\t\t\t\tdir = cursor.DN;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"left\":\n\t\t\t\t\tif (cursor.bx - mv >= cursor.minx) {\n\t\t\t\t\t\tdir = cursor.LT;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tif (cursor.bx + mv <= cursor.maxx) {\n\t\t\t\t\t\tdir = cursor.RT;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tflag = false;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (flag) {\n\t\t\t\tcursor.movedir(dir, mv);\n\n\t\t\t\tpos0.draw();\n\t\t\t\tcursor.draw();\n\t\t\t}\n\t\t\treturn flag;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.moveExCell()  ExCellのキーボードからの入力対象を矢印キーで動かす\n\t\t//---------------------------------------------------------------------------\n\t\tmoveExCell: function(ca) {\n\t\t\tvar cursor = this.cursor,\n\t\t\t\taddr0 = cursor.getaddr(),\n\t\t\t\tflag = true,\n\t\t\t\tdir = addr0.NDIR;\n\t\t\tswitch (ca) {\n\t\t\t\tcase \"up\":\n\t\t\t\t\tif (\n\t\t\t\t\t\tcursor.by === cursor.maxy &&\n\t\t\t\t\t\tcursor.minx < cursor.bx &&\n\t\t\t\t\t\tcursor.bx < cursor.maxx\n\t\t\t\t\t) {\n\t\t\t\t\t\tcursor.by = cursor.miny;\n\t\t\t\t\t} else if (cursor.by > cursor.miny) {\n\t\t\t\t\t\tdir = addr0.UP;\n\t\t\t\t\t} else if (this.pid === \"easyasabc\" && cursor.by === -1) {\n\t\t\t\t\t\tdir = addr0.UP;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"down\":\n\t\t\t\t\tif (\n\t\t\t\t\t\tcursor.by === cursor.miny &&\n\t\t\t\t\t\tcursor.minx < cursor.bx &&\n\t\t\t\t\t\tcursor.bx < cursor.maxx\n\t\t\t\t\t) {\n\t\t\t\t\t\tcursor.by = cursor.maxy;\n\t\t\t\t\t} else if (cursor.by < cursor.maxy) {\n\t\t\t\t\t\tdir = addr0.DN;\n\t\t\t\t\t} else if (this.pid === \"easyasabc\" && cursor.by === -3) {\n\t\t\t\t\t\tdir = addr0.DN;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"left\":\n\t\t\t\t\tif (\n\t\t\t\t\t\tcursor.bx === cursor.maxx &&\n\t\t\t\t\t\tcursor.miny < cursor.by &&\n\t\t\t\t\t\tcursor.by < cursor.maxy\n\t\t\t\t\t) {\n\t\t\t\t\t\tcursor.bx = cursor.minx;\n\t\t\t\t\t} else if (cursor.bx > cursor.minx) {\n\t\t\t\t\t\tdir = addr0.LT;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tif (\n\t\t\t\t\t\tcursor.bx === cursor.minx &&\n\t\t\t\t\t\tcursor.miny < cursor.by &&\n\t\t\t\t\t\tcursor.by < cursor.maxy\n\t\t\t\t\t) {\n\t\t\t\t\t\tcursor.bx = cursor.maxx;\n\t\t\t\t\t} else if (cursor.bx < cursor.maxx) {\n\t\t\t\t\t\tdir = addr0.RT;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tflag = false;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (flag) {\n\t\t\t\tif (dir !== addr0.NDIR) {\n\t\t\t\t\tcursor.movedir(dir, 2);\n\t\t\t\t}\n\n\t\t\t\taddr0.draw();\n\t\t\t\tcursor.draw();\n\t\t\t}\n\t\t\treturn flag;\n\t\t}\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// ★TargetCursorクラス キー入力のターゲットを保持する\n\t//---------------------------------------------------------------------------\n\t\"TargetCursor:Address\": {\n\t\tinitialize: function() {\n\t\t\tthis.bx = 1;\n\t\t\tthis.by = 1;\n\t\t\tthis.mode51 = this.puzzle.klass.ExCell.prototype.ques === 51;\n\t\t\tthis.modesnum = this.puzzle.klass.Cell.prototype.enableSubNumberArray;\n\t\t\tthis.targetdirs = this.puzzle.klass.Cell.prototype.dirs51;\n\t\t\tif (this.mode51 && this.puzzle.editmode) {\n\t\t\t\tthis.targetdir = 4;\n\t\t\t} // right\n\t\t},\n\t\tinit: function(bx, by) {\n\t\t\tthis.bx = bx;\n\t\t\tthis.by = by;\n\t\t\tif (!this.mode51) {\n\t\t\t\tthis.targetdir = 0;\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\t// 有効な範囲(minx,miny)-(maxx,maxy)\n\t\tminx: null,\n\t\tminy: null,\n\t\tmaxx: null,\n\t\tmaxy: null,\n\n\t\tcrosstype: false,\n\n\t\t//---------------------------------------------------------------------------\n\t\t// tc.initCursor()           初期化時にカーソルの位置を設定する\n\t\t//---------------------------------------------------------------------------\n\t\tinitCursor: function() {\n\t\t\tif (this.crosstype) {\n\t\t\t\tthis.init(0, 0);\n\t\t\t} else {\n\t\t\t\tthis.init(1, 1);\n\t\t\t}\n\n\t\t\tthis.adjust_init();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// tc.setminmax()            初期化時・モード変更時にプロパティを設定する\n\t\t// tc.setminmax_customize()  初期化時・モード変更時のプロパティをパズルごとに調節する\n\t\t//---------------------------------------------------------------------------\n\t\tsetminmax: function() {\n\t\t\tvar bd = this.board,\n\t\t\t\tbm = !this.crosstype ? 1 : 0;\n\t\t\tthis.minx = bd.minbx + bm;\n\t\t\tthis.miny = bd.minby + bm;\n\t\t\tthis.maxx = bd.maxbx - bm;\n\t\t\tthis.maxy = bd.maxby - bm;\n\n\t\t\tthis.setminmax_customize();\n\n\t\t\tthis.adjust_init();\n\t\t},\n\t\tsetminmax_customize: function() {},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// tc.adjust_init()       初期化時にカーソルの位置がおかしい場合に調整する\n\t\t// tc.adjust_modechange() モード変更時にカーソルの位置を調節する\n\t\t// tc.adjust_cell_to_excell() モード変更時にカーソルの位置をCellからExCellへ移動する\n\t\t//---------------------------------------------------------------------------\n\t\tadjust_init: function() {\n\t\t\tif (this.bx < this.minx) {\n\t\t\t\tthis.bx = this.minx;\n\t\t\t}\n\t\t\tif (this.by < this.miny) {\n\t\t\t\tthis.by = this.miny;\n\t\t\t}\n\t\t\tif (this.bx > this.maxx) {\n\t\t\t\tthis.bx = this.maxx;\n\t\t\t}\n\t\t\tif (this.by > this.maxy) {\n\t\t\t\tthis.by = this.maxy;\n\t\t\t}\n\t\t},\n\t\tadjust_modechange: function() {\n\t\t\tif (this.setminmax_customize !== this.common.setminmax_customize) {\n\t\t\t\tthis.setminmax();\n\t\t\t} // editmode, playmodeでminmaxが異なるパズル\n\t\t\tif (this.mode51 && this.puzzle.editmode) {\n\t\t\t\tthis.targetdir = 4;\n\t\t\t} // right\n\t\t\telse if (this.modesnum && this.puzzle.playmode) {\n\t\t\t\tthis.targetdir = 0;\n\t\t\t}\n\t\t},\n\t\tadjust_cell_to_excell: function() {\n\t\t\tvar bd = this.board;\n\t\t\tvar shortest = Math.min(\n\t\t\t\tthis.bx,\n\t\t\t\tbd.cols * 2 - this.bx,\n\t\t\t\tthis.by,\n\t\t\t\tbd.rows * 2 - this.by\n\t\t\t);\n\t\t\tif (shortest <= 0) {\n\t\t\t\treturn;\n\t\t\t} else if (this.by === shortest) {\n\t\t\t\tthis.by = this.miny;\n\t\t\t} else if (bd.rows * 2 - this.by === shortest) {\n\t\t\t\tthis.by = this.maxy;\n\t\t\t} else if (this.bx === shortest) {\n\t\t\t\tthis.bx = this.minx;\n\t\t\t} else if (bd.cols * 2 - this.bx === shortest) {\n\t\t\t\tthis.bx = this.maxx;\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// tc.checksnum()  ターゲットの位置かどうか判定する (Cellのみ)\n\t\t//---------------------------------------------------------------------------\n\t\tchecksnum: function(pos) {\n\t\t\tvar bx = ((((pos.bx + 12) / 2) | 0) - 6) * 2 + 1;\n\t\t\tvar by = ((((pos.by + 12) / 2) | 0) - 6) * 2 + 1;\n\t\t\tvar result = this.bx === bx && this.by === by;\n\t\t\tif (result && this.modesnum && this.puzzle.playmode) {\n\t\t\t\tvar tmpx = (((pos.bx + 12) % 2) * 1.5) | 0;\n\t\t\t\tvar tmpy = (((pos.by + 12) % 2) * 1.5) | 0;\n\t\t\t\tif (this.pid !== \"factors\") {\n\t\t\t\t\tresult =\n\t\t\t\t\t\t[5, 0, 4, 0, 0, 0, 2, 0, 3][tmpy * 3 + tmpx] === this.targetdir;\n\t\t\t\t} else {\n\t\t\t\t\tresult =\n\t\t\t\t\t\t[0, 0, 4, 0, 0, 0, 2, 0, 3][tmpy * 3 + tmpx] === this.targetdir;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// tc.getaddr() ターゲットの位置を移動する\n\t\t//---------------------------------------------------------------------------\n\t\tmovedir: function(dir, mv) {\n\t\t\tthis.puzzle.klass.Address.prototype.movedir.call(this, dir, mv);\n\t\t\tif (this.modesnum && this.puzzle.playmode) {\n\t\t\t\tthis.targetdir = 0;\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// tc.getaddr() ターゲットの位置をAddressクラスのオブジェクトで取得する\n\t\t// tc.setaddr() ターゲットの位置をAddressクラス等のオブジェクトで設定する\n\t\t//---------------------------------------------------------------------------\n\t\tsetaddr: function(pos) {\n\t\t\t/* Address, Cellなどのオブジェクトいずれを入力しても良い */\n\t\t\tif (\n\t\t\t\tpos.bx < this.minx ||\n\t\t\t\tthis.maxx < pos.bx ||\n\t\t\t\tpos.by < this.miny - (this.pid === \"easyasabc\" ? 2 : 0) ||\n\t\t\t\tthis.maxy < pos.by\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.set(pos);\n\t\t\tif (this.modesnum && this.puzzle.playmode) {\n\t\t\t\tthis.targetdir = 0;\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// tc.moveTo() ターゲットの位置を指定した(bx,by)に設定する\n\t\t//---------------------------------------------------------------------------\n\t\tmoveTo: function(bx, by) {\n\t\t\tthis.init(bx, by);\n\t\t\tif (this.modesnum && this.puzzle.playmode) {\n\t\t\t\tthis.targetdir = 0;\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// tc.chtarget()     SHIFTを押した時に[＼]の入力するところを選択する\n\t\t// tc.detectTarget() [＼]の右・下どちらに数字を入力するか判断する\n\t\t// tc.getNumOfTarget() Cell上でtargetとして取りうる数を返す\n\t\t//---------------------------------------------------------------------------\n\t\ttargetdir: 0,\n\t\tchtarget: function(mouse, dx, dy) {\n\t\t\tif (this.oncell() && this.modesnum && this.puzzle.playmode) {\n\t\t\t\tif (this.pid !== \"factors\") {\n\t\t\t\t\tthis.targetdir = [5, 1, 3, 0, 2, 4][this.targetdir];\n\t\t\t\t} else {\n\t\t\t\t\tthis.targetdir = [4, 1, 3, 0, 2, 0][this.targetdir];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.targetdirs === 4) {\n\t\t\t\t\tif (mouse) {\n\t\t\t\t\t\tvar ur = dx - dy > 0,\n\t\t\t\t\t\t\tul = dx + dy < 0;\n\t\t\t\t\t\tif (ur) {\n\t\t\t\t\t\t\tif (ul) {\n\t\t\t\t\t\t\t\tthis.targetdir = 1;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.targetdir = 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (ul) {\n\t\t\t\t\t\t\t\tthis.targetdir = 3;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.targetdir = 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.targetdir = [4, 0, 3, 1, 2, 0][this.targetdir];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (mouse) {\n\t\t\t\t\t\tthis.targetdir = dx - dy > 0 ? 4 : 2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.targetdir = this.targetdir === 2 ? 4 : 2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.draw();\n\t\t},\n\t\tdetectTarget: function(piece) {\n\t\t\tpiece = piece || this.getobj();\n\t\t\tvar bd = this.board,\n\t\t\t\tadc = piece.adjacent;\n\t\t\tif (piece.isnull) {\n\t\t\t\treturn 0;\n\t\t\t} else if (piece.group === \"cell\") {\n\t\t\t\tif (piece.ques !== 51 || piece.id === bd.cell.length - 1) {\n\t\t\t\t\treturn 0;\n\t\t\t\t} else if (this.targetdirs === 2) {\n\t\t\t\t\tvar invalidRight = adc.right.isnull || adc.right.ques === 51;\n\t\t\t\t\tvar invalidBottom = adc.bottom.isnull || adc.bottom.ques === 51;\n\t\t\t\t\tif (invalidRight && invalidBottom) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t} else if (invalidBottom) {\n\t\t\t\t\t\treturn piece.RT;\n\t\t\t\t\t} else if (invalidRight) {\n\t\t\t\t\t\treturn piece.DN;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (piece.group === \"excell\") {\n\t\t\t\tif (piece.id === bd.cols + bd.rows) {\n\t\t\t\t\treturn 0;\n\t\t\t\t} else if (\n\t\t\t\t\t(piece.by === -1 && adc.bottom.ques === 51) ||\n\t\t\t\t\t(piece.bx === -1 && adc.right.ques === 51)\n\t\t\t\t) {\n\t\t\t\t\treturn 0;\n\t\t\t\t} else if (piece.by === -1) {\n\t\t\t\t\treturn piece.DN;\n\t\t\t\t} else if (piece.bx === -1) {\n\t\t\t\t\treturn piece.RT;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn this.targetdir;\n\t\t},\n\t\tgetNumOfTarget: function(piece) {\n\t\t\tvar num = 1;\n\t\t\tif (piece.isnull) {\n\t\t\t\tnum = 0;\n\t\t\t} else if (piece.group === \"cell\") {\n\t\t\t\tif (this.modesnum && this.puzzle.playmode) {\n\t\t\t\t\tnum = 4 - (this.pid === \"factors\" ? 1 : 0);\n\t\t\t\t} else if (piece.ques === 51) {\n\t\t\t\t\tvar adc = piece.adjacent;\n\t\t\t\t\tnum =\n\t\t\t\t\t\t(!adc.right.isnull && adc.right.ques !== 51 ? 1 : 0) +\n\t\t\t\t\t\t(!adc.bottom.isnull && adc.bottom.ques !== 51 ? 1 : 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn num;\n\t\t},\n\n\t\tgetDot: function() {\n\t\t\treturn this.board.getDot(this.bx, this.by);\n\t\t}\n\t}\n});\n","// Encode.js v3.4.1\n\n//---------------------------------------------------------------------------\n// ★Encodeクラス URLのエンコード/デコードを扱う\n//---------------------------------------------------------------------------\n// URLエンコード/デコード\n// Encodeクラス\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\tEncode: {\n\t\tpflag: \"\",\n\t\toutpflag: \"\",\n\t\toutvariant: null,\n\t\toutcols: null,\n\t\toutrows: null,\n\t\toutbstr: \"\",\n\t\tfio: null,\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.checkpflag()   pflagに指定した文字列が含まれているか調べる\n\t\t//---------------------------------------------------------------------------\n\t\t// ぱずぷれApplet->v3でURLの仕様が変わったパズル:\n\t\t//     creek, gokigen, lits (Applet+c===v3, Applet===v3+d)\n\t\t// 何回かURL形式を変更したパズル:\n\t\t//     icebarn (v3, Applet+c, Applet), slalom (v3+p, v3+d, v3/Applet)\n\t\t// v3になって以降pidを分離したパズルのうち元パズルのURL形式を変更して短くしたパズル:\n\t\t//     bonsan, kramma (cを付加)\n\t\t// URL形式は同じで表示形式の情報をもたせているパズル:\n\t\t//     bosanowa, pipelink, yajilin\n\t\tcheckpflag: function(ca) {\n\t\t\treturn this.pflag.indexOf(ca) >= 0;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decodeURL()   parseURL()を行い、各種各パズルのdecode関数を呼び出す\n\t\t// enc.encodeURL()   各種各パズルのencode関数を呼び出し、URLを出力する\n\t\t//\n\t\t// enc.decodePzpr()  各パズルのURL入力用(オーバーライド用)\n\t\t// enc.encodePzpr()  各パズルのURL出力用(オーバーライド用)\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeURL: function(url) {\n\t\t\tvar pzl = pzpr.parser.parseURL(url),\n\t\t\t\tpuzzle = this.puzzle,\n\t\t\t\tbd = puzzle.board;\n\n\t\t\tif (pzl.type === pzl.URL_PZPRFILE) {\n\t\t\t\tnew puzzle.klass.FileIO().filedecode(pzl.body);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbd.initBoardSize(pzl.cols, pzl.rows);\n\t\t\tif (pzl.variant !== null) {\n\t\t\t\tpuzzle.setConfig(\"variant\", true);\n\t\t\t\tpuzzle.setConfig(\"variantid\", pzl.variant);\n\t\t\t}\n\n\t\t\tif (!!pzl.body) {\n\t\t\t\tthis.pflag = pzl.pflag;\n\t\t\t\tthis.outbstr = pzl.body;\n\t\t\t\tswitch (pzl.type) {\n\t\t\t\t\tcase pzl.URL_PZPRV3:\n\t\t\t\t\tcase pzl.URL_KANPENP:\n\t\t\t\t\t\tthis.decodePzpr(pzl.URL_PZPRV3);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase pzl.URL_PZPRAPP:\n\t\t\t\t\t\tthis.decodePzpr(pzl.URL_PZPRAPP);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase pzl.URL_KANPEN:\n\t\t\t\t\t\tthis.fio = new puzzle.klass.FileIO();\n\t\t\t\t\t\tthis.fio.dataarray = this.outbstr.replace(/_/g, \" \").split(\"/\");\n\t\t\t\t\t\tthis.decodeKanpen();\n\t\t\t\t\t\tthis.fio = null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase pzl.URL_HEYAAPP:\n\t\t\t\t\t\tthis.decodeHeyaApp();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbd.rebuildInfo();\n\t\t},\n\t\tencodeURL: function(type, mode) {\n\t\t\tvar puzzle = this.puzzle,\n\t\t\t\tpid = puzzle.pid,\n\t\t\t\tbd = puzzle.board;\n\t\t\tvar pzl = new pzpr.parser.URLData(\"\", mode);\n\n\t\t\ttype =\n\t\t\t\ttype || pzl.URL_PZPRV3; /* type===pzl.URL_AUTO(0)もまとめて変換する */\n\t\t\tif (type === pzl.URL_KANPEN && pid === \"lits\") {\n\t\t\t\ttype = pzl.URL_KANPENP;\n\t\t\t}\n\n\t\t\tthis.outpflag = null;\n\t\t\tvar variant = puzzle.getConfig(\"variant\");\n\t\t\tthis.outvariant = variant ? puzzle.getConfig(\"variantid\") : null;\n\t\t\tthis.outcols = bd.cols;\n\t\t\tthis.outrows = bd.rows;\n\t\t\tthis.outbstr = \"\";\n\n\t\t\tswitch (type) {\n\t\t\t\tcase pzl.URL_PZPRV3:\n\t\t\t\t\tthis.encodePzpr(pzl.URL_PZPRV3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase pzl.URL_PZPRFILE:\n\t\t\t\t\tvar lines = this.puzzle.getFileData(pzl.FILE_PZPRV3).split(\"\\n\");\n\t\t\t\t\tlines = lines.map(encodeURIComponent);\n\t\t\t\t\tthis.outbstr = lines.join(\"/\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase pzl.URL_PZPRAPP:\n\t\t\t\t\tthrow \"no implementation\";\n\n\t\t\t\tcase pzl.URL_KANPENP:\n\t\t\t\t\tif (!puzzle.info.exists.kanpen) {\n\t\t\t\t\t\tthrow \"no implementation\";\n\t\t\t\t\t}\n\t\t\t\t\tthis.encodePzpr(pzl.URL_PZPRAPP);\n\t\t\t\t\tthis.outpflag = this.outpflag || \"\";\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase pzl.URL_KANPEN:\n\t\t\t\t\tthis.fio = new puzzle.klass.FileIO();\n\t\t\t\t\tthis.encodeKanpen();\n\t\t\t\t\tthis.outbstr = this.fio.datastr\n\t\t\t\t\t\t.replace(/\\r?\\n/g, \"/\")\n\t\t\t\t\t\t.replace(/ /g, \"_\");\n\t\t\t\t\tthis.fio = null;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase pzl.URL_HEYAAPP:\n\t\t\t\t\tthis.encodeHeyaApp();\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow \"invalid URL Type\";\n\t\t\t}\n\n\t\t\tpzl.pid = pid;\n\t\t\tpzl.type = type;\n\t\t\tpzl.pflag = this.outpflag;\n\t\t\tpzl.variant = this.outvariant;\n\t\t\tpzl.cols = this.outcols;\n\t\t\tpzl.rows = this.outrows;\n\t\t\tpzl.body = this.outbstr;\n\n\t\t\treturn pzl.generate();\n\t\t},\n\n\t\t// オーバーライド用\n\t\tdecodePzpr: function(type) {\n\t\t\tthrow \"no implementation\";\n\t\t},\n\t\tencodePzpr: function(type) {\n\t\t\tthrow \"no implementation\";\n\t\t},\n\t\tdecodeKanpen: function() {\n\t\t\tthrow \"no implementation\";\n\t\t},\n\t\tencodeKanpen: function() {\n\t\t\tthrow \"no implementation\";\n\t\t},\n\t\tdecodeHeyaApp: function() {\n\t\t\tthrow \"no implementation\";\n\t\t},\n\t\tencodeHeyaApp: function() {\n\t\t\tthrow \"no implementation\";\n\t\t}\n\t}\n});\n","// FileData.js\n\n(function() {\n\tfunction throwNoImplementation() {\n\t\tthrow \"no implementation\";\n\t}\n\n\t//---------------------------------------------------------------------------\n\t// ★FileIOクラス ファイルのデータ形式エンコード/デコードを扱う\n\t//---------------------------------------------------------------------------\n\tpzpr.classmgr.makeCommon({\n\t\t//---------------------------------------------------------\n\t\tFileIO: {\n\t\t\tfilever: 0,\n\t\t\tlineseek: 0,\n\t\t\tdataarray: null,\n\t\t\txmldoc: null,\n\t\t\tdatastr: \"\",\n\t\t\tcurrentType: 0,\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// fio.filedecode()  ファイルデータ(文字列)からのデコード実行関数\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tfiledecode: function(datastr) {\n\t\t\t\tvar puzzle = this.puzzle,\n\t\t\t\t\tbd = puzzle.board,\n\t\t\t\t\tpzl = pzpr.parser.parseFile(datastr, puzzle.pid);\n\t\t\t\tvar filetype = (this.currentType = pzl.type);\n\n\t\t\t\tbd.initBoardSize(pzl.cols, pzl.rows);\n\n\t\t\t\tthis.filever = pzl.filever;\n\t\t\t\tif (filetype !== pzl.FILE_PBOX_XML) {\n\t\t\t\t\tthis.lineseek = 0;\n\t\t\t\t\tthis.dataarray = pzl.body.split(\"\\n\");\n\t\t\t\t} else {\n\t\t\t\t\tthis.xmldoc = pzl.body;\n\t\t\t\t}\n\n\t\t\t\t// メイン処理\n\t\t\t\tswitch (filetype) {\n\t\t\t\t\tcase pzl.FILE_PZPR:\n\t\t\t\t\t\tthis.decodeData();\n\t\t\t\t\t\tif ((this.readLine() || \"\").match(/TrialData/)) {\n\t\t\t\t\t\t\tthis.lineseek--;\n\t\t\t\t\t\t\tthis.decodeTrial();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase pzl.FILE_PBOX:\n\t\t\t\t\t\tthis.kanpenOpen();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase pzl.FILE_PBOX_XML:\n\t\t\t\t\t\tthis.kanpenOpenXML();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tpuzzle.metadata.update(pzl.metadata);\n\t\t\t\tif (pzl.history && filetype === pzl.FILE_PZPR) {\n\t\t\t\t\tpuzzle.opemgr.decodeHistory(pzl.history);\n\t\t\t\t}\n\n\t\t\t\tbd.rebuildInfo();\n\n\t\t\t\tthis.dataarray = null;\n\t\t\t},\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// fio.fileencode() ファイルデータ(文字列)へのエンコード実行関数\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tfileencode: function(filetype, option) {\n\t\t\t\tvar puzzle = this.puzzle,\n\t\t\t\t\tbd = puzzle.board;\n\t\t\t\tvar pzl = new pzpr.parser.FileData(\"\", puzzle.pid);\n\n\t\t\t\tthis.currentType = filetype =\n\t\t\t\t\tfiletype ||\n\t\t\t\t\tpzl.FILE_PZPR; /* type===pzl.FILE_AUTO(0)もまとめて変換する */\n\t\t\t\toption = option || {};\n\n\t\t\t\tthis.filever = 0;\n\t\t\t\tthis.datastr = \"\";\n\t\t\t\tif (filetype === pzl.FILE_PBOX_XML) {\n\t\t\t\t\tthis.xmldoc = new DOMParser().parseFromString(\n\t\t\t\t\t\t'<?xml version=\"1.0\" encoding=\"utf-8\" ?><puzzle />',\n\t\t\t\t\t\t\"text/xml\"\n\t\t\t\t\t);\n\t\t\t\t\tvar puzzlenode = this.xmldoc.querySelector(\"puzzle\");\n\t\t\t\t\tpuzzlenode.appendChild(this.createXMLNode(\"board\"));\n\t\t\t\t\tpuzzlenode.appendChild(this.createXMLNode(\"answer\"));\n\t\t\t\t}\n\n\t\t\t\t// メイン処理\n\t\t\t\tswitch (filetype) {\n\t\t\t\t\tcase pzl.FILE_PZPR:\n\t\t\t\t\t\tthis.encodeData();\n\t\t\t\t\t\tif (!option.history && option.trial && bd.trialstage > 0) {\n\t\t\t\t\t\t\tthis.encodeTrial();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase pzl.FILE_PBOX:\n\t\t\t\t\t\tthis.kanpenSave();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase pzl.FILE_PBOX_XML:\n\t\t\t\t\t\tthis.kanpenSaveXML();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow \"invalid filetype\";\n\t\t\t\t}\n\n\t\t\t\tpzl.type = filetype;\n\t\t\t\tpzl.filever = this.filever;\n\t\t\t\tpzl.cols = bd.cols;\n\t\t\t\tpzl.rows = bd.rows;\n\t\t\t\tif (filetype !== pzl.FILE_PBOX_XML) {\n\t\t\t\t\tpzl.body = this.datastr;\n\t\t\t\t} else {\n\t\t\t\t\tpzl.body = this.xmldoc;\n\t\t\t\t}\n\t\t\t\tpzl.metadata.update(puzzle.metadata);\n\t\t\t\tif (option.history && filetype === pzl.FILE_PZPR) {\n\t\t\t\t\tpzl.history = puzzle.opemgr.encodeHistory({ time: !!option.time });\n\t\t\t\t}\n\n\t\t\t\tthis.datastr = \"\";\n\n\t\t\t\treturn pzl.generate();\n\t\t\t},\n\n\t\t\t// オーバーライド用\n\t\t\tdecodeData: throwNoImplementation,\n\t\t\tencodeData: throwNoImplementation,\n\t\t\tkanpenOpen: throwNoImplementation,\n\t\t\tkanpenSave: throwNoImplementation,\n\t\t\tkanpenOpenXML: throwNoImplementation,\n\t\t\tkanpenSaveXML: throwNoImplementation,\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// fio.decodeTrial() 仮置きデータを復旧する\n\t\t\t// fio.encodeTrial() 仮置きデータを出力する\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tdecodeTrial: function() {\n\t\t\t\tvar opemgr = this.puzzle.opemgr;\n\t\t\t\tvar bd = this.board;\n\t\t\t\tvar len = this.readLine().match(/TrialData\\((\\d+)\\)/)[1] | 0;\n\t\t\t\tfor (var i = len - 1; i >= 0; i--) {\n\t\t\t\t\tvar opes = [];\n\t\t\t\t\tvar bd1 = bd.freezecopy();\n\t\t\t\t\tbd.allclear(false);\n\t\t\t\t\tthis.decodeData();\n\t\t\t\t\tbd.compareData(bd1, function(group, c, a) {\n\t\t\t\t\t\tvar obj = bd[group][c];\n\t\t\t\t\t\tvar old = obj[a];\n\t\t\t\t\t\tvar num = bd1[group][c][a];\n\t\t\t\t\t\topes.push(new this.puzzle.klass.ObjectOperation(obj, a, old, num));\n\t\t\t\t\t});\n\t\t\t\t\topemgr.history.unshift(opes);\n\t\t\t\t\topemgr.history.unshift([\n\t\t\t\t\t\tnew this.puzzle.klass.TrialEnterOperation(i, i + 1)\n\t\t\t\t\t]);\n\t\t\t\t\topemgr.trialpos.unshift(i * 2);\n\t\t\t\t\tthis.readLine(); // 次の\"TrialData\"文字列は読み捨て\n\t\t\t\t}\n\t\t\t\topemgr.position = opemgr.history.length;\n\t\t\t\topemgr.resumeTrial();\n\t\t\t},\n\t\t\tencodeTrial: function() {\n\t\t\t\tvar opemgr = this.puzzle.opemgr,\n\t\t\t\t\tpos = opemgr.position;\n\t\t\t\topemgr.disableRecord();\n\t\t\t\tfor (var stage = this.board.trialstage; stage > 0; stage--) {\n\t\t\t\t\tthis.writeLine(\"TrialData(\" + stage + \")\");\n\t\t\t\t\topemgr.resumeGoto(opemgr.trialpos[stage - 1]);\n\t\t\t\t\tthis.encodeData();\n\t\t\t\t}\n\t\t\t\topemgr.resumeGoto(pos);\n\t\t\t\topemgr.resumeTrial();\n\t\t\t\topemgr.enableRecord();\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// fio.readLine()    ファイルに書かれている1行の文字列を返す\n\t\t\t// fio.getItemList() ファイルに書かれている改行＋スペース区切りの\n\t\t\t//                   複数行の文字列を配列にして返す\n\t\t\t//---------------------------------------------------------------------------\n\t\t\treadLine: function() {\n\t\t\t\tthis.lineseek++;\n\t\t\t\treturn this.dataarray[this.lineseek - 1];\n\t\t\t},\n\n\t\t\tgetItemList: function(rows) {\n\t\t\t\tvar item = [],\n\t\t\t\t\tline;\n\t\t\t\tfor (var i = 0; i < rows; i++) {\n\t\t\t\t\tif (!(line = this.readLine())) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar array1 = line.split(\" \");\n\t\t\t\t\tfor (var c = 0; c < array1.length; c++) {\n\t\t\t\t\t\tif (array1[c] !== \"\") {\n\t\t\t\t\t\t\titem.push(array1[c]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn item;\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// fio.writeLine()    ファイルに1行出力する\n\t\t\t//---------------------------------------------------------------------------\n\t\t\twriteLine: function(data) {\n\t\t\t\tif (typeof data === \"number\") {\n\t\t\t\t\tdata = \"\" + data;\n\t\t\t\t} else {\n\t\t\t\t\tdata = data || \"\";\n\t\t\t\t} // typeof data==='string'\n\t\t\t\tthis.datastr += data + \"\\n\";\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// fio.decodeObj()     配列で、個別文字列から個別セルなどの設定を行う\n\t\t\t// fio.decodeCell()    配列で、個別文字列から個別セルの設定を行う\n\t\t\t// fio.decodeCross()   配列で、個別文字列から個別Crossの設定を行う\n\t\t\t// fio.decodeBorder()  配列で、個別文字列から個別Borderの設定を行う\n\t\t\t// fio.decodeCellExCell()  配列で、個別文字列から個別セル/ExCellの設定を行う\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tdecodeObj: function(func, group, startbx, startby, endbx, endby) {\n\t\t\t\tvar bx = startbx,\n\t\t\t\t\tby = startby,\n\t\t\t\t\tstep = 2;\n\t\t\t\tvar item = this.getItemList((endby - startby) / step + 1);\n\t\t\t\tfor (var i = 0; i < item.length; i++) {\n\t\t\t\t\tfunc.call(this, this.board.getObjectPos(group, bx, by), item[i]);\n\n\t\t\t\t\tbx += step;\n\t\t\t\t\tif (bx > endbx) {\n\t\t\t\t\t\tbx = startbx;\n\t\t\t\t\t\tby += step;\n\t\t\t\t\t}\n\t\t\t\t\tif (by > endby) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdecodeCell: function(func) {\n\t\t\t\tthis.decodeObj(\n\t\t\t\t\tfunc,\n\t\t\t\t\t\"cell\",\n\t\t\t\t\t1,\n\t\t\t\t\t1,\n\t\t\t\t\t2 * this.board.cols - 1,\n\t\t\t\t\t2 * this.board.rows - 1\n\t\t\t\t);\n\t\t\t},\n\t\t\tdecodeCross: function(func) {\n\t\t\t\tthis.decodeObj(\n\t\t\t\t\tfunc,\n\t\t\t\t\t\"cross\",\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\t2 * this.board.cols,\n\t\t\t\t\t2 * this.board.rows\n\t\t\t\t);\n\t\t\t},\n\t\t\tdecodeBorder: function(func) {\n\t\t\t\tvar puzzle = this.puzzle,\n\t\t\t\t\tbd = puzzle.board;\n\t\t\t\tif (\n\t\t\t\t\tbd.hasborder === 1 ||\n\t\t\t\t\tpuzzle.pid === \"bosanowa\" ||\n\t\t\t\t\t(puzzle.pid === \"fourcells\" && this.filever === 0)\n\t\t\t\t) {\n\t\t\t\t\tthis.decodeObj(\n\t\t\t\t\t\tfunc,\n\t\t\t\t\t\t\"border\",\n\t\t\t\t\t\t2,\n\t\t\t\t\t\t1,\n\t\t\t\t\t\t2 * bd.cols - 2,\n\t\t\t\t\t\t2 * bd.rows - 1\n\t\t\t\t\t);\n\t\t\t\t\tthis.decodeObj(\n\t\t\t\t\t\tfunc,\n\t\t\t\t\t\t\"border\",\n\t\t\t\t\t\t1,\n\t\t\t\t\t\t2,\n\t\t\t\t\t\t2 * bd.cols - 1,\n\t\t\t\t\t\t2 * bd.rows - 2\n\t\t\t\t\t);\n\t\t\t\t} else if (bd.hasborder === 2) {\n\t\t\t\t\tif (this.currentType === pzpr.parser.FILE_PZPR) {\n\t\t\t\t\t\tthis.decodeObj(func, \"border\", 0, 1, 2 * bd.cols, 2 * bd.rows - 1);\n\t\t\t\t\t\tthis.decodeObj(func, \"border\", 1, 0, 2 * bd.cols - 1, 2 * bd.rows);\n\t\t\t\t\t}\n\t\t\t\t\t// pencilboxでは、outsideborderの時はぱずぷれとは順番が逆になってます\n\t\t\t\t\telse if (this.currentType === pzpr.parser.FILE_PBOX) {\n\t\t\t\t\t\tthis.decodeObj(func, \"border\", 1, 0, 2 * bd.cols - 1, 2 * bd.rows);\n\t\t\t\t\t\tthis.decodeObj(func, \"border\", 0, 1, 2 * bd.cols, 2 * bd.rows - 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdecodeCellExCell: function(func) {\n\t\t\t\tthis.decodeObj(\n\t\t\t\t\tfunc,\n\t\t\t\t\t\"obj\",\n\t\t\t\t\tthis.board.minbx + 1,\n\t\t\t\t\tthis.board.minby + 1,\n\t\t\t\t\tthis.board.maxbx - 1,\n\t\t\t\t\tthis.board.maxby - 1\n\t\t\t\t);\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// fio.encodeObj()     個別セルデータ等から個別文字列の設定を行う\n\t\t\t// fio.encodeCell()    個別セルデータから個別文字列の設定を行う\n\t\t\t// fio.encodeCross()   個別Crossデータから個別文字列の設定を行う\n\t\t\t// fio.encodeBorder()  個別Borderデータから個別文字列の設定を行う\n\t\t\t// fio.encodeCellExCell()  個別セル/ExCellデータから個別文字列の設定を行う\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tencodeObj: function(func, group, startbx, startby, endbx, endby) {\n\t\t\t\tvar step = 2;\n\t\t\t\tfor (var by = startby; by <= endby; by += step) {\n\t\t\t\t\tvar data = \"\";\n\t\t\t\t\tfor (var bx = startbx; bx <= endbx; bx += step) {\n\t\t\t\t\t\tdata += func.call(this, this.board.getObjectPos(group, bx, by));\n\t\t\t\t\t}\n\t\t\t\t\tthis.writeLine(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\tencodeCell: function(func) {\n\t\t\t\tthis.encodeObj(\n\t\t\t\t\tfunc,\n\t\t\t\t\t\"cell\",\n\t\t\t\t\t1,\n\t\t\t\t\t1,\n\t\t\t\t\t2 * this.board.cols - 1,\n\t\t\t\t\t2 * this.board.rows - 1\n\t\t\t\t);\n\t\t\t},\n\t\t\tencodeCross: function(func) {\n\t\t\t\tthis.encodeObj(\n\t\t\t\t\tfunc,\n\t\t\t\t\t\"cross\",\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\t2 * this.board.cols,\n\t\t\t\t\t2 * this.board.rows\n\t\t\t\t);\n\t\t\t},\n\t\t\tencodeBorder: function(func) {\n\t\t\t\tvar puzzle = this.puzzle,\n\t\t\t\t\tbd = puzzle.board;\n\t\t\t\tif (bd.hasborder === 1 || puzzle.pid === \"bosanowa\") {\n\t\t\t\t\tthis.encodeObj(\n\t\t\t\t\t\tfunc,\n\t\t\t\t\t\t\"border\",\n\t\t\t\t\t\t2,\n\t\t\t\t\t\t1,\n\t\t\t\t\t\t2 * bd.cols - 2,\n\t\t\t\t\t\t2 * bd.rows - 1\n\t\t\t\t\t);\n\t\t\t\t\tthis.encodeObj(\n\t\t\t\t\t\tfunc,\n\t\t\t\t\t\t\"border\",\n\t\t\t\t\t\t1,\n\t\t\t\t\t\t2,\n\t\t\t\t\t\t2 * bd.cols - 1,\n\t\t\t\t\t\t2 * bd.rows - 2\n\t\t\t\t\t);\n\t\t\t\t} else if (bd.hasborder === 2) {\n\t\t\t\t\tif (this.currentType === pzpr.parser.FILE_PZPR) {\n\t\t\t\t\t\tthis.encodeObj(func, \"border\", 0, 1, 2 * bd.cols, 2 * bd.rows - 1);\n\t\t\t\t\t\tthis.encodeObj(func, \"border\", 1, 0, 2 * bd.cols - 1, 2 * bd.rows);\n\t\t\t\t\t}\n\t\t\t\t\t// pencilboxでは、outsideborderの時はぱずぷれとは順番が逆になってます\n\t\t\t\t\telse if (this.currentType === pzpr.parser.FILE_PBOX) {\n\t\t\t\t\t\tthis.encodeObj(func, \"border\", 1, 0, 2 * bd.cols - 1, 2 * bd.rows);\n\t\t\t\t\t\tthis.encodeObj(func, \"border\", 0, 1, 2 * bd.cols, 2 * bd.rows - 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tencodeCellExCell: function(func) {\n\t\t\t\tthis.encodeObj(\n\t\t\t\t\tfunc,\n\t\t\t\t\t\"obj\",\n\t\t\t\t\tthis.board.minbx + 1,\n\t\t\t\t\tthis.board.minby + 1,\n\t\t\t\t\tthis.board.maxbx - 1,\n\t\t\t\t\tthis.board.maxby - 1\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tdecodeFlags: function() {\n\t\t\t\tvar flags = this.readLine().split(\",\");\n\t\t\t\tfor (var i = 0; i < flags.length; i++) {\n\t\t\t\t\tthis.puzzle.setConfig(flags[i], true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tencodeFlags: function(flagnames) {\n\t\t\t\tvar flags = [];\n\t\t\t\tfor (var i = 0; i < flagnames.length; i++) {\n\t\t\t\t\tif (this.puzzle.getConfig(flagnames[i])) {\n\t\t\t\t\t\tflags.push(flagnames[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.writeLine(flags.join(\",\"));\n\t\t\t},\n\n\t\t\t//---------------------------------------------------------------------------\n\t\t\t// fio.decodeCellXMLBoard()  配列で、個別文字列から個別セルの設定を行う (XML board用)\n\t\t\t// fio.decodeCellXMLBrow()   配列で、個別文字列から個別セルの設定を行う (XML board用)\n\t\t\t// fio.decodeCellXMLArow()   配列で、個別文字列から個別セルの設定を行う (XML answer用)\n\t\t\t// fio.encodeCellXMLBoard()  個別セルデータから個別文字列の設定を行う (XML board用)\n\t\t\t// fio.encodeCellXMLBrow()   個別セルデータから個別文字列の設定を行う (XML board用)\n\t\t\t// fio.encodeCellXMLArow()   個別セルデータから個別文字列の設定を行う (XML answer用)\n\t\t\t// fio.createXMLNode()  指定されたattributeを持つXMLのノードを作成する\n\t\t\t//---------------------------------------------------------------------------\n\t\t\tdecodeCellXMLBoard: function(func) {\n\t\t\t\tvar nodes = this.xmldoc.querySelectorAll(\"board number\");\n\t\t\t\tfor (var i = 0; i < nodes.length; i++) {\n\t\t\t\t\tvar node = nodes[i];\n\t\t\t\t\tvar cell = this.board.getc(\n\t\t\t\t\t\t+node.getAttribute(\"c\") * 2 - 1,\n\t\t\t\t\t\t+node.getAttribute(\"r\") * 2 - 1\n\t\t\t\t\t);\n\t\t\t\t\tif (!cell.isnull) {\n\t\t\t\t\t\tfunc(cell, +node.getAttribute(\"n\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tencodeCellXMLBoard: function(func) {\n\t\t\t\tvar boardnode = this.xmldoc.querySelector(\"board\");\n\t\t\t\tvar bd = this.board;\n\t\t\t\tfor (var i = 0; i < bd.cell.length; i++) {\n\t\t\t\t\tvar cell = bd.cell[i],\n\t\t\t\t\t\tval = func(cell);\n\t\t\t\t\tif (val !== null) {\n\t\t\t\t\t\tboardnode.appendChild(\n\t\t\t\t\t\t\tthis.createXMLNode(\"number\", {\n\t\t\t\t\t\t\t\tr: ((cell.by / 2) | 0) + 1,\n\t\t\t\t\t\t\t\tc: ((cell.bx / 2) | 0) + 1,\n\t\t\t\t\t\t\t\tn: val\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tPBOX_ADJUST: 0,\n\t\t\tdecodeCellXMLBrow: function(func) {\n\t\t\t\tthis.decodeCellXMLrow_com(func, \"board\", \"brow\");\n\t\t\t},\n\t\t\tencodeCellXMLBrow: function(func) {\n\t\t\t\tthis.encodeCellXMLrow_com(func, \"board\", \"brow\");\n\t\t\t},\n\t\t\tdecodeCellXMLArow: function(func) {\n\t\t\t\tthis.decodeCellXMLrow_com(func, \"answer\", \"arow\");\n\t\t\t},\n\t\t\tencodeCellXMLArow: function(func) {\n\t\t\t\tthis.encodeCellXMLrow_com(func, \"answer\", \"arow\");\n\t\t\t},\n\t\t\tdecodeCellXMLrow_com: function(func, parentnodename, targetnodename) {\n\t\t\t\tvar rownodes = this.xmldoc.querySelectorAll(\n\t\t\t\t\tparentnodename + \" \" + targetnodename\n\t\t\t\t);\n\t\t\t\tvar ADJ = this.PBOX_ADJUST;\n\t\t\t\tfor (var b = 0; b < rownodes.length; b++) {\n\t\t\t\t\tvar bx = 1 - ADJ,\n\t\t\t\t\t\tby = +rownodes[b].getAttribute(\"row\") * 2 - 1 - ADJ;\n\t\t\t\t\tvar nodes = rownodes[b].childNodes;\n\t\t\t\t\tfor (var i = 0; i < nodes.length; i++) {\n\t\t\t\t\t\tif (nodes[i].nodeType !== 1) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar name = nodes[i].nodeName,\n\t\t\t\t\t\t\tn = nodes[i].getAttribute(\"n\") || 1;\n\t\t\t\t\t\tif (name === \"z\") {\n\t\t\t\t\t\t\tname = \"n0\";\n\t\t\t\t\t\t} else if (name === \"n\") {\n\t\t\t\t\t\t\tname = \"n\" + +nodes[i].getAttribute(\"v\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (var j = 0; j < n; j++) {\n\t\t\t\t\t\t\tfunc(this.board.getobj(bx, by), name);\n\t\t\t\t\t\t\tbx += 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tencodeCellXMLrow_com: function(func, parentnodename, targetnodename) {\n\t\t\t\tvar boardnode = this.xmldoc.querySelector(parentnodename);\n\t\t\t\tvar ADJ = this.PBOX_ADJUST;\n\t\t\t\tvar bd = this.board;\n\t\t\t\tfor (var by = 1 - ADJ; by <= bd.maxby; by += 2) {\n\t\t\t\t\tvar rownode = this.createXMLNode(targetnodename, {\n\t\t\t\t\t\trow: (((by + ADJ) / 2) | 0) + 1\n\t\t\t\t\t});\n\t\t\t\t\tfor (var bx = 1 - ADJ; bx <= bd.maxbx; bx += 2) {\n\t\t\t\t\t\tvar piece = bd.getobj(bx, by),\n\t\t\t\t\t\t\tnodename = func(piece),\n\t\t\t\t\t\t\tnode;\n\t\t\t\t\t\tif (nodename.match(/n(\\d\\d+)/) || nodename.match(/n(\\-\\d+)/)) {\n\t\t\t\t\t\t\tnode = this.createXMLNode(\"n\", { v: RegExp.$1 });\n\t\t\t\t\t\t} else if (nodename === \"n0\") {\n\t\t\t\t\t\t\tnode = this.createXMLNode(\"z\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnode = this.createXMLNode(nodename);\n\t\t\t\t\t\t}\n\t\t\t\t\t\trownode.appendChild(node);\n\t\t\t\t\t}\n\t\t\t\t\tboardnode.appendChild(rownode);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcreateXMLNode: function(name, attrs) {\n\t\t\t\tvar node = this.xmldoc.createElement(name);\n\t\t\t\tif (!!attrs) {\n\t\t\t\t\tfor (var i in attrs) {\n\t\t\t\t\t\tnode.setAttribute(i, attrs[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t});\n})();\n","// Answer.js v3.4.1\n\n//---------------------------------------------------------------------------\n// ★AnsCheckクラス 答えチェック関連の関数を扱う\n//---------------------------------------------------------------------------\n\n// 回答チェッククラス\n// AnsCheckクラス\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\tAnsCheck: {\n\t\tinitialize: function() {\n\t\t\tthis.inCheck = false;\n\t\t\tthis.checkOnly = false;\n\n\t\t\tthis.makeCheckList();\n\t\t},\n\t\tfailcodemode: void 0,\n\t\tfailcode: void 0,\n\t\t_info: void 0,\n\t\tchecklist: [],\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.makeCheckList() 最初にchecklistの配列を生成する\n\t\t//---------------------------------------------------------------------------\n\t\tmakeCheckList: function() {\n\t\t\t/* 当該パズルで使用しないchecklistのアイテムをフィルタリング */\n\t\t\tvar checklist = this.checklist,\n\t\t\t\torder = [];\n\t\t\tfor (var i = 0; i < checklist.length; i++) {\n\t\t\t\tvar item = checklist[i],\n\t\t\t\t\tisexist = true,\n\t\t\t\t\tprio = 0;\n\t\t\t\tif (item.match(\"@\")) {\n\t\t\t\t\tisexist = pzpr.util.checkpid(\n\t\t\t\t\t\titem.substr(item.indexOf(\"@\") + 1),\n\t\t\t\t\t\tthis.puzzle.pid\n\t\t\t\t\t);\n\t\t\t\t\titem = item.substr(0, item.indexOf(\"@\"));\n\t\t\t\t}\n\t\t\t\tif (isexist) {\n\t\t\t\t\tprio = (item.match(/\\+/) || []).length;\n\t\t\t\t\titem = item.replace(/\\+/g, \"\");\n\t\t\t\t\torder.push([this[item], prio]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.checklist_normal = [];\n\t\t\tfor (var i = 0; i < order.length; i++) {\n\t\t\t\tthis.checklist_normal.push(order[i][0]);\n\t\t\t}\n\n\t\t\t/* autocheck用のエラーをソートする */\n\t\t\torder = order.sort(function(a, b) {\n\t\t\t\treturn b[1] - a[1];\n\t\t\t});\n\t\t\tthis.checklist_auto = [];\n\t\t\tfor (var i = 0; i < order.length; i++) {\n\t\t\t\tthis.checklist_auto.push(order[i][0]);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.check()     答えのチェックを行う\n\t\t// ans.checkAns()  答えのチェックを行い、エラーコードを返す(nullはNo Error)\n\t\t//---------------------------------------------------------------------------\n\t\tcheck: function(activemode) {\n\t\t\tvar puzzle = this.puzzle,\n\t\t\t\tbd = this.board;\n\t\t\tthis.inCheck = true;\n\n\t\t\tif (!!activemode) {\n\t\t\t\tthis.checkOnly = false;\n\t\t\t\tthis.checkAns(false);\n\t\t\t\tif (!this.failcode.complete) {\n\t\t\t\t\tbd.haserror = true;\n\t\t\t\t\tpuzzle.redraw(true); /* 描画キャッシュを破棄して描画し直す */\n\t\t\t\t}\n\t\t\t} else if (this.failcode === void 0 || this.failcodemode !== activemode) {\n\t\t\t\t/* activemodeでなく、前回の判定結果が残っていない場合はチェックします */\n\t\t\t\tbd.disableSetError();\n\t\t\t\tthis.checkOnly = true;\n\t\t\t\tthis.checkAns(activemode === false);\n\t\t\t\tthis.failcodemode = activemode;\n\t\t\t\tbd.enableSetError();\n\t\t\t}\n\t\t\t/* activemodeでなく、前回の判定結果が残っている場合はそれを返します */\n\n\t\t\tthis.inCheck = false;\n\t\t\treturn this.failcode;\n\t\t},\n\t\tcheckAns: function(break_if_error) {\n\t\t\tthis.failcode = new this.klass.CheckInfo();\n\t\t\tvar checkSingleError =\n\t\t\t\t!this.puzzle.getConfig(\"multierr\") || break_if_error;\n\t\t\tvar checklist =\n\t\t\t\tthis.checkOnly && checkSingleError\n\t\t\t\t\t? this.checklist_auto\n\t\t\t\t\t: this.checklist_normal;\n\t\t\tfor (var i = 0; i < checklist.length; i++) {\n\t\t\t\tchecklist[i].call(this);\n\t\t\t\tif (checkSingleError && this.failcode.length > 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!break_if_error) {\n\t\t\t\tthis.failcode.text = this.failcode.gettext();\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.resetCache() 前回のエラー情報等を破棄する\n\t\t//---------------------------------------------------------------------------\n\t\tresetCache: function() {\n\t\t\tthis.failcode = this.failcodemode = void 0;\n\t\t\tthis._info = {};\n\t\t}\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// ★CheckInfoクラス ans.checkで返すインスタンスのクラス\n\t//---------------------------------------------------------------------------\n\tCheckInfo: {\n\t\tinitialize: function(code) {\n\t\t\tthis.add(code);\n\t\t},\n\t\tcomplete: true,\n\t\tundecided: false,\n\t\ttext: \"\",\n\t\tlength: 0,\n\t\tlastcode: null,\n\n\t\tadd: function(code) {\n\t\t\tif (!code) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (code !== this.lastcode) {\n\t\t\t\tthis[this.length++] = this.lastcode = code;\n\t\t\t}\n\t\t\tthis.complete = false;\n\t\t},\n\t\tgettext: function(lang) {\n\t\t\tvar puzzle = this.puzzle,\n\t\t\t\ttextlist = puzzle.faillist,\n\t\t\t\ttexts = [];\n\t\t\tvar langcode = (lang || pzpr.lang) === \"ja\" ? 0 : 1;\n\t\t\tif (this.length === 0) {\n\t\t\t\treturn textlist.complete[langcode];\n\t\t\t}\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tvar textitem = textlist[this[i]] || textlist.invalid;\n\t\t\t\ttexts.push(textitem[langcode]);\n\t\t\t}\n\t\t\treturn texts.join(\"\\n\");\n\t\t},\n\t\tsetUndecided: function() {\n\t\t\tthis.undecided = true;\n\t\t}\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// ★FailCodeクラス 答えの文字列を扱う\n\t//---------------------------------------------------------------------------\n\t// FailCodeクラス\n\tFailCode: {\n\t\tcomplete: [\"正解です！\", \"Complete!\"],\n\t\tinvalid: [\"不明なエラーです\", \"Invalid Error\"]\n\t}\n});\n","// Operation.js v3.4.1\n\n// 入力情報管理クラス\n// Operationクラス\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------------------------\n\t// ★Operation(派生)クラス 単体の操作情報を保持する\n\t//---------------------------------------------------------------------------\n\tOperation: {\n\t\texternal: false,\n\n\t\tinitialize: function() {\n\t\t\tthis.manager = this.puzzle.opemgr;\n\n\t\t\tif (arguments.length > 0) {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\tthis.setData.apply(this, args);\n\t\t\t}\n\t\t},\n\n\t\treqReset: false,\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ope.setData()  オブジェクトのデータを設定する\n\t\t// ope.decode()   ファイル出力された履歴の入力用ルーチン\n\t\t// ope.toString() ファイル出力する履歴の出力用ルーチン\n\t\t// ope.toJSON()   ファイル保存時に使用するルーチン\n\t\t//---------------------------------------------------------------------------\n\t\tsetData: function(old, num) {\n\t\t\tthis.old = old;\n\t\t\tthis.num = num;\n\t\t},\n\t\tdecode: function(strs) {\n\t\t\treturn false;\n\t\t},\n\t\ttoString: function() {\n\t\t\treturn \"\";\n\t\t},\n\t\ttoJSON: function() {\n\t\t\treturn this.toString();\n\t\t},\n\t\tbroadcast: function() {},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ope.undo()  操作opeを一手前に戻す\n\t\t// ope.redo()  操作opeを一手進める\n\t\t// ope.exec()  操作opeを反映する\n\t\t//---------------------------------------------------------------------------\n\t\tundo: function() {\n\t\t\tthis.exec(this.old);\n\t\t},\n\t\tredo: function() {\n\t\t\tthis.exec(this.num);\n\t\t},\n\t\texec: function(num) {}\n\t},\n\n\t// ObjectOperationクラス\n\t\"ObjectOperation:Operation\": {\n\t\tgroup: \"\",\n\t\tproperty: \"\",\n\t\tpos: null,\n\n\t\t/* 変換テーブル */\n\t\tSTRGROUP: {\n\t\t\tC: \"cell\",\n\t\t\tX: \"cross\",\n\t\t\tB: \"border\",\n\t\t\tE: \"excell\"\n\t\t},\n\t\tSTRPROP: {\n\t\t\tU: \"ques\",\n\t\t\tN: \"qnum\",\n\t\t\tZ: \"qnum2\",\n\t\t\tC: \"qchar\",\n\t\t\tM: \"anum\",\n\t\t\tD: \"qdir\",\n\t\t\tA: \"qans\",\n\t\t\tS: \"qsub\",\n\t\t\tK: \"qcmp\",\n\t\t\tB: \"snum\",\n\t\t\tL: \"line\"\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ope.setData()  オブジェクトのデータを設定する\n\t\t// ope.decode()   ファイル出力された履歴の入力用ルーチン\n\t\t// ope.toString() ファイル出力する履歴の出力用ルーチン\n\t\t//---------------------------------------------------------------------------\n\t\tsetData: function(piece, property, old, num) {\n\t\t\tthis.group = piece.group;\n\t\t\tthis.property = property;\n\t\t\tthis.bx = piece.bx;\n\t\t\tthis.by = piece.by;\n\t\t\tthis.old = old;\n\t\t\tthis.num = num;\n\t\t\tif (property.length > 4 && property.substr(0, 4) === \"snum\") {\n\t\t\t\tthis.property = \"snum\";\n\t\t\t\tthis.pos = property.substr(4);\n\t\t\t}\n\t\t},\n\t\tdecode: function(strs) {\n\t\t\tthis.group = this.STRGROUP[strs[0].charAt(0)];\n\t\t\tthis.property = this.STRPROP[strs[0].charAt(1)];\n\t\t\tif (!this.group || !this.property) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.pos =\n\t\t\t\tstrs[0].substr(0, 2) === \"CB\" && strs[0].length > 2\n\t\t\t\t\t? +strs[0].charAt(2)\n\t\t\t\t\t: null;\n\t\t\tthis.bx = +strs[1];\n\t\t\tthis.by = +strs[2];\n\t\t\tthis.old = +strs[3];\n\t\t\tthis.num = +strs[4];\n\t\t\treturn true;\n\t\t},\n\t\ttoString: function() {\n\t\t\tvar prefix = \"\";\n\t\t\tfor (var i in this.STRGROUP) {\n\t\t\t\tif (this.group === this.STRGROUP[i]) {\n\t\t\t\t\tprefix += i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i in this.STRPROP) {\n\t\t\t\tif (this.property === this.STRPROP[i]) {\n\t\t\t\t\tprefix += i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (prefix === \"CB\" && this.pos !== null) {\n\t\t\t\tprefix += this.pos;\n\t\t\t}\n\t\t\treturn [prefix, this.bx, this.by, this.old, this.num].join(\",\");\n\t\t},\n\t\tbroadcast: function() {\n\t\t\tif (this.external) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.puzzle.emit(\"cellop\", this.toJSON());\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ope.isModify()  前の履歴をこのオブジェクトで更新するかどうか確認する\n\t\t//---------------------------------------------------------------------------\n\t\tisModify: function(lastope) {\n\t\t\t// 前回と同じ場所なら前回の更新のみ\n\t\t\tvar property = this.property;\n\t\t\tif (\n\t\t\t\tlastope.group === this.group &&\n\t\t\t\tlastope.property === this.property &&\n\t\t\t\tlastope.num === this.old &&\n\t\t\t\tlastope.bx === this.bx &&\n\t\t\t\tlastope.by === this.by &&\n\t\t\t\t(property === \"qnum\" ||\n\t\t\t\t\tproperty === \"qnum2\" ||\n\t\t\t\t\tproperty === \"qchar\" ||\n\t\t\t\t\tproperty === \"anum\" ||\n\t\t\t\t\t(property === \"snum\" && lastope.pos === this.pos))\n\t\t\t) {\n\t\t\t\tlastope.num = this.num;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\tisNoop: function() {\n\t\t\treturn this.num === this.old;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ope.exec()  操作opeを反映する。ope.undo(),ope.redo()から内部的に呼ばれる\n\t\t//---------------------------------------------------------------------------\n\t\tgetPiece: function() {\n\t\t\tvar bd = this.board;\n\t\t\treturn bd.getObjectPos(this.group, this.bx, this.by);\n\t\t},\n\t\texec: function(num) {\n\t\t\tvar piece = this.getPiece(),\n\t\t\t\tbd = this.board;\n\t\t\tif (this.group !== piece.group) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// force setting data, to bypass prehook checks\n\t\t\tif (this.pos === null) {\n\t\t\t\tpiece.setdata(this.property, num, true);\n\t\t\t} else {\n\t\t\t\tpiece.setdata2(this.property, this.pos, num, true);\n\t\t\t}\n\t\t\tpiece.draw();\n\n\t\t\tswitch (this.property) {\n\t\t\t\tcase \"qcmp\":\n\t\t\t\t\tbd.cell.each(function(cell) {\n\t\t\t\t\t\tif (piece === cell.base) {\n\t\t\t\t\t\t\tcell.draw();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.puzzle.checker.resetCache();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\n\t// BoardClearOperationクラス\n\t\"BoardClearOperation:Operation\": {\n\t\tprefix: \"AC\",\n\t\treqReset: true,\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ope.decode()   ファイル出力された履歴の入力用ルーチン\n\t\t// ope.toString() ファイル出力する履歴の出力用ルーチン\n\t\t//---------------------------------------------------------------------------\n\t\tdecode: function(strs) {\n\t\t\tif (strs[0] !== this.prefix) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\ttoString: function() {\n\t\t\treturn this.prefix;\n\t\t}\n\t},\n\n\t// BoardAdjustOperationクラス\n\t\"BoardAdjustOperation:Operation\": {\n\t\tprefix: \"AJ\",\n\t\treqReset: true,\n\t\t//---------------------------------------------------------------------------\n\t\t// ope.setData()  オブジェクトのデータを設定する\n\t\t// ope.decode()   ファイル出力された履歴の入力用ルーチン\n\t\t// ope.toString() ファイル出力する履歴の出力用ルーチン\n\t\t//---------------------------------------------------------------------------\n\t\tsetData: function(name) {\n\t\t\tthis.old = this.num = name;\n\t\t},\n\t\tdecode: function(strs) {\n\t\t\tif (strs[0] !== this.prefix) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.old = this.num = strs[1];\n\t\t\treturn true;\n\t\t},\n\t\ttoString: function() {\n\t\t\treturn [this.prefix, this.num].join(\",\");\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ope.undo()  操作opeを一手前に戻す\n\t\t// ope.redo()  操作opeを一手進める\n\t\t// ope.exec()  操作opeを反映する。ope.undo(),ope.redo()から内部的に呼ばれる\n\t\t//---------------------------------------------------------------------------\n\t\tundo: function() {\n\t\t\tvar key_undo = this.board.exec.boardtype[this.old][0];\n\t\t\tthis.exec(key_undo);\n\t\t},\n\t\tredo: function() {\n\t\t\tvar key_redo = this.board.exec.boardtype[this.num][1];\n\t\t\tthis.exec(key_redo);\n\t\t},\n\t\texec: function(num) {\n\t\t\tvar puzzle = this.puzzle,\n\t\t\t\tbd = puzzle.board,\n\t\t\t\td = { x1: 0, y1: 0, x2: 2 * bd.cols, y2: 2 * bd.rows };\n\t\t\tbd.exec.execadjust_main(num, d);\n\t\t\tpuzzle.redraw();\n\t\t}\n\t},\n\n\t// BoardFlipOperationクラス\n\t\"BoardFlipOperation:Operation\": {\n\t\tprefix: \"AT\",\n\t\treqReset: true,\n\t\tarea: {},\n\t\t//---------------------------------------------------------------------------\n\t\t// ope.setData()  オブジェクトのデータを設定する\n\t\t// ope.decode()   ファイル出力された履歴の入力用ルーチン\n\t\t// ope.toString() ファイル出力する履歴の出力用ルーチン\n\t\t//---------------------------------------------------------------------------\n\t\tsetData: function(d, name) {\n\t\t\tthis.area = d;\n\t\t\tthis.old = this.num = name;\n\t\t},\n\t\tdecode: function(strs) {\n\t\t\tif (strs[0] !== this.prefix) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.old = this.num = strs[1];\n\t\t\tthis.area.x1 = +strs[2];\n\t\t\tthis.area.y1 = +strs[3];\n\t\t\tthis.area.x2 = +strs[4];\n\t\t\tthis.area.y2 = +strs[5];\n\t\t\treturn true;\n\t\t},\n\t\ttoString: function() {\n\t\t\tvar d = this.area;\n\t\t\treturn [this.prefix, this.num, d.x1, d.y1, d.x2, d.y2].join(\",\");\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ope.undo()  操作opeを一手前に戻す\n\t\t// ope.redo()  操作opeを一手進める\n\t\t// ope.exec()  操作opeを反映する。ope.undo(),ope.redo()から内部的に呼ばれる\n\t\t//---------------------------------------------------------------------------\n\t\tundo: function() {\n\t\t\t// とりあえず盤面全部の対応だけ\n\t\t\tvar d0 = this.area,\n\t\t\t\td = { x1: d0.x1, y1: d0.y1, x2: d0.x2, y2: d0.y2 };\n\t\t\tvar key_undo = this.board.exec.boardtype[this.old][0];\n\t\t\tif (key_undo & this.board.exec.TURN) {\n\t\t\t\tvar tmp = d.x1;\n\t\t\t\td.x1 = d.y1;\n\t\t\t\td.y1 = tmp;\n\t\t\t\ttmp = d.x2;\n\t\t\t\td.x2 = d.y2;\n\t\t\t\td.y2 = tmp;\n\t\t\t}\n\t\t\tthis.exec(key_undo, d);\n\t\t},\n\t\tredo: function() {\n\t\t\t// とりあえず盤面全部の対応だけ\n\t\t\tvar d0 = this.area,\n\t\t\t\td = { x1: d0.x1, y1: d0.y1, x2: d0.x2, y2: d0.y2 };\n\t\t\tvar key_redo = this.board.exec.boardtype[this.num][1];\n\t\t\tthis.exec(key_redo, d);\n\t\t},\n\t\texec: function(num, d) {\n\t\t\tvar puzzle = this.puzzle;\n\t\t\tpuzzle.board.exec.execadjust_main(num, d);\n\t\t\tpuzzle.redraw();\n\t\t}\n\t},\n\n\t// TrialEnterOperationクラス\n\t\"TrialEnterOperation:Operation\": {\n\t\tsetData: function(old, num) {\n\t\t\tthis.old = old;\n\t\t\tthis.num = num;\n\t\t},\n\t\tundo: function() {\n\t\t\tthis.manager.position--;\n\t\t\tthis.manager.resumeTrial();\n\t\t\tthis.manager.position++;\n\n\t\t\tthis.manager.trialpos.pop();\n\t\t\tthis.manager.emitTrial(this.old);\n\t\t},\n\t\tredo: function() {\n\t\t\tthis.manager.trialpos.push(this.manager.position);\n\t\t\tthis.manager.emitTrial(this.num);\n\t\t},\n\n\t\tdecode: function(strs) {\n\t\t\tif (strs[0] !== \"TE\") {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.old = +strs[1];\n\t\t\tthis.num = +strs[2];\n\t\t\treturn true;\n\t\t},\n\t\ttoString: function() {\n\t\t\treturn [\"TE\", this.old, this.num].join(\",\");\n\t\t}\n\t},\n\n\t// TrialFinalizeOperationクラス\n\t\"TrialFinalizeOperation:Operation\": {\n\t\tnum: [],\n\t\tsetData: function(old) {\n\t\t\tthis.old = old; // trialpos array\n\t\t},\n\t\texec: function(num) {\n\t\t\tthis.manager.trialpos = num.concat();\n\t\t\tif (num.length === 0) {\n\t\t\t\tthis.board.trialclear();\n\t\t\t} else {\n\t\t\t\tthis.manager.position--;\n\t\t\t\tthis.manager.resumeTrial();\n\t\t\t\tthis.manager.position++;\n\t\t\t}\n\t\t\tthis.manager.emitTrial(num.length);\n\t\t\tthis.puzzle.redraw();\n\t\t},\n\n\t\tdecode: function(strs) {\n\t\t\tif (strs[0] !== \"TF\") {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tstrs.shift();\n\t\t\tthis.old = JSON.parse(strs.join(\",\"));\n\t\t\treturn true;\n\t\t},\n\t\ttoString: function() {\n\t\t\treturn \"TF,[\" + this.old.join(\",\") + \"]\";\n\t\t}\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// ★OperationListクラス OperationのListと時刻を保持する\n\t//---------------------------------------------------------------------------\n\tOperationList: {\n\t\tinitialize: function() {\n\t\t\tthis.time = this.puzzle.getTime();\n\t\t\tthis.length = 0;\n\t\t},\n\t\tpush: function(ope) {\n\t\t\tthis[this.length++] = ope;\n\t\t},\n\t\tsome: function(func) {\n\t\t\treturn Array.prototype.slice.call(this).some(func);\n\t\t}\n\t\t//\ttoString : function(){\n\t\t//\t\treturn Array.prototype.toString.call(this);\n\t\t//\t}\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// ★OperationManagerクラス 操作情報を扱い、Undo/Redoの動作を実装する\n\t//---------------------------------------------------------------------------\n\t// OperationManagerクラス\n\tOperationManager: {\n\t\tinitialize: function() {\n\t\t\tthis.lastope = null; // this.opeの最後に追加されたOperationへのポインタ\n\t\t\tthis.history = []; // OperationListのオブジェクトを保持する配列\n\t\t\tthis.position = 0; // 現在の表示操作番号を保持する\n\t\t\tthis.trialpos = []; // TrialModeの位置を保持する配列\n\t\t\tthis.disEmitTrial = 0; // Trial eventの呼び出し有効無効フラグ\n\t\t\tthis.savedStarts = [];\n\n\t\t\tthis.broken = false; // \"以前の操作\"を消して元に戻れなくなった状態\n\t\t\tthis.initpos = 0; // 盤面初期化時のposition\n\n\t\t\tthis.disrec = 0; // このクラスからの呼び出し時は1にする\n\t\t\tthis.disCombine = false; // 数字がくっついてしまうので、それを一時的に無効にするためのフラグ\n\t\t\tthis.forceRecord = false; // 強制的に登録する(盤面縮小時限定)\n\t\t\tthis.changeflag = false; // 操作が行われたらtrueにする(mv.notInputted()用)\n\t\t\tthis.chainflag = false; // 同じope直下の配列に新しいOperationオブジェクトを追加する\n\n\t\t\tthis.enableUndo = false; // Undoできる状態か？\n\t\t\tthis.enableRedo = false; // Redoできる状態か？\n\t\t\tthis.limitTrialUndo = false; // 仮置きモードでUndoを止める状態かどうか\n\n\t\t\tthis.undoExec = false; // Undo中\n\t\t\tthis.redoExec = false; // Redo中\n\t\t\tthis.reqReset = false; // Undo/Redo時に盤面回転等が入っていた時、resize,rebuildInfo関数のcallを要求する\n\n\t\t\tthis.enableNetwork = true;\n\n\t\t\tvar classes = this.klass;\n\t\t\tthis.operationlist = [\n\t\t\t\tclasses.ObjectOperation,\n\t\t\t\tclasses.BoardClearOperation,\n\t\t\t\tclasses.BoardAdjustOperation,\n\t\t\t\tclasses.BoardFlipOperation,\n\t\t\t\tclasses.TrialEnterOperation,\n\t\t\t\tclasses.TrialFinalizeOperation\n\t\t\t];\n\t\t\tthis.addExtraOperation();\n\t\t},\n\t\taddExtraOperation: function() {},\n\n\t\tgetStarts: function() {\n\t\t\tvar starts = [];\n\t\t\tfor (var i = 0; i < this.trialpos.length; i++) {\n\t\t\t\tvar pos = this.trialpos[i];\n\t\t\t\t// it appears that the first input is always\n\t\t\t\t// at index +1\n\t\t\t\tif (pos + 1 < this.history.length) {\n\t\t\t\t\tvar ope = this.history[pos + 1][0];\n\t\t\t\t\tif (!!ope.getPiece) {\n\t\t\t\t\t\tstarts.push(ope.getPiece());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn starts;\n\t\t},\n\t\tupdateStarts: function() {\n\t\t\tvar oldstarts = this.savedStarts;\n\t\t\tvar count;\n\t\t\tfor (\n\t\t\t\tcount = oldstarts.length;\n\t\t\t\tcount > 0 && oldstarts[count - 1].isnull;\n\t\t\t\tcount--\n\t\t\t) {}\n\n\t\t\tvar starts = this.getStarts();\n\t\t\tif (count === starts.length) {\n\t\t\t\t// this implies that nothing changed,\n\t\t\t\t// assuming updateStarts gets called regularly\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (var i = 0; i < starts.length; i++) {\n\t\t\t\tthis.savedStarts[i] = starts[i];\n\t\t\t}\n\t\t\t// keep the full array length around since that's what we use to\n\t\t\t// key the markers, hence to hide\n\t\t\tfor (var i = starts.length; i < this.savedStarts.length; i++) {\n\t\t\t\tthis.savedStarts[i] = new this.puzzle.board.klass.BoardPiece();\n\t\t\t}\n\t\t\t// this is more redraws than we need technically\n\t\t\tfor (var i = 0; i < oldstarts.length; i++) {\n\t\t\t\toldstarts[i].draw();\n\t\t\t}\n\t\t\tfor (var i = 0; i < this.savedStarts.length; i++) {\n\t\t\t\tthis.savedStarts[i].draw();\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\n\t\t// um.disableRecord()  操作の登録を禁止する\n\t\t// um.enableRecord()   操作の登録を許可する\n\t\t// um.checkexec()      html上の[戻][進]ボタンを押すことが可能か設定する\n\t\t// um.allerase()       記憶していた操作を全て破棄する\n\t\t// um.newOperation()   マウス、キー入力開始時に呼び出す\n\t\t//---------------------------------------------------------------------------\n\n\t\t// 今この関数でレコード禁止になるのは、UndoRedo時、URLdecode、fileopen、adjustGeneral/Special時\n\t\t// 連動して実行しなくなるのはaddOpe().\n\t\t//  -> ここで使っているUndo/RedoとaddOpe以外はsetQues系関数を使用しないように変更\n\t\t//     変な制限事項がなくなるし、動作速度にもかなり効くしね\n\t\tdisableRecord: function() {\n\t\t\tthis.disrec++;\n\t\t},\n\t\tenableRecord: function() {\n\t\t\tif (this.disrec > 0) {\n\t\t\t\tthis.disrec--;\n\t\t\t}\n\t\t},\n\n\t\tcheckexec: function() {\n\t\t\tif (this.history === void 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.checkenable();\n\n\t\t\tthis.puzzle.emit(\"history\");\n\t\t},\n\t\tatStartOfTrial: function() {\n\t\t\treturn (\n\t\t\t\tthis.trialpos.length > 0 &&\n\t\t\t\tthis.position <= this.trialpos[this.trialpos.length - 1] + 1\n\t\t\t);\n\t\t},\n\t\tcheckenable: function() {\n\t\t\tif (this.limitTrialUndo && this.trialpos.length > 0) {\n\t\t\t\tthis.enableUndo = !this.atStartOfTrial();\n\t\t\t} else {\n\t\t\t\tthis.enableUndo = this.position > 0;\n\t\t\t}\n\t\t\tthis.enableRedo = this.position < this.history.length;\n\n\t\t\tthis.board.trialstage = this.trialpos.length;\n\t\t},\n\t\tallerase: function() {\n\t\t\tthis.lastope = null;\n\t\t\tthis.history = [];\n\t\t\tthis.position = 0;\n\t\t\tthis.broken = false;\n\t\t\tthis.initpos = 0;\n\t\t\tthis.changeflag = false;\n\t\t\tthis.chainflag = false;\n\t\t\tthis.checkexec();\n\t\t\tthis.trialpos = [];\n\t\t\tthis.limitTrialUndo = false;\n\t\t\tthis.puzzle.checker.resetCache();\n\t\t},\n\t\tnewOperation: function() {\n\t\t\tthis.changeflag = false;\n\t\t\tthis.chainflag = false;\n\t\t},\n\t\tnewChain: function() {\n\t\t\tthis.chainflag = false;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// opemgr.isModified()     操作がファイル等に保存されていないか確認する\n\t\t// opemgr.resetModifiedState() ファイルに保存された時などに保存した状態にする\n\t\t//---------------------------------------------------------------------------\n\t\tisModified: function() {\n\t\t\treturn this.broken || this.initpos < this.position;\n\t\t},\n\t\tresetModifiedState: function() {\n\t\t\tthis.broken = false;\n\t\t\tthis.initpos = this.position;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// opemgr.removeDescendant()  現在以降の履歴を消去する\n\t\t//---------------------------------------------------------------------------\n\t\tremoveDescendant: function() {\n\t\t\tif (this.position < this.initpos) {\n\t\t\t\tthis.broken = true;\n\t\t\t}\n\t\t\tfor (var i = this.history.length - 1; i >= this.position; i--) {\n\t\t\t\tthis.history.pop();\n\t\t\t}\n\t\t\tthis.position = this.history.length;\n\t\t\tthis.chainflag = false;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// um.add()  指定された操作を追加する(共通操作)\n\t\t//---------------------------------------------------------------------------\n\t\tadd: function(newope) {\n\t\t\tif (!this.puzzle.ready || (!this.forceRecord && this.disrec > 0)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnewope.broadcast();\n\n\t\t\t/* Undoした場所で以降の操作がある時に操作追加された場合、以降の操作は消去する */\n\t\t\tif (this.enableRedo) {\n\t\t\t\tthis.removeDescendant();\n\t\t\t}\n\n\t\t\t/* 前の履歴を更新するかどうか判定 */\n\t\t\tvar puzzle = this.puzzle;\n\t\t\tif (\n\t\t\t\tthis.disCombine ||\n\t\t\t\t!this.lastope ||\n\t\t\t\t!newope.isModify ||\n\t\t\t\t!newope.isModify(this.lastope)\n\t\t\t) {\n\t\t\t\t/* 履歴を追加する */\n\t\t\t\tif (!this.chainflag) {\n\t\t\t\t\tthis.history.push(new this.klass.OperationList());\n\t\t\t\t\tthis.position++;\n\t\t\t\t\tthis.chainflag = true;\n\t\t\t\t}\n\t\t\t\tthis.history[this.history.length - 1].push(newope);\n\t\t\t\tthis.lastope = newope;\n\t\t\t\tthis.updateStarts();\n\t\t\t} else {\n\t\t\t\t/* merged into previous operation, remove if noop */\n\t\t\t\tif (this.lastope.isNoop && this.lastope.isNoop()) {\n\t\t\t\t\tthis.history.pop();\n\t\t\t\t\tthis.position--;\n\t\t\t\t\tthis.lastope = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newope.property !== \"qcmp\" && newope.property !== \"snum\") {\n\t\t\t\tpuzzle.checker.resetCache();\n\t\t\t}\n\t\t\tthis.changeflag = true;\n\t\t\tthis.checkexec();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// um.decodeHistory() オブジェクトを履歴情報に変換する\n\t\t// um.encodeHistory() 履歴情報をオブジェクトに変換する\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeHistory: function(historyinfo) {\n\t\t\tthis.allerase();\n\n\t\t\tthis.initpos = this.position = historyinfo.current || 0;\n\t\t\tthis.history = [];\n\t\t\tvar datas = historyinfo.datas || [];\n\t\t\tfor (var i = 0, len = datas.length; i < len; i++) {\n\t\t\t\tvar opelist = new this.klass.OperationList();\n\t\t\t\tthis.history.push(opelist);\n\t\t\t\tvar array = datas[i];\n\t\t\t\tif (array.time !== void 0) {\n\t\t\t\t\topelist.time = array.time;\n\t\t\t\t\tarray = array.ope;\n\t\t\t\t}\n\t\t\t\tfor (var j = 0, len2 = array.length; j < len2; j++) {\n\t\t\t\t\tvar strs = array[j].split(/,/);\n\t\t\t\t\tvar ope = null,\n\t\t\t\t\t\tList = this.operationlist;\n\t\t\t\t\tfor (var k = 0; k < List.length; k++) {\n\t\t\t\t\t\tvar ope1 = new List[k]();\n\t\t\t\t\t\tif (ope1.decode(strs)) {\n\t\t\t\t\t\t\tope = ope1;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!!ope) {\n\t\t\t\t\t\topelist.push(ope);\n\t\t\t\t\t\tthis.lastope = ope;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.checkexec();\n\n\t\t\tthis.trialpos = historyinfo.trialpos || [];\n\t\t\tif (this.trialpos.length > 0) {\n\t\t\t\tthis.resumeTrial();\n\t\t\t\tthis.limitTrialUndo = true;\n\t\t\t}\n\t\t},\n\t\tencodeHistory: function(extoption) {\n\t\t\textoption = extoption || {};\n\t\t\tthis.initpos = this.position;\n\t\t\tvar historyinfo = {\n\t\t\t\ttype: \"pzpr\",\n\t\t\t\tversion: 0.4\n\t\t\t};\n\t\t\tif (extoption.time) {\n\t\t\t\thistoryinfo.time = this.puzzle.getTime();\n\t\t\t}\n\t\t\tif (this.history.length > 0) {\n\t\t\t\thistoryinfo.current = this.position;\n\t\t\t\tif (this.trialpos.length > 0) {\n\t\t\t\t\thistoryinfo.trialpos = this.trialpos;\n\t\t\t\t}\n\t\t\t\tvar history = [];\n\t\t\t\tfor (var i = 0; i < this.history.length; ++i) {\n\t\t\t\t\tvar array = Array.prototype.slice.call(this.history[i]);\n\t\t\t\t\tif (!extoption.time) {\n\t\t\t\t\t\thistory.push(array);\n\t\t\t\t\t} else {\n\t\t\t\t\t\thistory.push({ ope: array, time: this.history[i].time });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\thistoryinfo.datas = history;\n\t\t\t}\n\t\t\treturn historyinfo;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// opemgr.undo()  Undoを実行する\n\t\t// opemgr.redo()  Redoを実行する\n\t\t//---------------------------------------------------------------------------\n\t\tundo: function() {\n\t\t\tif (!this.enableUndo) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar opes = this.history[this.position - 1];\n\t\t\tthis.reqReset = this.checkReqReset(opes);\n\t\t\tthis.preproc();\n\t\t\tthis.undoCore();\n\t\t\tthis.postproc();\n\t\t\treturn this.enableUndo;\n\t\t},\n\t\tredo: function() {\n\t\t\tif (!this.enableRedo) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar opes = this.history[this.position];\n\t\t\tthis.reqReset = this.checkReqReset(opes);\n\t\t\tthis.preproc();\n\t\t\tthis.redoCore();\n\t\t\tthis.postproc();\n\t\t\treturn this.enableRedo;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// opemgr.undoCore()  Undoを実行する(preproc/postprocなし)\n\t\t// opemgr.redoCore()  Redoを実行する(preproc/postprocなし)\n\t\t// opemgr.resumeGoto()  指定された履歴の位置まで移動する(preproc/postprocなし)\n\t\t//---------------------------------------------------------------------------\n\t\tundoCore: function() {\n\t\t\tthis.undoExec = true;\n\t\t\tvar opes = this.history[this.position - 1];\n\t\t\tfor (var i = opes.length - 1; i >= 0; i--) {\n\t\t\t\tif (!!opes[i]) {\n\t\t\t\t\topes[i].undo();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.position--;\n\t\t\tthis.undoExec = false;\n\t\t},\n\t\tredoCore: function() {\n\t\t\tthis.redoExec = true;\n\t\t\tvar opes = this.history[this.position];\n\t\t\tfor (var i = 0; i < opes.length; ++i) {\n\t\t\t\tif (!!opes[i]) {\n\t\t\t\t\topes[i].redo();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.position++;\n\t\t\tthis.redoExec = false;\n\t\t},\n\t\tresumeGoto: function(pos) {\n\t\t\tif (pos < this.position) {\n\t\t\t\twhile (pos < this.position) {\n\t\t\t\t\tthis.undoCore();\n\t\t\t\t}\n\t\t\t} else if (this.position < pos) {\n\t\t\t\twhile (this.position < pos) {\n\t\t\t\t\tthis.redoCore();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.checkenable();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// um.checkReqReset() 盤面全体に影響する処理が含まれているかどうか判定する\n\t\t// um.preproc()  Undo/Redo実行前の処理を行う\n\t\t// um.postproc() Undo/Redo実行後の処理を行う\n\t\t//---------------------------------------------------------------------------\n\t\tcheckReqReset: function(opes) {\n\t\t\treturn opes.some(function(ope) {\n\t\t\t\treturn ope.reqReset;\n\t\t\t});\n\t\t},\n\t\tpreproc: function(opes) {\n\t\t\tvar puzzle = this.puzzle,\n\t\t\t\tbd = puzzle.board;\n\t\t\tthis.disableRecord();\n\n\t\t\tpuzzle.painter.suspend();\n\t\t\tpuzzle.errclear();\n\t\t\tthis.updateStarts();\n\t\t\tif (this.reqReset) {\n\t\t\t\tbd.disableInfo();\n\t\t\t}\n\t\t},\n\t\tpostproc: function() {\n\t\t\tvar puzzle = this.puzzle,\n\t\t\t\tbd = puzzle.board;\n\t\t\tif (this.reqReset) {\n\t\t\t\tbd.setposAll();\n\t\t\t\tbd.setminmax();\n\t\t\t\tbd.enableInfo();\n\t\t\t\tbd.rebuildInfo();\n\t\t\t\tpuzzle.redraw(true);\n\t\t\t\tpuzzle.emit(\"adjust\");\n\t\t\t}\n\t\t\tpuzzle.painter.unsuspend();\n\n\t\t\tthis.enableRecord();\n\t\t\tthis.checkexec();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// opemgr.enterTrial()   TrialModeにする\n\t\t// opemgr.acceptTrial()  現在のTrial状態を確定する\n\t\t// opemgr.rejectTrial()  Trial状態と履歴を破棄する\n\t\t// opemgr.resumeTrial()  ファイル読み込み時などにTrial状態を復帰する\n\t\t// opemgr.emtiTrial()    trial eventを呼び出す\n\t\t//---------------------------------------------------------------------------\n\t\tenterTrial: function() {\n\t\t\tif (this.atStartOfTrial()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.newOperation();\n\t\t\tthis.add(\n\t\t\t\tnew this.puzzle.klass.TrialEnterOperation(\n\t\t\t\t\tthis.trialpos.length,\n\t\t\t\t\tthis.trialpos.length + 1\n\t\t\t\t)\n\t\t\t);\n\t\t\tthis.trialpos.push(this.position - 1);\n\t\t\tthis.limitTrialUndo = true;\n\t\t\tthis.checkexec();\n\t\t\tthis.newOperation();\n\t\t\tthis.emitTrial();\n\t\t},\n\t\tacceptTrial: function() {\n\t\t\tif (this.trialpos[this.trialpos.length - 1] + 1 === this.position) {\n\t\t\t\tthis.position--;\n\t\t\t\tthis.removeDescendant();\n\t\t\t\tthis.trialpos.pop();\n\t\t\t}\n\t\t\tif (this.trialpos.length > 0) {\n\t\t\t\tthis.newOperation();\n\t\t\t\tthis.add(new this.puzzle.klass.TrialFinalizeOperation(this.trialpos));\n\t\t\t\tthis.board.trialclear();\n\t\t\t}\n\t\t\tthis.trialpos = [];\n\t\t\tthis.limitTrialUndo = false;\n\t\t\tthis.removeDescendant();\n\t\t\tthis.checkexec();\n\t\t\tthis.newOperation();\n\t\t\tthis.emitTrial();\n\t\t},\n\t\trejectTrial: function(rejectall) {\n\t\t\tif (this.trialpos.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.disableRecord();\n\t\t\tthis.board.errclear();\n\t\t\tif (rejectall || this.trialpos.length === 1) {\n\t\t\t\tvar pos = this.trialpos[0];\n\t\t\t\tthis.board.trialclear();\n\t\t\t\tthis.trialpos = [];\n\t\t\t\tthis.limitTrialUndo = false;\n\t\t\t\tthis.resumeGoto(pos);\n\t\t\t} else {\n\t\t\t\tthis.resumeGoto(this.trialpos[this.trialpos.length - 1]);\n\t\t\t\tthis.resumeTrial();\n\t\t\t}\n\t\t\tthis.enableRecord();\n\t\t\tthis.removeDescendant();\n\t\t\tthis.checkexec();\n\t\t\tthis.newOperation();\n\t\t\tthis.emitTrial();\n\t\t},\n\t\tresumeTrial: function() {\n\t\t\tif (this.trialpos.length > 0) {\n\t\t\t\tthis.disEmitTrial++;\n\t\t\t\tvar pos = this.position;\n\t\t\t\tthis.checkenable();\n\t\t\t\tthis.resumeGoto(this.trialpos[0]);\n\t\t\t\tthis.board.trialclear(true);\n\t\t\t\tif (this.position < pos) {\n\t\t\t\t\tthis.board.trialstage = 1;\n\t\t\t\t\tthis.resumeGoto(pos);\n\t\t\t\t}\n\t\t\t\tthis.disEmitTrial--;\n\t\t\t}\n\t\t},\n\t\temitTrial: function(num) {\n\t\t\tif (this.disEmitTrial === 0) {\n\t\t\t\tthis.puzzle.emit(\"trial\", num === void 0 ? this.trialpos.length : num);\n\t\t\t}\n\t\t}\n\t}\n});\n","// GraphicCommon.js v3.4.1\n\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\tGraphic: {\n\t\tpaintPost: function() {\n\t\t\tthis.drawTrialStarts();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawQuesCells()    Cellの、境界線の上に描画される問題の黒マスをCanvasに書き込む\n\t\t// pc.getQuesCellColor() 問題の黒マスの設定・描画判定する\n\t\t//---------------------------------------------------------------------------\n\t\tdrawQuesCells: function() {\n\t\t\tthis.vinc(\"cell_front\", \"crispEdges\", true);\n\t\t\tthis.drawCells_common(\"c_fullf_\", this.getQuesCellColor);\n\t\t},\n\t\tgetQuesCellColor: function(cell) {\n\t\t\t// initialize()で上書きされる\n\t\t\treturn null;\n\t\t},\n\t\tgetQuesCellColor_ques: function(cell) {\n\t\t\tif (cell.ques !== 1) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif ((cell.error || cell.qinfo) === 1) {\n\t\t\t\treturn this.errcolor1;\n\t\t\t}\n\t\t\treturn this.quescolor;\n\t\t},\n\t\tgetQuesCellColor_qnum: function(cell) {\n\t\t\tif (cell.qnum === -1) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif ((cell.error || cell.qinfo) === 1) {\n\t\t\t\treturn this.errcolor1;\n\t\t\t}\n\t\t\treturn this.quescolor;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawShadedCells()    Cellの、境界線の上から描画される回答の黒マスをCanvasに書き込む\n\t\t// pc.getShadedCellColor() 回答の黒マスの設定・描画判定する\n\t\t//---------------------------------------------------------------------------\n\t\tdrawShadedCells: function() {\n\t\t\tthis.vinc(\"cell_shaded\", \"crispEdges\", true);\n\t\t\tthis.drawCells_common(\"c_fulls_\", this.getShadedCellColor);\n\t\t},\n\t\tgetShadedCellColor: function(cell) {\n\t\t\tif (cell.qans !== 1) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar info = cell.error || cell.qinfo;\n\t\t\tif (info === 1) {\n\t\t\t\treturn this.errcolor1;\n\t\t\t} else if (info === 2) {\n\t\t\t\treturn this.errcolor2;\n\t\t\t} else if (cell.trial) {\n\t\t\t\treturn this.trialcolor;\n\t\t\t} else if (this.puzzle.execConfig(\"irowakeblk\")) {\n\t\t\t\treturn cell.sblk.color;\n\t\t\t}\n\t\t\treturn this.shadecolor;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawBGCells()    Cellの、境界線の下に描画される背景色をCanvasに書き込む\n\t\t// pc.getBGCellColor() 背景色の設定・描画判定する\n\t\t//---------------------------------------------------------------------------\n\t\tdrawBGCells: function() {\n\t\t\tthis.vinc(\"cell_back\", \"crispEdges\", true);\n\t\t\tthis.drawCells_common(\"c_fullb_\", this.getBGCellColor);\n\t\t},\n\t\tgetBGCellColor: function(cell) {\n\t\t\t// initialize()で上書きされる\n\t\t\treturn null;\n\t\t},\n\t\tgetBGCellColor_error1: function(cell) {\n\t\t\tif (cell.error === 1 || cell.qinfo === 1) {\n\t\t\t\treturn this.errbcolor1;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetBGCellColor_error2: function(cell) {\n\t\t\tvar info = cell.error || cell.qinfo;\n\t\t\tif (info === 1) {\n\t\t\t\treturn this.errbcolor1;\n\t\t\t} else if (info === 2) {\n\t\t\t\treturn this.errbcolor2;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetBGCellColor_qcmp: function(cell) {\n\t\t\tif (cell.error === 1 || cell.qinfo === 1) {\n\t\t\t\treturn this.errbcolor1;\n\t\t\t} else if (\n\t\t\t\tthis.puzzle.execConfig(\"autocmp\") &&\n\t\t\t\t!!cell.room &&\n\t\t\t\tcell.room.cmp\n\t\t\t) {\n\t\t\t\treturn this.qcmpbgcolor;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetBGCellColor_qcmp1: function(cell) {\n\t\t\tif (cell.error === 1 || cell.qinfo === 1) {\n\t\t\t\treturn this.errbcolor1;\n\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\treturn this.bcolor;\n\t\t\t} else if (\n\t\t\t\tthis.puzzle.execConfig(\"autocmp\") &&\n\t\t\t\t!!cell.room &&\n\t\t\t\tcell.room.cmp\n\t\t\t) {\n\t\t\t\treturn this.qcmpbgcolor;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetBGCellColor_qsub1: function(cell) {\n\t\t\tif ((cell.error || cell.qinfo) === 1) {\n\t\t\t\treturn this.errbcolor1;\n\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\treturn this.bcolor;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetBGCellColor_qsub2: function(cell) {\n\t\t\tthis.bcolor = \"silver\"; /* 数字入力で背景が消えないようにする応急処置 */\n\t\t\tif ((cell.error || cell.qinfo) === 1) {\n\t\t\t\treturn this.errbcolor1;\n\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\treturn this.qsubcolor1;\n\t\t\t} else if (cell.qsub === 2) {\n\t\t\t\treturn this.qsubcolor2;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetBGCellColor_qsub3: function(cell) {\n\t\t\tif ((cell.error || cell.qinfo) === 1) {\n\t\t\t\treturn this.errbcolor1;\n\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\treturn this.qsubcolor1;\n\t\t\t} else if (cell.qsub === 2) {\n\t\t\t\treturn this.qsubcolor2;\n\t\t\t} else if (cell.qsub === 3) {\n\t\t\t\treturn this.qsubcolor3;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetBGCellColor_icebarn: function(cell) {\n\t\t\tif (cell.error === 1 || cell.qinfo === 1) {\n\t\t\t\tif (cell.ques === 6) {\n\t\t\t\t\treturn this.erricecolor;\n\t\t\t\t} else {\n\t\t\t\t\treturn this.errbcolor1;\n\t\t\t\t}\n\t\t\t} else if (cell.ques === 6) {\n\t\t\t\treturn this.icecolor;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawCells_common()  drawShadedCells, drawQuesCells, drawBGCellsの共通ルーチン\n\t\t//---------------------------------------------------------------------------\n\t\tdrawCells_common: function(header, colorfunc) {\n\t\t\tvar g = this.context;\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i],\n\t\t\t\t\tcolor = colorfunc.call(this, cell);\n\t\t\t\tg.vid = header + cell.id;\n\t\t\t\tif (!!color) {\n\t\t\t\t\tg.fillStyle = color;\n\t\t\t\t\tg.fillRectCenter(\n\t\t\t\t\t\tcell.bx * this.bw,\n\t\t\t\t\t\tcell.by * this.bh,\n\t\t\t\t\t\tthis.bw + 0.5,\n\t\t\t\t\t\tthis.bh + 0.5\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawBGExCells()    ExCellに描画される背景色をCanvasに書き込む\n\t\t// pc.getBGExCellColor() 背景色の設定・描画判定する\n\t\t//---------------------------------------------------------------------------\n\t\tdrawBGExCells: function() {\n\t\t\tvar g = this.vinc(\"excell_back\", \"crispEdges\", true);\n\n\t\t\tvar exlist = this.range.excells;\n\t\t\tfor (var i = 0; i < exlist.length; i++) {\n\t\t\t\tvar excell = exlist[i],\n\t\t\t\t\tcolor = this.getBGExCellColor(excell);\n\n\t\t\t\tg.vid = \"ex_full_\" + excell.id;\n\t\t\t\tif (!!color) {\n\t\t\t\t\tg.fillStyle = color;\n\t\t\t\t\tg.fillRectCenter(\n\t\t\t\t\t\texcell.bx * this.bw,\n\t\t\t\t\t\texcell.by * this.bh,\n\t\t\t\t\t\tthis.bw + 0.5,\n\t\t\t\t\t\tthis.bh + 0.5\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetBGExCellColor: function(excell) {\n\t\t\tif (excell.error === 1 || excell.qinfo === 1) {\n\t\t\t\treturn this.errbcolor1;\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawDotCells()  ・だけをCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawDotCells: function() {\n\t\t\tvar g = this.vinc(\"cell_dot\", \"auto\", true);\n\n\t\t\tvar dsize = Math.max(this.cw * 0.06, 2);\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i];\n\n\t\t\t\tg.vid = \"c_dot_\" + cell.id;\n\t\t\t\tif (cell.isDot()) {\n\t\t\t\t\tg.fillStyle = !cell.trial ? this.qanscolor : this.trialcolor;\n\t\t\t\t\tg.fillCircle(cell.bx * this.bw, cell.by * this.bh, dsize);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawCellArrows() 矢印だけをCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawCellArrows: function() {\n\t\t\tvar g = this.vinc(\"cell_arrow\", \"auto\");\n\t\t\tvar al, aw, tl, tw;\n\n\t\t\tif (this.pid !== \"nagare\") {\n\t\t\t\tal = this.cw * 0.4; // ArrowLength\n\t\t\t\taw = this.cw * 0.03; // ArrowWidth\n\t\t\t\ttl = this.cw * 0.16; // 矢じりの長さの座標(中心-長さ)\n\t\t\t\ttw = this.cw * 0.16; // 矢じりの幅\n\t\t\t} else {\n\t\t\t\t/* 太い矢印 */\n\t\t\t\tal = this.cw * 0.35; // ArrowLength\n\t\t\t\taw = this.cw * 0.12; // ArrowWidth\n\t\t\t\ttl = 0; // 矢じりの長さの座標(中心-長さ)\n\t\t\t\ttw = this.cw * 0.35; // 矢じりの幅\n\t\t\t}\n\t\t\taw = aw >= 1 ? aw : 1;\n\t\t\ttw = tw >= 5 ? tw : 5;\n\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i],\n\t\t\t\t\tdir = !cell.numberAsObject ? cell.qdir : cell.getNum();\n\t\t\t\tvar color = dir >= 1 && dir <= 4 ? this.getCellArrowColor(cell) : null;\n\n\t\t\t\tg.vid = \"c_arrow_\" + cell.id;\n\t\t\t\tif (!!color) {\n\t\t\t\t\tg.fillStyle = color;\n\t\t\t\t\tg.beginPath();\n\t\t\t\t\tvar px = cell.bx * this.bw,\n\t\t\t\t\t\tpy = cell.by * this.bh;\n\t\t\t\t\tswitch (dir) {\n\t\t\t\t\t\tcase cell.UP:\n\t\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t-al,\n\t\t\t\t\t\t\t\t-tw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\tal,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\tal,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\ttw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase cell.DN:\n\t\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tal,\n\t\t\t\t\t\t\t\t-tw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\t-al,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\t-al,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\ttw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase cell.LT:\n\t\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t\t-al,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\t-tw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\tal,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\tal,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\ttw,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase cell.RT:\n\t\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t\tal,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\t-tw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\t-al,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\t-al,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\ttw,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tg.fill();\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetCellArrowColor: function(cell) {\n\t\t\tvar dir = !cell.numberAsObject ? cell.qdir : cell.getNum();\n\t\t\tif (dir >= 1 && dir <= 4) {\n\t\t\t\tif (!cell.numberAsObject || cell.qnum !== -1) {\n\t\t\t\t\treturn this.quescolor;\n\t\t\t\t} else {\n\t\t\t\t\treturn !cell.trial ? this.qanscolor : this.trialcolor;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawSlashes() 斜線をCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawSlashes: function() {\n\t\t\tvar g = this.vinc(\"cell_slash\", \"auto\");\n\n\t\t\tvar basewidth = Math.max(this.bw / 4, 2);\n\t\t\tvar irowake = this.puzzle.execConfig(\"irowake\");\n\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i];\n\t\t\t\tg.vid = \"c_slash_\" + cell.id;\n\t\t\t\tif (cell.qans !== 0) {\n\t\t\t\t\tvar info = cell.error || cell.qinfo,\n\t\t\t\t\t\taddwidth = 0,\n\t\t\t\t\t\tcolor;\n\t\t\t\t\tif (this.pid === \"gokigen\" || this.pid === \"wagiri\") {\n\t\t\t\t\t\tif (cell.trial && this.puzzle.execConfig(\"irowake\")) {\n\t\t\t\t\t\t\taddwidth = -basewidth / 2;\n\t\t\t\t\t\t} else if (info === 1 || info === 3) {\n\t\t\t\t\t\t\taddwidth = basewidth / 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (info === 1) {\n\t\t\t\t\t\tcolor = this.errcolor1;\n\t\t\t\t\t} else if (info === 2) {\n\t\t\t\t\t\tcolor = this.errcolor2;\n\t\t\t\t\t} else if (info === -1) {\n\t\t\t\t\t\tcolor = this.noerrcolor;\n\t\t\t\t\t} else if (irowake && cell.path.color) {\n\t\t\t\t\t\tcolor = cell.path.color;\n\t\t\t\t\t} else if (cell.trial) {\n\t\t\t\t\t\tcolor = this.trialcolor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolor = \"black\";\n\t\t\t\t\t}\n\n\t\t\t\t\tg.lineWidth = basewidth + addwidth;\n\t\t\t\t\tg.strokeStyle = color;\n\t\t\t\t\tg.beginPath();\n\t\t\t\t\tvar px = cell.bx * this.bw,\n\t\t\t\t\t\tpy = cell.by * this.bh;\n\t\t\t\t\tif (cell.qans === 31) {\n\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t-this.bw,\n\t\t\t\t\t\t\t-this.bh,\n\t\t\t\t\t\t\tthis.bw,\n\t\t\t\t\t\t\tthis.bh,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (cell.qans === 32) {\n\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\tthis.bw,\n\t\t\t\t\t\t\t-this.bh,\n\t\t\t\t\t\t\t-this.bw,\n\t\t\t\t\t\t\tthis.bh,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tg.stroke();\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawQuesNumbers()  Cellの問題数字をCanvasに書き込む\n\t\t// pc.drawAnsNumbers()   Cellの回答数字をCanvasに書き込む\n\t\t// pc.drawHatenas()      ques===-2の時に？をCanvasに書き込む\n\t\t// pc.getQuesNumberText()  書き込む数のテキストを取得する\n\t\t// pc.getQuesNumberColor() 問題数字の設定・描画判定する\n\t\t//---------------------------------------------------------------------------\n\t\tdrawQuesNumbers: function() {\n\t\t\tthis.vinc(\"cell_number\", \"auto\");\n\t\t\tthis.drawNumbers_com(\n\t\t\t\tthis.getQuesNumberText,\n\t\t\t\tthis.getQuesNumberColor,\n\t\t\t\t\"cell_text_\",\n\t\t\t\tthis.textoption\n\t\t\t);\n\t\t},\n\t\tdrawAnsNumbers: function() {\n\t\t\tthis.vinc(\"cell_ans_number\", \"auto\");\n\t\t\tthis.drawNumbers_com(\n\t\t\t\tthis.getAnsNumberText,\n\t\t\t\tthis.getAnsNumberColor,\n\t\t\t\t\"cell_ans_text_\",\n\t\t\t\t{}\n\t\t\t);\n\t\t},\n\t\tdrawHatenas: function() {\n\t\t\tfunction getQuesHatenaText(cell) {\n\t\t\t\treturn cell.ques === -2 || cell.qnum === -2 ? \"?\" : \"\";\n\t\t\t}\n\t\t\tthis.vinc(\"cell_number\", \"auto\");\n\t\t\tthis.drawNumbers_com(\n\t\t\t\tgetQuesHatenaText,\n\t\t\t\tthis.getQuesNumberColor_qnum,\n\t\t\t\t\"cell_text_\",\n\t\t\t\tthis.textoption\n\t\t\t);\n\t\t},\n\t\tdrawNumbers_com: function(textfunc, colorfunc, header, textoption) {\n\t\t\tvar g = this.context;\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i];\n\t\t\t\tvar text = textfunc.call(this, cell);\n\t\t\t\tg.vid = header + cell.id;\n\t\t\t\tif (!!text) {\n\t\t\t\t\tg.fillStyle = colorfunc.call(this, cell);\n\t\t\t\t\tvar x = cell.bx * this.bw;\n\t\t\t\t\tvar y = cell.by * this.bh + this.getNumberVerticalOffset(cell);\n\t\t\t\t\tthis.disptext(text, x, y, textoption);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetNumberVerticalOffset: function(cell) {\n\t\t\treturn 0;\n\t\t},\n\n\t\tgetQuesNumberText: function(cell) {\n\t\t\treturn this.getNumberText(\n\t\t\t\tcell,\n\t\t\t\t(this.puzzle.execConfig(\"dispmove\") ? cell.base : cell).qnum\n\t\t\t);\n\t\t},\n\t\tgetAnsNumberText: function(cell) {\n\t\t\treturn this.getNumberText(cell, cell.anum);\n\t\t},\n\t\tgetNumberText: function(cell, num) {\n\t\t\tif (!cell.numberAsLetter) {\n\t\t\t\treturn this.getNumberTextCore(num);\n\t\t\t} else {\n\t\t\t\treturn this.getNumberTextCore_letter(num);\n\t\t\t}\n\t\t},\n\t\tgetNumberTextCore: function(num) {\n\t\t\tvar hideHatena =\n\t\t\t\tthis.pid !== \"yajilin\"\n\t\t\t\t\t? this.hideHatena\n\t\t\t\t\t: this.puzzle.getConfig(\"disptype_yajilin\") === 2;\n\t\t\treturn num >= 0 ? \"\" + num : !hideHatena && num === -2 ? \"?\" : \"\";\n\t\t},\n\t\tgetNumberTextCore_letter: function(num) {\n\t\t\tvar text = \"\" + num;\n\t\t\tif (num === -1) {\n\t\t\t\ttext = \"\";\n\t\t\t} else if (num === -2) {\n\t\t\t\ttext = \"?\";\n\t\t\t} else if (num > 0 && num <= 26) {\n\t\t\t\ttext = (num + 9).toString(36).toUpperCase();\n\t\t\t} else if (num > 26 && num <= 52) {\n\t\t\t\ttext = (num - 17).toString(36).toLowerCase();\n\t\t\t}\n\t\t\treturn text;\n\t\t},\n\n\t\tgetQuesNumberColor: function(cell) {\n\t\t\t// initialize()で上書きされる\n\t\t\treturn null;\n\t\t},\n\t\tgetQuesNumberColor_fixed: function(cell) {\n\t\t\treturn this.quescolor;\n\t\t},\n\t\tgetQuesNumberColor_fixed_shaded: function(cell) {\n\t\t\treturn this.fontShadecolor;\n\t\t},\n\t\tgetQuesNumberColor_qnum: function(cell) {\n\t\t\treturn (cell.error || cell.qinfo) === 1 ? this.errcolor1 : this.quescolor;\n\t\t},\n\t\tgetQuesNumberColor_move: function(cell) {\n\t\t\tvar puzzle = this.puzzle;\n\t\t\tvar info = cell.error || cell.qinfo;\n\t\t\tif (info === 1 || info === 4) {\n\t\t\t\treturn this.errcolor1;\n\t\t\t} else if (\n\t\t\t\tpuzzle.execConfig(\"dispmove\") &&\n\t\t\t\tpuzzle.mouse.mouseCell === cell\n\t\t\t) {\n\t\t\t\treturn this.movecolor;\n\t\t\t}\n\t\t\treturn this.quescolor;\n\t\t},\n\t\tgetQuesNumberColor_mixed: function(cell) {\n\t\t\tvar info = cell.error || cell.qinfo;\n\t\t\tif ((cell.ques >= 1 && cell.ques <= 5) || cell.qans === 1) {\n\t\t\t\treturn this.fontShadecolor;\n\t\t\t} else if (info === 1 || info === 4) {\n\t\t\t\treturn this.errcolor1;\n\t\t\t}\n\t\t\treturn this.quescolor;\n\t\t},\n\n\t\tgetAnsNumberColor: function(cell) {\n\t\t\tif ((cell.error || cell.qinfo) === 1) {\n\t\t\t\treturn this.errcolor1;\n\t\t\t}\n\t\t\treturn !cell.trial ? this.qanscolor : this.trialcolor;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawNumbersExCell()  ExCellの数字をCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawNumbersExCell: function() {\n\t\t\tvar g = this.vinc(\"excell_number\", \"auto\");\n\n\t\t\tvar exlist = this.range.excells;\n\t\t\tfor (var i = 0; i < exlist.length; i++) {\n\t\t\t\tvar excell = exlist[i];\n\t\t\t\tvar text = this.getQuesNumberText(excell);\n\n\t\t\t\tg.vid = \"excell_text_\" + excell.id;\n\t\t\t\tif (!!text) {\n\t\t\t\t\tg.fillStyle = this.getQuesNumberColor(excell);\n\t\t\t\t\tthis.disptext(text, excell.bx * this.bw, excell.by * this.bh);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawSubNumbers()  Cellの補助数字をCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawSubNumbers: function() {\n\t\t\tvar g = this.vinc(\"cell_subnumber\", \"auto\");\n\t\t\tvar posarray = [5, 4, 2, 3];\n\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i];\n\t\t\t\tfor (var n = 0; n < 4; n++) {\n\t\t\t\t\tvar text = !cell.numberAsLetter\n\t\t\t\t\t\t? this.getNumberTextCore(cell.snum[n])\n\t\t\t\t\t\t: this.getNumberTextCore_letter(cell.snum[n]);\n\t\t\t\t\tg.vid = \"cell_subtext_\" + cell.id + \"_\" + n;\n\t\t\t\t\tif (!!text) {\n\t\t\t\t\t\tg.fillStyle = !cell.trial ? this.subcolor : this.trialcolor;\n\t\t\t\t\t\tthis.disptext(text, cell.bx * this.bw, cell.by * this.bh, {\n\t\t\t\t\t\t\tposition: posarray[n],\n\t\t\t\t\t\t\tratio: 0.33,\n\t\t\t\t\t\t\thoffset: 0.8\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tg.vhide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawArrowNumbers() Cellの数字と矢印をCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawArrowNumbers: function() {\n\t\t\tvar g = this.vinc(\"cell_arrownumber\", \"auto\");\n\n\t\t\tvar al = this.cw * 0.4; // ArrowLength\n\t\t\tvar aw = this.cw * 0.03; // ArrowWidth\n\t\t\tvar tl = this.cw * 0.16; // 矢じりの長さの座標(中心-長さ)\n\t\t\tvar tw = this.cw * 0.12; // 矢じりの幅\n\t\t\tvar dy = -this.bh * 0.6;\n\t\t\tvar dx = [this.bw * 0.6, this.bw * 0.7, this.bw * 0.8, this.bw * 0.85];\n\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i],\n\t\t\t\t\tdir = cell.qdir;\n\t\t\t\tvar text = this.getQuesNumberText(cell);\n\t\t\t\tvar px = cell.bx * this.bw,\n\t\t\t\t\tpy = cell.by * this.bh;\n\t\t\t\tvar digit = text.length - 1;\n\n\t\t\t\tif (!!text) {\n\t\t\t\t\tg.fillStyle = this.getQuesNumberColor(cell);\n\t\t\t\t}\n\n\t\t\t\t// 矢印の描画\n\t\t\t\tg.vid = \"cell_arrow_\" + cell.id;\n\t\t\t\tif (!!text && dir !== cell.NDIR) {\n\t\t\t\t\tg.beginPath();\n\t\t\t\t\tswitch (dir) {\n\t\t\t\t\t\tcase cell.UP:\n\t\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\t\tpx + dx[digit],\n\t\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t-al,\n\t\t\t\t\t\t\t\t-tw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\tal,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\tal,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\ttw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase cell.DN:\n\t\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\t\tpx + dx[digit],\n\t\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tal,\n\t\t\t\t\t\t\t\t-tw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\t-al,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\t-al,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\ttw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase cell.LT:\n\t\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\t\tpy + dy,\n\t\t\t\t\t\t\t\t-al,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\t-tw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\tal,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\tal,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\t-tl,\n\t\t\t\t\t\t\t\ttw,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase cell.RT:\n\t\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\t\tpy + dy,\n\t\t\t\t\t\t\t\tal,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\t-tw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\t-al,\n\t\t\t\t\t\t\t\t-aw,\n\t\t\t\t\t\t\t\t-al,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\taw,\n\t\t\t\t\t\t\t\ttl,\n\t\t\t\t\t\t\t\ttw,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tg.fill();\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\n\t\t\t\t// 数字の描画\n\t\t\t\tg.vid = \"cell_arnum_\" + cell.id;\n\t\t\t\tif (!!text) {\n\t\t\t\t\tvar option = { ratio: 0.8 };\n\t\t\t\t\tif (dir !== cell.NDIR) {\n\t\t\t\t\t\toption.ratio = 0.7;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dir === cell.UP || dir === cell.DN) {\n\t\t\t\t\t\tpx -= this.cw * 0.1;\n\t\t\t\t\t} else if (dir === cell.LT || dir === cell.RT) {\n\t\t\t\t\t\tpy += this.ch * 0.1;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.disptext(text, px, py, option);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawCircledNumbers() Cell上の丸数字をCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawCircledNumbers: function() {\n\t\t\tthis.drawCircles();\n\n\t\t\tthis.vinc(\"cell_number\", \"auto\");\n\t\t\tthis.drawNumbers_com(\n\t\t\t\tthis.getQuesNumberText,\n\t\t\t\tthis.getQuesNumberColor,\n\t\t\t\t\"cell_text_\",\n\t\t\t\t{ ratio: 0.65 }\n\t\t\t);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawTapaNumbers() draw Tapa-like clues\n\t\t//---------------------------------------------------------------------------\n\t\tdrawTapaNumbers: function() {\n\t\t\tvar g = this.vinc(\"cell_tapanum\", \"auto\");\n\t\t\tvar bw = this.bw,\n\t\t\t\tbh = this.bh;\n\t\t\tvar opts = [\n\t\t\t\t{ option: {}, pos: [{ x: 0, y: 0 }] },\n\t\t\t\t{\n\t\t\t\t\toption: { ratio: 0.56 },\n\t\t\t\t\tpos: [\n\t\t\t\t\t\t{ x: -0.4, y: -0.4 },\n\t\t\t\t\t\t{ x: 0.4, y: 0.4 }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\toption: { ratio: 0.48 },\n\t\t\t\t\tpos: [\n\t\t\t\t\t\t{ x: -0.5, y: -0.4 },\n\t\t\t\t\t\t{ x: 0.5, y: -0.4 },\n\t\t\t\t\t\t{ x: 0, y: 0.4 }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\toption: { ratio: 0.4 },\n\t\t\t\t\tpos: [\n\t\t\t\t\t\t{ x: -0.55, y: 0 },\n\t\t\t\t\t\t{ x: 0, y: -0.5 },\n\t\t\t\t\t\t{ x: 0.55, y: 0 },\n\t\t\t\t\t\t{ x: 0, y: 0.5 }\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t];\n\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i],\n\t\t\t\t\tbx = cell.bx,\n\t\t\t\t\tby = cell.by;\n\t\t\t\tvar nums = cell.qnums,\n\t\t\t\t\tn = nums.length;\n\n\t\t\t\tg.fillStyle = this.getQuesNumberColor(cell);\n\t\t\t\tfor (var k = 0; k < 4; k++) {\n\t\t\t\t\tg.vid = \"cell_text_\" + cell.id + \"_\" + k;\n\t\t\t\t\tif (k < n && nums[k] !== -1) {\n\t\t\t\t\t\tvar opt = opts[n - 1],\n\t\t\t\t\t\t\tpx = (bx + opt.pos[k].x) * bw,\n\t\t\t\t\t\t\tpy = (by + opt.pos[k].y) * bh;\n\t\t\t\t\t\tvar text = nums[k] >= 0 ? \"\" + nums[k] : \"?\";\n\t\t\t\t\t\tthis.disptext(text, px, py, opt.option);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tg.vhide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawCrosses()    Crossの丸数字をCanvasに書き込む\n\t\t// pc.drawCrossMarks() Cross上の黒点をCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawCrosses: function() {\n\t\t\tvar g = this.vinc(\"cross_base\", \"auto\", true);\n\n\t\t\tvar csize = this.cw * this.crosssize + 1;\n\t\t\tg.lineWidth = 1;\n\n\t\t\tvar option = { ratio: 0.6 };\n\t\t\tvar clist = this.range.crosses;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cross = clist[i],\n\t\t\t\t\tpx = cross.bx * this.bw,\n\t\t\t\t\tpy = cross.by * this.bh;\n\n\t\t\t\t// ○の描画\n\t\t\t\tg.vid = \"x_cp_\" + cross.id;\n\t\t\t\tif (cross.qnum !== -1) {\n\t\t\t\t\tg.fillStyle =\n\t\t\t\t\t\tcross.error === 1 || cross.qinfo === 1 ? this.errcolor1 : \"white\";\n\t\t\t\t\tg.strokeStyle = \"black\";\n\t\t\t\t\tg.shapeCircle(px, py, csize);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\n\t\t\t\t// 数字の描画\n\t\t\t\tg.vid = \"cross_text_\" + cross.id;\n\t\t\t\tif (cross.qnum >= 0) {\n\t\t\t\t\tg.fillStyle = this.quescolor;\n\t\t\t\t\tthis.disptext(\"\" + cross.qnum, px, py, option);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdrawCrossMarks: function() {\n\t\t\tvar g = this.vinc(\"cross_mark\", \"auto\", true);\n\n\t\t\tvar csize = this.cw * this.crosssize;\n\t\t\tvar clist = this.range.crosses;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cross = clist[i];\n\n\t\t\t\tg.vid = \"x_cm_\" + cross.id;\n\t\t\t\tif (cross.qnum === 1) {\n\t\t\t\t\tg.fillStyle =\n\t\t\t\t\t\tcross.error === 1 || cross.qinfo === 1\n\t\t\t\t\t\t\t? this.errcolor1\n\t\t\t\t\t\t\t: this.quescolor;\n\t\t\t\t\tg.fillCircle(cross.bx * this.bw, cross.by * this.bh, csize);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawBorders()        境界線をCanvasに書き込む\n\t\t// pc.drawBorders_common() 境界線をCanvasに書き込む(共通処理)\n\t\t// pc.getBorderColor()     境界線の設定・描画判定する\n\t\t//---------------------------------------------------------------------------\n\t\tdrawBorders: function() {\n\t\t\tthis.vinc(\"border\", \"crispEdges\", true);\n\t\t\tthis.drawBorders_common(\"b_bd_\");\n\t\t},\n\t\tdrawBorders_common: function(header) {\n\t\t\tvar g = this.context;\n\n\t\t\tvar blist = this.range.borders;\n\t\t\tfor (var i = 0; i < blist.length; i++) {\n\t\t\t\tvar border = blist[i],\n\t\t\t\t\tcolor = this.getBorderColor(border);\n\n\t\t\t\tg.vid = header + border.id;\n\t\t\t\tif (!!color) {\n\t\t\t\t\tvar px = border.bx * this.bw,\n\t\t\t\t\t\tpy = border.by * this.bh;\n\t\t\t\t\tvar lm = (this.lw + this.addlw) / 2;\n\t\t\t\t\tg.fillStyle = color;\n\t\t\t\t\tif (border.isVert()) {\n\t\t\t\t\t\tg.fillRectCenter(px, py, lm, this.bh + lm);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tg.fillRectCenter(px, py, this.bw + lm, lm);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetBorderColor: function(border) {\n\t\t\t// initialize()で上書きされる\n\t\t\treturn null;\n\t\t},\n\t\tgetBorderColor_ques: function(border) {\n\t\t\tif (border.isBorder()) {\n\t\t\t\treturn this.quescolor;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetBorderColor_qans: function(border) {\n\t\t\tvar err = border.error || border.qinfo;\n\t\t\tif (border.isBorder()) {\n\t\t\t\tif (err === 1) {\n\t\t\t\t\treturn this.errcolor1;\n\t\t\t\t} else if (err === -1) {\n\t\t\t\t\treturn this.noerrcolor;\n\t\t\t\t} else if (border.trial) {\n\t\t\t\t\treturn this.trialcolor;\n\t\t\t\t} else {\n\t\t\t\t\treturn this.qanscolor;\n\t\t\t\t}\n\t\t\t} else if (!!border.isCmp && border.isCmp()) {\n\t\t\t\treturn this.qcmpcolor;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetBorderColor_ice: function(border) {\n\t\t\tvar cell1 = border.sidecell[0],\n\t\t\t\tcell2 = border.sidecell[1];\n\t\t\tif (\n\t\t\t\tborder.inside &&\n\t\t\t\t!cell1.isnull &&\n\t\t\t\t!cell2.isnull &&\n\t\t\t\tcell1.ice() ^ cell2.ice()\n\t\t\t) {\n\t\t\t\treturn this.quescolor;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawQansBorders()    問題の境界線をCanvasに書き込む\n\t\t// pc.drawQuesBorders()    回答の境界線をCanvasに書き込む\n\t\t// pc.getQuesBorderColor() 問題の境界線の設定・描画判定する\n\t\t// pc.getQansBorderColor() 回答の境界線の設定・描画判定する\n\t\t//---------------------------------------------------------------------------\n\t\tdrawQuesBorders: function() {\n\t\t\tthis.vinc(\"border_question\", \"crispEdges\", true);\n\t\t\tthis.getBorderColor = this.getQuesBorderColor;\n\t\t\tthis.drawBorders_common(\"b_bdques_\");\n\t\t},\n\t\tdrawQansBorders: function() {\n\t\t\tthis.vinc(\"border_answer\", \"crispEdges\", true);\n\t\t\tthis.getBorderColor = this.getQansBorderColor;\n\t\t\tthis.drawBorders_common(\"b_bdans_\");\n\t\t},\n\t\tgetQuesBorderColor: function(border) {\n\t\t\tif (border.ques >= 1) {\n\t\t\t\treturn this.getBorderColor_ques(border);\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetQansBorderColor: function(border) {\n\t\t\tif (border.qans >= 1) {\n\t\t\t\treturn this.getBorderColor_qans(border);\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawBorderQsubs() 境界線用の補助記号をCanvasに書き込む\n\t\t// pc.drawBoxBorders()  境界線と黒マスの間の線を描画する\n\t\t//---------------------------------------------------------------------------\n\t\tdrawBorderQsubs: function() {\n\t\t\tvar g = this.vinc(\"border_qsub\", \"crispEdges\", true);\n\n\t\t\tvar m = this.cw * 0.15; //Margin\n\t\t\tvar blist = this.range.borders;\n\t\t\tfor (var i = 0; i < blist.length; i++) {\n\t\t\t\tvar border = blist[i];\n\n\t\t\t\tg.vid = \"b_qsub1_\" + border.id;\n\t\t\t\tif (border.qsub === 1) {\n\t\t\t\t\tvar px = border.bx * this.bw,\n\t\t\t\t\t\tpy = border.by * this.bh;\n\t\t\t\t\tg.fillStyle = !border.trial ? this.pekecolor : this.trialcolor;\n\t\t\t\t\tif (border.isHorz()) {\n\t\t\t\t\t\tg.fillRectCenter(px, py, 0.5, this.bh - m);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tg.fillRectCenter(px, py, this.bw - m, 0.5);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// 外枠がない場合は考慮していません\n\t\tdrawBoxBorders: function(tileflag) {\n\t\t\tvar g = this.vinc(\"boxborder\", \"crispEdges\");\n\n\t\t\tvar lm = this.lm;\n\t\t\tvar cw = this.cw;\n\t\t\tvar ch = this.ch;\n\n\t\t\tg.strokeStyle = this.bbcolor;\n\t\t\tg.lineWidth = 1;\n\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i],\n\t\t\t\t\tisdraw = cell.qans === 1;\n\t\t\t\tif (this.pid === \"stostone\" && this.board.falling) {\n\t\t\t\t\tisdraw = false;\n\t\t\t\t}\n\n\t\t\t\tg.vid = \"c_bb_\" + cell.id;\n\t\t\t\tif (isdraw) {\n\t\t\t\t\tvar px = (cell.bx - 1) * this.bw,\n\t\t\t\t\t\tpy = (cell.by - 1) * this.bh;\n\t\t\t\t\tvar px0 = px - 0.5,\n\t\t\t\t\t\tpx1 = px + lm + 0.5,\n\t\t\t\t\t\tpx2 = px + cw - lm - 0.5,\n\t\t\t\t\t\tpx3 = px + cw + 0.5;\n\t\t\t\t\tvar py0 = py - 0.5,\n\t\t\t\t\t\tpy1 = py + lm + 0.5,\n\t\t\t\t\t\tpy2 = py + ch - lm - 0.5,\n\t\t\t\t\t\tpy3 = py + ch + 0.5;\n\n\t\t\t\t\t// この関数を呼ぶ場合は全てhasborder===1なので\n\t\t\t\t\t// 外枠用の考慮部分を削除しています。\n\t\t\t\t\tvar adb = cell.adjborder;\n\t\t\t\t\tvar UPin = cell.by > 2,\n\t\t\t\t\t\tDNin = cell.by < 2 * this.board.rows - 2;\n\t\t\t\t\tvar LTin = cell.bx > 2,\n\t\t\t\t\t\tRTin = cell.bx < 2 * this.board.cols - 2;\n\n\t\t\t\t\tvar isUP = !UPin || adb.top.ques === 1;\n\t\t\t\t\tvar isDN = !DNin || adb.bottom.ques === 1;\n\t\t\t\t\tvar isLT = !LTin || adb.left.ques === 1;\n\t\t\t\t\tvar isRT = !RTin || adb.right.ques === 1;\n\n\t\t\t\t\tvar isUL =\n\t\t\t\t\t\t!UPin ||\n\t\t\t\t\t\t!LTin ||\n\t\t\t\t\t\tcell.relbd(-2, -1).ques === 1 ||\n\t\t\t\t\t\tcell.relbd(-1, -2).ques === 1;\n\t\t\t\t\tvar isUR =\n\t\t\t\t\t\t!UPin ||\n\t\t\t\t\t\t!RTin ||\n\t\t\t\t\t\tcell.relbd(2, -1).ques === 1 ||\n\t\t\t\t\t\tcell.relbd(1, -2).ques === 1;\n\t\t\t\t\tvar isDL =\n\t\t\t\t\t\t!DNin ||\n\t\t\t\t\t\t!LTin ||\n\t\t\t\t\t\tcell.relbd(-2, 1).ques === 1 ||\n\t\t\t\t\t\tcell.relbd(-1, 2).ques === 1;\n\t\t\t\t\tvar isDR =\n\t\t\t\t\t\t!DNin ||\n\t\t\t\t\t\t!RTin ||\n\t\t\t\t\t\tcell.relbd(2, 1).ques === 1 ||\n\t\t\t\t\t\tcell.relbd(1, 2).ques === 1;\n\n\t\t\t\t\tg.beginPath();\n\n\t\t\t\t\tif (isUP || isUL) {\n\t\t\t\t\t\tg.moveTo(px1, py1);\n\t\t\t\t\t}\n\t\t\t\t\tif (!isUP && isUL) {\n\t\t\t\t\t\tg.lineTo(px1, py0);\n\t\t\t\t\t}\n\t\t\t\t\tif (!isUP && isUR) {\n\t\t\t\t\t\tg.moveTo(px2, py0);\n\t\t\t\t\t}\n\t\t\t\t\tif (isUP || isUR) {\n\t\t\t\t\t\tg.lineTo(px2, py1);\n\t\t\t\t\t} else if (isRT || isUR) {\n\t\t\t\t\t\tg.moveTo(px2, py1);\n\t\t\t\t\t}\n\t\t\t\t\tif (!isRT && isUR) {\n\t\t\t\t\t\tg.lineTo(px3, py1);\n\t\t\t\t\t}\n\t\t\t\t\tif (!isRT && isDR) {\n\t\t\t\t\t\tg.moveTo(px3, py2);\n\t\t\t\t\t}\n\t\t\t\t\tif (isRT || isDR) {\n\t\t\t\t\t\tg.lineTo(px2, py2);\n\t\t\t\t\t} else if (isDN || isDR) {\n\t\t\t\t\t\tg.moveTo(px2, py2);\n\t\t\t\t\t}\n\t\t\t\t\tif (!isDN && isDR) {\n\t\t\t\t\t\tg.lineTo(px2, py3);\n\t\t\t\t\t}\n\t\t\t\t\tif (!isDN && isDL) {\n\t\t\t\t\t\tg.moveTo(px1, py3);\n\t\t\t\t\t}\n\t\t\t\t\tif (isDN || isDL) {\n\t\t\t\t\t\tg.lineTo(px1, py2);\n\t\t\t\t\t} else if (isLT || isDL) {\n\t\t\t\t\t\tg.moveTo(px1, py2);\n\t\t\t\t\t}\n\t\t\t\t\tif (!isLT && isDL) {\n\t\t\t\t\t\tg.lineTo(px0, py2);\n\t\t\t\t\t}\n\t\t\t\t\tif (!isLT && isUL) {\n\t\t\t\t\t\tg.moveTo(px0, py1);\n\t\t\t\t\t}\n\t\t\t\t\tif (isLT || isUL) {\n\t\t\t\t\t\tg.lineTo(px1, py1);\n\t\t\t\t\t}\n\n\t\t\t\t\tg.stroke();\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawLines()    回答の線をCanvasに書き込む\n\t\t// pc.getLineColor() 描画する線の色を設定する\n\t\t//---------------------------------------------------------------------------\n\t\tdrawLines: function() {\n\t\t\tvar g = this.vinc(\"line\", \"crispEdges\");\n\n\t\t\tvar blist = this.range.borders;\n\t\t\tfor (var i = 0; i < blist.length; i++) {\n\t\t\t\tvar border = blist[i],\n\t\t\t\t\tcolor = this.getLineColor(border);\n\n\t\t\t\tg.vid = \"b_line_\" + border.id;\n\t\t\t\tif (!!color) {\n\t\t\t\t\tvar px = border.bx * this.bw,\n\t\t\t\t\t\tpy = border.by * this.bh;\n\t\t\t\t\tvar isvert = this.board.borderAsLine === border.isVert();\n\t\t\t\t\tvar lm = this.lm + this.addlw / 2;\n\n\t\t\t\t\tg.fillStyle = color;\n\t\t\t\t\tif (isvert) {\n\t\t\t\t\t\tg.fillRectCenter(px, py, lm, this.bh + lm);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tg.fillRectCenter(px, py, this.bw + lm, lm);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.addlw = 0;\n\t\t},\n\t\tgetLineColor: function(border) {\n\t\t\tthis.addlw = 0;\n\t\t\tif (border.isLine()) {\n\t\t\t\tvar info = border.error || border.qinfo,\n\t\t\t\t\tpuzzle = this.puzzle;\n\t\t\t\tvar isIrowake =\n\t\t\t\t\tpuzzle.execConfig(\"irowake\") && border.path && border.path.color;\n\t\t\t\tvar isDispmove = puzzle.execConfig(\"dispmove\");\n\n\t\t\t\tif (border.trial && puzzle.execConfig(\"irowake\")) {\n\t\t\t\t\tthis.addlw = -this.lm;\n\t\t\t\t} else if (info === 1) {\n\t\t\t\t\tthis.addlw = 1;\n\t\t\t\t}\n\n\t\t\t\tif (info === 1) {\n\t\t\t\t\treturn this.errlinecolor;\n\t\t\t\t} else if (info === -1) {\n\t\t\t\t\treturn this.noerrcolor;\n\t\t\t\t} else if (isDispmove) {\n\t\t\t\t\treturn border.trial ? this.movetrialcolor : this.movelinecolor;\n\t\t\t\t} else if (isIrowake) {\n\t\t\t\t\treturn border.path.color;\n\t\t\t\t} else {\n\t\t\t\t\treturn border.trial ? this.trialcolor : this.linecolor;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawTip()    動いたことを示す矢印のやじりを書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawTip: function() {\n\t\t\tvar g = this.vinc(\"cell_linetip\", \"auto\");\n\n\t\t\tvar tsize = this.cw * 0.3;\n\t\t\tvar tplus = this.cw * 0.05;\n\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i],\n\t\t\t\t\tdir = 0,\n\t\t\t\t\tborder = null;\n\t\t\t\tif (\n\t\t\t\t\tcell.lcnt === 1 &&\n\t\t\t\t\tcell.qnum === -1 &&\n\t\t\t\t\t!this.puzzle.execConfig(\"dispmove\")\n\t\t\t\t) {\n\t\t\t\t\tvar adb = cell.adjborder;\n\t\t\t\t\tif (adb.top.isLine()) {\n\t\t\t\t\t\tdir = 2;\n\t\t\t\t\t\tborder = adb.top;\n\t\t\t\t\t} else if (adb.bottom.isLine()) {\n\t\t\t\t\t\tdir = 1;\n\t\t\t\t\t\tborder = adb.bottom;\n\t\t\t\t\t} else if (adb.left.isLine()) {\n\t\t\t\t\t\tdir = 4;\n\t\t\t\t\t\tborder = adb.left;\n\t\t\t\t\t} else if (adb.right.isLine()) {\n\t\t\t\t\t\tdir = 3;\n\t\t\t\t\t\tborder = adb.right;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tg.vid = \"c_tip_\" + cell.id;\n\t\t\t\tif (dir !== 0) {\n\t\t\t\t\tg.strokeStyle = this.getLineColor(border) || this.linecolor;\n\t\t\t\t\tg.lineWidth = this.lw + this.addlw; //LineWidth\n\n\t\t\t\t\tg.beginPath();\n\t\t\t\t\tvar px = cell.bx * this.bw + 1,\n\t\t\t\t\t\tpy = cell.by * this.bh + 1;\n\t\t\t\t\tif (dir === 1) {\n\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t-tsize,\n\t\t\t\t\t\t\ttsize,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t-tplus,\n\t\t\t\t\t\t\ttsize,\n\t\t\t\t\t\t\ttsize,\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (dir === 2) {\n\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t-tsize,\n\t\t\t\t\t\t\t-tsize,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\ttplus,\n\t\t\t\t\t\t\ttsize,\n\t\t\t\t\t\t\t-tsize,\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (dir === 3) {\n\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\ttsize,\n\t\t\t\t\t\t\t-tsize,\n\t\t\t\t\t\t\t-tplus,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\ttsize,\n\t\t\t\t\t\t\ttsize,\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (dir === 4) {\n\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t-tsize,\n\t\t\t\t\t\t\t-tsize,\n\t\t\t\t\t\t\ttplus,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t-tsize,\n\t\t\t\t\t\t\ttsize,\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tg.stroke();\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawPekes()    境界線上の×をCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawPekes: function() {\n\t\t\tvar g = this.vinc(\"border_peke\", \"auto\", true);\n\n\t\t\tvar size = this.cw * 0.15 + 1;\n\t\t\tif (size < 4) {\n\t\t\t\tsize = 4;\n\t\t\t}\n\t\t\tg.lineWidth = (1 + this.cw / 40) | 0;\n\n\t\t\tvar blist = this.range.borders;\n\t\t\tfor (var i = 0; i < blist.length; i++) {\n\t\t\t\tvar border = blist[i];\n\t\t\t\tg.vid = \"b_peke_\" + border.id;\n\t\t\t\tif (border.qsub === 2) {\n\t\t\t\t\tg.strokeStyle = !border.trial ? this.pekecolor : this.trialcolor;\n\t\t\t\t\tg.strokeCross(border.bx * this.bw, border.by * this.bh, size - 1);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawBaseMarks() 交点のdotをCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawBaseMarks: function() {\n\t\t\tvar g = this.vinc(\"cross_mark\", \"auto\", true);\n\t\t\tg.fillStyle = this.quescolor;\n\n\t\t\tvar size = this.cw / 10;\n\t\t\tvar clist = this.range.crosses;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cross = clist[i];\n\t\t\t\tg.vid = \"x_cm_\" + cross.id;\n\t\t\t\tg.fillCircle(cross.bx * this.bw, cross.by * this.bh, size / 2);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawTriangle()   三角形をCanvasに書き込む\n\t\t// pc.drawTriangle1()  三角形をCanvasに書き込む(1マスのみ)\n\t\t//---------------------------------------------------------------------------\n\t\tdrawTriangle: function() {\n\t\t\tvar g = this.vinc(\"cell_triangle\", \"crispEdges\");\n\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i],\n\t\t\t\t\tnum = cell.ques !== 0 ? cell.ques : cell.qans;\n\n\t\t\t\tg.vid = \"c_tri_\" + cell.id;\n\t\t\t\tif (num >= 2 && num <= 5) {\n\t\t\t\t\tg.fillStyle = this.getTriangleColor(cell);\n\t\t\t\t\tthis.drawTriangle1(cell.bx * this.bw, cell.by * this.bh, num);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetTriangleColor: function(cell) {\n\t\t\treturn this.quescolor;\n\t\t},\n\t\tdrawTriangle1: function(px, py, num) {\n\t\t\tvar g = this.context;\n\t\t\tvar mgn = this.pid === \"reflect\" ? 1 : 0.5,\n\t\t\t\tbw = this.bw + 1 - mgn,\n\t\t\t\tbh = this.bh + 1 - mgn;\n\t\t\tg.beginPath();\n\t\t\tswitch (num) {\n\t\t\t\tcase 2:\n\t\t\t\t\tg.setOffsetLinePath(px, py, -bw, -bh, -bw, bh, bw, bh, true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tg.setOffsetLinePath(px, py, bw, -bh, -bw, bh, bw, bh, true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tg.setOffsetLinePath(px, py, -bw, -bh, bw, -bh, bw, bh, true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\tg.setOffsetLinePath(px, py, -bw, -bh, bw, -bh, -bw, bh, true);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tg.fill();\n\t\t},\n\t\tdrawTriangle2: function(px, py, dir) {\n\t\t\tvar g = this.context;\n\t\t\tvar bw = this.bw + 1,\n\t\t\t\tbh = this.bh + 1;\n\t\t\tg.beginPath();\n\t\t\tswitch (dir) {\n\t\t\t\tcase 1:\n\t\t\t\t\tg.setOffsetLinePath(px, py, 0, 0, -bw, -bh, bw, -bh, true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tg.setOffsetLinePath(px, py, 0, 0, -bw, bh, bw, bh, true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tg.setOffsetLinePath(px, py, 0, 0, -bw, -bh, -bw, bh, true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tg.setOffsetLinePath(px, py, 0, 0, bw, -bh, bw, bh, true);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tg.fill();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawMBs()    Cell上の○,×をCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawMBs: function() {\n\t\t\tvar g = this.vinc(\"cell_mb\", \"auto\", true);\n\t\t\tg.lineWidth = 1;\n\n\t\t\tvar rsize = this.cw * 0.35;\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i],\n\t\t\t\t\tpx,\n\t\t\t\t\tpy;\n\t\t\t\tif (cell.qsub > 0) {\n\t\t\t\t\tpx = cell.bx * this.bw;\n\t\t\t\t\tpy = cell.by * this.bh;\n\t\t\t\t\tg.strokeStyle = !cell.trial ? this.mbcolor : \"rgb(192, 192, 192)\";\n\t\t\t\t}\n\n\t\t\t\tg.vid = \"c_MB1_\" + cell.id;\n\t\t\t\tif (cell.qsub === 1) {\n\t\t\t\t\tg.strokeCircle(px, py, rsize);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\n\t\t\t\tg.vid = \"c_MB2_\" + cell.id;\n\t\t\t\tif (cell.qsub === 2) {\n\t\t\t\t\tg.strokeCross(px, py, rsize);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawBorderAuxDir()    directional aux marks\n\t\t//---------------------------------------------------------------------------\n\t\tdrawBorderAuxDir: function() {\n\t\t\tvar g = this.vinc(\"border_dirsub\", \"crispEdges\");\n\t\t\tvar ssize = this.cw * 0.1;\n\n\t\t\tg.lineWidth = this.cw * 0.1;\n\n\t\t\tvar blist = this.range.borders;\n\t\t\tfor (var i = 0; i < blist.length; i++) {\n\t\t\t\tvar border = blist[i],\n\t\t\t\t\tpx = border.bx * this.bw,\n\t\t\t\t\tpy = border.by * this.bh,\n\t\t\t\t\tdir = border.qsub - 10;\n\n\t\t\t\t// 向き補助記号の描画\n\t\t\t\tg.vid = \"b_daux_\" + border.id;\n\t\t\t\tif (dir >= 1 && dir <= 8) {\n\t\t\t\t\tg.strokeStyle = !border.trial ? \"rgb(64,64,64)\" : this.trialcolor;\n\t\t\t\t\tg.beginPath();\n\t\t\t\t\tswitch (dir) {\n\t\t\t\t\t\tcase border.UP:\n\t\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t\t-ssize * 2,\n\t\t\t\t\t\t\t\t+ssize,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t-ssize,\n\t\t\t\t\t\t\t\t+ssize * 2,\n\t\t\t\t\t\t\t\t+ssize,\n\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase border.DN:\n\t\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t\t-ssize * 2,\n\t\t\t\t\t\t\t\t-ssize,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t+ssize,\n\t\t\t\t\t\t\t\t+ssize * 2,\n\t\t\t\t\t\t\t\t-ssize,\n\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase border.LT:\n\t\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t\t+ssize,\n\t\t\t\t\t\t\t\t-ssize * 2,\n\t\t\t\t\t\t\t\t-ssize,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t+ssize,\n\t\t\t\t\t\t\t\t+ssize * 2,\n\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase border.RT:\n\t\t\t\t\t\t\tg.setOffsetLinePath(\n\t\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\t\t-ssize,\n\t\t\t\t\t\t\t\t-ssize * 2,\n\t\t\t\t\t\t\t\t+ssize,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t-ssize,\n\t\t\t\t\t\t\t\t+ssize * 2,\n\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tg.stroke();\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawCircles()          数字や白丸黒丸等を表すCellの丸を書き込む\n\t\t// pc.getCircleStrokeColor() 描画する円の線の色を設定する\n\t\t// pc.getCircleFillColor()   描画する円の背景色を設定する\n\t\t//---------------------------------------------------------------------------\n\t\tdrawCircles: function() {\n\t\t\tvar g = this.vinc(\"cell_circle\", \"auto\", true);\n\n\t\t\tvar ra = this.circleratio;\n\t\t\tvar rsize_stroke = (this.cw * (ra[0] + ra[1])) / 2,\n\t\t\t\trsize_fill = this.cw * ra[0];\n\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i];\n\n\t\t\t\tvar color = this.getCircleFillColor(cell);\n\t\t\t\tg.vid = \"c_cirb_\" + cell.id;\n\t\t\t\tif (!!color) {\n\t\t\t\t\tg.fillStyle = color;\n\t\t\t\t\tg.fillCircle(cell.bx * this.bw, cell.by * this.bh, rsize_fill);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tg = this.vinc(\"cell_circle_stroke\", \"auto\", true);\n\t\t\tg.lineWidth = Math.max(this.cw * (ra[0] - ra[1]), 1);\n\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i];\n\n\t\t\t\tvar color = this.getCircleStrokeColor(cell);\n\t\t\t\tg.vid = \"c_cira_\" + cell.id;\n\t\t\t\tif (!!color) {\n\t\t\t\t\tg.strokeStyle = color;\n\t\t\t\t\tg.strokeCircle(cell.bx * this.bw, cell.by * this.bh, rsize_stroke);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetCircleStrokeColor: function(cell) {\n\t\t\t// initialize()で上書きされる\n\t\t\treturn null;\n\t\t},\n\t\tgetCircleStrokeColor_qnum: function(cell) {\n\t\t\tvar puzzle = this.puzzle,\n\t\t\t\terror = cell.error || cell.qinfo;\n\t\t\tvar isdrawmove = puzzle.execConfig(\"dispmove\");\n\t\t\tvar num = (!isdrawmove ? cell : cell.base).qnum;\n\t\t\tif (num !== -1) {\n\t\t\t\tif (isdrawmove && puzzle.mouse.mouseCell === cell) {\n\t\t\t\t\treturn this.movecolor;\n\t\t\t\t} else if (error === 1 || error === 4) {\n\t\t\t\t\treturn this.errcolor1;\n\t\t\t\t} else {\n\t\t\t\t\treturn this.quescolor;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetCircleStrokeColor_qnum2: function(cell) {\n\t\t\tif (cell.qnum === 1) {\n\t\t\t\treturn cell.error === 1 ? this.errcolor1 : this.quescolor;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\tgetCircleFillColor: function(cell) {\n\t\t\t// initialize()で上書きされる\n\t\t\treturn null;\n\t\t},\n\t\tgetCircleFillColor_qnum: function(cell) {\n\t\t\tif (cell.qnum !== -1) {\n\t\t\t\tvar error = cell.error || cell.qinfo;\n\t\t\t\tif (error === 1 || error === 4) {\n\t\t\t\t\treturn this.errbcolor1;\n\t\t\t\t} else {\n\t\t\t\t\treturn this.circlebasecolor;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetCircleFillColor_qnum2: function(cell) {\n\t\t\tif (cell.qnum === 1) {\n\t\t\t\treturn cell.error === 1 ? this.errbcolor1 : \"white\";\n\t\t\t} else if (cell.qnum === 2) {\n\t\t\t\treturn cell.error === 1 ? this.errcolor1 : this.quescolor;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetCircleFillColor_qcmp: function(cell) {\n\t\t\tvar puzzle = this.puzzle,\n\t\t\t\terror = cell.error || cell.qinfo;\n\t\t\tvar isdrawmove = puzzle.execConfig(\"dispmove\");\n\t\t\tvar num = (!isdrawmove ? cell : cell.base).qnum;\n\t\t\tif (num !== -1) {\n\t\t\t\tif (error === 1 || error === 4) {\n\t\t\t\t\treturn this.errbcolor1;\n\t\t\t\t} else if (cell.isCmp()) {\n\t\t\t\t\treturn this.qcmpcolor;\n\t\t\t\t} else {\n\t\t\t\t\treturn this.circlebasecolor;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawDepartures()    移動系パズルで、移動元を示す記号を書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawDepartures: function() {\n\t\t\tvar g = this.vinc(\"cell_depart\", \"auto\", true);\n\t\t\tg.fillStyle = this.movelinecolor;\n\n\t\t\tvar rsize = this.cw * 0.15;\n\t\t\tvar isdrawmove = this.puzzle.execConfig(\"dispmove\");\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i];\n\n\t\t\t\tg.vid = \"c_dcir_\" + cell.id;\n\t\t\t\tif (isdrawmove && cell.isDeparture()) {\n\t\t\t\t\tvar px = cell.bx * this.bw,\n\t\t\t\t\t\tpy = cell.by * this.bh;\n\t\t\t\t\tg.fillCircle(px, py, rsize);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawLineParts()   ╋などをCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawLineParts: function() {\n\t\t\tvar g = this.vinc(\"cell_lineparts\", \"crispEdges\");\n\t\t\tg.fillStyle = this.quescolor;\n\n\t\t\tvar lm = this.lm,\n\t\t\t\tbw = this.bw,\n\t\t\t\tbh = this.bh;\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i],\n\t\t\t\t\tqu = cell.ques;\n\n\t\t\t\tg.vid = \"c_lp_\" + cell.id;\n\t\t\t\tif (qu >= 11 && qu <= 17) {\n\t\t\t\t\tvar px = cell.bx * this.bw,\n\t\t\t\t\t\tpy = cell.by * this.bh;\n\t\t\t\t\tvar px0 = px - bw - 0.5,\n\t\t\t\t\t\tpx1 = px - lm,\n\t\t\t\t\t\tpx2 = px + lm,\n\t\t\t\t\t\tpx3 = px + bw + 0.5;\n\t\t\t\t\tvar py0 = py - bh - 0.5,\n\t\t\t\t\t\tpy1 = py - lm,\n\t\t\t\t\t\tpy2 = py + lm,\n\t\t\t\t\t\tpy3 = py + bh + 0.5;\n\n\t\t\t\t\tvar flag = { 11: 15, 12: 3, 13: 12, 14: 9, 15: 5, 16: 6, 17: 10 }[qu];\n\t\t\t\t\tg.beginPath();\n\t\t\t\t\tg.moveTo(px1, py1);\n\t\t\t\t\tif (flag & 1) {\n\t\t\t\t\t\tg.lineTo(px1, py0);\n\t\t\t\t\t\tg.lineTo(px2, py0);\n\t\t\t\t\t} // top\n\t\t\t\t\tg.lineTo(px2, py1);\n\t\t\t\t\tif (flag & 8) {\n\t\t\t\t\t\tg.lineTo(px3, py1);\n\t\t\t\t\t\tg.lineTo(px3, py2);\n\t\t\t\t\t} // right\n\t\t\t\t\tg.lineTo(px2, py2);\n\t\t\t\t\tif (flag & 2) {\n\t\t\t\t\t\tg.lineTo(px2, py3);\n\t\t\t\t\t\tg.lineTo(px1, py3);\n\t\t\t\t\t} // bottom\n\t\t\t\t\tg.lineTo(px1, py2);\n\t\t\t\t\tif (flag & 4) {\n\t\t\t\t\t\tg.lineTo(px0, py2);\n\t\t\t\t\t\tg.lineTo(px0, py1);\n\t\t\t\t\t} // left\n\t\t\t\t\tg.closePath();\n\t\t\t\t\tg.fill();\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawTateyokos()   縦棒・横棒をCanvasに書き込む\n\t\t// pc.getBarColor()     縦棒・横棒の色を取得する\n\t\t//---------------------------------------------------------------------------\n\t\tdrawTateyokos: function() {\n\t\t\tvar g = this.vinc(\"cell_tateyoko\", \"crispEdges\");\n\t\t\tvar lm = Math.max(this.cw / 6, 3) / 2; //LineWidth\n\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i],\n\t\t\t\t\tpx = cell.bx * this.bw,\n\t\t\t\t\tpy = cell.by * this.bh;\n\t\t\t\tvar qa = cell.qans;\n\n\t\t\t\tg.vid = \"c_bar1_\" + cell.id;\n\t\t\t\tif (qa === 11 || qa === 12) {\n\t\t\t\t\tg.fillStyle = this.getBarColor(cell, true);\n\t\t\t\t\tg.fillRectCenter(px, py, lm + this.addlw / 2, this.bh);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\n\t\t\t\tg.vid = \"c_bar2_\" + cell.id;\n\t\t\t\tif (qa === 11 || qa === 13) {\n\t\t\t\t\tg.fillStyle = this.getBarColor(cell, false);\n\t\t\t\t\tg.fillRectCenter(px, py, this.bw, lm + this.addlw / 2);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.addlw = 0;\n\t\t},\n\n\t\tgetBarColor: function(cell, vert) {\n\t\t\tvar err = cell.error,\n\t\t\t\tisErr =\n\t\t\t\t\terr === 1 || err === 4 || (err === 5 && vert) || (err === 6 && !vert),\n\t\t\t\tcolor = \"\";\n\t\t\tthis.addlw = 0;\n\t\t\tif (isErr) {\n\t\t\t\tcolor = this.errlinecolor;\n\t\t\t\tthis.addlw = 1;\n\t\t\t} else if (err !== 0) {\n\t\t\t\tcolor = this.noerrcolor;\n\t\t\t} else if (cell.trial) {\n\t\t\t\tcolor = this.trialcolor;\n\t\t\t} else {\n\t\t\t\tcolor = this.linecolor;\n\t\t\t}\n\t\t\treturn color;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawQues51()         Ques===51があるようなパズルで、描画関数を呼び出す\n\t\t// pc.drawSlash51Cells()   [＼]のナナメ線をCanvasに書き込む\n\t\t// pc.drawSlash51ExCells() ExCell上の[＼]のナナメ線をCanvasに書き込む\n\t\t// pc.drawExCellGrid()     ExCell間の境界線をCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawQues51: function() {\n\t\t\tthis.drawExCellGrid();\n\t\t\tthis.drawTargetTriangle();\n\t\t\tthis.drawSlash51Cells();\n\t\t\tthis.drawSlash51ExCells();\n\t\t},\n\t\tdrawSlash51Cells: function() {\n\t\t\tvar g = this.vinc(\"cell_ques51\", \"crispEdges\", true);\n\n\t\t\tg.strokeStyle = this.quescolor;\n\t\t\tg.lineWidth = 1;\n\t\t\tvar clist = this.range.cells;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i];\n\n\t\t\t\tg.vid = \"c_slash51_\" + cell.id;\n\t\t\t\tif (cell.ques === 51) {\n\t\t\t\t\tvar px = cell.bx * this.bw,\n\t\t\t\t\t\tpy = cell.by * this.bh;\n\t\t\t\t\tg.strokeLine(px - this.bw, py - this.bh, px + this.bw, py + this.bh);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\n\t\t\t\tg.vid = \"c_slash51b_\" + cell.id;\n\t\t\t\tif (cell.ques === 51 && cell.dirs51 === 4) {\n\t\t\t\t\tvar px = cell.bx * this.bw,\n\t\t\t\t\t\tpy = cell.by * this.bh;\n\t\t\t\t\tg.strokeLine(px - this.bw, py + this.bh, px + this.bw, py - this.bh);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdrawSlash51ExCells: function() {\n\t\t\tvar g = this.vinc(\"excell_ques51\", \"crispEdges\", true);\n\n\t\t\tg.strokeStyle = this.quescolor;\n\t\t\tg.lineWidth = 1;\n\t\t\tvar exlist = this.range.excells;\n\t\t\tfor (var i = 0; i < exlist.length; i++) {\n\t\t\t\tvar excell = exlist[i],\n\t\t\t\t\tpx = excell.bx * this.bw,\n\t\t\t\t\tpy = excell.by * this.bh;\n\t\t\t\tg.vid = \"ex_slash51_\" + excell.id;\n\t\t\t\tg.strokeLine(px - this.bw, py - this.bh, px + this.bw, py + this.bh);\n\t\t\t}\n\t\t},\n\t\tdrawExCellGrid: function() {\n\t\t\tvar g = this.vinc(\"grid_excell\", \"crispEdges\", true);\n\n\t\t\tg.fillStyle = this.quescolor;\n\t\t\tvar exlist = this.range.excells;\n\t\t\tfor (var i = 0; i < exlist.length; i++) {\n\t\t\t\tvar excell = exlist[i];\n\t\t\t\tvar px = excell.bx * this.bw,\n\t\t\t\t\tpy = excell.by * this.bh;\n\n\t\t\t\tg.vid = \"ex_bdx_\" + excell.id;\n\t\t\t\tif (excell.by === -1 && excell.bx < this.board.maxbx) {\n\t\t\t\t\tg.fillRectCenter(px + this.bw, py, 0.5, this.bh);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\n\t\t\t\tg.vid = \"ex_bdy_\" + excell.id;\n\t\t\t\tif (excell.bx === -1 && excell.by < this.board.maxby) {\n\t\t\t\t\tg.fillRectCenter(px, py + this.bh, this.bw, 0.5);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawQuesNumbersOn51()   [＼]に数字を記入する\n\t\t// pc.drawQuesNumbersOn51_1() 1つの[＼]に数字を記入する\n\t\t//---------------------------------------------------------------------------\n\t\tdrawQuesNumbersOn51: function() {\n\t\t\tthis.vinc(\"cell_number51\", \"auto\");\n\n\t\t\tvar d = this.range;\n\t\t\tfor (var bx = d.x1 | 1; bx <= d.x2; bx += 2) {\n\t\t\t\tfor (var by = d.y1 | 1; by <= d.y2; by += 2) {\n\t\t\t\t\tvar piece = this.board.getobj(bx, by); /* cell or excell */\n\t\t\t\t\tif (!piece.isnull) {\n\t\t\t\t\t\tif (piece.dirs51 === 4) {\n\t\t\t\t\t\t\tthis.drawQuesNumbersOn51_2(piece);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.drawQuesNumbersOn51_1(piece);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdrawQuesNumbersOn51_1: function(piece) {\n\t\t\t/* cell or excell */\n\t\t\tvar g = this.context,\n\t\t\t\tval,\n\t\t\t\tadj,\n\t\t\t\tpx = piece.bx * this.bw,\n\t\t\t\tpy = piece.by * this.bh;\n\t\t\tvar option = { ratio: 0.45 };\n\t\t\tg.fillStyle =\n\t\t\t\tpiece.error === 1 || piece.qinfo === 1\n\t\t\t\t\t? this.errcolor1\n\t\t\t\t\t: this.quescolor;\n\n\t\t\tadj = piece.relcell(2, 0);\n\t\t\tval = piece.ques === 51 ? piece.qnum : -1;\n\n\t\t\tg.vid = [piece.group, piece.id, \"text_ques51_rt\"].join(\"_\");\n\t\t\tif (val >= 0 && !adj.isnull && adj.ques !== 51) {\n\t\t\t\toption.position = this.TOPRIGHT;\n\t\t\t\tthis.disptext(\"\" + val, px, py, option);\n\t\t\t} else {\n\t\t\t\tg.vhide();\n\t\t\t}\n\n\t\t\tadj = piece.relcell(0, 2);\n\t\t\tval = piece.ques === 51 ? piece.qnum2 : -1;\n\n\t\t\tg.vid = [piece.group, piece.id, \"text_ques51_dn\"].join(\"_\");\n\t\t\tif (val >= 0 && !adj.isnull && adj.ques !== 51) {\n\t\t\t\toption.position = this.BOTTOMLEFT;\n\t\t\t\tthis.disptext(\"\" + val, px, py, option);\n\t\t\t} else {\n\t\t\t\tg.vhide();\n\t\t\t}\n\t\t},\n\t\tdrawQuesNumbersOn51_2: function(piece) {\n\t\t\tvar g = this.context,\n\t\t\t\tval,\n\t\t\t\tpx = piece.bx * this.bw,\n\t\t\t\tpy = piece.by * this.bh;\n\t\t\tvar option = { ratio: 0.4, width: [0.35, 0.23, 0.15] };\n\t\t\tg.fillStyle =\n\t\t\t\tpiece.error === 1 || piece.qinfo === 1\n\t\t\t\t\t? this.errcolor1\n\t\t\t\t\t: this.quescolor;\n\n\t\t\tfor (var dir = 1; dir <= 4; dir++) {\n\t\t\t\tval = piece.getQnumDir(dir);\n\t\t\t\tg.vid = [piece.group, piece.id, \"text_ques51\", dir].join(\"_\");\n\t\t\t\tif (val >= 0) {\n\t\t\t\t\toption.position = dir + 5;\n\t\t\t\t\tthis.disptext(\"\" + val, px, py, option);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawTarget()  入力対象となる場所を描画する\n\t\t// pc.drawCursor()  キーボードからの入力対象をCanvasに書き込む\n\t\t// pc.drawTargetSubNumber() Cellの補助数字の入力対象に背景色をつける\n\t\t// pc.drawTargetTriangle() [＼]のうち入力対象のほうに背景色をつける\n\t\t//---------------------------------------------------------------------------\n\t\tdrawTarget: function() {\n\t\t\tthis.drawCursor(true, this.puzzle.editmode);\n\t\t},\n\n\t\tdrawCursor: function(islarge, isdraw) {\n\t\t\tthis.drawRawCursor(\n\t\t\t\t\"target_cursor\",\n\t\t\t\t\"\",\n\t\t\t\tthis.puzzle.cursor,\n\t\t\t\tislarge,\n\t\t\t\tisdraw !== false && this.puzzle.getConfig(\"cursor\"),\n\t\t\t\tthis.puzzle.editmode ? this.targetColorEdit : this.targetColorPlay\n\t\t\t);\n\t\t},\n\n\t\tdrawTrialStarts: function() {\n\t\t\tvar starts = this.puzzle.opemgr.savedStarts;\n\t\t\tfor (var i = 0; i < starts.length; i++) {\n\t\t\t\tvar piece = starts[i];\n\t\t\t\tthis.drawRawCursor(\n\t\t\t\t\t\"trial_cursor\",\n\t\t\t\t\t\"trial_\" + i,\n\t\t\t\t\tpiece,\n\t\t\t\t\tfalse,\n\t\t\t\t\t!piece.isnull && this.puzzle.getConfig(\"trialmarker\"),\n\t\t\t\t\tthis.targetColorTrial\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\tdrawRawCursor: function(layerid, prefix, cursor, islarge, isdraw, color) {\n\t\t\tvar g = this.vinc(layerid, \"crispEdges\");\n\n\t\t\tvar px = cursor.bx * this.bw,\n\t\t\t\tpy = cursor.by * this.bh,\n\t\t\t\tw,\n\t\t\t\tsize;\n\t\t\tif (islarge !== false) {\n\t\t\t\tw = Math.max(this.cw / 16, 2) | 0;\n\t\t\t\tsize = this.bw - 0.5;\n\t\t\t} else {\n\t\t\t\tw = Math.max(this.cw / 24, 1) | 0;\n\t\t\t\tsize = this.bw * 0.56;\n\t\t\t}\n\n\t\t\tisdraw = isdraw !== false && !this.outputImage;\n\t\t\tg.fillStyle = color;\n\n\t\t\tg.vid = prefix + \"ti1_\";\n\t\t\tif (isdraw) {\n\t\t\t\tg.fillRect(px - size, py - size, size * 2, w);\n\t\t\t} else {\n\t\t\t\tg.vhide();\n\t\t\t}\n\t\t\tg.vid = prefix + \"ti2_\";\n\t\t\tif (isdraw) {\n\t\t\t\tg.fillRect(px - size, py - size, w, size * 2);\n\t\t\t} else {\n\t\t\t\tg.vhide();\n\t\t\t}\n\t\t\tg.vid = prefix + \"ti3_\";\n\t\t\tif (isdraw) {\n\t\t\t\tg.fillRect(px - size, py + size - w, size * 2, w);\n\t\t\t} else {\n\t\t\t\tg.vhide();\n\t\t\t}\n\t\t\tg.vid = prefix + \"ti4_\";\n\t\t\tif (isdraw) {\n\t\t\t\tg.fillRect(px + size - w, py - size, w, size * 2);\n\t\t\t} else {\n\t\t\t\tg.vhide();\n\t\t\t}\n\t\t},\n\n\t\tdrawTargetSubNumber: function() {\n\t\t\tvar g = this.vinc(\"target_subnum\", \"crispEdges\");\n\n\t\t\tvar d = this.range,\n\t\t\t\tcursor = this.puzzle.cursor;\n\t\t\tif (cursor.bx < d.x1 || d.x2 < cursor.bx) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (cursor.by < d.y1 || d.y2 < cursor.by) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar target = cursor.targetdir;\n\n\t\t\tg.vid = \"target_subnum\";\n\t\t\tg.fillStyle = this.ttcolor;\n\t\t\tif (this.puzzle.playmode && target !== 0) {\n\t\t\t\tvar bw = this.bw,\n\t\t\t\t\tbh = this.bh;\n\t\t\t\tvar px = cursor.bx * bw + 0.5,\n\t\t\t\t\tpy = cursor.by * bh + 0.5;\n\t\t\t\tvar tw = bw * 0.8,\n\t\t\t\t\tth = bh * 0.8;\n\t\t\t\tif (target === 5) {\n\t\t\t\t\tg.fillRect(px - bw, py - bh, tw, th);\n\t\t\t\t} else if (target === 4) {\n\t\t\t\t\tg.fillRect(px + bw - tw, py - bh, tw, th);\n\t\t\t\t} else if (target === 2) {\n\t\t\t\t\tg.fillRect(px - bw, py + bh - th, tw, th);\n\t\t\t\t} else if (target === 3) {\n\t\t\t\t\tg.fillRect(px + bw - tw, py + bh - th, tw, th);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tg.vhide();\n\t\t\t}\n\t\t},\n\t\tdrawTargetTriangle: function() {\n\t\t\tvar g = this.vinc(\"target_triangle\", \"auto\");\n\n\t\t\tvar d = this.range,\n\t\t\t\tcursor = this.puzzle.cursor;\n\t\t\tif (cursor.bx < d.x1 || d.x2 < cursor.bx) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (cursor.by < d.y1 || d.y2 < cursor.by) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar target = cursor.detectTarget();\n\n\t\t\tg.vid = \"target_triangle\";\n\t\t\tg.fillStyle = this.ttcolor;\n\t\t\tif (this.puzzle.editmode && target !== 0) {\n\t\t\t\tif (cursor.targetdirs === 4) {\n\t\t\t\t\tthis.drawTriangle2(cursor.bx * this.bw, cursor.by * this.bh, target);\n\t\t\t\t} else {\n\t\t\t\t\tthis.drawTriangle1(\n\t\t\t\t\t\tcursor.bx * this.bw,\n\t\t\t\t\t\tcursor.by * this.bh,\n\t\t\t\t\t\ttarget === 4 ? 4 : 2\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tg.vhide();\n\t\t\t}\n\t\t},\n\n\t\t//--------------------------------------------------------------------------\n\t\t// pc.drawStartGoal()  draw Start and Goal symbols\n\t\t//--------------------------------------------------------------------------\n\t\tdrawStartGoal: function() {\n\t\t\tvar g = this.vinc(\"cell_sg\", \"auto\");\n\t\t\tvar bd = this.board,\n\t\t\t\td = this.range;\n\n\t\t\tg.vid = \"text_stpos\";\n\t\t\tvar cell = bd.startpos.getc();\n\t\t\tif (\n\t\t\t\tcell.bx >= d.x1 &&\n\t\t\t\td.x2 >= cell.bx &&\n\t\t\t\tcell.by >= d.y1 &&\n\t\t\t\td.y2 >= cell.by\n\t\t\t) {\n\t\t\t\tif (!cell.isnull) {\n\t\t\t\t\tg.fillStyle =\n\t\t\t\t\t\tthis.puzzle.mouse.draggingSG && this.puzzle.mouse.inputData === 10\n\t\t\t\t\t\t\t? \"red\"\n\t\t\t\t\t\t\t: cell.qans === 1\n\t\t\t\t\t\t\t? this.fontShadecolor\n\t\t\t\t\t\t\t: this.quescolor;\n\t\t\t\t\tthis.disptext(\"S\", cell.bx * this.bw, cell.by * this.bh);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tg.vid = \"text_glpos\";\n\t\t\tcell = bd.goalpos.getc();\n\t\t\tif (\n\t\t\t\tcell.bx >= d.x1 &&\n\t\t\t\td.x2 >= cell.bx &&\n\t\t\t\tcell.by >= d.y1 &&\n\t\t\t\td.y2 >= cell.by\n\t\t\t) {\n\t\t\t\tif (!cell.isnull) {\n\t\t\t\t\tg.fillStyle =\n\t\t\t\t\t\tthis.puzzle.mouse.draggingSG && this.puzzle.mouse.inputData === 11\n\t\t\t\t\t\t\t? \"red\"\n\t\t\t\t\t\t\t: cell.qans === 1\n\t\t\t\t\t\t\t? this.fontShadecolor\n\t\t\t\t\t\t\t: this.quescolor;\n\t\t\t\t\tthis.disptext(\"G\", cell.bx * this.bw, cell.by * this.bh);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//--------------------------------------------------------------------------\n\t\t// pc.getDotFillColor()  The circle fill color, or null for no fill.\n\t\t// pc.getDotOutlineColor()  The circle outline color, or null for no outline.\n\t\t// pc.getDotRadius()  The circle radius, as a fraction.\n\t\t// pc.drawDots()  Draw circles on all dot positions\n\t\t//--------------------------------------------------------------------------\n\t\tgetDotFillColor: function(dot) {\n\t\t\tif (dot.getDot() === 1) {\n\t\t\t\treturn \"white\";\n\t\t\t}\n\t\t\tif (dot.getDot() === 2) {\n\t\t\t\treturn dot.iserror() ? this.errcolor1 : this.quescolor;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetDotOutlineColor: function(dot) {\n\t\t\tif (dot.getDot() === 1) {\n\t\t\t\treturn dot.iserror() ? this.errcolor1 : this.quescolor;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetDotRadius: function(dot) {\n\t\t\treturn 0.18;\n\t\t},\n\n\t\tdrawDots: function() {\n\t\t\tvar g = this.vinc(\"dot\", \"auto\", true);\n\n\t\t\tg.lineWidth = Math.max(this.cw * 0.04, 1);\n\t\t\tvar d = this.range;\n\t\t\tvar dlist = this.board.dotinside(d.x1, d.y1, d.x2, d.y2);\n\t\t\tfor (var i = 0; i < dlist.length; i++) {\n\t\t\t\tvar dot = dlist[i],\n\t\t\t\t\tbx = dot.bx,\n\t\t\t\t\tby = dot.by;\n\n\t\t\t\tg.vid = \"s_dot_\" + dot.id;\n\t\t\t\tvar outline = this.getDotOutlineColor(dot);\n\t\t\t\tvar color = this.getDotFillColor(dot);\n\t\t\t\tif (!!color || !!outline) {\n\t\t\t\t\tg.strokeStyle = outline;\n\t\t\t\t\tg.fillStyle = color;\n\t\t\t\t\tg.shapeCircle(\n\t\t\t\t\t\tbx * this.bw,\n\t\t\t\t\t\tby * this.bh,\n\t\t\t\t\t\tthis.cw * this.getDotRadius(dot)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawDashedCenterLines() セルの中心から中心にひかれる点線をCanvasに描画する\n\t\t//---------------------------------------------------------------------------\n\t\tdrawDashedCenterLines: function() {\n\t\t\tvar g = this.vinc(\"centerline\", \"crispEdges\", true),\n\t\t\t\tbd = this.board;\n\n\t\t\tvar x1 = this.range.x1,\n\t\t\t\ty1 = this.range.y1,\n\t\t\t\tx2 = this.range.x2,\n\t\t\t\ty2 = this.range.y2;\n\t\t\tif (x1 < bd.minbx + 1) {\n\t\t\t\tx1 = bd.minbx + 1;\n\t\t\t}\n\t\t\tif (x2 > bd.maxbx - 1) {\n\t\t\t\tx2 = bd.maxbx - 1;\n\t\t\t}\n\t\t\tif (y1 < bd.minby + 1) {\n\t\t\t\ty1 = bd.minby + 1;\n\t\t\t}\n\t\t\tif (y2 > bd.maxby - 1) {\n\t\t\t\ty2 = bd.maxby - 1;\n\t\t\t}\n\t\t\tx1 -= ~x1 & 1;\n\t\t\ty1 -= ~y1 & 1;\n\t\t\tx2 += ~x2 & 1;\n\t\t\ty2 += ~y2 & 1; /* (x1,y1)-(x2,y2)を外側の奇数範囲まで広げる */\n\n\t\t\tvar dasharray = this.getDashArray();\n\n\t\t\tg.lineWidth = 1;\n\t\t\tg.strokeStyle = this.gridcolor;\n\t\t\tfor (var i = x1; i <= x2; i += 2) {\n\t\t\t\tvar px = i * this.bw,\n\t\t\t\t\tpy1 = y1 * this.bh,\n\t\t\t\t\tpy2 = y2 * this.bh;\n\t\t\t\tg.vid = \"cliney_\" + i;\n\t\t\t\tg.strokeDashedLine(px, py1, px, py2, dasharray);\n\t\t\t}\n\t\t\tfor (var i = y1; i <= y2; i += 2) {\n\t\t\t\tvar py = i * this.bh,\n\t\t\t\t\tpx1 = x1 * this.bw,\n\t\t\t\t\tpx2 = x2 * this.bw;\n\t\t\t\tg.vid = \"clinex_\" + i;\n\t\t\t\tg.strokeDashedLine(px1, py, px2, py, dasharray);\n\t\t\t}\n\t\t},\n\n\t\tgetDashArray: function() {\n\t\t\tvar dashCount = Math.max(Math.round(this.cw / 10), 4);\n\t\t\tvar stepSize = this.cw / dashCount;\n\t\t\tvar lengthOn = (5 / 8) * stepSize;\n\t\t\tvar lengthOff = stepSize - lengthOn;\n\n\t\t\tvar dasharray = [];\n\t\t\tdasharray.push(lengthOn / 2, lengthOff);\n\t\t\tfor (var i = 0; i < dashCount - 1; i++) {\n\t\t\t\tdasharray.push(lengthOn, lengthOff);\n\t\t\t}\n\t\t\tdasharray.push(lengthOn / 2);\n\t\t\tdasharray.push(0);\n\t\t\treturn dasharray;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawGrid()        セルの枠線(実線)をCanvasに書き込む\n\t\t// pc.drawDashedGrid()  セルの枠線(点線)をCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawGrid: function(haschassis, isdraw) {\n\t\t\tvar g = this.vinc(\"grid\", \"crispEdges\", true),\n\t\t\t\tbd = this.board;\n\n\t\t\t// ignore excells\n\t\t\tvar minx = Math.max(bd.minbx, 0),\n\t\t\t\tmaxx = Math.min(bd.maxbx, 2 * bd.cols);\n\t\t\tvar miny = Math.max(bd.minby, 0),\n\t\t\t\tmaxy = Math.min(bd.maxby, 2 * bd.rows);\n\n\t\t\t// 外枠まで描画するわけじゃないので、maxbxとか使いません\n\t\t\tvar x1 = this.range.x1,\n\t\t\t\ty1 = this.range.y1,\n\t\t\t\tx2 = this.range.x2,\n\t\t\t\ty2 = this.range.y2;\n\t\t\tif (x1 < minx) {\n\t\t\t\tx1 = minx;\n\t\t\t}\n\t\t\tif (x2 > maxx) {\n\t\t\t\tx2 = maxx;\n\t\t\t}\n\t\t\tif (y1 < miny) {\n\t\t\t\ty1 = miny;\n\t\t\t}\n\t\t\tif (y2 > maxy) {\n\t\t\t\ty2 = maxy;\n\t\t\t}\n\t\t\tx1 -= x1 & 1;\n\t\t\ty1 -= y1 & 1; /* (x1,y1)を外側の偶数位置に移動する */\n\t\t\tif (x1 >= x2 || y1 >= y2) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar bs = bd.hasborder !== 2 && haschassis !== false ? 2 : 0,\n\t\t\t\tbw = this.bw,\n\t\t\t\tbh = this.bh;\n\t\t\tvar xa = Math.max(x1, minx + bs),\n\t\t\t\txb = Math.min(x2, maxx - bs);\n\t\t\tvar ya = Math.max(y1, miny + bs),\n\t\t\t\tyb = Math.min(y2, maxy - bs);\n\n\t\t\t// isdraw!==false: 指定無しかtrueのときは描画する\n\t\t\tg.lineWidth = this.gw;\n\t\t\tg.strokeStyle = this.gridcolor;\n\t\t\tfor (var i = xa; i <= xb; i += 2) {\n\t\t\t\tg.vid = \"bdy_\" + i;\n\t\t\t\tif (isdraw !== false) {\n\t\t\t\t\tvar px = i * bw,\n\t\t\t\t\t\tpy1 = y1 * bh,\n\t\t\t\t\t\tpy2 = y2 * bh;\n\t\t\t\t\tg.strokeLine(px, py1, px, py2);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i = ya; i <= yb; i += 2) {\n\t\t\t\tg.vid = \"bdx_\" + i;\n\t\t\t\tif (isdraw !== false) {\n\t\t\t\t\tvar py = i * bh,\n\t\t\t\t\t\tpx1 = x1 * bw,\n\t\t\t\t\t\tpx2 = x2 * bw;\n\t\t\t\t\tg.strokeLine(px1, py, px2, py);\n\t\t\t\t} else {\n\t\t\t\t\tg.vhide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdrawDashedGrid: function(haschassis) {\n\t\t\tvar g = this.vinc(\"grid\", \"crispEdges\", true),\n\t\t\t\tbd = this.board;\n\n\t\t\t// ignore excells\n\t\t\tvar minx = Math.max(bd.minbx, 0),\n\t\t\t\tmaxx = Math.min(bd.maxbx, 2 * bd.cols);\n\t\t\tvar miny = Math.max(bd.minby, 0),\n\t\t\t\tmaxy = Math.min(bd.maxby, 2 * bd.rows);\n\n\t\t\t// 外枠まで描画するわけじゃないので、maxbxとか使いません\n\t\t\tvar x1 = this.range.x1,\n\t\t\t\ty1 = this.range.y1,\n\t\t\t\tx2 = this.range.x2,\n\t\t\t\ty2 = this.range.y2;\n\t\t\tif (x1 < minx) {\n\t\t\t\tx1 = minx;\n\t\t\t}\n\t\t\tif (x2 > maxx) {\n\t\t\t\tx2 = maxx;\n\t\t\t}\n\t\t\tif (y1 < miny) {\n\t\t\t\ty1 = miny;\n\t\t\t}\n\t\t\tif (y2 > maxy) {\n\t\t\t\ty2 = maxy;\n\t\t\t}\n\t\t\tx1 -= x1 & 1;\n\t\t\ty1 -= y1 & 1;\n\t\t\tx2 += x2 & 1;\n\t\t\ty2 += y2 & 1; /* (x1,y1)-(x2,y2)を外側の偶数範囲に移動する */\n\n\t\t\tvar dasharray = this.getDashArray();\n\n\t\t\tvar bs = haschassis !== false ? 2 : 0,\n\t\t\t\tbw = this.bw,\n\t\t\t\tbh = this.bh;\n\t\t\tvar xa = Math.max(x1, minx + bs),\n\t\t\t\txb = Math.min(x2, maxx - bs);\n\t\t\tvar ya = Math.max(y1, miny + bs),\n\t\t\t\tyb = Math.min(y2, maxy - bs);\n\n\t\t\tg.lineWidth = this.gw;\n\t\t\tg.strokeStyle = this.gridcolor;\n\t\t\tfor (var i = xa; i <= xb; i += 2) {\n\t\t\t\tvar px = i * bw,\n\t\t\t\t\tpy1 = y1 * bh,\n\t\t\t\t\tpy2 = y2 * bh;\n\t\t\t\tg.vid = \"bdy_\" + i;\n\t\t\t\tg.strokeDashedLine(px, py1, px, py2, dasharray);\n\t\t\t}\n\t\t\tfor (var i = ya; i <= yb; i += 2) {\n\t\t\t\tvar py = i * bh,\n\t\t\t\t\tpx1 = x1 * bw,\n\t\t\t\t\tpx2 = x2 * bw;\n\t\t\t\tg.vid = \"bdx_\" + i;\n\t\t\t\tg.strokeDashedLine(px1, py, px2, py, dasharray);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// pc.drawChassis()     外枠をCanvasに書き込む\n\t\t// pc.drawChassis_ex1() bd.hasexcell==1の時の外枠をCanvasに書き込む\n\t\t//---------------------------------------------------------------------------\n\t\tdrawChassis: function(withexcell) {\n\t\t\tvar g = this.vinc(\"chassis\", \"crispEdges\", true),\n\t\t\t\tbd = this.board;\n\n\t\t\tvar exWidth = withexcell ? bd.minbx * -0.5 * this.cw : 0;\n\t\t\tvar exHeight = withexcell ? bd.minby * -0.5 * this.ch : 0;\n\n\t\t\tvar boardWidth = bd.cols * this.cw,\n\t\t\t\tboardHeight = bd.rows * this.ch;\n\t\t\tvar lw = this.lw,\n\t\t\t\tlm = this.lm;\n\t\t\tif (this.pid === \"bosanowa\") {\n\t\t\t\tlw = 1;\n\t\t\t\tlm = 0.5;\n\t\t\t}\n\t\t\tg.fillStyle = this.quescolor;\n\t\t\tg.vid = \"chs1_\";\n\t\t\tg.fillRect(-lm, -exHeight - lm, lw, boardHeight + exHeight + lw);\n\t\t\tg.vid = \"chs2_\";\n\t\t\tg.fillRect(\n\t\t\t\tboardWidth - lm,\n\t\t\t\t-exHeight - lm,\n\t\t\t\tlw,\n\t\t\t\tboardHeight + exHeight + lw\n\t\t\t);\n\t\t\tg.vid = \"chs3_\";\n\t\t\tg.fillRect(-exWidth - lm, -lm, boardWidth + exWidth + lw, lw);\n\t\t\tg.vid = \"chs4_\";\n\t\t\tg.fillRect(\n\t\t\t\t-exWidth - lm,\n\t\t\t\tboardHeight - lm,\n\t\t\t\tboardWidth + exWidth + lw,\n\t\t\t\tlw\n\t\t\t);\n\t\t},\n\t\tdrawChassis_ex1: function(boldflag) {\n\t\t\tvar g = this.vinc(\"chassis_ex1\", \"crispEdges\", true),\n\t\t\t\tbd = this.board;\n\n\t\t\tvar x1 = this.range.x1,\n\t\t\t\ty1 = this.range.y1,\n\t\t\t\tx2 = this.range.x2,\n\t\t\t\ty2 = this.range.y2;\n\t\t\tif (x1 <= 0) {\n\t\t\t\tx1 = bd.minbx;\n\t\t\t}\n\t\t\tif (x2 > bd.maxbx) {\n\t\t\t\tx2 = bd.maxbx;\n\t\t\t}\n\t\t\tif (y1 <= 0) {\n\t\t\t\ty1 = bd.minby;\n\t\t\t}\n\t\t\tif (y2 > bd.maxby) {\n\t\t\t\ty2 = bd.maxby;\n\t\t\t}\n\n\t\t\tvar lw = this.lw,\n\t\t\t\tlm = this.lm;\n\t\t\tvar boardWidth = bd.cols * this.cw,\n\t\t\t\tboardHeight = bd.rows * this.ch;\n\n\t\t\t// extendcell==1も含んだ外枠の描画\n\t\t\tg.fillStyle = this.quescolor;\n\t\t\tg.vid = \"chsex1_1_\";\n\t\t\tg.fillRect(-this.cw - lm, -this.ch - lm, lw, boardHeight + this.ch + lw);\n\t\t\tg.vid = \"chsex1_2_\";\n\t\t\tg.fillRect(\n\t\t\t\tboardWidth - lm,\n\t\t\t\t-this.ch - lm,\n\t\t\t\tlw,\n\t\t\t\tboardHeight + this.ch + lw\n\t\t\t);\n\t\t\tg.vid = \"chsex1_3_\";\n\t\t\tg.fillRect(-this.cw - lm, -this.ch - lm, boardWidth + this.cw + lw, lw);\n\t\t\tg.vid = \"chsex1_4_\";\n\t\t\tg.fillRect(\n\t\t\t\t-this.cw - lm,\n\t\t\t\tboardHeight - lm,\n\t\t\t\tboardWidth + this.cw + lw,\n\t\t\t\tlw\n\t\t\t);\n\n\t\t\t// 通常のセルとextendcell==1の間の描画\n\t\t\tif (boldflag) {\n\t\t\t\t// すべて太線で描画する場合\n\t\t\t\tg.vid = \"chs1_\";\n\t\t\t\tg.fillRect(-lm, -lm, lw, boardHeight + lw - 1);\n\t\t\t\tg.vid = \"chs2_\";\n\t\t\t\tg.fillRect(-lm, -lm, boardWidth + lw - 1, lw);\n\t\t\t} else {\n\t\t\t\t// ques==51のセルが隣接している時に細線を描画する場合\n\t\t\t\tg.vid = \"chs1_\";\n\t\t\t\tg.fillRect(-0.5, -0.5, 1, boardHeight);\n\t\t\t\tg.vid = \"chs2_\";\n\t\t\t\tg.fillRect(-0.5, -0.5, boardWidth, 1);\n\n\t\t\t\tvar clist = this.range.cells;\n\t\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\t\tvar cell = clist[i],\n\t\t\t\t\t\tpx = (cell.bx - 1) * this.bw,\n\t\t\t\t\t\tpy = (cell.by - 1) * this.bh;\n\n\t\t\t\t\tif (cell.bx === 1) {\n\t\t\t\t\t\tg.vid = \"chs1_sub_\" + cell.by;\n\t\t\t\t\t\tif (cell.ques !== 51) {\n\t\t\t\t\t\t\tg.fillRect(-lm, py - lm, lw, this.ch + lw);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tg.vhide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (cell.by === 1) {\n\t\t\t\t\t\tg.vid = \"chs2_sub_\" + cell.bx;\n\t\t\t\t\t\tif (cell.ques !== 51) {\n\t\t\t\t\t\t\tg.fillRect(px - lm, -lm, this.cw + lw, lw);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tg.vhide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n","// KeyCommon.js v3.4.1\n\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\tKeyEvent: {\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.key_inputcross() 上限maxまでの数字をCrossの問題データをして入力する(keydown時)\n\t\t//---------------------------------------------------------------------------\n\t\tkey_inputcross: function(ca) {\n\t\t\tvar cross = this.cursor.getx();\n\t\t\tvar max = cross.getmaxnum(),\n\t\t\t\tval = -1;\n\n\t\t\tif (\"0\" <= ca && ca <= \"9\") {\n\t\t\t\tvar num = +ca,\n\t\t\t\t\tcur = cross.qnum;\n\t\t\t\tif (cur <= 0 || cur * 10 + num > max) {\n\t\t\t\t\tcur = 0;\n\t\t\t\t}\n\t\t\t\tval = cur * 10 + num;\n\t\t\t\tif (val > max) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (ca === \"-\") {\n\t\t\t\tval = cross.qnum !== -2 ? -2 : -1;\n\t\t\t} else if (ca === \" \" || ca === \"BS\") {\n\t\t\t\tval = -1;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcross.setQnum(val);\n\t\t\tcross.draw();\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.key_inputqnum() 上限maxまでの数字をCellの問題データをして入力する(keydown時)\n\t\t//---------------------------------------------------------------------------\n\t\tkey_inputqnum: function(ca) {\n\t\t\tvar cell = this.cursor.getc();\n\t\t\tif (\n\t\t\t\tcell.enableSubNumberArray &&\n\t\t\t\tthis.puzzle.playmode &&\n\t\t\t\tca === \"shift\" &&\n\t\t\t\tcell.noNum()\n\t\t\t) {\n\t\t\t\tthis.cursor.chtarget();\n\t\t\t} else {\n\t\t\t\tthis.key_inputqnum_main(cell, ca);\n\t\t\t}\n\t\t},\n\t\tkey_inputqnum_main: function(cell, ca) {\n\t\t\tvar cell0 = cell,\n\t\t\t\tpuzzle = this.puzzle,\n\t\t\t\tbd = puzzle.board;\n\t\t\tif (puzzle.editmode && bd.roommgr.hastop) {\n\t\t\t\tcell0 = cell = cell.room.top;\n\t\t\t} else if (puzzle.execConfig(\"dispmove\")) {\n\t\t\t\tif (cell.isDestination()) {\n\t\t\t\t\tcell = cell.base;\n\t\t\t\t} else if (cell.lcnt > 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cell.enableSubNumberArray && this.cursor.targetdir >= 2) {\n\t\t\t\tvar snumpos = [-1, -1, 2, 3, 1, 0][this.cursor.targetdir];\n\t\t\t\tif (snumpos === -1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar val = this.getNewNumber(cell, ca, cell.snum[snumpos]);\n\t\t\t\tif (val === null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcell.setSnum(snumpos, val);\n\t\t\t} else {\n\t\t\t\tvar val = this.getNewNumber(cell, ca, cell.getNum());\n\t\t\t\tif (val === null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcell.setNum(val);\n\t\t\t\tif (cell.numberWithMB && cell.enableSubNumberArray && ca === \" \") {\n\t\t\t\t\tcell.clrSnum();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (puzzle.execConfig(\"dispmove\") && cell.noNum()) {\n\t\t\t\tcell.eraseMovedLines(); /* 丸数字がなくなったら付属する線も消去する */\n\t\t\t}\n\n\t\t\tcell0.draw();\n\t\t\tthis.prev = cell;\n\t\t\tthis.cancelDefault = true;\n\t\t},\n\t\tgetNewNumber: function(cell, ca, cur) {\n\t\t\tvar max = cell.getmaxnum(),\n\t\t\t\tmin = cell.getminnum(),\n\t\t\t\tval = null;\n\n\t\t\tif (\"0\" <= ca && ca <= \"9\" && !cell.numberAsLetter) {\n\t\t\t\tvar num = +ca;\n\t\t\t\tif (cur <= 0 || cur * 10 + num > max || this.prev !== cell) {\n\t\t\t\t\tcur = 0;\n\t\t\t\t}\n\t\t\t\tval = cur * 10 + num;\n\t\t\t\tif (val > max || (min > 0 && val === 0)) {\n\t\t\t\t\tval = null;\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\t\"a\" <= ca &&\n\t\t\t\tca <= \"z\" &&\n\t\t\t\tca.length === 1 &&\n\t\t\t\tcell.numberAsLetter\n\t\t\t) {\n\t\t\t\tif (ca.length > 1 && ca !== \"BS\") {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tvar num = parseInt(ca, 36) - 10;\n\t\t\t\tif (cur > 0 && (cur - 1) % 26 === num) {\n\t\t\t\t\t// Same alphabet\n\t\t\t\t\tval = cur <= 26 ? cur + 26 : -1;\n\t\t\t\t} else {\n\t\t\t\t\tval = num + 1;\n\t\t\t\t}\n\t\t\t\tif (val > max || (min > 0 && val === 0)) {\n\t\t\t\t\tval = null;\n\t\t\t\t}\n\t\t\t} else if (ca === \"BS\") {\n\t\t\t\tif (cur < 10 || cell.numberAsLetter) {\n\t\t\t\t\tval = -1;\n\t\t\t\t} else {\n\t\t\t\t\tval = (cur / 10) | 0;\n\t\t\t\t}\n\t\t\t} else if (ca === \"-\") {\n\t\t\t\tval = this.puzzle.editmode && !cell.disInputHatena ? -2 : -1;\n\t\t\t} else if (ca === \" \") {\n\t\t\t\tval = -1;\n\t\t\t} else if (ca === \"s1\") {\n\t\t\t\tval = -2;\n\t\t\t} else if (ca === \"s2\") {\n\t\t\t\tval = -3;\n\t\t\t} else {\n\t\t\t\tval = null;\n\t\t\t}\n\n\t\t\treturn val;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.key_inputarrow()  四方向の矢印などを設定する\n\t\t// kc.key_inputdirec()  四方向の矢印つき数字の矢印を設定する\n\t\t//---------------------------------------------------------------------------\n\t\tkey_inputarrow: function(ca) {\n\t\t\treturn this.key_inputdirec_common(ca, false);\n\t\t},\n\t\tkey_inputdirec: function(ca) {\n\t\t\treturn this.key_inputdirec_common(ca, true);\n\t\t},\n\t\tkey_inputdirec_common: function(ca, arrownum) {\n\t\t\t// 共通処理\n\t\t\tvar cell = this.cursor.getc();\n\t\t\tif (arrownum && cell.qnum === -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar dir = cell.NDIR;\n\t\t\tswitch (ca) {\n\t\t\t\tcase \"shift+up\":\n\t\t\t\t\tdir = cell.UP;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"shift+down\":\n\t\t\t\t\tdir = cell.DN;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"shift+left\":\n\t\t\t\t\tdir = cell.LT;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"shift+right\":\n\t\t\t\t\tdir = cell.RT;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (dir !== cell.NDIR) {\n\t\t\t\tcell.setQdir(cell.qdir !== dir ? dir : cell.NDIR);\n\t\t\t\tif (!arrownum) {\n\t\t\t\t\tcell.setQnum(-1);\n\t\t\t\t}\n\t\t\t\tthis.cursor.draw();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// kc.inputnumber51()  [＼]の数字等を入力する\n\t\t// kc.setnum51()      モード別に数字を設定する\n\t\t// kc.getnum51()      モード別に数字を取得する\n\t\t//---------------------------------------------------------------------------\n\t\tinputnumber51: function(ca, max_obj) {\n\t\t\tvar cursor = this.cursor;\n\t\t\tif (ca === \"shift\") {\n\t\t\t\tcursor.chtarget();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar piece = cursor.getobj(); /* cell or excell */\n\t\t\tvar target = cursor.detectTarget(piece);\n\t\t\tif (target === 0 || (piece.group === \"cell\" && piece.is51cell())) {\n\t\t\t\tif (ca === \"q\" && !piece.isnull) {\n\t\t\t\t\tif (!piece.is51cell()) {\n\t\t\t\t\t\tpiece.set51cell();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpiece.remove51cell();\n\t\t\t\t\t}\n\t\t\t\t\tcursor.drawaround();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (target === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar def = this.klass.Cell.prototype[\n\t\t\t\ttarget === piece.RT ? \"qnum\" : \"qnum2\"\n\t\t\t];\n\t\t\tvar max = piece.getmaxnum(),\n\t\t\t\tval = def;\n\n\t\t\tif (\"0\" <= ca && ca <= \"9\") {\n\t\t\t\tvar num = +ca,\n\t\t\t\t\tcur = this.getnum51(piece, target);\n\t\t\t\tif (cur <= 0 || cur * 10 + num > max || this.prev !== piece) {\n\t\t\t\t\tcur = 0;\n\t\t\t\t}\n\t\t\t\tval = cur * 10 + num;\n\t\t\t\tif (val > max) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (ca === \"-\" || ca === \" \") {\n\t\t\t\tval = def;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setnum51(piece, target, val);\n\t\t\tthis.prev = piece;\n\t\t\tcursor.draw();\n\t\t},\n\t\tsetnum51: function(piece, target, val) {\n\t\t\t/* piece : cell or excell */\n\t\t\tpiece.setQnumDir(target, val);\n\t\t},\n\t\tgetnum51: function(piece, target) {\n\t\t\t/* piece : cell or excell */\n\t\t\treturn piece.getQnumDir(target);\n\t\t}\n\t}\n});\n","// MouseCommon.js v3.4.1\n\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\tMouseEvent: {\n\t\t// 共通関数\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputcell() Cellのqans(回答データ)に0/1/2のいずれかを入力する。\n\t\t// mv.decIC()     0/1/2どれを入力すべきかを決定する。\n\t\t//---------------------------------------------------------------------------\n\t\tinputShade: function() {\n\t\t\tthis.inputcell();\n\t\t},\n\t\tinputcell: function() {\n\t\t\tvar cell = this.getcell();\n\t\t\tif (cell.isnull || cell === this.mouseCell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.inputData === null) {\n\t\t\t\tthis.decIC(cell);\n\t\t\t}\n\n\t\t\tthis.mouseCell = cell;\n\t\t\tthis.initFirstCell(cell);\n\n\t\t\tvar shade = 1,\n\t\t\t\tunshade = 2;\n\t\t\tif (this.inputData === shade && !cell.allowShade()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.inputData === unshade && !cell.allowUnshade()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.RBShadeCell && this.inputData === shade) {\n\t\t\t\tvar cell0 = this.firstCell;\n\t\t\t\tif (\n\t\t\t\t\t((cell0.bx & 2) ^ (cell0.by & 2)) !==\n\t\t\t\t\t((cell.bx & 2) ^ (cell.by & 2))\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.RBShadeCell && this.inputData !== shade) {\n\t\t\t\tif (this.firstState !== 1 && cell.qans === 1 && this.btn === \"right\") {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcell.setQans(this.inputData === shade ? 1 : 0);\n\t\t\tcell.setQsub(this.inputData === unshade ? 1 : 0);\n\n\t\t\tcell.draw();\n\t\t},\n\t\tinitFirstCell: function(cell) {\n\t\t\tif (!this.firstCell.isnull) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.firstCell = cell;\n\t\t\tthis.firstState = cell.qans;\n\t\t},\n\t\tdecIC: function(cell) {\n\t\t\tif (this.inputMode === \"shade\") {\n\t\t\t\tthis.inputData = cell.qans !== 1 ? 1 : 0;\n\t\t\t} else if (this.inputMode === \"unshade\") {\n\t\t\t\tthis.inputData = cell.qsub !== 1 ? 2 : 0;\n\t\t\t} else if (this.puzzle.getConfig(\"use\") === 1) {\n\t\t\t\tif (this.btn === \"left\") {\n\t\t\t\t\tthis.inputData = cell.qans !== 1 ? 1 : 0;\n\t\t\t\t} else if (this.btn === \"right\") {\n\t\t\t\t\tthis.inputData = cell.qsub !== 1 ? 2 : 0;\n\t\t\t\t}\n\t\t\t} else if (this.puzzle.getConfig(\"use\") === 2) {\n\t\t\t\tif (cell.numberRemainsUnshaded && cell.qnum !== -1) {\n\t\t\t\t\tthis.inputData = cell.qsub !== 1 ? 2 : 0;\n\t\t\t\t} else if (this.btn === \"left\") {\n\t\t\t\t\tif (cell.qans === 1) {\n\t\t\t\t\t\tthis.inputData = 2;\n\t\t\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\t\t\tthis.inputData = 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.inputData = 1;\n\t\t\t\t\t}\n\t\t\t\t} else if (this.btn === \"right\") {\n\t\t\t\t\tif (cell.qans === 1) {\n\t\t\t\t\t\tthis.inputData = 0;\n\t\t\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\t\t\tthis.inputData = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.inputData = 2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputclean_cell() Cellのqans(回答データ)を消去する\n\t\t//---------------------------------------------------------------------------\n\t\tinputclean_cell: function() {\n\t\t\tvar cell = this.getcell();\n\t\t\tif (cell.isnull || cell === this.mouseCell) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.mouseCell = cell;\n\n\t\t\tvar clist = new this.klass.CellList([cell]);\n\t\t\tif (this.puzzle.playmode) {\n\t\t\t\tclist.ansclear();\n\t\t\t} else {\n\t\t\t\tclist.allclear();\n\t\t\t}\n\n\t\t\tcell.draw();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputqnum()      Cellのqnum(数字データ)に数字を入力する\n\t\t// mv.inputqnum_main() Cellのqnum(数字データ)に数字を入力する(メイン処理)\n\t\t//---------------------------------------------------------------------------\n\t\tinputqnum: function() {\n\t\t\tvar cell = this.getcell();\n\t\t\tif (cell.isnull || cell === this.mouseCell) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.cursor.modesnum &&\n\t\t\t\tthis.puzzle.playmode &&\n\t\t\t\t!this.cursor.checksnum(this.inputPoint) &&\n\t\t\t\tcell.noNum()\n\t\t\t) {\n\t\t\t\tthis.setcursorsnum(cell);\n\t\t\t} else if (cell !== this.cursor.getc()) {\n\t\t\t\tthis.setcursor(cell);\n\t\t\t} else {\n\t\t\t\tthis.inputqnum_main(cell);\n\t\t\t}\n\t\t\tthis.mouseCell = cell;\n\t\t},\n\t\tinputqnum_main: function(cell) {\n\t\t\tvar cell0 = cell,\n\t\t\t\tpuzzle = this.puzzle;\n\t\t\tif (\n\t\t\t\tpuzzle.playmode &&\n\t\t\t\tcell.qnum !== puzzle.klass.Cell.prototype.qnum &&\n\t\t\t\t!puzzle.klass.Cell.prototype.supportQnumAnum\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (puzzle.editmode && puzzle.board.roommgr.hastop) {\n\t\t\t\tcell0 = cell = cell.room.top;\n\t\t\t} else if (puzzle.execConfig(\"dispmove\")) {\n\t\t\t\tif (cell.isDestination()) {\n\t\t\t\t\tcell = cell.base;\n\t\t\t\t} else if (cell.lcnt > 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tcell.enableSubNumberArray &&\n\t\t\t\tpuzzle.playmode &&\n\t\t\t\tthis.cursor.targetdir >= 2\n\t\t\t) {\n\t\t\t\tvar snumpos = [-1, -1, 2, 3, 1, 0][this.cursor.targetdir];\n\t\t\t\tif (snumpos === -1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcell.setSnum(snumpos, this.getNewNumber(cell, cell.snum[snumpos]));\n\t\t\t} else if (puzzle.editmode && cell.ques === 51) {\n\t\t\t\tvar target = puzzle.cursor.detectTarget(cell);\n\t\t\t\tpuzzle.key.setnum51(\n\t\t\t\t\tcell,\n\t\t\t\t\ttarget,\n\t\t\t\t\tthis.getNewNumber(cell, puzzle.key.getnum51(cell, target))\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcell.setNum(this.getNewNumber(cell, cell.getNum()));\n\t\t\t}\n\n\t\t\tif (puzzle.execConfig(\"dispmove\") && cell.noNum()) {\n\t\t\t\tcell.eraseMovedLines(); /* 丸数字がなくなったら付属する線も消去する */\n\t\t\t}\n\n\t\t\tcell0.draw();\n\t\t},\n\t\tgetNewNumber: function(cell, num) {\n\t\t\tvar puzzle = this.puzzle,\n\t\t\t\tishatena = puzzle.editmode && !cell.disInputHatena;\n\t\t\tvar max = cell.getmaxnum(),\n\t\t\t\tmin = cell.getminnum(),\n\t\t\t\tval = -1,\n\t\t\t\tqs = cell.qsub;\n\n\t\t\tvar subtype = 0; // qsubを0～いくつまで入力可能かの設定\n\t\t\tif (puzzle.editmode) {\n\t\t\t\tsubtype = -1;\n\t\t\t} else if (this.cursor.targetdir >= 2) {\n\t\t\t\tsubtype = 0;\n\t\t\t\tqs = 0;\n\t\t\t} else if (cell.numberWithMB) {\n\t\t\t\tsubtype = 2;\n\t\t\t\tqs = cell.qsub;\n\t\t\t} else if (puzzle.pid === \"roma\" || puzzle.pid === \"yinyang\") {\n\t\t\t\tsubtype = 0;\n\t\t\t} // 全マス埋めるタイプのパズルは補助記号なし\n\t\t\telse if (cell.numberAsObject || puzzle.pid === \"hebi\") {\n\t\t\t\tsubtype = 1;\n\t\t\t}\n\n\t\t\t// playmode: subtypeは0以上、 qsにqsub値が入る\n\t\t\t// editmode: subtypeは-1固定、qsは常に0が入る\n\t\t\tif (this.btn === \"left\") {\n\t\t\t\tif (num >= max) {\n\t\t\t\t\tval = subtype >= 1 ? -2 : -1;\n\t\t\t\t} else if (qs === 1) {\n\t\t\t\t\tval = subtype >= 2 ? -3 : -1;\n\t\t\t\t} else if (qs === 2) {\n\t\t\t\t\tval = -1;\n\t\t\t\t} else if (num === -1) {\n\t\t\t\t\tval = ishatena ? -2 : min;\n\t\t\t\t} else if (num < min) {\n\t\t\t\t\tval = min;\n\t\t\t\t} else {\n\t\t\t\t\tval = num + 1;\n\t\t\t\t}\n\t\t\t} else if (this.btn === \"right\") {\n\t\t\t\tif (qs === 1) {\n\t\t\t\t\tval = max;\n\t\t\t\t} else if (qs === 2) {\n\t\t\t\t\tval = -2;\n\t\t\t\t} else if (num === -1) {\n\t\t\t\t\tif (subtype === 1) {\n\t\t\t\t\t\tval = -2;\n\t\t\t\t\t} else if (subtype === 2) {\n\t\t\t\t\t\tval = -3;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tval = max;\n\t\t\t\t\t}\n\t\t\t\t} else if (num > max) {\n\t\t\t\t\tval = max;\n\t\t\t\t} else if (num <= min) {\n\t\t\t\t\tval = ishatena ? -2 : -1;\n\t\t\t\t} else if (num === -2) {\n\t\t\t\t\tval = -1;\n\t\t\t\t} else {\n\t\t\t\t\tval = num - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn val;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputFixedNumber() Cellに固定のqnum/anum値を入力する\n\t\t//---------------------------------------------------------------------------\n\t\tinputFixedNumber: function(num) {\n\t\t\tvar cell = this.getcell();\n\t\t\tif (cell.isnull || cell === this.mouseCell) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar val = cell.getNum();\n\t\t\tif (val === -1 && cell.qsub > 0) {\n\t\t\t\tval = -1 - cell.qsub;\n\t\t\t}\n\t\t\tif (this.inputData === null) {\n\t\t\t\tthis.inputData = val === num ? -1 : num;\n\t\t\t}\n\t\t\tif (val !== num || this.inputData === -1) {\n\t\t\t\tcell.setNum(this.inputData);\n\t\t\t\tcell.draw();\n\t\t\t}\n\t\t\tthis.mouseCell = cell;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputQues() Cellのquesデータをarrayのとおりに入力する\n\t\t//---------------------------------------------------------------------------\n\t\tinputQues: function(array) {\n\t\t\tvar cell = this.getcell();\n\t\t\tif (cell.isnull) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (cell !== this.cursor.getc() && this.inputMode === \"auto\") {\n\t\t\t\tthis.setcursor(cell);\n\t\t\t} else {\n\t\t\t\tthis.inputQues_main(array, cell);\n\t\t\t}\n\t\t},\n\t\tinputQues_main: function(array, cell) {\n\t\t\tvar qu = cell.ques,\n\t\t\t\tlen = array.length;\n\t\t\tvar isInc =\n\t\t\t\t(this.inputMode === \"quesmark\" || this.inputMode === \"auto\") ===\n\t\t\t\t(this.btn === \"left\");\n\t\t\tif (isInc) {\n\t\t\t\tfor (var i = 0; i <= len - 1; i++) {\n\t\t\t\t\tif (qu === array[i]) {\n\t\t\t\t\t\tcell.setQues(array[i < len - 1 ? i + 1 : 0]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (var i = len - 1; i >= 0; i--) {\n\t\t\t\t\tif (qu === array[i]) {\n\t\t\t\t\t\tcell.setQues(array[i > 0 ? i - 1 : len - 1]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcell.draw();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputMB()        Cellのqsub(補助記号)の○, ×データを入力する\n\t\t// mv.inputFixedQsub() Cellのqsub(補助記号)の○, ×データを固定で入力する\n\t\t// mv.inputBGcolor()   Cellの背景色を入力する\n\t\t//---------------------------------------------------------------------------\n\t\tinputMB: function() {\n\t\t\tvar cell = this.getcell();\n\t\t\tif (cell.isnull) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcell.setQsub((this.btn === \"left\" ? [1, 2, 0] : [2, 0, 1])[cell.qsub]);\n\t\t\tcell.draw();\n\t\t},\n\t\tinputFixedQsub: function(val) {\n\t\t\tvar cell = this.getcell();\n\t\t\tif (cell.isnull || cell.is51cell() || cell === this.mouseCell) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.inputData === null) {\n\t\t\t\tthis.inputData = cell.qsub !== val ? val : 0;\n\t\t\t}\n\t\t\tcell.setQsub(this.inputData);\n\t\t\tcell.draw();\n\t\t\tthis.mouseCell = cell;\n\t\t},\n\t\tinputBGcolor: function(isforceforward) {\n\t\t\tvar cell = this.getcell();\n\t\t\tif (cell.isnull || cell.is51cell() || cell === this.mouseCell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.inputData !== null) {\n\t\t\t} else if (this.inputMode === \"bgcolor1\") {\n\t\t\t\tthis.inputMode = cell.qsub !== 1 ? 11 : 10;\n\t\t\t} else if (this.inputMode === \"bgcolor2\") {\n\t\t\t\tthis.inputMode = cell.qsub !== 2 ? 12 : 10;\n\t\t\t} else if (isforceforward || this.btn === \"left\") {\n\t\t\t\tif (cell.qsub === 0) {\n\t\t\t\t\tthis.inputData = 11;\n\t\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\t\tthis.inputData = 12;\n\t\t\t\t} else {\n\t\t\t\t\tthis.inputData = 10;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (cell.qsub === 0) {\n\t\t\t\t\tthis.inputData = 12;\n\t\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\t\tthis.inputData = 10;\n\t\t\t\t} else {\n\t\t\t\t\tthis.inputData = 11;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcell.setQsub(this.inputData - 10);\n\t\t\tcell.draw();\n\n\t\t\tthis.mouseCell = cell;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputdirec()      Cellのdirec(方向)のデータを入力する\n\t\t// mv.inputarrow_cell() Cellの矢印を入力する\n\t\t//---------------------------------------------------------------------------\n\t\tinputdirec: function() {\n\t\t\tvar pos = this.getpos(0);\n\t\t\tif (this.prevPos.equals(pos)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar cell = this.prevPos.getc();\n\t\t\tif (!cell.isnull) {\n\t\t\t\tif (cell.qnum !== -1) {\n\t\t\t\t\tvar dir = this.prevPos.getdir(pos, 2);\n\t\t\t\t\tif (dir !== cell.NDIR) {\n\t\t\t\t\t\tcell.setQdir(cell.qdir !== dir ? dir : 0);\n\t\t\t\t\t\tcell.draw();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.prevPos = pos;\n\t\t},\n\t\tinputarrow_cell: function() {\n\t\t\tvar pos = this.getpos(0);\n\t\t\tif (this.prevPos.equals(pos) && this.inputData === 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar dir = pos.NDIR,\n\t\t\t\tcell = this.prevPos.getc();\n\t\t\tif (!cell.isnull) {\n\t\t\t\tvar dir = this.prevPos.getdir(pos, 2);\n\t\t\t\tif (dir !== pos.NDIR) {\n\t\t\t\t\tthis.inputarrow_cell_main(cell, dir);\n\t\t\t\t\tcell.draw();\n\t\t\t\t\tthis.mousereset();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.prevPos = pos;\n\t\t},\n\t\tinputarrow_cell_main: function(cell, dir) {\n\t\t\tif (cell.numberAsObject) {\n\t\t\t\tcell.setNum(dir);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputtile()  黒タイル、白タイルを入力する\n\t\t//---------------------------------------------------------------------------\n\t\tinputtile: function() {\n\t\t\tvar cell = this.getcell();\n\t\t\tif (cell.isnull || cell.is51cell() || cell === this.mouseCell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.inputData === null) {\n\t\t\t\tthis.decIC(cell);\n\t\t\t}\n\n\t\t\tthis.mouseCell = cell;\n\t\t\tvar clist = cell.room.clist;\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell2 = clist[i];\n\t\t\t\tif (this.inputData === 1 || cell2.qsub !== 3) {\n\t\t\t\t\t(this.inputData === 1 ? cell2.setShade : cell2.clrShade).call(cell2);\n\t\t\t\t\tcell2.setQsub(this.inputData === 2 ? 1 : 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tclist.draw();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputIcebarn()  アイスバーンを入力する\n\t\t//---------------------------------------------------------------------------\n\t\tinputIcebarn: function() {\n\t\t\tvar cell = this.getcell();\n\t\t\tif (cell.isnull || cell === this.mouseCell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.inputData === null) {\n\t\t\t\tthis.inputData = cell.ice() ? 0 : 6;\n\t\t\t}\n\n\t\t\tcell.setQues(this.inputData);\n\t\t\tcell.drawaround();\n\t\t\tthis.mouseCell = cell;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.input51()            inputMode=='auto'時に[＼]を作ったり消したりする\n\t\t//---------------------------------------------------------------------------\n\t\tinput51: function() {\n\t\t\tvar piece = this.getcell_excell(); /* piece : cell or excell */\n\t\t\tif (piece.isnull) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar group = piece.group;\n\t\t\tif (\n\t\t\t\tgroup === \"excell\" ||\n\t\t\t\t(group === \"cell\" && piece !== this.cursor.getc())\n\t\t\t) {\n\t\t\t\tthis.setcursor(piece);\n\t\t\t} else if (group === \"cell\") {\n\t\t\t\tthis.input51_main(piece);\n\t\t\t}\n\t\t},\n\t\tinput51_main: function(cell) {\n\t\t\tif (this.btn === \"right\") {\n\t\t\t\tcell.remove51cell();\n\t\t\t} else if (this.btn === \"left\") {\n\t\t\t\tif (!cell.is51cell()) {\n\t\t\t\t\tcell.set51cell();\n\t\t\t\t} else {\n\t\t\t\t\tvar dx = this.inputPoint.bx - cell.bx,\n\t\t\t\t\t\tdy = this.inputPoint.by - cell.by;\n\t\t\t\t\tthis.cursor.chtarget(true, dx, dy);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcell.drawaround();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.input51_fixed()      inputMode固定時に[＼]を作ったり消したりする\n\t\t//---------------------------------------------------------------------------\n\t\tinput51_fixed: function() {\n\t\t\tvar cell = this.getcell();\n\t\t\tif (cell.isnull || cell === this.mouseCell) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.inputMode === \"clear\") {\n\t\t\t\tcell.remove51cell();\n\t\t\t\tthis.inputData = 0;\n\t\t\t} else if (this.inputMode === \"cell51\" && !cell.is51cell()) {\n\t\t\t\tcell.set51cell();\n\t\t\t\tthis.inputData = 51;\n\t\t\t}\n\n\t\t\tcell.drawaround();\n\n\t\t\tthis.mouseCell = cell;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputqnum_cell51()   [＼]のCellに数字を入力する\n\t\t//---------------------------------------------------------------------------\n\t\tinputqnum_cell51: function() {\n\t\t\tvar piece = this.getcell_excell(); /* piece : cell or excell */\n\t\t\tif (piece.isnull || (this.mouseCell === piece && !this.mouseend)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.mousestart &&\n\t\t\t\t(piece !== this.cursor.getobj() || piece.ques !== 51)\n\t\t\t) {\n\t\t\t\tthis.setcursor(piece);\n\t\t\t\tthis.mousereset();\n\t\t\t} else if (\n\t\t\t\t(this.mousestart && this.cursor.getNumOfTarget(piece) < 2) ||\n\t\t\t\tthis.mouseend\n\t\t\t) {\n\t\t\t\tthis.inputqnum_main(piece);\n\t\t\t\tthis.mousereset();\n\t\t\t} else {\n\t\t\t\tthis.mouseCell = piece;\n\t\t\t\tthis.inputselect_cell51(piece);\n\t\t\t}\n\t\t},\n\t\tinputselect_cell51: function(cell) {\n\t\t\tif (this.mousestart) {\n\t\t\t\tthis.prevPos = this.getpos(0);\n\t\t\t} else if (this.mousemove) {\n\t\t\t\tvar dir = this.prevPos.getdir(this.getpos(0), 2);\n\t\t\t\tif (\n\t\t\t\t\t(dir === cell.RT || dir === cell.DN) &&\n\t\t\t\t\tdir !== this.cursor.targetdir\n\t\t\t\t) {\n\t\t\t\t\tthis.cursor.targetdir = dir;\n\t\t\t\t\tthis.cursor.draw();\n\t\t\t\t}\n\t\t\t\tif (dir !== cell.NDIR) {\n\t\t\t\t\tthis.mousereset();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputqnum_cross() Crossのques(問題データ)に0～4を入力する。\n\t\t// mv.inputcrossMark()  Crossの黒点を入力する。\n\t\t//---------------------------------------------------------------------------\n\t\tinputqnum_cross: function() {\n\t\t\tvar cross = this.getcross();\n\t\t\tif (cross.isnull || cross === this.mouseCell) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (cross !== this.cursor.getx()) {\n\t\t\t\tthis.setcursor(cross);\n\t\t\t} else {\n\t\t\t\tthis.inputqnum_main(cross);\n\t\t\t}\n\t\t\tthis.mouseCell = cross;\n\t\t},\n\t\tinputcross_main: function(cross) {\n\t\t\tif (this.btn === \"left\") {\n\t\t\t\tcross.setQnum(cross.qnum !== 4 ? cross.qnum + 1 : -2);\n\t\t\t} else if (this.btn === \"right\") {\n\t\t\t\tcross.setQnum(cross.qnum !== -2 ? cross.qnum - 1 : 4);\n\t\t\t}\n\t\t\tcross.draw();\n\t\t},\n\t\tinputcrossMark: function() {\n\t\t\tvar pos = this.getpos(0.24);\n\t\t\tif (!pos.oncross()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar bd = this.board,\n\t\t\t\tbm = bd.hascross === 2 ? 0 : 2;\n\t\t\tif (\n\t\t\t\tpos.bx < bd.minbx + bm ||\n\t\t\t\tpos.bx > bd.maxbx - bm ||\n\t\t\t\tpos.by < bd.minby + bm ||\n\t\t\t\tpos.by > bd.maxby - bm\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar cross = pos.getx();\n\t\t\tif (cross.isnull) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.puzzle.opemgr.disCombine = true;\n\t\t\tcross.setQnum(cross.qnum === 1 ? -1 : 1);\n\t\t\tthis.puzzle.opemgr.disCombine = false;\n\n\t\t\tcross.draw();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputclean_cross() Crossのqans(回答データ)を消去する\n\t\t//---------------------------------------------------------------------------\n\t\tinputclean_cross: function() {\n\t\t\tvar cross = this.getcross();\n\t\t\tif (cross.isnull || cross === this.mouseCell) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.mouseCell = cross;\n\n\t\t\tvar xlist = new this.klass.CrossList([cross]);\n\t\t\tif (this.puzzle.playmode) {\n\t\t\t\txlist.ansclear();\n\t\t\t} else {\n\t\t\t\txlist.allclear();\n\t\t\t}\n\n\t\t\tcross.draw();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputborder()     盤面境界線のデータを入力する\n\t\t// mv.inputQsubLine()   盤面の境界線用補助記号を入力する\n\t\t//---------------------------------------------------------------------------\n\t\tinputborder: function() {\n\t\t\tvar pos = this.getpos(0.35);\n\t\t\tif (this.prevPos.equals(pos)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar border = this.prevPos.getborderobj(pos);\n\t\t\tif (!border.isnull) {\n\t\t\t\tif (this.inputData === null) {\n\t\t\t\t\tthis.inputData = border.isBorder() ? 0 : 1;\n\t\t\t\t}\n\t\t\t\tif (this.inputData === 1) {\n\t\t\t\t\tborder.setBorder();\n\t\t\t\t} else if (this.inputData === 0) {\n\t\t\t\t\tborder.removeBorder();\n\t\t\t\t}\n\t\t\t\tborder.draw();\n\t\t\t}\n\t\t\tthis.prevPos = pos;\n\t\t},\n\t\tinputQsubLine: function() {\n\t\t\tvar pos = this.getpos(0);\n\t\t\tif (this.prevPos.equals(pos)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar border = this.prevPos.getnb(pos);\n\t\t\tif (!border.isnull) {\n\t\t\t\tif (this.inputData === null) {\n\t\t\t\t\tthis.inputData = border.qsub === 0 ? 1 : 0;\n\t\t\t\t}\n\t\t\t\tif (this.inputData === 1) {\n\t\t\t\t\tborder.setQsub(1);\n\t\t\t\t} else if (this.inputData === 0) {\n\t\t\t\t\tborder.setQsub(0);\n\t\t\t\t}\n\t\t\t\tborder.draw();\n\t\t\t}\n\t\t\tthis.prevPos = pos;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputLine()     盤面の線を入力する\n\t\t// mv.inputMoveLine() 移動系パズル向けに盤面の線を入力する\n\t\t//---------------------------------------------------------------------------\n\t\tinputLine: function() {\n\t\t\t/* \"ものを動かしたように描画する\"でなければinputLineと同じ */\n\t\t\tif (this.puzzle.execConfig(\"dispmove\")) {\n\t\t\t\tthis.inputMoveLine();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar cell = this.getcell();\n\t\t\tthis.initFirstCell(cell);\n\n\t\t\tvar pos, border;\n\t\t\tif (!this.board.borderAsLine) {\n\t\t\t\tpos = this.getpos(0);\n\t\t\t\tif (this.prevPos.equals(pos)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tborder = this.prevPos.getnb(pos);\n\t\t\t} else {\n\t\t\t\tpos = this.getpos(0.35);\n\t\t\t\tif (this.prevPos.equals(pos)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tborder = this.prevPos.getborderobj(pos);\n\t\t\t}\n\n\t\t\tif (!border.isnull) {\n\t\t\t\tif (this.inputData === null) {\n\t\t\t\t\tthis.inputData = border.isLine() ? 0 : 1;\n\t\t\t\t}\n\t\t\t\tif (this.inputData === 1) {\n\t\t\t\t\tborder.setLine();\n\t\t\t\t} else if (this.inputData === 0) {\n\t\t\t\t\tborder.removeLine();\n\t\t\t\t}\n\t\t\t\tborder.draw();\n\t\t\t}\n\t\t\tthis.prevPos = pos;\n\t\t},\n\t\tinputMoveLine: function() {\n\t\t\tvar moving = true;\n\t\t\tvar targetCell = this.getcell();\n\n\t\t\twhile (moving) {\n\t\t\t\tmoving = false;\n\t\t\t\tvar cell =\n\t\t\t\t\tthis.mouseCell && !this.mousestart\n\t\t\t\t\t\t? this.mouseCell.getOrthogonalCell(targetCell)\n\t\t\t\t\t\t: targetCell;\n\t\t\t\tif (cell.isnull) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar cell0 = this.mouseCell,\n\t\t\t\t\tpos = cell.getaddr();\n\t\t\t\t/* 初回はこの中に入ってきます。 */\n\t\t\t\tif (this.mousestart && cell.isDestination()) {\n\t\t\t\t\tthis.mouseCell = cell;\n\t\t\t\t\tthis.prevPos = pos;\n\t\t\t\t\tcell.draw();\n\t\t\t\t} else if (this.mousemove && !cell0.isnull && !cell.isDestination()) {\n\t\t\t\t\t/* 移動中の場合 */\n\t\t\t\t\tvar border = this.prevPos.getnb(pos);\n\t\t\t\t\tif (\n\t\t\t\t\t\t!border.isnull &&\n\t\t\t\t\t\t((!border.isLine() && cell.lcnt === 0) ||\n\t\t\t\t\t\t\t(border.isLine() && cell0.lcnt === 1))\n\t\t\t\t\t) {\n\t\t\t\t\t\tvar old = border.isLine();\n\t\t\t\t\t\tif (!old) {\n\t\t\t\t\t\t\tborder.setLine();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tborder.removeLine();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.puzzle.opemgr.changeflag = true;\n\t\t\t\t\t\tif (old !== border.isLine()) {\n\t\t\t\t\t\t\tthis.mouseCell = cell;\n\t\t\t\t\t\t\tthis.prevPos = pos;\n\t\t\t\t\t\t\tborder.draw();\n\t\t\t\t\t\t\tmoving = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputpeke()   盤面の線が通らないことを示す×を入力する\n\t\t//---------------------------------------------------------------------------\n\t\tinputpeke: function() {\n\t\t\tvar pos = this.getpos(0.22);\n\t\t\tif (this.prevPos.equals(pos)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar border = pos.getb();\n\t\t\tif (!border.isnull) {\n\t\t\t\tif (this.inputData === null) {\n\t\t\t\t\tthis.inputData = border.qsub !== 2 ? 2 : 3;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tthis.inputData === 2 &&\n\t\t\t\t\tborder.isLine() &&\n\t\t\t\t\tthis.puzzle.execConfig(\"dispmove\")\n\t\t\t\t) {\n\t\t\t\t} else if (this.inputData === 2) {\n\t\t\t\t\tborder.setPeke();\n\t\t\t\t} else if (this.inputData === 3) {\n\t\t\t\t\tborder.removeLineAndQsub();\n\t\t\t\t}\n\t\t\t\tborder.draw();\n\t\t\t}\n\t\t\tthis.prevPos = pos;\n\t\t},\n\t\tinputpeke_ifborder: function() {\n\t\t\tvar border = this.getpos(0.22).getb();\n\t\t\tif (border.group === \"border\" && !border.isnull) {\n\t\t\t\tthis.inputpeke();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputdiraux_mousedown()   input lines/pekes/dir aux marks: mousedown\n\t\t// mv.inputdiraux_mousemove()                                    mousemove\n\t\t// mv.clickdiraux()                                              click\n\t\t//---------------------------------------------------------------------------\n\t\tinputdiraux_mousedown: function() {\n\t\t\tvar pos = this.getpos(0.22),\n\t\t\t\tborder = pos.getb();\n\t\t\tif (!border.isnull) {\n\t\t\t\tthis.inputData = border.isnull || border.qsub !== 2 ? 2 : 3;\n\t\t\t\tthis.inputpeke();\n\t\t\t}\n\t\t},\n\t\tinputdiraux_mousemove: function() {\n\t\t\tvar pos = this.getpos(0);\n\t\t\tif (pos.getc().isnull) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar border = this.prevPos.getnb(pos);\n\t\t\tif (!border.isnull) {\n\t\t\t\tvar newval = null,\n\t\t\t\t\tdir = this.prevPos.getdir(pos, 2);\n\t\t\t\tif (this.inputData === null) {\n\t\t\t\t\tthis.inputData = border.qsub !== 10 + dir ? 11 : 0;\n\t\t\t\t}\n\t\t\t\tif (this.inputData === 11) {\n\t\t\t\t\tnewval = 10 + dir;\n\t\t\t\t} else if (this.inputData === 0 && border.qsub === 10 + dir) {\n\t\t\t\t\tnewval = 0;\n\t\t\t\t}\n\t\t\t\tif (newval !== null) {\n\t\t\t\t\tborder.setQsub(newval);\n\t\t\t\t\tborder.draw();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.prevPos = pos;\n\t\t},\n\t\tclickdiraux: function() {\n\t\t\tvar pos = this.getpos(0.22);\n\t\t\tif (this.prevPos.equals(pos)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar border = pos.getb();\n\t\t\tif (border.isnull) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar trans = { 0: 2, 2: 0 },\n\t\t\t\tqs = border.qsub;\n\t\t\tif (!border.isvert) {\n\t\t\t\ttrans =\n\t\t\t\t\tthis.btn === \"left\"\n\t\t\t\t\t\t? { 0: 2, 2: 11, 11: 12, 12: 0 }\n\t\t\t\t\t\t: { 0: 12, 12: 11, 11: 2, 2: 0 };\n\t\t\t} else {\n\t\t\t\ttrans =\n\t\t\t\t\tthis.btn === \"left\"\n\t\t\t\t\t\t? { 0: 2, 2: 13, 13: 14, 14: 0 }\n\t\t\t\t\t\t: { 0: 14, 14: 13, 13: 2, 2: 0 };\n\t\t\t}\n\t\t\tqs = trans[qs] || 0;\n\t\t\tif (this.inputMode === \"diraux\" && qs === 2) {\n\t\t\t\tqs = trans[qs] || 0;\n\t\t\t}\n\n\t\t\tborder.setQsub(qs);\n\t\t\tborder.draw();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.inputTateyoko() 縦棒・横棒をドラッグで入力する\n\t\t//---------------------------------------------------------------------------\n\t\tinputTateyoko: function() {\n\t\t\tif (this.mouseend && this.notInputted() && !!this.clickTateyoko) {\n\t\t\t\tthis.clickTateyoko();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar cell = this.getcell();\n\t\t\tif (cell.isnull) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 黒マス上なら何もしない\n\t\t\tif (this.pid !== \"amibo\" && cell.ques === 1) {\n\t\t\t} else if (this.pid === \"amibo\" && cell.isNum()) {\n\t\t\t}\n\t\t\t// 初回 or 入力し続けていて別のマスに移動した場合\n\t\t\telse if (this.mouseCell !== cell) {\n\t\t\t\tthis.firstPoint.set(this.inputPoint);\n\t\t\t}\n\t\t\t// まだ入力していないセルの場合\n\t\t\telse if (this.firstPoint.bx !== null) {\n\t\t\t\tvar val = null,\n\t\t\t\t\tdx = this.inputPoint.bx - this.firstPoint.bx,\n\t\t\t\t\tdy = this.inputPoint.by - this.firstPoint.by;\n\t\t\t\tif (dy <= -0.5 || 0.5 <= dy) {\n\t\t\t\t\tval = 1;\n\t\t\t\t} else if (dx <= -0.5 || 0.5 <= dx) {\n\t\t\t\t\tval = 2;\n\t\t\t\t}\n\n\t\t\t\tif (val !== null) {\n\t\t\t\t\tvar plus = this.pid === \"amibo\" || this.pid === \"tatamibari\";\n\n\t\t\t\t\tvar shape = 0;\n\t\t\t\t\tif (this.puzzle.playmode) {\n\t\t\t\t\t\tshape = { 0: 0, 11: 3, 12: 1, 13: 2 }[cell.qans];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshape = { \"-1\": 0, 1: 3, 2: 1, 3: 2 }[cell.qnum];\n\t\t\t\t\t}\n\t\t\t\t\tif (this.inputData === null ? shape & val : this.inputData <= 0) {\n\t\t\t\t\t\tval = !plus ? 0 : -val;\n\t\t\t\t\t}\n\n\t\t\t\t\t// 描画・後処理\n\t\t\t\t\tif (!plus) {\n\t\t\t\t\t\tshape = val;\n\t\t\t\t\t} else if (val > 0) {\n\t\t\t\t\t\tshape |= val;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshape &= ~-val;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.puzzle.playmode) {\n\t\t\t\t\t\tcell.setQans([0, 12, 13, 11][shape]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcell.setQnum([-1, 2, 3, 1][shape]);\n\t\t\t\t\t}\n\t\t\t\t\tcell.draw();\n\n\t\t\t\t\tthis.inputData = +(val > 0);\n\t\t\t\t\tthis.firstPoint.reset();\n\n\t\t\t\t\tif (this.pid === \"tatamibari\") {\n\t\t\t\t\t\tthis.mousereset();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.mouseCell = cell;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// mv.dispInfoBlk()  ひとつながりの黒マスを赤く表示する\n\t\t// mv.dispInfoUblk()\n\t\t// mv.dispInfoBlk8() ななめつながりの黒マスを赤く表示する\n\t\t// mv.dispInfoLine()   ひとつながりの線を赤く表示する\n\t\t//---------------------------------------------------------------------------\n\t\tdispInfoBlk: function() {\n\t\t\tvar cell = this.getcell();\n\t\t\tthis.mousereset();\n\t\t\tif (cell.isnull || !cell.isShade()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this.RBShadeCell) {\n\t\t\t\tcell.sblk.clist.setinfo(1);\n\t\t\t} else {\n\t\t\t\tthis.dispInfoBlk8(cell);\n\t\t\t}\n\t\t\tthis.board.hasinfo = true;\n\t\t\tthis.puzzle.redraw();\n\t\t},\n\t\tdispInfoUblk: function() {\n\t\t\tvar cell = this.getcell();\n\t\t\tthis.mousereset();\n\t\t\tif (cell.isnull || !cell.isUnshade()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcell.ublk.clist.setinfo(1);\n\t\t\tthis.board.hasinfo = true;\n\t\t\tthis.puzzle.redraw();\n\t\t},\n\t\tdispInfoBlk8: function(cell0) {\n\t\t\tvar stack = [cell0];\n\t\t\twhile (stack.length > 0) {\n\t\t\t\tvar cell = stack.pop();\n\t\t\t\tif (cell.qinfo !== 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tcell.setinfo(1);\n\t\t\t\tvar bx = cell.bx,\n\t\t\t\t\tby = cell.by,\n\t\t\t\t\tclist = this.board.cellinside(bx - 2, by - 2, bx + 2, by + 2);\n\t\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\t\tvar cell2 = clist[i];\n\t\t\t\t\tif (cell2.qinfo === 0 && cell2.isShade()) {\n\t\t\t\t\t\tstack.push(cell2);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdispInfoLine: function() {\n\t\t\tvar bd = this.board,\n\t\t\t\tborder = this.getborder(0.15);\n\t\t\tthis.mousereset();\n\t\t\tif (border.isnull) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!border.isLine()) {\n\t\t\t\tvar piece = !bd.borderAsLine\n\t\t\t\t\t? this.getcell()\n\t\t\t\t\t: this.getcross(); /* cell or cross */\n\t\t\t\tif (\n\t\t\t\t\tpiece.isnull ||\n\t\t\t\t\t(bd.linegraph.isLineCross && (piece.lcnt === 3 || piece.lcnt === 4))\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar adb = piece.adjborder;\n\t\t\t\tif (adb.left.isLine()) {\n\t\t\t\t\tborder = adb.left;\n\t\t\t\t} else if (adb.right.isLine()) {\n\t\t\t\t\tborder = adb.right;\n\t\t\t\t} else if (adb.top.isLine()) {\n\t\t\t\t\tborder = adb.top;\n\t\t\t\t} else if (adb.bottom.isLine()) {\n\t\t\t\t\tborder = adb.bottom;\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (border.isnull) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbd.border.setinfo(-1);\n\t\t\tborder.path.setedgeinfo(1);\n\t\t\tbd.hasinfo = true;\n\t\t\tthis.puzzle.redraw();\n\t\t}\n\t}\n});\n","// AnswerCommon.js v3.4.1\n\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\tAnsCheck: {\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkAllCell()   条件func==trueになるマスがあったらエラーを設定する\n\t\t// ans.checkNoNumCell() 数字の入っていないセルがあるか判定する\n\t\t// ans.checkIceLines()  アイスバーン上で線が曲がっているか判定する\n\t\t// ans.checkNotCrossOnMark()  十字のマーク上で線が交差していることを判定する\n\t\t// ans.checkLineOnShadeCell() 黒マス上に線がないことを判定する\n\t\t// ans.checkNoLineObject()    線が出ていない数字や○がないかどうか判定する\n\t\t// ans.checkLineOverLetter()  線が数字などを通過しているか判定する\n\t\t// ans.checkNumberHasArrow()  For editors only. Check if a number clue is without an arrow.\n\t\t//---------------------------------------------------------------------------\n\t\tcheckAllCell: function(func, code) {\n\t\t\tfor (var c = 0; c < this.board.cell.length; c++) {\n\t\t\t\tvar cell = this.board.cell[c];\n\t\t\t\tif (cell.ques === 7) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (!func(cell)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis.failcode.add(code);\n\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcell.seterr(1);\n\t\t\t}\n\t\t},\n\t\tcheckNoNumCell: function() {\n\t\t\tthis.checkAllCell(function(cell) {\n\t\t\t\treturn cell.ques === 0 && cell.noNum();\n\t\t\t}, \"ceNoNum\");\n\t\t},\n\t\tcheckIceLines: function() {\n\t\t\tthis.checkAllCell(function(cell) {\n\t\t\t\treturn cell.ice() && cell.isLineCurve();\n\t\t\t}, \"lnCurveOnIce\");\n\t\t},\n\t\tcheckNotCrossOnMark: function() {\n\t\t\tthis.checkAllCell(function(cell) {\n\t\t\t\treturn cell.lcnt !== 4 && cell.ques === 11;\n\t\t\t}, \"lnNotCrossMk\");\n\t\t},\n\t\tcheckLineOnShadeCell: function() {\n\t\t\tthis.checkAllCell(function(cell) {\n\t\t\t\treturn (cell.ques === 1 || cell.qans === 1) && cell.lcnt > 0;\n\t\t\t}, \"lnOnShade\");\n\t\t},\n\t\tcheckNoLineObject: function() {\n\t\t\tthis.checkAllCell(function(cell) {\n\t\t\t\treturn cell.lcnt === 0 && cell.isNum();\n\t\t\t}, \"nmNoLine\");\n\t\t},\n\t\tcheckLineOverLetter: function() {\n\t\t\tthis.checkAllCell(\n\t\t\t\tfunction(cell) {\n\t\t\t\t\treturn cell.lcnt >= 2 && cell.isNum();\n\t\t\t\t},\n\t\t\t\tthis.board.linegraph.moveline ? \"laOnNum\" : \"lcOnNum\"\n\t\t\t);\n\t\t},\n\t\tcheckNumberHasArrow: function() {\n\t\t\tthis.checkAllCell(function(cell) {\n\t\t\t\treturn cell.qnum >= 0 && cell.qdir === cell.NDIR;\n\t\t\t}, \"anNoArrow\");\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkDir4Cell()  セルの周囲4マスの条件がfunc==trueの時、エラーを設定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckDir4Cell: function(iscount, type, code) {\n\t\t\t// type = 0:違う 1:numより小さい 2:numより大きい\n\t\t\tfor (var c = 0; c < this.board.cell.length; c++) {\n\t\t\t\tvar cell = this.board.cell[c];\n\t\t\t\tif (!cell.isValidNum()) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar num = cell.getNum(),\n\t\t\t\t\tcount = cell.countDir4Cell(iscount);\n\t\t\t\tif (\n\t\t\t\t\t(type === 0 && num === count) ||\n\t\t\t\t\t(type === 1 && num <= count) ||\n\t\t\t\t\t(type === 2 && num >= count)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis.failcode.add(code);\n\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcell.seterr(1);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkSideCell()  隣り合った2つのセルが条件func==trueの時、エラーを設定する\n\t\t// ans.checkAdjacentShadeCell()  黒マスが隣接している時、エラーを設定する\n\t\t// ans.checkAdjacentDiffNumber() 同じ数字が隣接している時、エラーを設定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckSideCell: function(func, code) {\n\t\t\tvar result = true,\n\t\t\t\tbd = this.board;\n\t\t\tfor (var c = 0; c < bd.cell.length; c++) {\n\t\t\t\tvar cell = bd.cell[c],\n\t\t\t\t\tcell2 = cell.adjacent.right;\n\t\t\t\tif (cell.bx < bd.maxbx - 1 && func(cell, cell2)) {\n\t\t\t\t\tresult = false;\n\t\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcell.seterr(1);\n\t\t\t\t\tcell2.seterr(1);\n\t\t\t\t}\n\t\t\t\tcell2 = cell.adjacent.bottom;\n\t\t\t\tif (cell.by < bd.maxby - 1 && func(cell, cell2)) {\n\t\t\t\t\tresult = false;\n\t\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcell.seterr(1);\n\t\t\t\t\tcell2.seterr(1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!result) {\n\t\t\t\tthis.failcode.add(code);\n\t\t\t}\n\t\t},\n\t\tcheckAdjacentShadeCell: function() {\n\t\t\tthis.checkSideCell(function(cell1, cell2) {\n\t\t\t\treturn cell1.isShade() && cell2.isShade();\n\t\t\t}, \"csAdjacent\");\n\t\t},\n\t\tcheckAdjacentDiffNumber: function() {\n\t\t\tthis.checkSideCell(function(cell1, cell2) {\n\t\t\t\treturn cell1.sameNumber(cell2);\n\t\t\t}, \"nmAdjacent\");\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.check2x2Block()      2x2のセルが全て条件func==trueの時、エラーを設定する\n\t\t// ans.check2x2ShadeCell()  2x2のセルが黒マスの時、エラーを設定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheck2x2Block: function(func, code) {\n\t\t\tvar bd = this.board;\n\t\t\tfor (var c = 0; c < bd.cell.length; c++) {\n\t\t\t\tvar cell = bd.cell[c];\n\t\t\t\tif (cell.bx >= bd.maxbx - 1 || cell.by >= bd.maxby - 1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar bx = cell.bx,\n\t\t\t\t\tby = cell.by;\n\t\t\t\tvar clist = bd.cellinside(bx, by, bx + 2, by + 2).filter(func);\n\t\t\t\tif (clist.length < 4) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis.failcode.add(code);\n\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tclist.seterr(1);\n\t\t\t}\n\t\t},\n\t\tcheck2x2ShadeCell: function() {\n\t\t\tthis.check2x2Block(function(cell) {\n\t\t\t\treturn cell.isShade();\n\t\t\t}, \"cs2x2\");\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkSameColorTile() 白マスと黒マスが混ざったタイルがないかどうかチェックする\n\t\t//---------------------------------------------------------------------------\n\t\tcheckSameColorTile: function() {\n\t\t\tthis.checkSameObjectInRoom(\n\t\t\t\tthis.board.roommgr,\n\t\t\t\tfunction(cell) {\n\t\t\t\t\treturn cell.isShade() ? 1 : 2;\n\t\t\t\t},\n\t\t\t\t\"bkMixed\"\n\t\t\t);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkConnectShade()    黒マスがひとつながりかどうかを判定する\n\t\t// ans.checkConnectUnshade()  白マスがひとつながりかどうかを判定する\n\t\t// ans.checkConnectNumber()   数字がひとつながりかどうかを判定する\n\t\t// ans.checkOneArea()  白マス/黒マス/線がひとつながりかどうかを判定する\n\t\t// ans.checkConnectUnshadeRB() 連黒分断禁のパズルで白マスが分断されているかチェックする\n\t\t//---------------------------------------------------------------------------\n\t\tcheckConnectShade: function() {\n\t\t\tthis.checkOneArea(this.board.sblkmgr, \"csDivide\");\n\t\t},\n\t\tcheckConnectUnshade: function() {\n\t\t\tthis.checkOneArea(this.board.ublkmgr, \"cuDivide\");\n\t\t},\n\t\tcheckConnectNumber: function() {\n\t\t\tthis.checkOneArea(this.board.nblkmgr, \"nmDivide\");\n\t\t},\n\t\tcheckOneArea: function(graph, code) {\n\t\t\tif (graph.components.length > 1) {\n\t\t\t\tthis.failcode.add(code);\n\t\t\t\tgraph.components[0].getnodeobjs().seterr(1);\n\t\t\t}\n\t\t},\n\n\t\tcheckConnectUnshadeRB: function() {\n\t\t\tif (this.board.ublkmgr.components.length > 1) {\n\t\t\t\tthis.failcode.add(\"cuDivideRB\");\n\t\t\t\tvar errclist = new this.klass.CellList();\n\t\t\t\tvar clist = this.board.cell.filter(function(cell) {\n\t\t\t\t\treturn cell.isShade();\n\t\t\t\t});\n\t\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\t\tvar cell = clist[i],\n\t\t\t\t\t\tlist = cell.getdir4clist(),\n\t\t\t\t\t\tfid = null;\n\t\t\t\t\tfor (var n = 0; n < list.length; n++) {\n\t\t\t\t\t\tvar cell2 = list[n][0];\n\t\t\t\t\t\tif (fid === null) {\n\t\t\t\t\t\t\tfid = cell2.ublk;\n\t\t\t\t\t\t} else if (fid !== cell2.ublk) {\n\t\t\t\t\t\t\terrclist.add(cell);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\terrclist.seterr(1);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkShadeCellExist()  盤面に少なくとも一つは黒マスがあることを判定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckShadeCellExist: function() {\n\t\t\tvar bd = this.board;\n\t\t\tif (bd.sblkmgr.enabled) {\n\t\t\t\tif (bd.sblkmgr.components.length > 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (bd.ublkmgr.enabled) {\n\t\t\t\tif (\n\t\t\t\t\tbd.ublkmgr.components.length === 0 ||\n\t\t\t\t\tbd.ublkmgr.components[0].nodes.length !== bd.cell.length\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tbd.cell.some(function(cell) {\n\t\t\t\t\t\treturn cell.isShade();\n\t\t\t\t\t})\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.failcode.add(\"brNoShade\");\n\t\t},\n\n\t\t// autocheck trigger: shading status of all cells explicitly decided\n\t\tdoneShadingDecided: function() {\n\t\t\tvar bd = this.board;\n\t\t\tif (\n\t\t\t\tbd.cell.some(function(cell) {\n\t\t\t\t\treturn !cell.isShadeDecided();\n\t\t\t\t})\n\t\t\t) {\n\t\t\t\tthis.failcode.setUndecided();\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkOneLoop()  盤面に引かれているループが一つに繋がっていることを判定する\n\t\t// ans.checkOneLine()  check if there are multiple lines\n\t\t// ans.checkOneLineBase()\n\t\t//---------------------------------------------------------------------------\n\t\tcheckOneLoop: function() {\n\t\t\tthis.checkOneLineBase(\"lnPlLoop\");\n\t\t},\n\n\t\tcheckOneLine: function() {\n\t\t\tthis.checkOneLineBase(\"lnPlLine\");\n\t\t},\n\n\t\tcheckOneLineBase: function(code) {\n\t\t\tvar bd = this.board,\n\t\t\t\tpaths = bd.linegraph.components;\n\t\t\tif (paths.length > 1) {\n\t\t\t\tthis.failcode.add(code);\n\t\t\t\tbd.border.setnoerr();\n\t\t\t\tpaths[0].setedgeerr(1);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkNumberExist()  盤面に少なくとも一つは数字があることを判定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckNumberExist: function() {\n\t\t\tif (\n\t\t\t\tthis.board.cell.some(function(cell) {\n\t\t\t\t\treturn cell.isValidNum();\n\t\t\t\t})\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.failcode.add(\"brNoValidNum\");\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkConnectAllNumber() 盤面に引かれている線が一つに繋がっていることを判定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckConnectAllNumber: function() {\n\t\t\tvar bd = this.board,\n\t\t\t\tpaths = bd.linegraph.components;\n\t\t\tif (paths.length > 1) {\n\t\t\t\tthis.failcode.add(\"lcDivided\");\n\t\t\t\tbd.border.setnoerr();\n\t\t\t\tpaths[0].setedgeerr(1);\n\t\t\t\tpaths[0].clist.seterr(4);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkLineExist()  盤面に少なくとも一本は線が引かれていることを判定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckLineExist: function() {\n\t\t\tvar bd = this.board;\n\t\t\tif (\n\t\t\t\tbd.linegraph.ltotal[0] !==\n\t\t\t\t(!bd.borderAsLine ? bd.cell : bd.cross).length\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.failcode.add(\"brNoLine\");\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkLineCount() セルから出ている線の本数について判定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckCrossLine: function() {\n\t\t\tthis.checkLineCount(4, \"lnCross\");\n\t\t},\n\t\tcheckBranchLine: function() {\n\t\t\tthis.checkLineCount(3, \"lnBranch\");\n\t\t},\n\t\tcheckDeadendLine: function() {\n\t\t\tthis.checkLineCount(1, \"lnDeadEnd\");\n\t\t},\n\t\tcheckNoLine: function() {\n\t\t\tthis.checkLineCount(0, \"ceNoLine\");\n\t\t},\n\t\tcheckLineCount: function(val, code) {\n\t\t\tvar result = true,\n\t\t\t\tbd = this.board;\n\t\t\tif (!bd.linegraph.ltotal[val]) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!bd.borderAsLine) {\n\t\t\t\tthis.checkAllCell(function(cell) {\n\t\t\t\t\treturn cell.lcnt === val;\n\t\t\t\t}, code);\n\t\t\t} else {\n\t\t\t\tvar boardcross = bd.cross;\n\t\t\t\tfor (var c = 0; c < boardcross.length; c++) {\n\t\t\t\t\tvar cross = boardcross[c];\n\t\t\t\t\tif (cross.lcnt !== val) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = false;\n\t\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcross.seterr(1);\n\t\t\t\t\tbd.borderinside(\n\t\t\t\t\t\tcross.bx - 1,\n\t\t\t\t\t\tcross.by - 1,\n\t\t\t\t\t\tcross.bx + 1,\n\t\t\t\t\t\tcross.by + 1\n\t\t\t\t\t).seterr(1);\n\t\t\t\t}\n\t\t\t\tif (!result) {\n\t\t\t\t\tthis.failcode.add(code);\n\t\t\t\t\tbd.border.setnoerr();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkConnectLineCount() ○などがないセルから出ている線の本数について判定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckCrossConnectLine: function() {\n\t\t\tthis.checkConnectLineCount(4, \"lnCross\");\n\t\t},\n\t\tcheckBranchConnectLine: function() {\n\t\t\tthis.checkConnectLineCount(3, \"lnBranch\");\n\t\t},\n\t\tcheckDeadendConnectLine: function() {\n\t\t\tthis.checkConnectLineCount(1, \"lnDeadEnd\");\n\t\t},\n\t\tcheckConnectLineCount: function(val, code) {\n\t\t\tif (!this.board.linegraph.ltotal[val]) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.checkAllCell(function(cell) {\n\t\t\t\treturn cell.noNum() && cell.lcnt === val;\n\t\t\t}, code);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkenableLineParts() '一部があかされている'線の部分に、線が引かれているか判定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckenableLineParts: function() {\n\t\t\tvar bd = this.board;\n\t\t\tfor (var c = 0; c < bd.cell.length; c++) {\n\t\t\t\tvar cell = bd.cell[c],\n\t\t\t\t\tadb = cell.adjborder;\n\t\t\t\tif (\n\t\t\t\t\t(!adb.top.isLine() || !cell.noLP(cell.UP)) &&\n\t\t\t\t\t(!adb.bottom.isLine() || !cell.noLP(cell.DN)) &&\n\t\t\t\t\t(!adb.left.isLine() || !cell.noLP(cell.LT)) &&\n\t\t\t\t\t(!adb.right.isLine() || !cell.noLP(cell.RT))\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis.failcode.add(\"ceAddLine\");\n\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcell.seterr(1);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkAllArea()    すべてのエリアがevalfuncを満たすかどうか判定する\n\t\t// ans.checkAllBlock()   すべてのfuncを満たすマスで構成されるエリアが\n\t\t//                       evalfuncを満たすかどうか判定する\n\t\t// ans.checkAllArea2()   すべてのエリアがareaを引数に取るevalfuncを満たすかどうか判定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckAllArea: function(graph, evalfunc, code) {\n\t\t\tthis.checkAllBlock(graph, null, evalfunc, code);\n\t\t},\n\t\tcheckAllBlock: function(graph, filterfunc, evalfunc, code) {\n\t\t\tvar areas = graph.components;\n\t\t\tfor (var id = 0; id < areas.length; id++) {\n\t\t\t\tvar area = areas[id],\n\t\t\t\t\tclist = area.clist;\n\t\t\t\tvar top = !!area.top ? area.top : clist.getQnumCell();\n\t\t\t\tvar d = clist.getRectSize();\n\t\t\t\tvar a = (!!filterfunc ? clist.filter(filterfunc) : clist).length;\n\t\t\t\tvar n = !!top && !top.isnull ? top.qnum : -1;\n\t\t\t\tif (evalfunc(d.cols, d.rows, a, n)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis.failcode.add(code);\n\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (areas !== this.board.linegraph) {\n\t\t\t\t\tclist.seterr(this.pid !== \"tateyoko\" ? 1 : 4);\n\t\t\t\t} else {\n\t\t\t\t\tthis.board.border.setnoerr();\n\t\t\t\t\tarea.objs.seterr(1);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkNumberAndSize()  部屋にある数字と面積が等しいか判定する\n\t\t// ans.checkRoomRect()       領域が全て四角形であるかどうか判定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckNumberAndSize: function() {\n\t\t\tthis.checkAllArea(\n\t\t\t\tthis.board.roommgr,\n\t\t\t\tfunction(w, h, a, n) {\n\t\t\t\t\treturn n <= 0 || n === a;\n\t\t\t\t},\n\t\t\t\t\"bkSizeNe\"\n\t\t\t);\n\t\t},\n\t\tcheckRoomRect: function() {\n\t\t\tthis.checkAllArea(\n\t\t\t\tthis.board.roommgr,\n\t\t\t\tfunction(w, h, a, n) {\n\t\t\t\t\treturn w * h === a;\n\t\t\t\t},\n\t\t\t\t\"bkNotRect\"\n\t\t\t);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkNoNumber()       部屋に数字が含まれていないかの判定を行う\n\t\t// ans.checkDoubleNumber()   部屋に数字が2つ以上含まれていないように判定を行う\n\t\t//---------------------------------------------------------------------------\n\t\tcheckNoNumber: function() {\n\t\t\tthis.checkAllBlock(\n\t\t\t\tthis.board.roommgr,\n\t\t\t\tfunction(cell) {\n\t\t\t\t\treturn cell.isNum();\n\t\t\t\t},\n\t\t\t\tfunction(w, h, a, n) {\n\t\t\t\t\treturn a !== 0;\n\t\t\t\t},\n\t\t\t\t\"bkNoNum\"\n\t\t\t);\n\t\t},\n\t\tcheckDoubleNumber: function() {\n\t\t\tthis.checkAllBlock(\n\t\t\t\tthis.board.roommgr,\n\t\t\t\tfunction(cell) {\n\t\t\t\t\treturn cell.isNum();\n\t\t\t\t},\n\t\t\t\tfunction(w, h, a, n) {\n\t\t\t\t\treturn a < 2;\n\t\t\t\t},\n\t\t\t\t\"bkNumGe2\"\n\t\t\t);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkShadeCellCount() 領域内の数字と黒マスの数が等しいか判定する\n\t\t// ans.checkNoShadeCellInArea()  部屋に黒マスがあるか判定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckShadeCellCount: function() {\n\t\t\tthis.checkAllBlock(\n\t\t\t\tthis.board.roommgr,\n\t\t\t\tfunction(cell) {\n\t\t\t\t\treturn cell.isShade();\n\t\t\t\t},\n\t\t\t\tfunction(w, h, a, n) {\n\t\t\t\t\treturn n < 0 || n === a;\n\t\t\t\t},\n\t\t\t\t\"bkShadeNe\"\n\t\t\t);\n\t\t},\n\t\tcheckNoShadeCellInArea: function() {\n\t\t\tthis.checkAllBlock(\n\t\t\t\tthis.board.roommgr,\n\t\t\t\tfunction(cell) {\n\t\t\t\t\treturn cell.isShade();\n\t\t\t\t},\n\t\t\t\tfunction(w, h, a, n) {\n\t\t\t\t\treturn a > 0;\n\t\t\t\t},\n\t\t\t\t\"bkNoShade\"\n\t\t\t);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkLinesInArea()  領域の中で線が通っているセルの数を判定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckLinesInArea: function(graph, evalfunc, code) {\n\t\t\tthis.checkAllBlock(\n\t\t\t\tgraph,\n\t\t\t\tfunction(cell) {\n\t\t\t\t\treturn cell.lcnt > 0;\n\t\t\t\t},\n\t\t\t\tevalfunc,\n\t\t\t\tcode\n\t\t\t);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkNoMovedObjectInRoom() 領域に移動後のオブジェクトがないと判定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckNoMovedObjectInRoom: function(graph) {\n\t\t\tthis.checkAllBlock(\n\t\t\t\tgraph,\n\t\t\t\tfunction(cell) {\n\t\t\t\t\treturn cell.base.qnum !== -1;\n\t\t\t\t},\n\t\t\t\tfunction(w, h, a, n) {\n\t\t\t\t\treturn a !== 0;\n\t\t\t\t},\n\t\t\t\t\"bkNoNum\"\n\t\t\t);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkDisconnectLine() 数字などに繋がっていない線の判定を行う\n\t\t// ans.checkConnectObject()  数字が線で2つ以上繋がっていないように判定を行う\n\t\t// ans.checkTripleObject()   数字が線で3つ以上繋がっていないように判定を行う\n\t\t// ans.checkConnectObjectCount() 上記関数の共通処理\n\t\t//---------------------------------------------------------------------------\n\t\tcheckDisconnectLine: function() {\n\t\t\tthis.checkConnectObjectCount(\n\t\t\t\tfunction(a) {\n\t\t\t\t\treturn a > 0;\n\t\t\t\t},\n\t\t\t\tthis.board.linegraph.moveline ? \"laIsolate\" : \"lcIsolate\"\n\t\t\t);\n\t\t},\n\t\tcheckConnectObject: function() {\n\t\t\tthis.checkConnectObjectCount(function(a) {\n\t\t\t\treturn a < 2;\n\t\t\t}, \"nmConnected\");\n\t\t},\n\t\tcheckTripleObject: function() {\n\t\t\tthis.checkConnectObjectCount(function(a) {\n\t\t\t\treturn a < 3;\n\t\t\t}, \"lcTripleNum\");\n\t\t},\n\t\tcheckConnectObjectCount: function(evalfunc, code) {\n\t\t\tvar result = true,\n\t\t\t\tpaths = this.board.linegraph.components;\n\t\t\tfor (var id = 0; id < paths.length; id++) {\n\t\t\t\tvar clist = paths[id].clist;\n\t\t\t\tif (\n\t\t\t\t\tevalfunc(\n\t\t\t\t\t\tclist.filter(function(cell) {\n\t\t\t\t\t\t\treturn cell.isNum();\n\t\t\t\t\t\t}).length\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult = false;\n\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.board.border.setnoerr();\n\t\t\t\tpaths[id].setedgeerr(1);\n\t\t\t\tpaths[id].clist.seterr(4);\n\t\t\t}\n\t\t\tif (!result) {\n\t\t\t\tthis.failcode.add(code);\n\t\t\t\tthis.board.border.setnoerr();\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkSideAreaSize() 境界線をはさんで接する部屋のgetvalで得られるサイズが異なることを判定する\n\t\t// ans.checkSideAreaCell() 境界線をはさんでタテヨコに接するセルの判定を行う\n\t\t//---------------------------------------------------------------------------\n\t\tcheckSideAreaSize: function(graph, getval, code) {\n\t\t\tvar sides = graph.getSideAreaInfo();\n\t\t\tfor (var i = 0; i < sides.length; i++) {\n\t\t\t\tvar a1 = getval(sides[i][0]),\n\t\t\t\t\ta2 = getval(sides[i][1]);\n\t\t\t\tif (a1 <= 0 || a2 <= 0 || a1 !== a2) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis.failcode.add(code);\n\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tsides[i][0].clist.seterr(1);\n\t\t\t\tsides[i][1].clist.seterr(1);\n\t\t\t}\n\t\t},\n\n\t\tcheckSideAreaCell: function(func, flag, code) {\n\t\t\tfor (var id = 0; id < this.board.border.length; id++) {\n\t\t\t\tvar border = this.board.border[id];\n\t\t\t\tif (!border.isBorder()) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar cell1 = border.sidecell[0],\n\t\t\t\t\tcell2 = border.sidecell[1];\n\t\t\t\tif (cell1.isnull || cell2.isnull || !func(cell1, cell2)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis.failcode.add(code);\n\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (!flag) {\n\t\t\t\t\tcell1.seterr(1);\n\t\t\t\t\tcell2.seterr(1);\n\t\t\t\t} else {\n\t\t\t\t\tcell1.room.clist.seterr(1);\n\t\t\t\t\tcell2.room.clist.seterr(1);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkSameObjectInRoom()      部屋の中のgetvalueの値が1種類であるか判定する\n\t\t// ans.checkDifferentNumberInRoom() 部屋の中に同じ数字が存在しないことを判定する\n\t\t// ans.isDifferentNumberInClist()   clistの中に同じ数字が存在しないことを判定だけを行う\n\t\t//---------------------------------------------------------------------------\n\t\tcheckSameObjectInRoom: function(graph, getvalue, code) {\n\t\t\tvar areas = graph.components;\n\t\t\tallloop: for (var id = 0; id < areas.length; id++) {\n\t\t\t\tvar clist = areas[id].clist;\n\t\t\t\tvar roomval = -1;\n\t\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\t\tvar cell = clist[i],\n\t\t\t\t\t\tval = getvalue(cell);\n\t\t\t\t\tif (val === -1 || roomval === val) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (roomval === -1) {\n\t\t\t\t\t\troomval = val;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.failcode.add(code);\n\t\t\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\t\t\tbreak allloop;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (areas !== this.board.linegraph.components) {\n\t\t\t\t\t\t\tclist.seterr(1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.board.border.setnoerr();\n\t\t\t\t\t\t\tareas[id].setedgeerr(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tcheckDifferentNumberInRoom: function() {\n\t\t\tthis.checkDifferentNumberInRoom_main(\n\t\t\t\tthis.board.roommgr,\n\t\t\t\tthis.isDifferentNumberInClist\n\t\t\t);\n\t\t},\n\t\tcheckDifferentNumberInRoom_main: function(graph, evalfunc) {\n\t\t\tvar areas = graph.components;\n\t\t\tfor (var r = 0; r < areas.length; r++) {\n\t\t\t\tvar clist = areas[r].clist;\n\t\t\t\tif (evalfunc.call(this, clist)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis.failcode.add(\"bkDupNum\");\n\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tclist.seterr(1);\n\t\t\t}\n\t\t},\n\n\t\tisDifferentNumberInClist: function(clist) {\n\t\t\treturn this.isIndividualObject(clist, function(cell) {\n\t\t\t\treturn cell.getNum();\n\t\t\t});\n\t\t},\n\t\tisDifferentAnsNumberInClist: function(clist) {\n\t\t\treturn this.isIndividualObject(clist, function(cell) {\n\t\t\t\treturn cell.anum;\n\t\t\t});\n\t\t},\n\t\tisIndividualObject: function(clist, numfunc) {\n\t\t\tif (clist.length <= 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar result = true,\n\t\t\t\td = [],\n\t\t\t\tnum = [];\n\t\t\tvar max = -1,\n\t\t\t\tbottom = clist[0].getminnum();\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tif (max < numfunc(clist[i])) {\n\t\t\t\t\tmax = numfunc(clist[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var n = bottom; n <= max; n++) {\n\t\t\t\td[n] = 0;\n\t\t\t}\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tnum[clist[i].id] = numfunc(clist[i]);\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tif (num[clist[i].id] >= bottom) {\n\t\t\t\t\td[num[clist[i].id]]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar clist2 = clist.filter(function(cell) {\n\t\t\t\treturn num[cell.id] >= bottom && d[num[cell.id]] >= 2;\n\t\t\t});\n\t\t\tif (clist2.length > 0) {\n\t\t\t\tclist2.seterr(1);\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkRowsCols()              タテ列・ヨコ列の数字の判定を行う\n\t\t// ans.checkDifferentNumberInLine() タテ列・ヨコ列に同じ数字が入っていないことを判定する\n\t\t//---------------------------------------------------------------------------\n\t\t/* ともにevalfuncはAnswerクラスの関数限定 */\n\t\tcheckRowsCols: function(evalfunc, code) {\n\t\t\tvar result = true,\n\t\t\t\tbd = this.board;\n\t\t\tallloop: do {\n\t\t\t\t/* 横方向サーチ */\n\t\t\t\tfor (var by = 1; by <= bd.maxby; by += 2) {\n\t\t\t\t\tvar clist = bd.cellinside(bd.minbx + 1, by, bd.maxbx - 1, by);\n\t\t\t\t\tif (evalfunc.call(this, clist)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = false;\n\t\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\t\tbreak allloop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t/* 縦方向サーチ */\n\t\t\t\tfor (var bx = 1; bx <= bd.maxbx; bx += 2) {\n\t\t\t\t\tvar clist = bd.cellinside(bx, bd.minby + 1, bx, bd.maxby - 1);\n\t\t\t\t\tif (evalfunc.call(this, clist)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = false;\n\t\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\t\tbreak allloop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} while (0);\n\n\t\t\tif (!result) {\n\t\t\t\tthis.failcode.add(code);\n\t\t\t}\n\t\t},\n\t\tcheckDifferentNumberInLine: function() {\n\t\t\tthis.checkRowsCols(this.isDifferentNumberInClist, \"nmDupRow\");\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkRowsColsPartly()      黒マスや[＼]等で分かれるタテ列・ヨコ列の数字の判定を行う\n\t\t// ans.checkRowsColsFor51cell()   [＼]で分かれるタテ列・ヨコ列の数字の判定を行う\n\t\t//---------------------------------------------------------------------------\n\t\tcheckRowsColsPartly: function(evalfunc, termfunc, code) {\n\t\t\tvar result = true,\n\t\t\t\tbd = this.board,\n\t\t\t\tinfo;\n\t\t\tallloop: do {\n\t\t\t\t/* 横方向サーチ */\n\t\t\t\tinfo = { keycell: null, key51num: -1, isvert: false };\n\t\t\t\tfor (var by = 1; by <= bd.maxby; by += 2) {\n\t\t\t\t\tfor (var bx = 1; bx <= bd.maxbx; bx += 2) {\n\t\t\t\t\t\tfor (var tx = bx; tx <= bd.maxbx; tx += 2) {\n\t\t\t\t\t\t\tif (termfunc(bd.getc(tx, by))) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinfo.keycell = bd.getobj(bx - 2, by);\n\t\t\t\t\t\tinfo.key51num = info.keycell.qnum;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttx > bx &&\n\t\t\t\t\t\t\t!evalfunc.call(this, bd.cellinside(bx, by, tx - 2, by), info)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\t\t\t\tbreak allloop;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbx = tx; /* 次のループはbx=tx+2 */\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t/* 縦方向サーチ */\n\t\t\t\tinfo = { keycell: null, key51num: -1, isvert: true };\n\t\t\t\tfor (var bx = 1; bx <= bd.maxbx; bx += 2) {\n\t\t\t\t\tfor (var by = 1; by <= bd.maxby; by += 2) {\n\t\t\t\t\t\tfor (var ty = by; ty <= bd.maxby; ty += 2) {\n\t\t\t\t\t\t\tif (termfunc(bd.getc(bx, ty))) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinfo.keycell = bd.getobj(bx, by - 2);\n\t\t\t\t\t\tinfo.key51num = info.keycell.qnum2;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tty > by &&\n\t\t\t\t\t\t\t!evalfunc.call(this, bd.cellinside(bx, by, bx, ty - 2), info)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\t\t\t\tbreak allloop;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tby = ty; /* 次のループはbx=ty+2 */\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} while (0);\n\n\t\t\tif (!result) {\n\t\t\t\tthis.failcode.add(code);\n\t\t\t}\n\t\t},\n\t\tcheckRowsColsFor51cell: function(evalfunc, code) {\n\t\t\tthis.checkRowsColsPartly(\n\t\t\t\tevalfunc,\n\t\t\t\tfunction(cell) {\n\t\t\t\t\treturn cell.is51cell();\n\t\t\t\t},\n\t\t\t\tcode\n\t\t\t);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkBorderCount()  ある交点との周り四方向の境界線の数を判定する(bp==1:黒点が打たれている場合)\n\t\t//---------------------------------------------------------------------------\n\t\tcheckBorderCross: function() {\n\t\t\tthis.checkBorderCount(4, 0, \"bdCross\");\n\t\t},\n\t\tcheckBorderDeadend: function() {\n\t\t\tthis.checkBorderCount(1, 0, \"bdDeadEnd\");\n\t\t},\n\t\tcheckBorderCount: function(val, bp, code) {\n\t\t\tvar result = true,\n\t\t\t\tbd = this.board;\n\t\t\tvar crosses =\n\t\t\t\tbd.hascross === 2\n\t\t\t\t\t? bd.cross\n\t\t\t\t\t: bd.crossinside(\n\t\t\t\t\t\t\tbd.minbx + 2,\n\t\t\t\t\t\t\tbd.minby + 2,\n\t\t\t\t\t\t\tbd.maxbx - 2,\n\t\t\t\t\t\t\tbd.maxby - 2\n\t\t\t\t\t  );\n\t\t\tfor (var c = 0; c < crosses.length; c++) {\n\t\t\t\tvar cross = crosses[c];\n\t\t\t\tif (\n\t\t\t\t\tcross.lcnt !== val ||\n\t\t\t\t\t(bp === 1 && cross.qnum !== 1) ||\n\t\t\t\t\t(bp === 2 && cross.qnum === 1)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult = false;\n\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcross.setCrossBorderError();\n\t\t\t}\n\t\t\tif (!result) {\n\t\t\t\tthis.failcode.add(code);\n\t\t\t\tbd.border.setnoerr();\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// ans.checkLineShape()  すべての丸などで区切られた線が、pathを引数に取るevalfunc==falseになるかどうか判定する\n\t\t// ans.checkLineShapeDeadend()  オブジェクトを結ぶ線が途中で途切れていることを判定する\n\t\t//---------------------------------------------------------------------------\n\t\tcheckLineShape: function(evalfunc, code) {\n\t\t\tvar result = true,\n\t\t\t\tpathsegs = this.getLineShapeInfo();\n\t\t\tfor (var id = 0; id < pathsegs.length; id++) {\n\t\t\t\tvar pathseg = pathsegs[id];\n\t\t\t\tif (!pathseg || !evalfunc(pathseg)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult = false;\n\t\t\t\tif (this.checkOnly) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tvar cells = pathseg.cells;\n\t\t\t\tif (!!cells[0] && !cells[0].isnull) {\n\t\t\t\t\tcells[0].seterr(1);\n\t\t\t\t}\n\t\t\t\tif (!!cells[1] && !cells[1].isnull) {\n\t\t\t\t\tcells[1].seterr(1);\n\t\t\t\t}\n\t\t\t\tpathseg.objs.seterr(1);\n\t\t\t}\n\t\t\tif (!result) {\n\t\t\t\tthis.failcode.add(code);\n\t\t\t\tthis.board.border.setnoerr();\n\t\t\t}\n\t\t},\n\t\tcheckLineShapeDeadend: function() {\n\t\t\tthis.checkLineShape(function(pathseg) {\n\t\t\t\treturn pathseg.cells[1].isnull;\n\t\t\t}, \"lcDeadEnd\");\n\t\t},\n\n\t\t//--------------------------------------------------------------------------------\n\t\t// ans.getLineShapeInfo() 丸などで区切られた線を探索し情報を設定する\n\t\t// ans.serachLineShapeInfo() 丸などで区切られた線を探索します\n\t\t//--------------------------------------------------------------------------------\n\t\tgetLineShapeInfo: function() {\n\t\t\tif (this._info.num) {\n\t\t\t\treturn this._info.num;\n\t\t\t}\n\n\t\t\tvar bd = this.board;\n\t\t\tvar pathsegs = [],\n\t\t\t\tpassed = [];\n\t\t\tfor (var id = 0; id < bd.border.length; id++) {\n\t\t\t\tpassed[id] = false;\n\t\t\t}\n\n\t\t\tvar clist = bd.cell.filter(function(cell) {\n\t\t\t\treturn cell.isNum();\n\t\t\t});\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i],\n\t\t\t\t\tadb = cell.adjborder;\n\t\t\t\tvar dir4bd = [adb.top, adb.bottom, adb.left, adb.right];\n\t\t\t\tfor (var a = 0; a < 4; a++) {\n\t\t\t\t\tvar firstbd = dir4bd[a];\n\t\t\t\t\tif (firstbd.isnull) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar pathseg = this.serachLineShapeInfo(cell, a + 1, passed);\n\t\t\t\t\tif (!!pathseg) {\n\t\t\t\t\t\tpathsegs.push(pathseg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn (this._info.num = pathsegs);\n\t\t},\n\t\tserachLineShapeInfo: function(cell1, dir, passed) {\n\t\t\tvar pathseg = {\n\t\t\t\tobjs: new this.klass.BorderList(),\n\t\t\t\tcells: [cell1, null], // 出発したセル、到達したセル\n\t\t\t\tccnt: 0, // 曲がった回数\n\t\t\t\tlength: [], // 曲がった箇所で区切った、それぞれの線分の長さの配列\n\t\t\t\tdir1: dir, // dir1 スタート地点で線が出発した方向\n\t\t\t\tdir2: 0 // dir2 到達地点から見た、到達した線の方向\n\t\t\t};\n\n\t\t\tvar pos = cell1.getaddr();\n\t\t\twhile (1) {\n\t\t\t\tpos.movedir(dir, 1);\n\t\t\t\tif (pos.oncell()) {\n\t\t\t\t\tvar cell = pos.getc(),\n\t\t\t\t\t\tadb = cell.adjborder;\n\t\t\t\t\tif (cell.isnull || cell1 === cell || cell.isNum()) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (this.board.linegraph.iscrossing(cell) && cell.lcnt >= 3) {\n\t\t\t\t\t} else if (dir !== 1 && adb.bottom.isLine()) {\n\t\t\t\t\t\tif (dir !== 2) {\n\t\t\t\t\t\t\tpathseg.ccnt++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdir = 2;\n\t\t\t\t\t} else if (dir !== 2 && adb.top.isLine()) {\n\t\t\t\t\t\tif (dir !== 1) {\n\t\t\t\t\t\t\tpathseg.ccnt++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdir = 1;\n\t\t\t\t\t} else if (dir !== 3 && adb.right.isLine()) {\n\t\t\t\t\t\tif (dir !== 4) {\n\t\t\t\t\t\t\tpathseg.ccnt++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdir = 4;\n\t\t\t\t\t} else if (dir !== 4 && adb.left.isLine()) {\n\t\t\t\t\t\tif (dir !== 3) {\n\t\t\t\t\t\t\tpathseg.ccnt++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdir = 3;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar border = pos.getb();\n\t\t\t\t\tif (border.isnull || !border.isLine() || passed[border.id]) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tpathseg.objs.add(border);\n\t\t\t\t\tpassed[border.id] = true;\n\n\t\t\t\t\tif (isNaN(pathseg.length[pathseg.ccnt])) {\n\t\t\t\t\t\tpathseg.length[pathseg.ccnt] = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpathseg.length[pathseg.ccnt]++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (pathseg.objs.length > 0) {\n\t\t\t\tpathseg.cells[1] = pos.getc();\n\t\t\t\tpathseg.dir2 = [0, 2, 1, 4, 3][dir];\n\t\t\t\treturn pathseg;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// ★FailCodeクラス 答えの文字列を扱う\n\t//---------------------------------------------------------------------------\n\tFailCode: {\n\t\t/* ** 黒マス ** */\n\t\tcs2x2: [\n\t\t\t\"2x2の黒マスのカタマリがあります。\",\n\t\t\t\"There is a 2x2 block of shaded cells.\"\n\t\t],\n\t\tcsNotSquare: [\n\t\t\t\"正方形でない黒マスのカタマリがあります。\",\n\t\t\t\"A group of shaded cells is not a square.\"\n\t\t],\n\t\tcsAdjacent: [\n\t\t\t\"黒マスがタテヨコに連続しています。\",\n\t\t\t\"Some shaded cells are adjacent.\"\n\t\t],\n\t\tcsDivide: [\"黒マスが分断されています。\", \"The shaded cells are divided.\"],\n\t\tcuDivide: [\"白マスが分断されています。\", \"The unshaded cells are divided.\"],\n\t\tcuDivideRB: [\n\t\t\t\"白マスが分断されています。\",\n\t\t\t\"The unshaded cells are divided.\"\n\t\t] /* 連黒分断禁 */,\n\t\tbrNoShade: [\n\t\t\t\"盤面に黒マスがありません。\",\n\t\t\t\"There are no shaded cells on the board.\"\n\t\t],\n\n\t\t/* ** 領域＋数字 ** */\n\t\tbkNoNum: [\"数字のないブロックがあります。\", \"A block has no number.\"],\n\t\tbkNumGe2: [\n\t\t\t\"1つのブロックに2つ以上の数字が入っています。\",\n\t\t\t\"A block has multiple numbers.\"\n\t\t],\n\t\tbkDupNum: [\n\t\t\t\"同じブロックに同じ数字が入っています。\",\n\t\t\t\"There are equal numbers in a block.\"\n\t\t],\n\t\tbkPlNum: [\n\t\t\t\"複数種類の数字が入っているブロックがあります。\",\n\t\t\t\"A block has two or more kinds of number.\"\n\t\t],\n\t\tbkSepNum: [\n\t\t\t\"同じ数字が異なるブロックに入っています。\",\n\t\t\t\"One kind of number is included in different blocks.\"\n\t\t],\n\n\t\tbkSizeNe: [\n\t\t\t\"数字とブロックの大きさが違います。\",\n\t\t\t\"The size of the block is not equal to the number.\"\n\t\t],\n\n\t\tbkShadeNe: [\n\t\t\t\"部屋の数字と黒マスの数が一致していません。\",\n\t\t\t\"The number of shaded cells in the room and the number written in the room is different.\"\n\t\t],\n\t\tbkShadeDivide: [\n\t\t\t\"1つの部屋に入る黒マスが2つ以上に分裂しています。\",\n\t\t\t\"Shaded cells are divided in a room.\"\n\t\t],\n\t\tbkNoShade: [\"黒マスがない部屋があります。\", \"A room has no shaded cell.\"],\n\t\tbkMixed: [\n\t\t\t\"白マスと黒マスの混在したタイルがあります。\",\n\t\t\t\"A tile includes both shaded and unshaded cells.\"\n\t\t],\n\n\t\tbkWidthGt1: [\n\t\t\t\"幅が１マスではないタタミがあります。\",\n\t\t\t\"The width of the tatami is not one.\"\n\t\t],\n\n\t\tbrNoValidNum: [\n\t\t\t\"盤面に数字がありません。\",\n\t\t\t\"There are no numbers on the board.\"\n\t\t],\n\n\t\t/* ** 領域＋線を引く ** */\n\t\tbrNoLine: [\"線が引かれていません。\", \"There is no line on the board.\"],\n\n\t\t/* ** 盤面切り分け系 ** */\n\t\tbkNotRect: [\n\t\t\t\"四角形ではない部屋があります。\",\n\t\t\t\"There is a room whose shape is not a rectangle.\"\n\t\t],\n\t\tbdDeadEnd: [\n\t\t\t\"途中で途切れている線があります。\",\n\t\t\t\"There is a dead-end line.\"\n\t\t],\n\t\tbdCross: [\"十字の交差点があります。\", \"There is a crossing border line.\"],\n\n\t\t/* ** 線を引く系 ** */\n\t\tlnDeadEnd: [\n\t\t\t\"途中で途切れている線があります。\",\n\t\t\t\"There is a dead-end line.\"\n\t\t],\n\t\tlnBranch: [\"分岐している線があります。\", \"There is a branch line.\"],\n\t\tlnCross: [\"線が交差しています。\", \"There is a crossing line.\"],\n\t\tlnNotCrossMk: [\n\t\t\t\"十字の場所で線が交差していません。\",\n\t\t\t\"A cross-joint cell doesn't have four-way lines.\"\n\t\t],\n\t\tlnCrossExIce: [\n\t\t\t\"氷の部分以外で線が交差しています。\",\n\t\t\t\"A line is crossed outside of ice.\"\n\t\t],\n\t\tlnCurveOnIce: [\"氷の部分で線が曲がっています。\", \"A line turns on ice.\"],\n\t\tlnPlLine: [\"線がひとつながりではありません。\", \"There are multiple lines.\"],\n\t\tlnPlLoop: [\"輪っかが一つではありません。\", \"There are multiple loops.\"],\n\t\tlnOnShade: [\n\t\t\t\"黒マスの上に線が引かれています。\",\n\t\t\t\"There is a line on a shaded cell.\"\n\t\t],\n\n\t\t/* ** 線でつなぐ系 ** */\n\t\tlcDeadEnd: [\"線が途中で途切れています。\", \"There is a dead-end line.\"],\n\t\tlcDivided: [\n\t\t\t\"線が全体でひとつながりになっていません。\",\n\t\t\t\"All lines and numbers are not connected to each other.\"\n\t\t],\n\t\tlcTripleNum: [\n\t\t\t\"3つ以上の数字がつながっています。\",\n\t\t\t\"Three or more numbers are connected.\"\n\t\t],\n\t\tlcIsolate: [\n\t\t\t\"数字につながっていない線があります。\",\n\t\t\t\"A line doesn't connect to any number.\"\n\t\t],\n\t\tlcOnNum: [\n\t\t\t\"数字の上を線が通過しています。\",\n\t\t\t\"A line goes through a number.\"\n\t\t],\n\t\tnmNoLine: [\n\t\t\t\"どこにもつながっていない数字があります。\",\n\t\t\t\"A number is not connected to another number.\"\n\t\t],\n\t\tnmConnected: [\n\t\t\t\"アルファベットが繋がっています。\",\n\t\t\t\"There are connected letters.\"\n\t\t],\n\n\t\t/* ** 線で動かす系 ** */\n\t\tlaIsolate: [\n\t\t\t\"アルファベットにつながっていない線があります。\",\n\t\t\t\"A line doesn't connect to any letter.\"\n\t\t],\n\t\tlaOnNum: [\n\t\t\t\"アルファベットの上を線が通過しています。\",\n\t\t\t\"A line goes through a letter.\"\n\t\t],\n\t\tlaCurve: [\"曲がっている線があります。\", \"A line has curve.\"],\n\t\tlaLenNe: [\"数字と線の長さが違います。\", \"The length of a line is wrong.\"],\n\n\t\t/* ** 単体セルチェック ** */\n\t\tceNoNum: [\"数字の入っていないマスがあります。\", \"There is an empty cell.\"],\n\t\tceNoLine: [\"線が引かれていないマスがあります。\", \"There is an empty cell.\"],\n\t\tceAddLine: [\n\t\t\t\"最初から引かれている線があるマスに線が足されています。\",\n\t\t\t\"A cell with given lines has extra lines.\"\n\t\t],\n\n\t\tanNoArrow: [\"矢印がない数字のマスがあります。\", \"A number has no arrow.\"],\n\t\tanShadeNe: [\n\t\t\t\"矢印の方向にある黒マスの数が正しくありません。\",\n\t\t\t\"The number of shaded cells is not correct.\"\n\t\t],\n\n\t\t/* ** 数字系 ** */\n\t\tnmAdjacent: [\n\t\t\t\"同じ数字がタテヨコに連続しています。\",\n\t\t\t\"Equal numbers are adjacent.\"\n\t\t],\n\t\tnmDupRow: [\n\t\t\t\"同じ列に同じ数字が入っています。\",\n\t\t\t\"There are equal numbers in a row or column.\"\n\t\t],\n\t\tnmDivide: [\n\t\t\t\"タテヨコにつながっていない数字があります。\",\n\t\t\t\"Numbers are divided.\"\n\t\t],\n\t\tnmSumViewNe: [\n\t\t\t\"数字と黒マスにぶつかるまでの4方向のマスの合計が違います。\",\n\t\t\t\"A cell containing a clue number sees a different number of cells in the four orthogonal directions.\"\n\t\t]\n\t}\n});\n","// BoardExecCommon.js v3.4.1\n\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\tBoardExec: {\n\t\t//------------------------------------------------------------------------------\n\t\t// bd.exec.adjustBoardData()    回転・反転開始前に各セルの調節を行う(共通処理)\n\t\t// bd.exec.adjustBoardData2()   回転・反転終了後に各セルの調節を行う(共通処理)\n\t\t//   から呼び出される共通関数\n\t\t//------------------------------------------------------------------------------\n\n\t\t//------------------------------------------------------------------------------\n\t\t// bd.exec.adjustNumberArrow()  回転・反転開始前の矢印つき数字の調整\n\t\t// bd.exec.adjustCellArrow()    回転・反転開始前の矢印セルの調整\n\t\t// bd.exec.adjustBorderArrow()  回転・反転開始前の境界線にある矢印セル等の調整\n\t\t//------------------------------------------------------------------------------\n\t\tadjustNumberArrow: function(key, d) {\n\t\t\tif (key & this.TURNFLIP) {\n\t\t\t\tthis.adjustCellQdirArrow(key, d);\n\t\t\t}\n\t\t},\n\t\tadjustCellArrow: function(key, d) {\n\t\t\tif (key & this.TURNFLIP) {\n\t\t\t\tif (this.klass.Cell.prototype.numberAsObject) {\n\t\t\t\t\tthis.adjustCellQnumArrow(key, d);\n\t\t\t\t} else {\n\t\t\t\t\tthis.adjustCellQdirArrow(key, d);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tadjustCellQdirArrow: function(key, d) {\n\t\t\tvar trans = this.getTranslateDir(key);\n\t\t\tvar clist = this.board.cellinside(d.x1, d.y1, d.x2, d.y2);\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i];\n\t\t\t\tvar val = trans[cell.qdir];\n\t\t\t\tif (!!val) {\n\t\t\t\t\tcell.setQdir(val);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tadjustCellQnumArrow: function(key, d) {\n\t\t\tvar trans = this.getTranslateDir(key);\n\t\t\tvar clist = this.board.cellinside(d.x1, d.y1, d.x2, d.y2);\n\t\t\tfor (var i = 0; i < clist.length; i++) {\n\t\t\t\tvar cell = clist[i];\n\t\t\t\tvar val = trans[cell.qnum];\n\t\t\t\tif (!!val) {\n\t\t\t\t\tcell.setQnum(val);\n\t\t\t\t}\n\t\t\t\tvar val = trans[cell.anum];\n\t\t\t\tif (!!val) {\n\t\t\t\t\tcell.setAnum(val);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tadjustBorderArrow: function(key, d) {\n\t\t\tif (key & this.TURNFLIP) {\n\t\t\t\tvar trans = this.getTranslateDir(key);\n\t\t\t\tvar blist = this.board.borderinside(d.x1, d.y1, d.x2, d.y2);\n\t\t\t\tfor (var i = 0; i < blist.length; i++) {\n\t\t\t\t\tvar border = blist[i],\n\t\t\t\t\t\tval;\n\t\t\t\t\tval = trans[border.qdir];\n\t\t\t\t\tif (!!val) {\n\t\t\t\t\t\tborder.setQdir(val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetTranslateDir: function(key) {\n\t\t\tvar trans = {};\n\t\t\tswitch (key) {\n\t\t\t\tcase this.FLIPY:\n\t\t\t\t\ttrans = { 1: 2, 2: 1 };\n\t\t\t\t\tbreak; // 上下反転\n\t\t\t\tcase this.FLIPX:\n\t\t\t\t\ttrans = { 3: 4, 4: 3 };\n\t\t\t\t\tbreak; // 左右反転\n\t\t\t\tcase this.TURNR:\n\t\t\t\t\ttrans = { 1: 4, 2: 3, 3: 1, 4: 2 };\n\t\t\t\t\tbreak; // 右90°回転\n\t\t\t\tcase this.TURNL:\n\t\t\t\t\ttrans = { 1: 3, 2: 4, 3: 2, 4: 1 };\n\t\t\t\t\tbreak; // 左90°回転\n\t\t\t}\n\t\t\treturn trans;\n\t\t},\n\n\t\t//------------------------------------------------------------------------------\n\t\t// bd.exec.adjustQues51_1()     回転・反転開始前の[＼]セルの調整\n\t\t// bd.exec.adjustQues51_2()     回転・反転終了後の[＼]セルの調整\n\t\t//------------------------------------------------------------------------------\n\t\tadjustQues51_1: function(key, d) {\n\t\t\tvar bx1 = d.x1 | 1,\n\t\t\t\tby1 = d.y1 | 1;\n\t\t\tthis.qnumw = [];\n\t\t\tthis.qnumh = [];\n\n\t\t\tvar bd = this.board;\n\t\t\tfor (var by = by1; by <= d.y2; by += 2) {\n\t\t\t\tthis.qnumw[by] = [bd.getex(-1, by).qnum];\n\t\t\t\tfor (var bx = bx1; bx <= d.x2; bx += 2) {\n\t\t\t\t\tvar cell = bd.getc(bx, by);\n\t\t\t\t\tif (cell.is51cell()) {\n\t\t\t\t\t\tthis.qnumw[by].push(cell.qnum);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var bx = bx1; bx <= d.x2; bx += 2) {\n\t\t\t\tthis.qnumh[bx] = [bd.getex(bx, -1).qnum2];\n\t\t\t\tfor (var by = by1; by <= d.y2; by += 2) {\n\t\t\t\t\tvar cell = bd.getc(bx, by);\n\t\t\t\t\tif (cell.is51cell()) {\n\t\t\t\t\t\tthis.qnumh[bx].push(cell.qnum2);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tadjustQues51_2: function(key, d) {\n\t\t\tvar xx = d.x1 + d.x2,\n\t\t\t\tyy = d.y1 + d.y2,\n\t\t\t\tbx1 = d.x1 | 1,\n\t\t\t\tby1 = d.y1 | 1,\n\t\t\t\tidx;\n\n\t\t\tvar bd = this.board;\n\t\t\tbd.disableInfo();\n\t\t\tswitch (key) {\n\t\t\t\tcase this.FLIPY: // 上下反転\n\t\t\t\t\tfor (var bx = bx1; bx <= d.x2; bx += 2) {\n\t\t\t\t\t\tidx = 1;\n\t\t\t\t\t\tthis.qnumh[bx] = this.qnumh[bx].reverse();\n\t\t\t\t\t\tbd.getex(bx, -1).setQnum2(this.qnumh[bx][0]);\n\t\t\t\t\t\tfor (var by = by1; by <= d.y2; by += 2) {\n\t\t\t\t\t\t\tvar cell = bd.getc(bx, by);\n\t\t\t\t\t\t\tif (cell.is51cell()) {\n\t\t\t\t\t\t\t\tcell.setQnum2(this.qnumh[bx][idx]);\n\t\t\t\t\t\t\t\tidx++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase this.FLIPX: // 左右反転\n\t\t\t\t\tfor (var by = by1; by <= d.y2; by += 2) {\n\t\t\t\t\t\tidx = 1;\n\t\t\t\t\t\tthis.qnumw[by] = this.qnumw[by].reverse();\n\t\t\t\t\t\tbd.getex(-1, by).setQnum(this.qnumw[by][0]);\n\t\t\t\t\t\tfor (var bx = bx1; bx <= d.x2; bx += 2) {\n\t\t\t\t\t\t\tvar cell = bd.getc(bx, by);\n\t\t\t\t\t\t\tif (cell.is51cell()) {\n\t\t\t\t\t\t\t\tcell.setQnum(this.qnumw[by][idx]);\n\t\t\t\t\t\t\t\tidx++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase this.TURNR: // 右90°反転\n\t\t\t\t\tfor (var by = by1; by <= d.y2; by += 2) {\n\t\t\t\t\t\tidx = 1;\n\t\t\t\t\t\tthis.qnumh[by] = this.qnumh[by].reverse();\n\t\t\t\t\t\tbd.getex(-1, by).setQnum(this.qnumh[by][0]);\n\t\t\t\t\t\tfor (var bx = bx1; bx <= d.x2; bx += 2) {\n\t\t\t\t\t\t\tvar cell = bd.getc(bx, by);\n\t\t\t\t\t\t\tif (cell.is51cell()) {\n\t\t\t\t\t\t\t\tcell.setQnum(this.qnumh[by][idx]);\n\t\t\t\t\t\t\t\tidx++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (var bx = bx1; bx <= d.x2; bx += 2) {\n\t\t\t\t\t\tidx = 1;\n\t\t\t\t\t\tbd.getex(bx, -1).setQnum2(this.qnumw[xx - bx][0]);\n\t\t\t\t\t\tfor (var by = by1; by <= d.y2; by += 2) {\n\t\t\t\t\t\t\tvar cell = bd.getc(bx, by);\n\t\t\t\t\t\t\tif (cell.is51cell()) {\n\t\t\t\t\t\t\t\tcell.setQnum2(this.qnumw[xx - bx][idx]);\n\t\t\t\t\t\t\t\tidx++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase this.TURNL: // 左90°反転\n\t\t\t\t\tfor (var by = by1; by <= d.y2; by += 2) {\n\t\t\t\t\t\tidx = 1;\n\t\t\t\t\t\tbd.getex(-1, by).setQnum(this.qnumh[yy - by][0]);\n\t\t\t\t\t\tfor (var bx = bx1; bx <= d.x2; bx += 2) {\n\t\t\t\t\t\t\tvar cell = bd.getc(bx, by);\n\t\t\t\t\t\t\tif (cell.is51cell()) {\n\t\t\t\t\t\t\t\tcell.setQnum(this.qnumh[yy - by][idx]);\n\t\t\t\t\t\t\t\tidx++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (var bx = bx1; bx <= d.x2; bx += 2) {\n\t\t\t\t\t\tidx = 1;\n\t\t\t\t\t\tthis.qnumw[bx] = this.qnumw[bx].reverse();\n\t\t\t\t\t\tbd.getex(bx, -1).setQnum2(this.qnumw[bx][0]);\n\t\t\t\t\t\tfor (var by = by1; by <= d.y2; by += 2) {\n\t\t\t\t\t\t\tvar cell = bd.getc(bx, by);\n\t\t\t\t\t\t\tif (cell.is51cell()) {\n\t\t\t\t\t\t\t\tcell.setQnum2(this.qnumw[bx][idx]);\n\t\t\t\t\t\t\t\tidx++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbd.enableInfo();\n\t\t},\n\n\t\tadjustExCellTopLeft_1: function(key, d) {\n\t\t\tvar bx1 = d.x1 | 1,\n\t\t\t\tby1 = d.y1 | 1;\n\t\t\tthis.qnumw = [];\n\t\t\tthis.qnumh = [];\n\n\t\t\tvar bd = this.board;\n\t\t\tvar rowmin = bd.excellRows(bd.cols, bd.rows) * -2 + 1;\n\t\t\tvar colmin = bd.excellCols(bd.cols, bd.rows) * -2 + 1;\n\t\t\tfor (var by = by1; by <= d.y2; by += 2) {\n\t\t\t\tthis.qnumw[by] = [];\n\t\t\t\tfor (var bx = colmin; bx <= -1; bx += 2) {\n\t\t\t\t\tthis.qnumw[by].push(bd.getex(bx, by).qnum);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var bx = bx1; bx <= d.x2; bx += 2) {\n\t\t\t\tthis.qnumh[bx] = [];\n\t\t\t\tfor (var by = rowmin; by <= -1; by += 2) {\n\t\t\t\t\tthis.qnumh[bx].push(bd.getex(bx, by).qnum);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tadjustExCellTopLeft_2: function(key, d, preserve) {\n\t\t\tvar xx = d.x1 + d.x2,\n\t\t\t\tyy = d.y1 + d.y2,\n\t\t\t\tbx1 = d.x1 | 1,\n\t\t\t\tby1 = d.y1 | 1;\n\n\t\t\tif (!preserve) {\n\t\t\t\tif (key === this.FLIPX || key === this.TURNL) {\n\t\t\t\t\tfor (var id in this.qnumw) {\n\t\t\t\t\t\tthis.qnumw[id].reverse();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (key === this.FLIPY || key === this.TURNR) {\n\t\t\t\t\tfor (var id in this.qnumh) {\n\t\t\t\t\t\tthis.qnumh[id].reverse();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar bd = this.board;\n\t\t\tbd.disableInfo();\n\t\t\tvar rowmin = bd.excellRows(bd.cols, bd.rows) * -2 + 1;\n\t\t\tvar colmin = bd.excellCols(bd.cols, bd.rows) * -2 + 1;\n\t\t\tswitch (key) {\n\t\t\t\tcase this.FLIPY: // 上下反転\n\t\t\t\t\tfor (var bx = bx1; bx <= d.x2; bx += 2) {\n\t\t\t\t\t\tfor (var by = -1; by >= rowmin; by -= 2) {\n\t\t\t\t\t\t\tbd.getex(bx, by).setQnum(this.qnumh[bx].pop());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase this.FLIPX: // 左右反転\n\t\t\t\t\tfor (var by = by1; by <= d.y2; by += 2) {\n\t\t\t\t\t\tfor (var bx = -1; bx >= colmin; bx -= 2) {\n\t\t\t\t\t\t\tbd.getex(bx, by).setQnum(this.qnumw[by].pop());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase this.TURNR: // 右90°反転\n\t\t\t\t\tfor (var by = by1; by <= d.y2; by += 2) {\n\t\t\t\t\t\tfor (var bx = -1; bx >= colmin; bx -= 2) {\n\t\t\t\t\t\t\tbd.getex(bx, by).setQnum(this.qnumh[by].pop());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (var bx = bx1; bx <= d.x2; bx += 2) {\n\t\t\t\t\t\tfor (var by = -1; by >= rowmin; by -= 2) {\n\t\t\t\t\t\t\tbd.getex(bx, by).setQnum(this.qnumw[xx - bx].pop());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase this.TURNL: // 左90°反転\n\t\t\t\t\tfor (var by = by1; by <= d.y2; by += 2) {\n\t\t\t\t\t\tfor (var bx = -1; bx >= colmin; bx -= 2) {\n\t\t\t\t\t\t\tbd.getex(bx, by).setQnum(this.qnumh[yy - by].pop());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (var bx = bx1; bx <= d.x2; bx += 2) {\n\t\t\t\t\t\tfor (var by = -1; by >= rowmin; by -= 2) {\n\t\t\t\t\t\t\tbd.getex(bx, by).setQnum(this.qnumw[bx].pop());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tbd.enableInfo();\n\t\t},\n\n\t\t//------------------------------------------------------------------------------\n\t\t// bd.exec.getAfterPos()  回転・反転開始前のIN/OUTなどの位置の調整\n\t\t//------------------------------------------------------------------------------\n\t\tgetAfterPos: function(key, d, piece) {\n\t\t\tvar puzzle = this.puzzle,\n\t\t\t\tbd = puzzle.board;\n\t\t\tvar xx = d.x1 + d.x2,\n\t\t\t\tyy = d.y1 + d.y2,\n\t\t\t\tbx1 = piece.bx,\n\t\t\t\tby1 = piece.by,\n\t\t\t\tbx2,\n\t\t\t\tby2;\n\t\t\tswitch (key) {\n\t\t\t\tcase this.FLIPY:\n\t\t\t\t\tbx2 = bx1;\n\t\t\t\t\tby2 = yy - by1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.FLIPX:\n\t\t\t\t\tbx2 = xx - bx1;\n\t\t\t\t\tby2 = by1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.TURNR:\n\t\t\t\t\tbx2 = yy - by1;\n\t\t\t\t\tby2 = bx1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.TURNL:\n\t\t\t\t\tbx2 = by1;\n\t\t\t\t\tby2 = xx - bx1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.EXPANDUP:\n\t\t\t\t\tbx2 = bx1;\n\t\t\t\t\tby2 = by1 + (by1 === bd.minby ? 0 : 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.EXPANDDN:\n\t\t\t\t\tbx2 = bx1;\n\t\t\t\t\tby2 = by1 + (by1 === bd.maxby ? 2 : 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.EXPANDLT:\n\t\t\t\t\tbx2 = bx1 + (bx1 === bd.minbx ? 0 : 2);\n\t\t\t\t\tby2 = by1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.EXPANDRT:\n\t\t\t\t\tbx2 = bx1 + (bx1 === bd.maxbx ? 2 : 0);\n\t\t\t\t\tby2 = by1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.REDUCEUP:\n\t\t\t\t\tbx2 = bx1;\n\t\t\t\t\tby2 = by1 - (by1 <= bd.minby + 2 ? 0 : 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.REDUCEDN:\n\t\t\t\t\tbx2 = bx1;\n\t\t\t\t\tby2 = by1 - (by1 >= bd.maxby - 2 ? 2 : 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.REDUCELT:\n\t\t\t\t\tbx2 = bx1 - (bx1 <= bd.minbx + 2 ? 0 : 2);\n\t\t\t\t\tby2 = by1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.REDUCERT:\n\t\t\t\t\tbx2 = bx1 - (bx1 >= bd.maxbx - 2 ? 2 : 0);\n\t\t\t\t\tby2 = by1;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbx2 = bx1;\n\t\t\t\t\tby2 = by1;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tpos: new puzzle.klass.Address(bx2, by2),\n\t\t\t\tisdel: this.isdel(key, piece)\n\t\t\t};\n\t\t}\n\t}\n});\n","// EncodeCommon.js v3.4.1\n\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\tEncode: {\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.include()    文字列caはbottomとupの間にあるか\n\t\t//---------------------------------------------------------------------------\n\t\tinclude: function(ca, bottom, up) {\n\t\t\treturn bottom <= ca && ca <= up;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decode4Cell()  quesが0～4までの場合、デコードする\n\t\t// enc.encode4Cell()  quesが0～4までの場合、問題部をエンコードする\n\t\t//---------------------------------------------------------------------------\n\t\tdecode4Cell: function() {\n\t\t\tvar c = 0,\n\t\t\t\ti = 0,\n\t\t\t\tbstr = this.outbstr,\n\t\t\t\tbd = this.board;\n\t\t\tfor (i = 0; i < bstr.length; i++) {\n\t\t\t\tvar cell = bd.cell[c],\n\t\t\t\t\tca = bstr.charAt(i);\n\t\t\t\tif (this.include(ca, \"0\", \"4\")) {\n\t\t\t\t\tcell.qnum = parseInt(ca, 16);\n\t\t\t\t} else if (this.include(ca, \"5\", \"9\")) {\n\t\t\t\t\tcell.qnum = parseInt(ca, 16) - 5;\n\t\t\t\t\tc++;\n\t\t\t\t} else if (this.include(ca, \"a\", \"e\")) {\n\t\t\t\t\tcell.qnum = parseInt(ca, 16) - 10;\n\t\t\t\t\tc += 2;\n\t\t\t\t} else if (this.include(ca, \"g\", \"z\")) {\n\t\t\t\t\tc += parseInt(ca, 36) - 16;\n\t\t\t\t} else if (ca === \".\") {\n\t\t\t\t\tcell.qnum = -2;\n\t\t\t\t}\n\n\t\t\t\tc++;\n\t\t\t\tif (!bd.cell[c]) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.outbstr = bstr.substr(i + 1);\n\t\t},\n\t\tencode4Cell: function() {\n\t\t\tvar count = 0,\n\t\t\t\tcm = \"\",\n\t\t\t\tbd = this.board;\n\t\t\tfor (var c = 0; c < bd.cell.length; c++) {\n\t\t\t\tvar pstr = \"\",\n\t\t\t\t\tqn = bd.cell[c].qnum;\n\n\t\t\t\tif (qn >= 0) {\n\t\t\t\t\tif (!!bd.cell[c + 1] && bd.cell[c + 1].qnum !== -1) {\n\t\t\t\t\t\tpstr = \"\" + qn.toString(16);\n\t\t\t\t\t} else if (!!bd.cell[c + 2] && bd.cell[c + 2].qnum !== -1) {\n\t\t\t\t\t\tpstr = \"\" + (5 + qn).toString(16);\n\t\t\t\t\t\tc++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpstr = \"\" + (10 + qn).toString(16);\n\t\t\t\t\t\tc += 2;\n\t\t\t\t\t}\n\t\t\t\t} else if (qn === -2) {\n\t\t\t\t\tpstr = \".\";\n\t\t\t\t} else {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\n\t\t\t\tif (count === 0) {\n\t\t\t\t\tcm += pstr;\n\t\t\t\t} else if (pstr || count === 20) {\n\t\t\t\t\tcm += (count + 15).toString(36) + pstr;\n\t\t\t\t\tcount = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count > 0) {\n\t\t\t\tcm += (count + 15).toString(36);\n\t\t\t}\n\n\t\t\tthis.outbstr += cm;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decode1Cell()  compact variants of encode4Cell for sparse single ques value\n\t\t// enc.encode1Cell()\n\t\t//---------------------------------------------------------------------------\n\t\tdecode1Cell: function(val) {\n\t\t\tvar c = 0,\n\t\t\t\ti = 0,\n\t\t\t\tbstr = this.outbstr,\n\t\t\t\tbd = this.board;\n\t\t\tfor (i = 0; i < bstr.length; i++) {\n\t\t\t\tvar cell = bd.cell[c],\n\t\t\t\t\tca = bstr.charAt(i);\n\t\t\t\tif (this.include(ca, \"0\", \"h\")) {\n\t\t\t\t\tcell.qnum = val;\n\t\t\t\t\tc += parseInt(ca, 36);\n\t\t\t\t} else {\n\t\t\t\t\tc += parseInt(ca, 36) - 18;\n\t\t\t\t}\n\t\t\t\tc++;\n\t\t\t\tif (!bd.cell[c]) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.outbstr = bstr.substr(i + 1);\n\t\t},\n\t\tencode1Cell: function(val) {\n\t\t\tvar count = -1,\n\t\t\t\thave = false,\n\t\t\t\tcm = \"\",\n\t\t\t\tbd = this.board;\n\t\t\tfor (var c = 0; c < bd.cell.length; c++) {\n\t\t\t\tif (bd.cell[c].qnum === val) {\n\t\t\t\t\tif (count >= 0) {\n\t\t\t\t\t\tif (have) {\n\t\t\t\t\t\t\tcm += count.toString(36);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcm += (count + 18).toString(36);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\thave = true;\n\t\t\t\t\tcount = 0;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcount++;\n\t\t\t\tif (count === 17) {\n\t\t\t\t\tif (have) {\n\t\t\t\t\t\tcm += count.toString(36);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcm += (count + 18).toString(36);\n\t\t\t\t\t}\n\t\t\t\t\thave = false;\n\t\t\t\t\tcount = -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count >= 0) {\n\t\t\t\tif (have) {\n\t\t\t\t\tcm += count.toString(36);\n\t\t\t\t} else {\n\t\t\t\t\tcm += (count + 18).toString(36);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.outbstr += cm;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decode4Cross()  quesが0～4までの場合、デコードする\n\t\t// enc.encode4Cross()  quesが0～4までの場合、問題部をエンコードする\n\t\t//---------------------------------------------------------------------------\n\t\tdecode4Cross: function() {\n\t\t\tvar c = 0,\n\t\t\t\ti = 0,\n\t\t\t\tbstr = this.outbstr,\n\t\t\t\tbd = this.board;\n\t\t\tfor (i = 0; i < bstr.length; i++) {\n\t\t\t\tvar cross = bd.cross[c],\n\t\t\t\t\tca = bstr.charAt(i);\n\t\t\t\tif (this.include(ca, \"0\", \"4\")) {\n\t\t\t\t\tcross.qnum = parseInt(ca, 16);\n\t\t\t\t} else if (this.include(ca, \"5\", \"9\")) {\n\t\t\t\t\tcross.qnum = parseInt(ca, 16) - 5;\n\t\t\t\t\tc++;\n\t\t\t\t} else if (this.include(ca, \"a\", \"e\")) {\n\t\t\t\t\tcross.qnum = parseInt(ca, 16) - 10;\n\t\t\t\t\tc += 2;\n\t\t\t\t} else if (this.include(ca, \"g\", \"z\")) {\n\t\t\t\t\tc += parseInt(ca, 36) - 16;\n\t\t\t\t} else if (ca === \".\") {\n\t\t\t\t\tcross.qnum = -2;\n\t\t\t\t}\n\n\t\t\t\tc++;\n\t\t\t\tif (!bd.cross[c]) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.outbstr = bstr.substr(i + 1);\n\t\t},\n\t\tencode4Cross: function() {\n\t\t\tvar count = 0,\n\t\t\t\tcm = \"\",\n\t\t\t\tbd = this.board;\n\t\t\tfor (var c = 0; c < bd.cross.length; c++) {\n\t\t\t\tvar pstr = \"\",\n\t\t\t\t\tqn = bd.cross[c].qnum;\n\n\t\t\t\tif (qn >= 0) {\n\t\t\t\t\tif (!!bd.cross[c + 1] && bd.cross[c + 1].qnum !== -1) {\n\t\t\t\t\t\tpstr = \"\" + qn.toString(16);\n\t\t\t\t\t} else if (!!bd.cross[c + 2] && bd.cross[c + 2].qnum !== -1) {\n\t\t\t\t\t\tpstr = \"\" + (5 + qn).toString(16);\n\t\t\t\t\t\tc++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpstr = \"\" + (10 + qn).toString(16);\n\t\t\t\t\t\tc += 2;\n\t\t\t\t\t}\n\t\t\t\t} else if (qn === -2) {\n\t\t\t\t\tpstr = \".\";\n\t\t\t\t} else {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\n\t\t\t\tif (count === 0) {\n\t\t\t\t\tcm += pstr;\n\t\t\t\t} else if (pstr || count === 20) {\n\t\t\t\t\tcm += (count + 15).toString(36) + pstr;\n\t\t\t\t\tcount = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count > 0) {\n\t\t\t\tcm += (count + 15).toString(36);\n\t\t\t}\n\n\t\t\tthis.outbstr += cm;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decodeNumber10()  quesが0～9までの場合、デコードする\n\t\t// enc.encodeNumber10()  quesが0～9までの場合、問題部をエンコードする\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeNumber10: function() {\n\t\t\tvar c = 0,\n\t\t\t\ti = 0,\n\t\t\t\tbstr = this.outbstr,\n\t\t\t\tbd = this.board;\n\t\t\tfor (i = 0; i < bstr.length; i++) {\n\t\t\t\tvar cell = bd.cell[c],\n\t\t\t\t\tca = bstr.charAt(i);\n\n\t\t\t\tif (ca === \".\") {\n\t\t\t\t\tcell.qnum = -2;\n\t\t\t\t} else if (this.include(ca, \"0\", \"9\")) {\n\t\t\t\t\tcell.qnum = parseInt(ca, 10);\n\t\t\t\t} else if (this.include(ca, \"a\", \"z\")) {\n\t\t\t\t\tc += parseInt(ca, 36) - 10;\n\t\t\t\t}\n\n\t\t\t\tc++;\n\t\t\t\tif (!bd.cell[c]) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.outbstr = bstr.substr(i + 1);\n\t\t},\n\t\tmaybeEncodeNumber10: function() {\n\t\t\tvar cm = \"\",\n\t\t\t\tcount = 0,\n\t\t\t\tbd = this.board;\n\t\t\tfor (var c = 0; c < bd.cell.length; c++) {\n\t\t\t\tvar pstr = \"\",\n\t\t\t\t\tqn = bd.cell[c].qnum;\n\n\t\t\t\tif (qn === -2) {\n\t\t\t\t\tpstr = \".\";\n\t\t\t\t} else if (qn >= 0 && qn < 10) {\n\t\t\t\t\tpstr = qn.toString(10);\n\t\t\t\t} else if (qn >= 10) {\n\t\t\t\t\treturn \"\";\n\t\t\t\t} else {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\n\t\t\t\tif (count === 0) {\n\t\t\t\t\tcm += pstr;\n\t\t\t\t} else if (pstr || count === 26) {\n\t\t\t\t\tcm += (9 + count).toString(36) + pstr;\n\t\t\t\t\tcount = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count > 0) {\n\t\t\t\tcm += (9 + count).toString(36);\n\t\t\t}\n\t\t\treturn cm;\n\t\t},\n\t\tencodeNumber10: function() {\n\t\t\tthis.outbstr += this.maybeEncodeNumber10();\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decodeNumber16()  quesが0～8192?までの場合、デコードする\n\t\t// enc.encodeNumber16()  quesが0～8192?までの場合、問題部をエンコードする\n\t\t//---------------------------------------------------------------------------\n\t\treadNumber16: function(bstr, i) {\n\t\t\tvar ca = bstr.charAt(i);\n\n\t\t\tif (this.include(ca, \"0\", \"9\") || this.include(ca, \"a\", \"f\")) {\n\t\t\t\treturn [parseInt(ca, 16), 1];\n\t\t\t} else if (ca === \"-\") {\n\t\t\t\treturn [parseInt(bstr.substr(i + 1, 2), 16), 3];\n\t\t\t} else if (ca === \"+\") {\n\t\t\t\treturn [parseInt(bstr.substr(i + 1, 3), 16), 4];\n\t\t\t} else if (ca === \"=\") {\n\t\t\t\treturn [parseInt(bstr.substr(i + 1, 3), 16) + 4096, 4];\n\t\t\t} else if (ca === \"%\") {\n\t\t\t\treturn [parseInt(bstr.substr(i + 1, 3), 16) + 8192, 4];\n\t\t\t} else if (ca === \".\") {\n\t\t\t\treturn [-2, 1];\n\t\t\t} else {\n\t\t\t\treturn [-1, 0];\n\t\t\t}\n\t\t},\n\t\tdecodeOneNumber16: function() {\n\t\t\tvar res = this.readNumber16(this.outbstr, 0);\n\t\t\tthis.outbstr = this.outbstr.substr(res[1]);\n\t\t\treturn res[0];\n\t\t},\n\t\tdecodeNumber16: function() {\n\t\t\tvar c = 0,\n\t\t\t\ti = 0,\n\t\t\t\tbstr = this.outbstr,\n\t\t\t\tbd = this.board;\n\t\t\twhile (i < bstr.length && bd.cell[c]) {\n\t\t\t\tvar cell = bd.cell[c],\n\t\t\t\t\tca = bstr.charAt(i);\n\t\t\t\tvar res = this.readNumber16(bstr, i);\n\t\t\t\tif (res[0] !== -1) {\n\t\t\t\t\tcell.qnum = res[0];\n\t\t\t\t\ti += res[1];\n\t\t\t\t\tc++;\n\t\t\t\t} else if (ca >= \"g\" && ca <= \"z\") {\n\t\t\t\t\tc += parseInt(ca, 36) - 15;\n\t\t\t\t\ti++;\n\t\t\t\t} else {\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.outbstr = bstr.substr(i);\n\t\t},\n\t\twriteNumber16: function(qn) {\n\t\t\tif (qn === -2) {\n\t\t\t\treturn \".\";\n\t\t\t} else if (qn >= 0 && qn < 16) {\n\t\t\t\treturn qn.toString(16);\n\t\t\t} else if (qn >= 16 && qn < 256) {\n\t\t\t\treturn \"-\" + qn.toString(16);\n\t\t\t} else if (qn >= 256 && qn < 4096) {\n\t\t\t\treturn \"+\" + qn.toString(16);\n\t\t\t} else if (qn >= 4096 && qn < 8192) {\n\t\t\t\treturn \"=\" + (qn - 4096).toString(16);\n\t\t\t} else if (qn >= 8192) {\n\t\t\t\treturn \"%\" + (qn - 8192).toString(16);\n\t\t\t} else {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t},\n\t\tencodeNumber16: function() {\n\t\t\tvar bd = this.board;\n\t\t\tthis.genericEncodeNumber16(bd.cell.length, function(c) {\n\t\t\t\treturn bd.cell[c].qnum;\n\t\t\t});\n\t\t},\n\t\tgenericEncodeNumber16: function(length, get_func) {\n\t\t\tvar count = 0,\n\t\t\t\tcm = \"\";\n\t\t\tfor (var c = 0; c < length; c++) {\n\t\t\t\tvar qn = get_func(c);\n\t\t\t\tvar pstr = this.writeNumber16(qn);\n\t\t\t\tif (pstr === \"\") {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\n\t\t\t\tif (count === 0) {\n\t\t\t\t\tcm += pstr;\n\t\t\t\t} else if (pstr || count === 20) {\n\t\t\t\t\tcm += (15 + count).toString(36) + pstr;\n\t\t\t\t\tcount = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count > 0) {\n\t\t\t\tcm += (15 + count).toString(36);\n\t\t\t}\n\n\t\t\tthis.outbstr += cm;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decodeNumber10or16()  full range, but falling back to {de,en}codeNumber10 for backwards compatibility\n\t\t// enc.encodeNumber10or16()  full range, but falling back to {de,en}codeNumber10 for backwards compatibility\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeNumber10or16: function() {\n\t\t\tvar bstr = this.outbstr;\n\t\t\tif (bstr.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar ca = bstr.charAt(0);\n\t\t\tif (ca === \"-\") {\n\t\t\t\tthis.outbstr = bstr.substr(1);\n\t\t\t\tthis.decodeNumber16();\n\t\t\t} else {\n\t\t\t\tthis.decodeNumber10();\n\t\t\t}\n\t\t},\n\t\tencodeNumber10or16: function() {\n\t\t\tvar cm = this.maybeEncodeNumber10();\n\t\t\tif (cm.length > 0) {\n\t\t\t\tthis.outbstr += cm;\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tthis.outbstr += \"-\";\n\t\t\t\tthis.encodeNumber16();\n\t\t\t}\n\t\t},\n\n\t\tdecodeNumber16ExCell: function() {\n\t\t\t// 盤面外数字のデコード\n\t\t\tvar ec = 0,\n\t\t\t\ti = 0,\n\t\t\t\tbstr = this.outbstr,\n\t\t\t\tbd = this.board;\n\t\t\tfor (i = 0; i < bstr.length; i++) {\n\t\t\t\tvar ca = bstr.charAt(i),\n\t\t\t\t\texcell = bd.excell[ec];\n\t\t\t\tif (this.include(ca, \"0\", \"9\") || this.include(ca, \"a\", \"f\")) {\n\t\t\t\t\texcell.qnum = parseInt(bstr.substr(i, 1), 16);\n\t\t\t\t} else if (ca === \"-\") {\n\t\t\t\t\texcell.qnum = parseInt(bstr.substr(i + 1, 2), 16);\n\t\t\t\t\ti += 2;\n\t\t\t\t} else if (ca === \".\") {\n\t\t\t\t\texcell.qnum = -2;\n\t\t\t\t} else if (ca >= \"g\" && ca <= \"z\") {\n\t\t\t\t\tec += parseInt(ca, 36) - 16;\n\t\t\t\t}\n\n\t\t\t\tec++;\n\t\t\t\tif (ec >= bd.excell.length) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.outbstr = bstr.substr(i + 1);\n\t\t},\n\t\tencodeNumber16ExCell: function() {\n\t\t\tvar bd = this.board;\n\t\t\tthis.genericEncodeNumber16(bd.excell.length, function(c) {\n\t\t\t\treturn bd.excell[c].qnum;\n\t\t\t});\n\t\t},\n\n\t\tencodeNumber16ExCellFlushed: function() {\n\t\t\tvar bd = this.board,\n\t\t\t\tcols = bd.cols,\n\t\t\t\trows = bd.rows;\n\t\t\tvar nums = bd.excell.map(function(ex) {\n\t\t\t\treturn ex.qnum;\n\t\t\t});\n\n\t\t\tbd.genericFlush(\n\t\t\t\tbd.excellCols(cols, rows),\n\t\t\t\tbd.excellRows(cols, rows),\n\t\t\t\tcols,\n\t\t\t\trows,\n\t\t\t\tfunction(i) {\n\t\t\t\t\treturn nums[i];\n\t\t\t\t},\n\t\t\t\tfunction(i, num) {\n\t\t\t\t\tnums[i] = num;\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tthis.genericEncodeNumber16(nums.length, function(c) {\n\t\t\t\treturn nums[c];\n\t\t\t});\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decodeRoomNumber16()  部屋＋部屋の一つのquesが0～8192?までの場合、デコードする\n\t\t// enc.encodeRoomNumber16()  部屋＋部屋の一つのquesが0～8192?までの場合、問題部をエンコードする\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeRoomNumber16: function() {\n\t\t\tvar r = 0,\n\t\t\t\ti = 0,\n\t\t\t\tbstr = this.outbstr,\n\t\t\t\tbd = this.board;\n\t\t\tbd.roommgr.rebuild();\n\t\t\tfor (i = 0; i < bstr.length; i++) {\n\t\t\t\tvar ca = bstr.charAt(i),\n\t\t\t\t\ttop = bd.roommgr.components[r].top;\n\n\t\t\t\tif (this.include(ca, \"0\", \"9\") || this.include(ca, \"a\", \"f\")) {\n\t\t\t\t\ttop.qnum = parseInt(ca, 16);\n\t\t\t\t} else if (ca === \"-\") {\n\t\t\t\t\ttop.qnum = parseInt(bstr.substr(i + 1, 2), 16);\n\t\t\t\t\ti += 2;\n\t\t\t\t} else if (ca === \"+\") {\n\t\t\t\t\ttop.qnum = parseInt(bstr.substr(i + 1, 3), 16);\n\t\t\t\t\ti += 3;\n\t\t\t\t} else if (ca === \"=\") {\n\t\t\t\t\ttop.qnum = parseInt(bstr.substr(i + 1, 3), 16) + 4096;\n\t\t\t\t\ti += 3;\n\t\t\t\t} else if (ca === \"%\") {\n\t\t\t\t\ttop.qnum = parseInt(bstr.substr(i + 1, 3), 16) + 8192;\n\t\t\t\t\ti += 3;\n\t\t\t\t} else if (ca === \"*\") {\n\t\t\t\t\ttop.qnum = parseInt(bstr.substr(i + 1, 4), 16) + 12240;\n\t\t\t\t\ti += 4;\n\t\t\t\t} else if (ca === \"$\") {\n\t\t\t\t\ttop.qnum = parseInt(bstr.substr(i + 1, 5), 16) + 77776;\n\t\t\t\t\ti += 5;\n\t\t\t\t} else if (ca >= \"g\" && ca <= \"z\") {\n\t\t\t\t\tr += parseInt(ca, 36) - 16;\n\t\t\t\t}\n\n\t\t\t\tr++;\n\t\t\t\tif (r >= bd.roommgr.components.length) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.outbstr = bstr.substr(i + 1);\n\t\t},\n\t\tencodeRoomNumber16: function() {\n\t\t\tvar count = 0,\n\t\t\t\tcm = \"\",\n\t\t\t\tbd = this.board;\n\t\t\tbd.roommgr.rebuild();\n\t\t\tfor (var r = 0; r < bd.roommgr.components.length; r++) {\n\t\t\t\tvar pstr = \"\",\n\t\t\t\t\tqn = bd.roommgr.components[r].top.qnum;\n\n\t\t\t\tif (qn >= 0 && qn < 16) {\n\t\t\t\t\tpstr = qn.toString(16);\n\t\t\t\t} else if (qn >= 16 && qn < 256) {\n\t\t\t\t\tpstr = \"-\" + qn.toString(16);\n\t\t\t\t} else if (qn >= 256 && qn < 4096) {\n\t\t\t\t\tpstr = \"+\" + qn.toString(16);\n\t\t\t\t} else if (qn >= 4096 && qn < 8192) {\n\t\t\t\t\tpstr = \"=\" + (qn - 4096).toString(16);\n\t\t\t\t} else if (qn >= 8192 && qn < 12240) {\n\t\t\t\t\tpstr = \"%\" + (qn - 8192).toString(16);\n\t\t\t\t} else if (qn >= 12240 && qn < 77776) {\n\t\t\t\t\tpstr = \"*\" + (qn - 12240).toString(16);\n\t\t\t\t} else if (qn >= 77776) {\n\t\t\t\t\tpstr = \"$\" + (qn - 77776).toString(16);\n\t\t\t\t} // 最大1126352\n\t\t\t\telse {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\n\t\t\t\tif (count === 0) {\n\t\t\t\t\tcm += pstr;\n\t\t\t\t} else if (pstr || count === 20) {\n\t\t\t\t\tcm += (15 + count).toString(36) + pstr;\n\t\t\t\t\tcount = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count > 0) {\n\t\t\t\tcm += (15 + count).toString(36);\n\t\t\t}\n\n\t\t\tthis.outbstr += cm;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decodeArrowNumber16()  矢印付きquesが0～8192?までの場合、デコードする\n\t\t// enc.encodeArrowNumber16()  矢印付きquesが0～8192?までの場合、問題部をエンコードする\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeArrowNumber16: function() {\n\t\t\tvar c = 0,\n\t\t\t\ti = 0,\n\t\t\t\tbstr = this.outbstr,\n\t\t\t\tbd = this.board;\n\t\t\tfor (i = 0; i < bstr.length; i++) {\n\t\t\t\tvar ca = bstr.charAt(i),\n\t\t\t\t\tcell = bd.cell[c];\n\n\t\t\t\tif (this.include(ca, \"0\", \"4\")) {\n\t\t\t\t\tvar ca1 = bstr.charAt(i + 1);\n\t\t\t\t\tcell.qdir = parseInt(ca, 16);\n\t\t\t\t\tcell.qnum = ca1 !== \".\" ? parseInt(ca1, 16) : -2;\n\t\t\t\t\ti++;\n\t\t\t\t} else if (this.include(ca, \"5\", \"9\")) {\n\t\t\t\t\tcell.qdir = parseInt(ca, 16) - 5;\n\t\t\t\t\tcell.qnum = parseInt(bstr.substr(i + 1, 2), 16);\n\t\t\t\t\ti += 2;\n\t\t\t\t} else if (ca === \"-\") {\n\t\t\t\t\tcell.qdir = parseInt(bstr.substr(i + 1, 1), 16);\n\t\t\t\t\tcell.qnum = parseInt(bstr.substr(i + 2, 3), 16);\n\t\t\t\t\ti += 4;\n\t\t\t\t} else if (ca >= \"a\" && ca <= \"z\") {\n\t\t\t\t\tc += parseInt(ca, 36) - 10;\n\t\t\t\t}\n\n\t\t\t\tc++;\n\t\t\t\tif (!bd.cell[c]) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.outbstr = bstr.substr(i + 1);\n\t\t},\n\t\tencodeArrowNumber16: function() {\n\t\t\tvar cm = \"\",\n\t\t\t\tcount = 0,\n\t\t\t\tbd = this.board;\n\t\t\tfor (var c = 0; c < bd.cell.length; c++) {\n\t\t\t\tvar pstr = \"\",\n\t\t\t\t\tdir = bd.cell[c].qdir,\n\t\t\t\t\tqn = bd.cell[c].qnum;\n\t\t\t\tif (qn === -2) {\n\t\t\t\t\tpstr = dir + \".\";\n\t\t\t\t} else if (qn >= 0 && qn < 16) {\n\t\t\t\t\tpstr = dir + qn.toString(16);\n\t\t\t\t} else if (qn >= 16 && qn < 256) {\n\t\t\t\t\tpstr = dir + 5 + qn.toString(16);\n\t\t\t\t} else if (qn >= 256 && qn < 4096) {\n\t\t\t\t\tpstr = \"-\" + dir + qn.toString(16);\n\t\t\t\t} else {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\n\t\t\t\tif (count === 0) {\n\t\t\t\t\tcm += pstr;\n\t\t\t\t} else if (pstr || count === 26) {\n\t\t\t\t\tcm += (count + 9).toString(36) + pstr;\n\t\t\t\t\tcount = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count > 0) {\n\t\t\t\tcm += (count + 9).toString(36);\n\t\t\t}\n\n\t\t\tthis.outbstr += cm;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decodeBorder() 問題の境界線をデコードする\n\t\t// enc.encodeBorder() 問題の境界線をエンコードする\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeBorder: function() {\n\t\t\tvar pos1,\n\t\t\t\tpos2,\n\t\t\t\tbstr = this.outbstr,\n\t\t\t\tid,\n\t\t\t\ttwi = [16, 8, 4, 2, 1];\n\t\t\tvar bd = this.board;\n\n\t\t\tif (bstr) {\n\t\t\t\tpos1 = Math.min((((bd.cols - 1) * bd.rows + 4) / 5) | 0, bstr.length);\n\t\t\t\tpos2 = Math.min(\n\t\t\t\t\t(((bd.cols * (bd.rows - 1) + 4) / 5) | 0) + pos1,\n\t\t\t\t\tbstr.length\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpos1 = 0;\n\t\t\t\tpos2 = 0;\n\t\t\t}\n\n\t\t\tid = 0;\n\t\t\tfor (var i = 0; i < pos1; i++) {\n\t\t\t\tvar ca = parseInt(bstr.charAt(i), 32);\n\t\t\t\tfor (var w = 0; w < 5; w++) {\n\t\t\t\t\tif (id < (bd.cols - 1) * bd.rows) {\n\t\t\t\t\t\tbd.border[id].ques = ca & twi[w] ? 1 : 0;\n\t\t\t\t\t\tid++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tid = (bd.cols - 1) * bd.rows;\n\t\t\tfor (var i = pos1; i < pos2; i++) {\n\t\t\t\tvar ca = parseInt(bstr.charAt(i), 32);\n\t\t\t\tfor (var w = 0; w < 5; w++) {\n\t\t\t\t\tvar border = bd.border[id];\n\t\t\t\t\tif (!!border && border.inside) {\n\t\t\t\t\t\tborder.ques = ca & twi[w] ? 1 : 0;\n\t\t\t\t\t\tid++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbd.roommgr.rebuild();\n\t\t\tthis.outbstr = bstr.substr(pos2);\n\t\t},\n\t\tencodeBorder: function() {\n\t\t\tvar cm = \"\",\n\t\t\t\ttwi = [16, 8, 4, 2, 1],\n\t\t\t\tnum = 0,\n\t\t\t\tpass = 0;\n\t\t\tvar bd = this.board;\n\n\t\t\tfor (var id = 0; id < (bd.cols - 1) * bd.rows; id++) {\n\t\t\t\tpass += bd.border[id].ques * twi[num];\n\t\t\t\tnum++;\n\t\t\t\tif (num === 5) {\n\t\t\t\t\tcm += pass.toString(32);\n\t\t\t\t\tnum = 0;\n\t\t\t\t\tpass = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (num > 0) {\n\t\t\t\tcm += pass.toString(32);\n\t\t\t}\n\n\t\t\tnum = 0;\n\t\t\tpass = 0;\n\t\t\tfor (\n\t\t\t\tvar id = (bd.cols - 1) * bd.rows;\n\t\t\t\tid < 2 * bd.cols * bd.rows - bd.cols - bd.rows;\n\t\t\t\tid++\n\t\t\t) {\n\t\t\t\tpass += bd.border[id].ques * twi[num];\n\t\t\t\tnum++;\n\t\t\t\tif (num === 5) {\n\t\t\t\t\tcm += pass.toString(32);\n\t\t\t\t\tnum = 0;\n\t\t\t\t\tpass = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (num > 0) {\n\t\t\t\tcm += pass.toString(32);\n\t\t\t}\n\n\t\t\tthis.outbstr += cm;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decodeCrossMark() 黒点をデコードする\n\t\t// enc.encodeCrossMark() 黒点をエンコードする\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCrossMark: function() {\n\t\t\tvar cc = 0,\n\t\t\t\ti = 0,\n\t\t\t\tbstr = this.outbstr,\n\t\t\t\tbd = this.board;\n\t\t\tvar cp = bd.hascross === 2 ? 1 : 0,\n\t\t\t\tcp2 = cp << 1;\n\t\t\tvar rows = bd.rows - 1 + cp2,\n\t\t\t\tcols = bd.cols - 1 + cp2;\n\t\t\tfor (i = 0; i < bstr.length; i++) {\n\t\t\t\tvar ca = bstr.charAt(i);\n\n\t\t\t\tif (this.include(ca, \"0\", \"9\") || this.include(ca, \"a\", \"z\")) {\n\t\t\t\t\tcc += parseInt(ca, 36);\n\t\t\t\t\tvar bx = ((cc % cols) + (1 - cp)) << 1;\n\t\t\t\t\tvar by = (((cc / cols) | 0) + (1 - cp)) << 1;\n\n\t\t\t\t\tif (by > bd.maxby - 2 * (1 - cp)) {\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tbd.getx(bx, by).qnum = 1;\n\t\t\t\t} else if (ca === \".\") {\n\t\t\t\t\tcc += 35;\n\t\t\t\t}\n\n\t\t\t\tcc++;\n\t\t\t\tif (cc >= cols * rows) {\n\t\t\t\t\ti++;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.outbstr = bstr.substr(i);\n\t\t},\n\t\tencodeCrossMark: function() {\n\t\t\tvar cm = \"\",\n\t\t\t\tcount = 0,\n\t\t\t\tbd = this.board;\n\t\t\tvar cp = bd.hascross === 2 ? 1 : 0,\n\t\t\t\tcp2 = cp << 1;\n\t\t\tvar rows = bd.rows - 1 + cp2,\n\t\t\t\tcols = bd.cols - 1 + cp2;\n\t\t\tfor (var c = 0, max = cols * rows; c < max; c++) {\n\t\t\t\tvar pstr = \"\";\n\t\t\t\tvar bx = ((c % cols) + (1 - cp)) << 1;\n\t\t\t\tvar by = (((c / cols) | 0) + (1 - cp)) << 1;\n\n\t\t\t\tif (bd.getx(bx, by).qnum === 1) {\n\t\t\t\t\tpstr = \".\";\n\t\t\t\t} else {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\n\t\t\t\tif (pstr) {\n\t\t\t\t\tcm += count.toString(36);\n\t\t\t\t\tcount = 0;\n\t\t\t\t} else if (count === 36) {\n\t\t\t\t\tcm += \".\";\n\t\t\t\t\tcount = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count > 0) {\n\t\t\t\tcm += count.toString(36);\n\t\t\t}\n\n\t\t\tthis.outbstr += cm;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decodeCircle() 白丸・黒丸をデコードする\n\t\t// enc.encodeCircle() 白丸・黒丸をエンコードする\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCircle: function() {\n\t\t\tvar bd = this.board;\n\t\t\tvar bstr = this.outbstr,\n\t\t\t\tc = 0,\n\t\t\t\ttri = [9, 3, 1];\n\t\t\tvar pos = bstr\n\t\t\t\t? Math.min(((bd.cols * bd.rows + 2) / 3) | 0, bstr.length)\n\t\t\t\t: 0;\n\t\t\tfor (var i = 0; i < pos; i++) {\n\t\t\t\tvar ca = parseInt(bstr.charAt(i), 27);\n\t\t\t\tfor (var w = 0; w < 3; w++) {\n\t\t\t\t\tif (!!bd.cell[c]) {\n\t\t\t\t\t\tvar val = ((ca / tri[w]) | 0) % 3;\n\t\t\t\t\t\tif (val > 0) {\n\t\t\t\t\t\t\tbd.cell[c].qnum = val;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tc++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.outbstr = bstr.substr(pos);\n\t\t},\n\t\tencodeCircle: function() {\n\t\t\tvar bd = this.board;\n\t\t\tvar cm = \"\",\n\t\t\t\tnum = 0,\n\t\t\t\tpass = 0,\n\t\t\t\ttri = [9, 3, 1];\n\t\t\tfor (var c = 0; c < bd.cell.length; c++) {\n\t\t\t\tif (bd.cell[c].qnum > 0) {\n\t\t\t\t\tpass += bd.cell[c].qnum * tri[num];\n\t\t\t\t}\n\t\t\t\tnum++;\n\t\t\t\tif (num === 3) {\n\t\t\t\t\tcm += pass.toString(27);\n\t\t\t\t\tnum = 0;\n\t\t\t\t\tpass = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (num > 0) {\n\t\t\t\tcm += pass.toString(27);\n\t\t\t}\n\n\t\t\tthis.outbstr += cm;\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decodeIce() cell.ques===6をデコードする\n\t\t// enc.encodeIce() cell.ques===6をエンコードする\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeQues: function(val) {\n\t\t\tvar bstr = this.outbstr,\n\t\t\t\tbd = this.board;\n\n\t\t\tvar c = 0,\n\t\t\t\ttwi = [16, 8, 4, 2, 1];\n\t\t\tfor (var i = 0; i < bstr.length; i++) {\n\t\t\t\tvar num = parseInt(bstr.charAt(i), 32);\n\t\t\t\tfor (var w = 0; w < 5; w++) {\n\t\t\t\t\tif (!!bd.cell[c]) {\n\t\t\t\t\t\tbd.cell[c].ques = num & twi[w] ? val : 0;\n\t\t\t\t\t\tc++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!bd.cell[c]) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.outbstr = bstr.substr(i + 1);\n\t\t},\n\t\tencodeQues: function(val, skipnone) {\n\t\t\tvar cm = \"\",\n\t\t\t\tnum = 0,\n\t\t\t\tpass = 0,\n\t\t\t\ttwi = [16, 8, 4, 2, 1],\n\t\t\t\tbd = this.board;\n\t\t\tvar found = false;\n\t\t\tfor (var c = 0; c < bd.cell.length; c++) {\n\t\t\t\tif (bd.cell[c].ques === val) {\n\t\t\t\t\tpass += twi[num];\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t\tnum++;\n\t\t\t\tif (num === 5) {\n\t\t\t\t\tcm += pass.toString(32);\n\t\t\t\t\tnum = 0;\n\t\t\t\t\tpass = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (num > 0) {\n\t\t\t\tcm += pass.toString(32);\n\t\t\t}\n\n\t\t\tif (found || !skipnone) {\n\t\t\t\tthis.outbstr += cm;\n\t\t\t}\n\t\t},\n\t\tdecodeIce: function() {\n\t\t\tthis.decodeQues(6);\n\t\t},\n\t\tencodeIce: function() {\n\t\t\tthis.encodeQues(6);\n\t\t},\n\t\tdecodeEmpty: function() {\n\t\t\tthis.decodeQues(7);\n\t\t},\n\t\tencodeEmpty: function() {\n\t\t\tthis.encodeQues(7, true);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decodecross_old() Crossの問題部をデコードする(旧形式)\n\t\t//---------------------------------------------------------------------------\n\t\tdecodecross_old: function() {\n\t\t\tvar bstr = this.outbstr,\n\t\t\t\tc = 0,\n\t\t\t\tbd = this.board;\n\t\t\tfor (var i = 0; i < bstr.length; i++) {\n\t\t\t\tvar ca = bstr.charAt(i);\n\t\t\t\tif (this.include(ca, \"0\", \"4\")) {\n\t\t\t\t\tbd.cross[c].qnum = parseInt(ca, 10);\n\t\t\t\t}\n\n\t\t\t\tc++;\n\t\t\t\tif (!bd.cross[c]) {\n\t\t\t\t\ti++;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.outbstr = bstr.substr(i);\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// enc.decodeDot() Decodes Cross/Cell/Border values up to 2\n\t\t// enc.encodeDot() Encodes Cross/Cell/Border values up to 2\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeDot: function(bstr) {\n\t\t\tvar bd = this.board;\n\t\t\tbd.disableInfo();\n\t\t\tvar s = 0,\n\t\t\t\tbstr = this.outbstr;\n\t\t\tfor (var i = 0; i < bstr.length; i++) {\n\t\t\t\tvar dot = bd.dots[s],\n\t\t\t\t\tca = bstr.charAt(i);\n\t\t\t\tif (this.include(ca, \"0\", \"f\")) {\n\t\t\t\t\tvar val = parseInt(ca, 16);\n\t\t\t\t\tdot.setDot((val % 2) + 1);\n\t\t\t\t\ts += (val >> 1) + 1;\n\t\t\t\t} else if (this.include(ca, \"g\", \"z\")) {\n\t\t\t\t\ts += parseInt(ca, 36) - 15;\n\t\t\t\t}\n\n\t\t\t\tif (s >= bd.dotsmax) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbd.enableInfo();\n\t\t\tthis.outbstr = bstr.substr(i + 1);\n\t\t},\n\t\tencodeDot: function() {\n\t\t\tvar count = 0,\n\t\t\t\tcm = \"\",\n\t\t\t\tbd = this.board;\n\t\t\tfor (var s = 0; s < bd.dotsmax; s++) {\n\t\t\t\tvar pstr = \"\",\n\t\t\t\t\tdot = bd.dots[s];\n\t\t\t\tif (dot.getDot() > 0) {\n\t\t\t\t\tfor (var i = 1; i <= 7; i++) {\n\t\t\t\t\t\tvar dot2 = bd.dots[s + i];\n\t\t\t\t\t\tif (!!dot2 && dot2.getDot() > 0) {\n\t\t\t\t\t\t\tpstr = \"\" + (2 * (i - 1) + (dot.getDot() - 1)).toString(16);\n\t\t\t\t\t\t\ts += i - 1;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (pstr === \"\") {\n\t\t\t\t\t\tpstr = (13 + dot.getDot()).toString(16);\n\t\t\t\t\t\ts += 7;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\n\t\t\t\tif (count === 0) {\n\t\t\t\t\tcm += pstr;\n\t\t\t\t} else if (pstr || count === 20) {\n\t\t\t\t\tcm += (count + 15).toString(36) + pstr;\n\t\t\t\t\tcount = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (count > 0) {\n\t\t\t\tcm += (count + 15).toString(36);\n\t\t\t}\n\n\t\t\tthis.outbstr += cm;\n\t\t}\n\t}\n});\n","// FileDataCommon.js v3.4.1\n\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\tFileIO: {\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellQnum() 問題数字のデコードを行う\n\t\t// fio.encodeCellQnum() 問題数字のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellQnum: function() {\n\t\t\tthis.decodeCell(function(cell, ca) {\n\t\t\t\tif (ca === \"-\") {\n\t\t\t\t\tcell.qnum = -2;\n\t\t\t\t} else if (ca !== \".\") {\n\t\t\t\t\tcell.qnum = +ca;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellQnum: function() {\n\t\t\tthis.encodeCell(function(cell) {\n\t\t\t\tif (cell.qnum >= 0) {\n\t\t\t\t\treturn cell.qnum + \" \";\n\t\t\t\t} else if (cell.qnum === -2) {\n\t\t\t\t\treturn \"- \";\n\t\t\t\t} else {\n\t\t\t\t\treturn \". \";\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellQnumb() 黒背景な問題数字のデコードを行う\n\t\t// fio.encodeCellQnumb() 黒背景な問題数字のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellQnumb: function() {\n\t\t\tthis.decodeCell(function(cell, ca) {\n\t\t\t\tif (ca === \"5\") {\n\t\t\t\t\tcell.qnum = -2;\n\t\t\t\t} else if (ca !== \".\") {\n\t\t\t\t\tcell.qnum = +ca;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellQnumb: function() {\n\t\t\tthis.encodeCell(function(cell) {\n\t\t\t\tif (cell.qnum >= 0) {\n\t\t\t\t\treturn cell.qnum + \" \";\n\t\t\t\t} else if (cell.qnum === -2) {\n\t\t\t\t\treturn \"5 \";\n\t\t\t\t} else {\n\t\t\t\t\treturn \". \";\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellQnumAns() 問題数字＋黒マス白マスのデコードを行う\n\t\t// fio.encodeCellQnumAns() 問題数字＋黒マス白マスのエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellQnumAns: function() {\n\t\t\tthis.decodeCell(function(cell, ca) {\n\t\t\t\tif (ca === \"#\") {\n\t\t\t\t\tcell.qans = 1;\n\t\t\t\t} else if (ca === \"+\") {\n\t\t\t\t\tcell.qsub = 1;\n\t\t\t\t} else if (ca === \"-\") {\n\t\t\t\t\tcell.qnum = -2;\n\t\t\t\t} else if (ca !== \".\") {\n\t\t\t\t\tcell.qnum = +ca;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellQnumAns: function() {\n\t\t\tthis.encodeCell(function(cell) {\n\t\t\t\tif (cell.qnum >= 0) {\n\t\t\t\t\treturn cell.qnum + \" \";\n\t\t\t\t} else if (cell.qnum === -2) {\n\t\t\t\t\treturn \"- \";\n\t\t\t\t} else if (cell.qans === 1) {\n\t\t\t\t\treturn \"# \";\n\t\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\t\treturn \"+ \";\n\t\t\t\t} else {\n\t\t\t\t\treturn \". \";\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellDirecQnum() 方向＋問題数字のデコードを行う\n\t\t// fio.encodeCellDirecQnum() 方向＋問題数字のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellDirecQnum: function() {\n\t\t\tthis.decodeCell(function(cell, ca) {\n\t\t\t\tif (ca !== \".\") {\n\t\t\t\t\tvar inp = ca.split(\",\");\n\t\t\t\t\tcell.qdir = inp[0] !== \"0\" ? +inp[0] : 0;\n\t\t\t\t\tcell.qnum = inp[1] !== \"-\" ? +inp[1] : -2;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellDirecQnum: function() {\n\t\t\tthis.encodeCell(function(cell) {\n\t\t\t\tif (cell.qnum !== -1) {\n\t\t\t\t\tvar ca1 = cell.qdir !== 0 ? \"\" + cell.qdir : \"0\";\n\t\t\t\t\tvar ca2 = cell.qnum !== -2 ? \"\" + cell.qnum : \"-\";\n\t\t\t\t\treturn [ca1, \",\", ca2, \" \"].join(\"\");\n\t\t\t\t} else {\n\t\t\t\t\treturn \". \";\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellAns() 黒マス白マスのデコードを行う\n\t\t// fio.encodeCellAns() 黒マス白マスのエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellAns: function() {\n\t\t\tthis.decodeCell(function(cell, ca) {\n\t\t\t\tif (ca === \"#\") {\n\t\t\t\t\tcell.qans = 1;\n\t\t\t\t} else if (ca === \"+\") {\n\t\t\t\t\tcell.qsub = 1;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellAns: function() {\n\t\t\tthis.encodeCell(function(cell) {\n\t\t\t\tif (cell.qans === 1) {\n\t\t\t\t\treturn \"# \";\n\t\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\t\treturn \"+ \";\n\t\t\t\t} else {\n\t\t\t\t\treturn \". \";\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellQanssub() 黒マスと背景色のデコードを行う\n\t\t// fio.encodeCellQanssub() 黒マスと背景色のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellQanssub: function() {\n\t\t\tthis.decodeCell(function(cell, ca) {\n\t\t\t\tif (ca === \"+\") {\n\t\t\t\t\tcell.qsub = 1;\n\t\t\t\t} else if (ca === \"-\") {\n\t\t\t\t\tcell.qsub = 2;\n\t\t\t\t} else if (ca === \"=\") {\n\t\t\t\t\tcell.qsub = 3;\n\t\t\t\t} else if (ca === \"%\") {\n\t\t\t\t\tcell.qsub = 4;\n\t\t\t\t} else if (ca !== \".\") {\n\t\t\t\t\tcell.qans = +ca;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellQanssub: function() {\n\t\t\tthis.encodeCell(function(cell) {\n\t\t\t\tif (cell.qans !== 0) {\n\t\t\t\t\treturn cell.qans + \" \";\n\t\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\t\treturn \"+ \";\n\t\t\t\t} else if (cell.qsub === 2) {\n\t\t\t\t\treturn \"- \";\n\t\t\t\t} else if (cell.qsub === 3) {\n\t\t\t\t\treturn \"= \";\n\t\t\t\t} else if (cell.qsub === 4) {\n\t\t\t\t\treturn \"% \";\n\t\t\t\t} else {\n\t\t\t\t\treturn \". \";\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellAnumsub() 回答数字と背景色のデコードを行う\n\t\t// fio.encodeCellAnumsub() 回答数字と背景色のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellAnumsub: function() {\n\t\t\tthis.decodeCell(function(cell, ca) {\n\t\t\t\tif (cell.enableSubNumberArray && ca.indexOf(\"[\") >= 0) {\n\t\t\t\t\tca = this.setCellSnum(cell, ca);\n\t\t\t\t}\n\t\t\t\tif (ca === \"+\") {\n\t\t\t\t\tcell.qsub = 1;\n\t\t\t\t} else if (ca === \"-\") {\n\t\t\t\t\tcell.qsub = 2;\n\t\t\t\t} else if (ca === \"=\") {\n\t\t\t\t\tcell.qsub = 3;\n\t\t\t\t} else if (ca === \"%\") {\n\t\t\t\t\tcell.qsub = 4;\n\t\t\t\t} else if (ca !== \".\") {\n\t\t\t\t\tcell.anum = +ca;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellAnumsub: function() {\n\t\t\tthis.encodeCell(function(cell) {\n\t\t\t\tvar ca = \".\";\n\t\t\t\tif (cell.anum !== -1) {\n\t\t\t\t\tca = \"\" + cell.anum;\n\t\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\t\tca = \"+\";\n\t\t\t\t} else if (cell.qsub === 2) {\n\t\t\t\t\tca = \"-\";\n\t\t\t\t} else if (cell.qsub === 3) {\n\t\t\t\t\tca = \"=\";\n\t\t\t\t} else if (cell.qsub === 4) {\n\t\t\t\t\tca = \"%\";\n\t\t\t\t} else {\n\t\t\t\t\tca = \".\";\n\t\t\t\t}\n\t\t\t\tif (cell.enableSubNumberArray && cell.anum === -1) {\n\t\t\t\t\tca += this.getCellSnum(cell);\n\t\t\t\t}\n\t\t\t\treturn ca + \" \";\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.setCellSnum() 補助数字のデコードを行う   (decodeCellAnumsubで内部的に使用)\n\t\t// fio.getCellSnum() 補助数字のエンコードを行う (encodeCellAnumsubで内部的に使用)\n\t\t//---------------------------------------------------------------------------\n\t\tsetCellSnum: function(cell, ca) {\n\t\t\tvar snumtext = ca.substring(ca.indexOf(\"[\") + 1, ca.indexOf(\"]\"));\n\t\t\tvar list = snumtext.split(/,/);\n\t\t\tfor (var i = 0; i < list.length; ++i) {\n\t\t\t\tcell.snum[i] = !!list[i] ? +list[i] : -1;\n\t\t\t}\n\t\t\treturn ca.substr(0, ca.indexOf(\"[\"));\n\t\t},\n\t\tgetCellSnum: function(cell) {\n\t\t\tvar list = [];\n\t\t\tfor (var i = 0; i < cell.snum.length; ++i) {\n\t\t\t\tlist[i] = cell.snum[i] !== -1 ? \"\" + cell.snum[i] : \"\";\n\t\t\t}\n\t\t\tvar snumtext = list.join(\",\");\n\t\t\treturn snumtext !== \",,,\" ? \"[\" + snumtext + \"]\" : \"\";\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellQsub() 背景色のデコードを行う\n\t\t// fio.encodeCellQsub() 背景色のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellQsub: function() {\n\t\t\tthis.decodeCell(function(cell, ca) {\n\t\t\t\tif (ca !== \"0\") {\n\t\t\t\t\tcell.qsub = +ca;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellQsub: function() {\n\t\t\tthis.encodeCell(function(cell) {\n\t\t\t\tif (cell.qsub > 0) {\n\t\t\t\t\treturn cell.qsub + \" \";\n\t\t\t\t} else {\n\t\t\t\t\treturn \"0 \";\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCrossNum() 交点の数字のデコードを行う\n\t\t// fio.encodeCrossNum() 交点の数字のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCrossNum: function() {\n\t\t\tthis.decodeCross(function(cross, ca) {\n\t\t\t\tif (ca === \"-\") {\n\t\t\t\t\tcross.qnum = -2;\n\t\t\t\t} else if (ca !== \".\") {\n\t\t\t\t\tcross.qnum = +ca;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCrossNum: function() {\n\t\t\tthis.encodeCross(function(cross) {\n\t\t\t\tif (cross.qnum >= 0) {\n\t\t\t\t\treturn cross.qnum + \" \";\n\t\t\t\t} else if (cross.qnum === -2) {\n\t\t\t\t\treturn \"- \";\n\t\t\t\t} else {\n\t\t\t\t\treturn \". \";\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeBorderQues() 問題の境界線のデコードを行う\n\t\t// fio.encodeBorderQues() 問題の境界線のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeBorderQues: function() {\n\t\t\tthis.decodeBorder(function(border, ca) {\n\t\t\t\tif (ca === \"1\") {\n\t\t\t\t\tborder.ques = 1;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeBorderQues: function() {\n\t\t\tthis.encodeBorder(function(border) {\n\t\t\t\treturn (border.ques === 1 ? \"1\" : \"0\") + \" \";\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeBorderAns() 問題・回答の境界線のデコードを行う\n\t\t// fio.encodeBorderAns() 問題・回答の境界線のエンコードを行う\n\t\t// fio.decodeBorderArrowAns() Decode lines and dir. aux. marks\n\t\t// fio.encodeBorderArrowAns() Encode lines and dir. aux. marks\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeBorderAns: function() {\n\t\t\tthis.decodeBorder(function(border, ca) {\n\t\t\t\tif (ca === \"2\") {\n\t\t\t\t\tborder.qans = 1;\n\t\t\t\t\tborder.qsub = 1;\n\t\t\t\t} else if (ca === \"1\") {\n\t\t\t\t\tborder.qans = 1;\n\t\t\t\t} else if (ca === \"-1\") {\n\t\t\t\t\tborder.qsub = 1;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeBorderAns: function() {\n\t\t\tthis.encodeBorder(function(border) {\n\t\t\t\tif (border.qans === 1 && border.qsub === 1) {\n\t\t\t\t\treturn \"2 \";\n\t\t\t\t} else if (border.qans === 1) {\n\t\t\t\t\treturn \"1 \";\n\t\t\t\t} else if (border.qsub === 1) {\n\t\t\t\t\treturn \"-1 \";\n\t\t\t\t} else {\n\t\t\t\t\treturn \"0 \";\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tdecodeBorderArrowAns: function() {\n\t\t\tthis.decodeBorder(function(border, ca) {\n\t\t\t\tvar lca = ca.charAt(ca.length - 1);\n\t\t\t\tif (lca >= \"a\" && lca <= \"z\") {\n\t\t\t\t\tif (lca === \"u\") {\n\t\t\t\t\t\tborder.qsub = 11;\n\t\t\t\t\t} else if (lca === \"d\") {\n\t\t\t\t\t\tborder.qsub = 12;\n\t\t\t\t\t} else if (lca === \"l\") {\n\t\t\t\t\t\tborder.qsub = 13;\n\t\t\t\t\t} else if (lca === \"r\") {\n\t\t\t\t\t\tborder.qsub = 14;\n\t\t\t\t\t}\n\t\t\t\t\tca = ca.substr(0, ca.length - 1);\n\t\t\t\t}\n\n\t\t\t\tif (ca !== \"\" && ca !== \"0\") {\n\t\t\t\t\tif (ca.charAt(0) === \"-\") {\n\t\t\t\t\t\tborder.line = -ca - 1;\n\t\t\t\t\t\tborder.qsub = 2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tborder.line = +ca;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeBorderArrowAns: function() {\n\t\t\tthis.encodeBorder(function(border) {\n\t\t\t\tvar ca = \"\";\n\t\t\t\tif (border.qsub === 2) {\n\t\t\t\t\tca += \"\" + (-1 - border.line);\n\t\t\t\t} else if (border.line > 0) {\n\t\t\t\t\tca += \"\" + border.line;\n\t\t\t\t}\n\n\t\t\t\tif (border.qsub >= 11) {\n\t\t\t\t\tca += [\"u\", \"d\", \"l\", \"r\"][border.qsub - 11];\n\t\t\t\t}\n\n\t\t\t\treturn ca !== \"\" ? ca + \" \" : \"0 \";\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeBorderLine() Lineのデコードを行う\n\t\t// fio.encodeBorderLine() Lineのエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeBorderLine: function() {\n\t\t\tthis.decodeBorder(function(border, ca) {\n\t\t\t\tif (ca === \"-1\") {\n\t\t\t\t\tborder.qsub = 2;\n\t\t\t\t} else if (ca !== \"0\") {\n\t\t\t\t\tborder.line = +ca;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeBorderLine: function() {\n\t\t\tthis.encodeBorder(function(border) {\n\t\t\t\tif (border.line > 0) {\n\t\t\t\t\treturn border.line + \" \";\n\t\t\t\t} else if (border.qsub === 2) {\n\t\t\t\t\treturn \"-1 \";\n\t\t\t\t} else {\n\t\t\t\t\treturn \"0 \";\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeAreaRoom() 部屋のデコードを行う\n\t\t// fio.encodeAreaRoom() 部屋のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeAreaRoom: function() {\n\t\t\tthis.decodeAreaRoom_com(true);\n\t\t},\n\t\tencodeAreaRoom: function() {\n\t\t\tthis.encodeAreaRoom_com(true);\n\t\t},\n\t\tdecodeAreaRoom_com: function(isques) {\n\t\t\tthis.readLine();\n\t\t\tthis.rdata2Border(isques, this.getItemList(this.board.rows));\n\n\t\t\tthis.board.roommgr.rebuild();\n\t\t},\n\t\tencodeAreaRoom_com: function(isques) {\n\t\t\tvar bd = this.board;\n\t\t\tbd.roommgr.rebuild();\n\n\t\t\tvar rooms = bd.roommgr.components;\n\t\t\tthis.writeLine(rooms.length);\n\t\t\tvar data = \"\";\n\t\t\tfor (var c = 0; c < bd.cell.length; c++) {\n\t\t\t\tvar roomid = rooms.indexOf(bd.cell[c].room);\n\t\t\t\tdata += \"\" + (roomid >= 0 ? roomid : \".\") + \" \";\n\t\t\t\tif ((c + 1) % bd.cols === 0) {\n\t\t\t\t\tthis.writeLine(data);\n\t\t\t\t\tdata = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.rdata2Border() 入力された配列から境界線を入力する\n\t\t//---------------------------------------------------------------------------\n\t\trdata2Border: function(isques, rdata) {\n\t\t\tvar bd = this.board;\n\t\t\tfor (var id = 0; id < bd.border.length; id++) {\n\t\t\t\tvar border = bd.border[id],\n\t\t\t\t\tcell1 = border.sidecell[0],\n\t\t\t\t\tcell2 = border.sidecell[1];\n\t\t\t\tvar isdiff =\n\t\t\t\t\t!cell1.isnull && !cell2.isnull && rdata[cell1.id] !== rdata[cell2.id];\n\t\t\t\tborder[isques ? \"ques\" : \"qans\"] = isdiff ? 1 : 0;\n\t\t\t}\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellQnum51() [＼]のデコードを行う\n\t\t// fio.encodeCellQnum51() [＼]のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellQnum51: function() {\n\t\t\tvar bd = this.board;\n\t\t\tbd.disableInfo(); /* mv.set51cell()用 */\n\t\t\tthis.decodeCellExCell(function(obj, ca) {\n\t\t\t\tif (ca === \".\") {\n\t\t\t\t\treturn;\n\t\t\t\t} else if (obj.group === \"excell\") {\n\t\t\t\t\tif (obj.bx !== -1 && obj.by === -1) {\n\t\t\t\t\t\tobj.qnum2 = +ca;\n\t\t\t\t\t} else if (obj.bx === -1 && obj.by !== -1) {\n\t\t\t\t\t\tobj.qnum = +ca;\n\t\t\t\t\t}\n\t\t\t\t} else if (obj.group === \"cell\") {\n\t\t\t\t\tvar inp = ca.split(\",\");\n\t\t\t\t\tobj.set51cell();\n\t\t\t\t\tobj.qnum = +inp[0];\n\t\t\t\t\tobj.qnum2 = +inp[1];\n\t\t\t\t}\n\t\t\t});\n\t\t\tbd.enableInfo(); /* mv.set51cell()用 */\n\t\t},\n\t\tencodeCellQnum51: function() {\n\t\t\tthis.encodeCellExCell(function(obj) {\n\t\t\t\tif (obj.group === \"excell\") {\n\t\t\t\t\tif (obj.bx === -1 && obj.by === -1) {\n\t\t\t\t\t\treturn \"0 \";\n\t\t\t\t\t}\n\t\t\t\t\treturn (obj.by === -1 ? obj.qnum2 : obj.qnum) + \" \";\n\t\t\t\t} else if (obj.group === \"cell\") {\n\t\t\t\t\tif (obj.ques === 51) {\n\t\t\t\t\t\treturn obj.qnum + \",\" + obj.qnum2 + \" \";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn \". \";\n\t\t\t});\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeDotFile() Decodes Cross/Cell/Border values and empty cells (ques===7)\n\t\t// fio.encodeDotFile() Encodes Cross/Cell/Border values and empty cells (ques===7)\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeDotFile: function() {\n\t\t\tvar bd = this.board,\n\t\t\t\ts = 0,\n\t\t\t\tdata = \"\";\n\t\t\tfor (var i = 0, rows = 2 * bd.rows - 1; i < rows; i++) {\n\t\t\t\tvar line = this.readLine();\n\t\t\t\tif (line) {\n\t\t\t\t\tdata += line.match(/[12X\\.]+/)[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tbd.disableInfo();\n\t\t\tfor (var s = 0; s < data.length; ++s) {\n\t\t\t\tvar dot = bd.dots[s],\n\t\t\t\t\tca = data.charAt(s);\n\t\t\t\tif (ca === \"1\") {\n\t\t\t\t\tdot.setDot(1);\n\t\t\t\t} else if (ca === \"2\") {\n\t\t\t\t\tdot.setDot(2);\n\t\t\t\t} else if (ca === \"X\") {\n\t\t\t\t\tdot.piece.ques = 7;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbd.enableInfo();\n\t\t},\n\t\tencodeDotFile: function() {\n\t\t\tvar bd = this.board,\n\t\t\t\ts = 0;\n\t\t\tfor (var by = 1; by <= 2 * bd.rows - 1; by++) {\n\t\t\t\tvar data = \"\";\n\t\t\t\tfor (var bx = 1; bx <= 2 * bd.cols - 1; bx++) {\n\t\t\t\t\tvar dot = bd.dots[s];\n\t\t\t\t\tif (dot.getDot() === 1) {\n\t\t\t\t\t\tdata += \"1\";\n\t\t\t\t\t} else if (dot.getDot() === 2) {\n\t\t\t\t\t\tdata += \"2\";\n\t\t\t\t\t} else if (dot.piece.ques === 7) {\n\t\t\t\t\t\tdata += \"X\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdata += \".\";\n\t\t\t\t\t}\n\t\t\t\t\ts++;\n\t\t\t\t}\n\t\t\t\tthis.writeLine(data);\n\t\t\t}\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellQnum_kanpen() pencilbox用問題数字のデコードを行う\n\t\t// fio.encodeCellQnum_kanpen() pencilbox用問題数字のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellQnum_kanpen: function() {\n\t\t\tthis.decodeCell(function(cell, ca) {\n\t\t\t\tif (ca !== \".\") {\n\t\t\t\t\tcell.qnum = +ca;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellQnum_kanpen: function() {\n\t\t\tthis.encodeCell(function(cell) {\n\t\t\t\treturn cell.qnum >= 0 ? cell.qnum + \" \" : \". \";\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellAnum_kanpen() pencilbox用回答数字のデコードを行う\n\t\t// fio.encodeCellAnum_kanpen() pencilbox用回答数字のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellAnum_kanpen: function() {\n\t\t\tthis.decodeCell(function(cell, ca) {\n\t\t\t\tif (ca !== \".\" && ca !== \"0\") {\n\t\t\t\t\tcell.anum = +ca;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellAnum_kanpen: function() {\n\t\t\tthis.encodeCell(function(cell) {\n\t\t\t\tif (cell.qnum !== -1) {\n\t\t\t\t\treturn \". \";\n\t\t\t\t} else if (cell.anum === -1) {\n\t\t\t\t\treturn \"0 \";\n\t\t\t\t} else {\n\t\t\t\t\treturn cell.anum + \" \";\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellQnumAns_kanpen() pencilbox用問題数字＋黒マス白マスのデコードを行う\n\t\t// fio.encodeCellQnumAns_kanpen() pencilbox用問題数字＋黒マス白マスのエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellQnumAns_kanpen: function() {\n\t\t\tthis.decodeCell(function(cell, ca) {\n\t\t\t\tif (ca === \"#\") {\n\t\t\t\t\tcell.qans = 1;\n\t\t\t\t} else if (ca === \"+\") {\n\t\t\t\t\tcell.qsub = 1;\n\t\t\t\t} else if (ca === \"?\") {\n\t\t\t\t\tcell.qnum = -2;\n\t\t\t\t} else if (ca !== \".\") {\n\t\t\t\t\tcell.qnum = +ca;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellQnumAns_kanpen: function() {\n\t\t\tthis.encodeCell(function(cell) {\n\t\t\t\tif (cell.qnum >= 0) {\n\t\t\t\t\treturn cell.qnum + \" \";\n\t\t\t\t} else if (cell.qnum === -2) {\n\t\t\t\t\treturn \"? \";\n\t\t\t\t} else if (cell.qans === 1) {\n\t\t\t\t\treturn \"# \";\n\t\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\t\treturn \"+ \";\n\t\t\t\t} else {\n\t\t\t\t\treturn \". \";\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellQnum_XMLBoard() pencilbox XML用問題用数字のデコードを行う\n\t\t// fio.encodeCellQnum_XMLBoard() pencilbox XML用問題用数字のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tUNDECIDED_NUM_XML: -1,\n\t\tdecodeCellQnum_XMLBoard: function() {\n\t\t\tvar minnum = this.board.cell[0].getminnum() > 0 ? 1 : 0;\n\t\t\tvar undecnum = this.UNDECIDED_NUM_XML;\n\t\t\tthis.decodeCellXMLBoard(function(cell, val) {\n\t\t\t\tif (val === undecnum) {\n\t\t\t\t\tcell.qnum = -2;\n\t\t\t\t} else if (val >= minnum) {\n\t\t\t\t\tcell.qnum = val;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellQnum_XMLBoard: function() {\n\t\t\tvar minnum = this.board.cell[0].getminnum() > 0 ? 1 : 0;\n\t\t\tvar undecnum = this.UNDECIDED_NUM_XML;\n\t\t\tthis.encodeCellXMLBoard(function(cell) {\n\t\t\t\tvar val = null;\n\t\t\t\tif (cell.qnum === -2) {\n\t\t\t\t\tval = undecnum;\n\t\t\t\t} else if (cell.qnum >= minnum) {\n\t\t\t\t\tval = cell.qnum;\n\t\t\t\t}\n\t\t\t\treturn val;\n\t\t\t});\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellQnum_XMLBoard() pencilbox XML用問題用数字(browタイプ)のデコードを行う\n\t\t// fio.encodeCellQnum_XMLBoard() pencilbox XML用問題用数字(browタイプ)のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellQnum_XMLBoard_Brow: function() {\n\t\t\tvar undecnum = this.UNDECIDED_NUM_XML;\n\t\t\tthis.decodeCellXMLBrow(function(cell, name) {\n\t\t\t\tif (name === \"n\" + undecnum) {\n\t\t\t\t\tcell.qnum = -2;\n\t\t\t\t} else if (name !== \"s\") {\n\t\t\t\t\tcell.qnum = +name.substr(1);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellQnum_XMLBoard_Brow: function() {\n\t\t\tvar undecnum = this.UNDECIDED_NUM_XML;\n\t\t\tthis.encodeCellXMLBrow(function(cell) {\n\t\t\t\tif (cell.qnum === -2) {\n\t\t\t\t\treturn \"n\" + undecnum;\n\t\t\t\t} else if (cell.qnum >= 0) {\n\t\t\t\t\treturn \"n\" + cell.qnum;\n\t\t\t\t}\n\t\t\t\treturn \"s\";\n\t\t\t});\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellAnum_XMLBoard() pencilbox XML用回答用数字のデコードを行う\n\t\t// fio.encodeCellAnum_XMLBoard() pencilbox XML用回答用数字のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellAnum_XMLAnswer: function() {\n\t\t\tthis.decodeCellXMLArow(function(cell, name) {\n\t\t\t\tif (name === \"n0\") {\n\t\t\t\t\tcell.anum = -1;\n\t\t\t\t} else if (name !== \"s\") {\n\t\t\t\t\tcell.anum = +name.substr(1);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellAnum_XMLAnswer: function() {\n\t\t\tthis.encodeCellXMLArow(function(cell) {\n\t\t\t\tif (cell.anum > 0) {\n\t\t\t\t\treturn \"n\" + cell.anum;\n\t\t\t\t} else if (cell.anum === -1) {\n\t\t\t\t\treturn \"n0\";\n\t\t\t\t}\n\t\t\t\treturn \"s\";\n\t\t\t});\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeAreaRoom_XMLBoard() pencilbox XML用問題用不定形部屋のデコードを行う\n\t\t// fio.encodeAreaRoom_XMLBoard() pencilbox XML用問題用不定形部屋のエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeAreaRoom_XMLBoard: function() {\n\t\t\tvar rdata = [];\n\t\t\tthis.decodeCellXMLBrow(function(cell, name) {\n\t\t\t\trdata.push(+name.substr(1));\n\t\t\t});\n\t\t\tthis.rdata2Border(true, rdata);\n\t\t\tthis.board.roommgr.rebuild();\n\t\t},\n\t\tencodeAreaRoom_XMLBoard: function() {\n\t\t\tvar bd = this.board;\n\t\t\tbd.roommgr.rebuild();\n\t\t\tvar rooms = bd.roommgr.components;\n\t\t\tthis.xmldoc\n\t\t\t\t.querySelector(\"board\")\n\t\t\t\t.appendChild(this.createXMLNode(\"areas\", { N: rooms.length }));\n\t\t\tthis.encodeCellXMLBrow(function(cell) {\n\t\t\t\tvar roomid = rooms.indexOf(cell.room);\n\t\t\t\treturn \"n\" + (roomid > 0 ? roomid : -1);\n\t\t\t});\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeCellAns_XMLAnswer() pencilbox XML用黒マスのデコードを行う\n\t\t// fio.encodeCellAns_XMLAnswer() pencilbox XML用黒マスのエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeCellAns_XMLAnswer: function() {\n\t\t\tthis.decodeCellXMLArow(function(cell, name) {\n\t\t\t\tif (name === \"w\") {\n\t\t\t\t\tcell.qans = 1;\n\t\t\t\t} else if (name === \"s\") {\n\t\t\t\t\tcell.qsub = 1;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeCellAns_XMLAnswer: function() {\n\t\t\tthis.encodeCellXMLArow(function(cell) {\n\t\t\t\tif (cell.qans === 1) {\n\t\t\t\t\treturn \"w\";\n\t\t\t\t} else if (cell.qsub === 1) {\n\t\t\t\t\treturn \"s\";\n\t\t\t\t}\n\t\t\t\treturn \"u\";\n\t\t\t});\n\t\t},\n\n\t\t//---------------------------------------------------------------------------\n\t\t// fio.decodeBorderLine_XMLAnswer() pencilbox XML用Lineのデコードを行う\n\t\t// fio.encodeBorderLine_XMLAnswer() pencilbox XML用Lineのエンコードを行う\n\t\t//---------------------------------------------------------------------------\n\t\tdecodeBorderLine_XMLAnswer: function() {\n\t\t\tthis.decodeCellXMLArow(function(cell, name) {\n\t\t\t\tvar val = 0;\n\t\t\t\tvar bdh = cell.adjborder.bottom,\n\t\t\t\t\tbdv = cell.adjborder.right;\n\t\t\t\tif (name.charAt(0) === \"n\") {\n\t\t\t\t\tval = +name.substr(1);\n\t\t\t\t} else {\n\t\t\t\t\tif (name.match(/h/)) {\n\t\t\t\t\t\tval += 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (name.match(/v/)) {\n\t\t\t\t\t\tval += 2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (val & 1) {\n\t\t\t\t\tbdh.line = 1;\n\t\t\t\t}\n\t\t\t\tif (val & 2) {\n\t\t\t\t\tbdv.line = 1;\n\t\t\t\t}\n\t\t\t\tif (val & 4) {\n\t\t\t\t\tbdh.qsub = 2;\n\t\t\t\t}\n\t\t\t\tif (val & 8) {\n\t\t\t\t\tbdv.qsub = 2;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tencodeBorderLine_XMLAnswer: function() {\n\t\t\tthis.encodeCellXMLArow(function(cell) {\n\t\t\t\tvar val = 0,\n\t\t\t\t\tnodename = \"\";\n\t\t\t\tvar bdh = cell.adjborder.bottom,\n\t\t\t\t\tbdv = cell.adjborder.right;\n\t\t\t\tif (bdh.line === 1) {\n\t\t\t\t\tval += 1;\n\t\t\t\t}\n\t\t\t\tif (bdv.line === 1) {\n\t\t\t\t\tval += 2;\n\t\t\t\t}\n\t\t\t\tif (bdh.qsub === 2) {\n\t\t\t\t\tval += 4;\n\t\t\t\t}\n\t\t\t\tif (bdv.qsub === 2) {\n\t\t\t\t\tval += 8;\n\t\t\t\t}\n\n\t\t\t\tif (val === 0) {\n\t\t\t\t\tnodename = \"s\";\n\t\t\t\t} else if (val === 1) {\n\t\t\t\t\tnodename = \"h\";\n\t\t\t\t} else if (val === 2) {\n\t\t\t\t\tnodename = \"v\";\n\t\t\t\t} else if (val === 3) {\n\t\t\t\t\tnodename = \"hv\";\n\t\t\t\t} else {\n\t\t\t\t\tnodename = \"n\" + val;\n\t\t\t\t}\n\t\t\t\treturn nodename;\n\t\t\t});\n\t\t}\n\t}\n});\n","// Operation.js\n\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\t\"StartGoalOperation:Operation\": {\n\t\tsetData: function(prop, x1, y1, x2, y2) {\n\t\t\tthis.property = prop;\n\t\t\tthis.bx1 = x1;\n\t\t\tthis.by1 = y1;\n\t\t\tthis.bx2 = x2;\n\t\t\tthis.by2 = y2;\n\t\t},\n\t\tdecode: function(strs) {\n\t\t\tif (strs[0] !== \"PS\" && strs[0] !== \"PG\") {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.property = strs[0] === \"PS\" ? \"start\" : \"goal\";\n\t\t\tthis.bx1 = +strs[1];\n\t\t\tthis.by1 = +strs[2];\n\t\t\tthis.bx2 = +strs[3];\n\t\t\tthis.by2 = +strs[4];\n\t\t\treturn true;\n\t\t},\n\t\ttoString: function() {\n\t\t\treturn [\n\t\t\t\tthis.property === \"start\" ? \"PS\" : \"PG\",\n\t\t\t\tthis.bx1,\n\t\t\t\tthis.by1,\n\t\t\t\tthis.bx2,\n\t\t\t\tthis.by2\n\t\t\t].join(\",\");\n\t\t},\n\n\t\tisModify: function(lastope) {\n\t\t\t// 1回の入力でstartpos, goalposが連続して更新されているなら前回の更新のみ\n\t\t\tif (\n\t\t\t\tthis.manager.changeflag &&\n\t\t\t\tlastope.bx2 === this.bx1 &&\n\t\t\t\tlastope.by2 === this.by1 &&\n\t\t\t\tlastope.property === this.property\n\t\t\t) {\n\t\t\t\tlastope.bx2 = this.bx2;\n\t\t\t\tlastope.by2 = this.by2;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\tundo: function() {\n\t\t\tthis.exec(this.bx1, this.by1);\n\t\t},\n\t\tredo: function() {\n\t\t\tthis.exec(this.bx2, this.by2);\n\t\t},\n\t\texec: function(bx, by) {\n\t\t\tvar bd = this.board,\n\t\t\t\tcell = bd.getc(bx, by);\n\t\t\tif (this.property === \"start\") {\n\t\t\t\tbd.startpos.set(cell);\n\t\t\t} else if (this.property === \"goal\") {\n\t\t\t\tbd.goalpos.set(cell);\n\t\t\t}\n\t\t}\n\t}\n});\n","// Piece.js\n\npzpr.classmgr.makeCommon({\n\t//---------------------------------------------------------\n\t\"StartGoalAddress:Address\": {\n\t\ttype: \"\",\n\t\tpartner: null,\n\n\t\tinit: function(bx, by) {\n\t\t\tthis.bx = bx;\n\t\t\tthis.by = by;\n\t\t\treturn this;\n\t\t},\n\n\t\tinput: function(cell) {\n\t\t\tif (!this.partner.equals(cell)) {\n\t\t\t\tif (!this.equals(cell)) {\n\t\t\t\t\tthis.set(cell);\n\t\t\t\t} else {\n\t\t\t\t\tthis.draw();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.board.exchangestartgoal();\n\t\t\t}\n\t\t},\n\t\tset: function(pos) {\n\t\t\tvar pos0 = this.getaddr();\n\t\t\tthis.addOpe(pos.bx, pos.by);\n\n\t\t\tthis.bx = pos.bx;\n\t\t\tthis.by = pos.by;\n\n\t\t\tpos0.draw();\n\t\t\tthis.draw();\n\t\t},\n\n\t\taddOpe: function(bx, by) {\n\t\t\tif (this.bx === bx && this.by === by) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.puzzle.opemgr.add(\n\t\t\t\tnew this.klass.StartGoalOperation(this.type, this.bx, this.by, bx, by)\n\t\t\t);\n\t\t}\n\t},\n\t\"StartAddress:StartGoalAddress\": {\n\t\ttype: \"start\"\n\t},\n\t\"GoalAddress:StartGoalAddress\": {\n\t\ttype: \"goal\"\n\t}\n});\n"]}