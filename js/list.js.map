{"version":3,"sources":["../../src-ui/js/ui/Boot.js","../../src-ui/js/common/intro.js","../../src-ui/js/ui/UI.js"],"names":["getEL","id","_doc","getElementById","customAttr","el","name","value","dataset","lowername","i","length","ch","charAt","toLowerCase","getAttribute","self","doclang","JSON","parse","localStorage","language","pzpr","lang","location","search","substr","hostname","phtml","v3index","extend","onload_func","Array","prototype","slice","call","querySelectorAll","forEach","match","typename","RegExp","$1","addEventListener","e","click_tab","style","display","disp_tab","setTranslation","translate","className","querySelector","set_puzzle_filter","dbif","isdisp","tablename","filtername","pid","variety","toPID","tab","count","parentNode","setlang","setting","stringify","pinfo","valid","editor","document","createElement","href","appendChild","rules","textContent","captions","push","anode","str_jp","ja","str_en","en","this","obj","text","innerHTML","replace","body","window","pstate","lunch","testa","trial","lunch2","lunch3","nigun","omopa","orig","genre","add","tabstate","genres","state"],"mappings":"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T,EACAU,OAAaZ,EAAIa,GAClBC,OAAAd,EAAAe,SAIChC,UAAA,WAEA,IAAA,GAAAvC,GAAA,EAAkBA,EAAIwE,KAACP,SAAAhE,OAAAD,IAAA,CACxB,GAAAyE,GAAAD,KAAAP,SAAAjE,EACC,IAAAyE,EAAAN,MAAA,CACG,GAAGO,GAAiB,OAAjBpE,EAAYC,QAAKkE,EAAAL,OAA2BK,EAAAH,MAC/CG,GAAGN,MAAAQ,UAAiBD,EAAAE,QAAA,YAA2B,sBAGjDtD,MAAGC,UAASC,MACTC,KAAAjC,EAASqF,KAAAnD,iBAAU,gBACnBC,QAAQ,SAAChC,GACTA,EAAAwC,MAAKC,QAAgB,OAAH9B,EAAGC,QAAA,GAAA,SAEzBe,MAAAC,UAAYC,MACRC,KAAAjC,EAASqF,KAAAnD,iBAAmB,gBAC5BC,QAAQ,SAAChC,GACXA,EAAAwC,MAAAC,QAAA,OAAA9B,EAAAC,QAAA,GAAA,YAMHuE,OAAM9C,iBAAW,OAAA1B,EAAAe,aAAA,GAGjByD,OAAQ3D,QAAEA,KAMV,WACA,GAAGA,GAAW2D,OAAA3D,QAEZ4D,GACDC,OACD,WACC,YACE,WACF,WACA,WACC,SACC,UACA,QACA,UACH,SACC,SACE,YACA,WACF,UACA,YACC,SACC,SACD,YACA,WACA,SACA,QACF,cAEAC,OAAG,SAAc,WAAY,SAAW,WACtCC,OAAQ,WAAY,YACtBC,QAAU,MAAQ,OAAQ,WAAS,UACnCC,QAAW,WAAA,WACTC,OACA,QACA,YACF,WACE,UACA,YACC,WACA,OACA,UACD,UACA,UACC,UACA,QACA,WACD,UACA,YACC,YACA,aACA,SACD,UACA,WACC,YACA,OACA,SACD,UAEFC,OACG,UACA,OACH,UACE,YACA,UACC,YACA,WACH,WACG,SACA,WACH,WACE,WACC,YACF,QACC,SACC,UACD,SACC,SACA,WACA,YACA,YACA,QACA,SACH,UACA,aACA,WACG,WACA,YACA,SACA,UACH,SACA,QACA,UACG,YACA,aACA,SACH,OACA,WACA,QACG,QACA,SACA,aACA,SACH,WACA,SACA,UACG,UACH,OACA,WACA,UACG,WACH,SAEEC,MAAC,aAAA,UAAA,OACDC,OACC,OACA,UACD,UACC,cACH,SACC,aACE,YACF,aAECC,KACC,YACA,aACD,aACC,UACH,YACC,QACE,aACF,kBACA,UACC,YACC,UACH,YACC,WACE,UACF,SACA,OACC,OACA,UACC,UACA,aACH,cACG,QACA,SACA,QACA,WACA,WACH,QACA,SACG,QACA,UACH,YACC,OACE,aAGEC,GACLV,MAAS,QACTG,OAAU,QACRC,OAAG,QACLH,MAAQ,QACRI,MAAA,QACAH,MAAO,QACPI,MAAS,QACTC,KAAO,QACPC,MAAS,QACTC,IAAI,OAGAE,IACJ,KAAM,GAACC,KAAOb,GACdA,EAASa,GAAAjE,QAAe,SAAQoB,GAC7B4C,EAAC/E,KAAAoC,QAAAC,MAAAF,KAAA6C,MAAAA,EAAA1C,IAAAwC,EAAAE,KAIJzE,GAAGC,QAAA4B,QAAA2C","file":"list.js","sourcesContent":["// Boot.js v3.4.0\n\n(function() {\n\t/********************************/\n\t/* 初期化時のみ使用するルーチン */\n\t/********************************/\n\n\tvar onload_pzv = null;\n\tvar onload_pzl = null;\n\tvar onload_option = {};\n\n\t//---------------------------------------------------------------------------\n\t// ★boot() window.onload直後の処理\n\t//---------------------------------------------------------------------------\n\tpzpr.on(\"load\", function boot() {\n\t\tif (importData()) {\n\t\t\tstartPuzzle();\n\t\t} else {\n\t\t\tsetTimeout(boot, 0);\n\t\t}\n\t});\n\n\tfunction importData() {\n\t\tif (!onload_pzl) {\n\t\t\t/* 1) 盤面複製・index.htmlからのファイル入力/Database入力か */\n\t\t\t/* 2) URL(?以降)をチェック */\n\t\t\tonload_pzl = importURL();\n\n\t\t\t/* 指定されたパズルがない場合はさようなら～ */\n\t\t\tif (!onload_pzl || !onload_pzl.pid) {\n\t\t\t\tfailOpen();\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction failOpen() {\n\t\tif (!!ui.puzzle && !!ui.puzzle.pid) {\n\t\t\treturn;\n\t\t}\n\t\tvar title2 = document.getElementById(\"title2\");\n\t\tif (!!title2) {\n\t\t\ttitle2.innerHTML = \"Fail to import puzzle data or URL.\";\n\t\t}\n\t\tdocument.getElementById(\"menupanel\").innerHTML = \"\";\n\t}\n\n\tfunction startPuzzle() {\n\t\tvar pzl = onload_pzl;\n\t\tui.pzv = onload_pzv; // for the puzz.link callback\n\n\t\t/* IE SVGのtextLengthがうまく指定できていないので回避策を追加 */\n\t\tif (\n\t\t\t(function(ua) {\n\t\t\t\treturn (\n\t\t\t\t\tua.match(/MSIE/) || (ua.match(/AppleWebKit/) && ua.match(/Edge/))\n\t\t\t\t);\n\t\t\t})(navigator.userAgent)\n\t\t) {\n\t\t\tonload_option.graphic = \"canvas\";\n\t\t}\n\n\t\t/* パズルオブジェクトの作成 */\n\t\tvar element = document.getElementById(\"divques\");\n\t\tvar puzzle = (ui.puzzle = new pzpr.Puzzle(element, onload_option));\n\t\tpzpr.connectKeyEvents(puzzle);\n\n\t\t/* パズルオブジェクト作成〜open()間に呼ぶ */\n\t\tui.event.onload_func(onload_option);\n\n\t\t// 単体初期化処理のルーチンへ\n\t\tpuzzle.once(\"fail-open\", failOpen);\n\t\tpuzzle.open(pzl);\n\t\tif (onload_option.variant !== void 0) {\n\t\t\tpuzzle.config.set(\"variant\", true);\n\t\t}\n\n\t\tpuzzle.on(\"request-aux-editor\", ui.auxeditor.open);\n\n\t\tif (!!onload_option.net) {\n\t\t\tui.network.configure(onload_option.net, onload_option.key);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t//---------------------------------------------------------------------------\n\t// ★importURL() 初期化時にURLを解析し、パズルの種類・エディタ/player判定を行う\n\t//---------------------------------------------------------------------------\n\tfunction importURL() {\n\t\t/* index.htmlからURLが入力されていない場合は現在のURLの?以降をとってくる */\n\t\tvar search = location.search;\n\t\tif (!search) {\n\t\t\treturn null;\n\t\t}\n\n\t\t/* 一旦先頭の?記号を取り除く */\n\t\tif (search.charAt(0) === \"?\") {\n\t\t\tsearch = search.substr(1);\n\t\t}\n\n\t\twhile (search.match(/^(\\w+)\\=(\\w+)\\&(.*)/)) {\n\t\t\tonload_option[RegExp.$1] = RegExp.$2;\n\t\t\tsearch = RegExp.$3;\n\t\t}\n\n\t\tonload_pzv = search;\n\t\tvar pzl = pzpr.parser.parseURL(search);\n\t\tvar startmode = pzl.mode || (!pzl.body ? \"editor\" : \"player\");\n\t\tonload_option.type = onload_option.type || startmode;\n\n\t\treturn pzl;\n\t}\n})();\n","// intro.js\n\n(function(){\n","// UI.js v3.4.0\n/* eslint-env browser */\n/* exported ui, _doc, getEL, createEL */\n\n/* ui.js Locals */\nvar _doc = document;\nfunction getEL(id) {\n\treturn _doc.getElementById(id);\n}\nfunction createEL(tagName) {\n\treturn _doc.createElement(tagName);\n}\n\n//---------------------------------------------------------------------------\n// ★uiオブジェクト UserInterface側のオブジェクト\n//---------------------------------------------------------------------------\n/* extern */\nwindow.ui = {\n\tversion: \"fc10661\",\n\n\t/* このサイトで使用するパズルのオブジェクト */\n\tpuzzle: null,\n\n\t/* どの種類のパズルのメニューを表示しているか */\n\tcurrentpid: \"\",\n\n\t/* メンバオブジェクト */\n\tevent: null,\n\tmenuconfig: null,\n\turlconfig: null,\n\tmenuarea: null,\n\ttoolarea: null,\n\tpopupmgr: null,\n\tkeypopup: null,\n\ttimer: null,\n\tnetwork: null,\n\n\tenableGetText: false, // FileReader APIの旧仕様でファイルが読めるか\n\tenableReadText: false, // HTML5 FileReader APIでファイルが読めるか\n\treader: null, // FileReaderオブジェクト\n\n\tenableSaveImage: false, // 画像保存が可能か\n\tenableImageType: {}, // 保存可能な画像形式\n\n\tenableSaveBlob: false, // saveBlobが使用できるか\n\n\tcallbackComplete: null,\n\n\t//---------------------------------------------------------------------------\n\t// ui.displayAll()     全てのメニュー、ボタン、ラベルに対して文字列を設定する\n\t// ui.setdisplay()     個別のメニュー、ボタン、ラベルに対して文字列を設定する\n\t//---------------------------------------------------------------------------\n\tdisplayAll: function() {\n\t\tui.menuarea.display();\n\t\tui.toolarea.display();\n\t\tui.popupmgr.translate();\n\t\tui.misc.displayDesign();\n\t},\n\tsetdisplay: function(idname) {\n\t\tui.menuarea.setdisplay(idname);\n\t\tui.toolarea.setdisplay(idname);\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// ui.customAttr()   エレメントのカスタムattributeの値を返す\n\t//---------------------------------------------------------------------------\n\tcustomAttr: function(el, name) {\n\t\tvar value = \"\";\n\t\tif (el.dataset !== void 0) {\n\t\t\tvalue = el.dataset[name];\n\t\t} else {\n\t\t\t/* IE10, Firefox5, Chrome7, Safari5.1以下のフォールバック */\n\t\t\tvar lowername = \"data-\";\n\t\t\tfor (var i = 0; i < name.length; i++) {\n\t\t\t\tvar ch = name[i] || name.charAt(i);\n\t\t\t\tlowername += ch >= \"A\" && ch <= \"Z\" ? \"-\" + ch.toLowerCase() : ch;\n\t\t\t}\n\t\t\tvalue = el[lowername] || el.getAttribute(lowername) || \"\";\n\t\t}\n\t\treturn value;\n\t},\n\n\t//----------------------------------------------------------------------\n\t// ui.windowWidth()   ウィンドウの幅を返す\n\t//----------------------------------------------------------------------\n\twindowWidth: function() {\n\t\treturn window.innerHeight !== void 0\n\t\t\t? window.innerWidth\n\t\t\t: _doc.body.clientWidth;\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// ui.adjustcellsize()  resizeイベント時に、pc.cw, pc.chのサイズを(自動)調節する\n\t// ui.getBoardPadding() Canvasと境界線の周りの間にあるpaddingのサイズを求めます\n\t//---------------------------------------------------------------------------\n\tadjustcellsize: function() {\n\t\tvar puzzle = ui.puzzle,\n\t\t\tpc = puzzle.painter;\n\t\tvar cols = pc.getCanvasCols() + ui.getBoardPadding() * 2;\n\t\tvar wwidth = ui.windowWidth() - (ui.urlconfig.embed ? 0 : 6);\n\t\tvar mwidth; //  margin/borderがあるので、適当に引いておく\n\t\tvar uiconf = ui.menuconfig;\n\n\t\tvar cellsize,\n\t\t\tcellsizeval = uiconf.get(\"cellsizeval\");\n\t\tvar cr = { base: 1.0, limit: 0.4 },\n\t\t\tws = { base: 0.8, limit: 0.96 },\n\t\t\tci = [];\n\t\tci[0] = (wwidth * ws.base) / (cellsizeval * cr.base);\n\t\tci[1] = (wwidth * ws.limit) / (cellsizeval * cr.base);\n\t\tci[2] = (wwidth * ws.limit) / (cellsizeval * cr.limit);\n\n\t\t// 横幅いっぱいに広げたい場合\n\t\tif (uiconf.get(\"fullwidth\")) {\n\t\t\tmwidth = wwidth * 0.98;\n\t\t\tcellsize = (mwidth * 0.92) / cols;\n\t\t}\n\t\t// 縮小が必要ない場合\n\t\telse if (!uiconf.get(\"adjsize\") || cols < ci[0]) {\n\t\t\tmwidth = wwidth * ws.base - 4;\n\t\t\tcellsize = cellsizeval * cr.base;\n\t\t}\n\t\t// ひとまずセルのサイズを変えずにmainの幅を調節する場合\n\t\telse if (cols < ci[1]) {\n\t\t\tcellsize = cellsizeval * cr.base;\n\t\t\tmwidth = cellsize * cols;\n\t\t}\n\t\t// base～limit間でサイズを自動調節する場合\n\t\telse if (cols < ci[2]) {\n\t\t\tmwidth = wwidth * ws.limit - 4;\n\t\t\tcellsize = mwidth / cols; // 外枠ぎりぎりにする\n\t\t}\n\t\t// 自動調整の下限値を超える場合\n\t\telse {\n\t\t\tcellsize = cellsizeval * cr.limit;\n\t\t\tmwidth = cellsize * cols;\n\t\t}\n\n\t\t// mainのサイズ変更\n\t\tif (!pc.outputImage) {\n\t\t\tgetEL(\"main\").style.width = \"\" + (mwidth | 0) + \"px\";\n\t\t\tif (ui.urlconfig.embed) {\n\t\t\t\tgetEL(\"main\").style.border = \"none\";\n\t\t\t}\n\t\t}\n\n\t\tpuzzle.setCanvasSizeByCellSize(cellsize);\n\t},\n\tgetBoardPadding: function() {\n\t\tvar puzzle = ui.puzzle,\n\t\t\tpadding = 0;\n\t\tswitch (puzzle.pid) {\n\t\t\tcase \"firefly\":\n\t\t\tcase \"hashikake\":\n\t\t\tcase \"wblink\":\n\t\t\tcase \"ichimaga\":\n\t\t\tcase \"ichimagam\":\n\t\t\tcase \"ichimagax\":\n\t\t\t\tpadding = 0.3;\n\t\t\t\tbreak;\n\n\t\t\tcase \"kouchoku\":\n\t\t\tcase \"gokigen\":\n\t\t\tcase \"wagiri\":\n\t\t\tcase \"creek\":\n\t\t\t\tpadding = 0.2;\n\t\t\t\tbreak;\n\n\t\t\tcase \"slither\":\n\t\t\tcase \"cave\":\n\t\t\tcase \"mejilink\":\n\t\t\t\tpadding = 0.15;\n\t\t\t\tbreak;\n\n\t\t\tcase \"kinkonkan\":\n\t\t\tcase \"skyscrapers\":\n\t\t\tcase \"easyasabc\":\n\t\t\tcase \"box\":\n\t\t\t\tpadding = 0.05;\n\t\t\t\tbreak;\n\n\t\t\tcase \"bosanowa\":\n\t\t\t\tpadding = ui.menuconfig.get(\"disptype_bosanowa\") !== 2 ? 0.5 : 0.05;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tpadding = 0.5;\n\t\t\t\tbreak;\n\t\t}\n\t\tif (ui.menuconfig.get(\"fullwidth\")) {\n\t\t\tpadding = 0;\n\t\t}\n\t\treturn padding;\n\t},\n\n\t//--------------------------------------------------------------------------------\n\t// ui.selectStr()  現在の言語に応じた文字列を返す\n\t//--------------------------------------------------------------------------------\n\tselectStr: function(strJP, strEN) {\n\t\tif (!strEN) {\n\t\t\treturn strJP;\n\t\t}\n\t\treturn pzpr.lang === \"ja\" ? strJP : strEN;\n\t},\n\n\t//---------------------------------------------------------------------------\n\t// ui.getCurrentConfigList() 現在のパズルで有効な設定と設定値を返す\n\t//---------------------------------------------------------------------------\n\tgetCurrentConfigList: function() {\n\t\treturn ui.menuconfig.getList();\n\t},\n\n\t//----------------------------------------------------------------------\n\t// ui.initFileReadMethod() ファイルアクセス関連の処理の初期化を行う\n\t//----------------------------------------------------------------------\n\tinitFileReadMethod: function() {\n\t\t// File Reader (あれば)の初期化処理\n\t\tif (typeof FileReader !== \"undefined\") {\n\t\t\tthis.reader = new FileReader();\n\t\t\tthis.reader.onload = function(e) {\n\t\t\t\tui.puzzle.open(e.target.result);\n\t\t\t};\n\t\t\tthis.enableReadText = true;\n\t\t} else {\n\t\t\tthis.reader = null;\n\t\t\tthis.enableGetText =\n\t\t\t\ttypeof FileList !== \"undefined\" &&\n\t\t\t\ttypeof File.prototype.getAsText !== \"undefined\";\n\t\t}\n\t},\n\n\t//----------------------------------------------------------------------\n\t// ui.initImageSaveMethod() 画像保存関連の処理の初期化を行う\n\t//----------------------------------------------------------------------\n\tinitImageSaveMethod: function(puzzle) {\n\t\tif (\n\t\t\t!!pzpr.Candle.enable.canvas &&\n\t\t\t!!_doc.createElement(\"canvas\").toDataURL\n\t\t) {\n\t\t\tthis.enableImageType.png = true;\n\n\t\t\tvar canvas = _doc.createElement(\"canvas\");\n\t\t\tcanvas.width = canvas.height = 1;\n\t\t\tif (canvas.toDataURL(\"image/gif\").match(\"image/gif\")) {\n\t\t\t\tthis.enableImageType.gif = true;\n\t\t\t}\n\t\t\tif (canvas.toDataURL(\"image/jpeg\").match(\"image/jpeg\")) {\n\t\t\t\tthis.enableImageType.jpeg = true;\n\t\t\t}\n\t\t\tif (canvas.toDataURL(\"image/webp\").match(\"image/webp\")) {\n\t\t\t\tthis.enableImageType.webp = true;\n\t\t\t}\n\t\t}\n\t\tif (!!pzpr.Candle.enable.svg && !!window.btoa) {\n\t\t\tthis.enableImageType.svg = true;\n\t\t}\n\t\tif (!!this.enableImageType.png || !!this.enableImageType.svg) {\n\t\t\tthis.enableSaveImage = true;\n\t\t}\n\n\t\tthis.enableSaveBlob = !!window.navigator.saveBlob;\n\t}\n};\n"]}